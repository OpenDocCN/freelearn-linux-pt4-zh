- en: Building and Optimizing the Virtual Desktop OS
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建与优化虚拟桌面操作系统
- en: Having built the Horizon View infrastructure and its components in the previous
    chapters of this book, in this chapter, we will focus our attention on virtual
    desktops. We are going to look at how to create and configure the virtual hardware
    elements of virtual desktop machines, install a desktop operating system based
    on best practices for virtual desktop machines, and then configure that operating
    system to run at its optimum performance levels.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书前几章中，我们已经构建了 Horizon View 基础设施及其组件，在本章中，我们将把重点放在虚拟桌面上。我们将探讨如何创建和配置虚拟桌面机器的虚拟硬件元素，基于虚拟桌面机器的最佳实践安装桌面操作系统，并配置该操作系统以实现最佳性能。
- en: 'The steps involved in building the core operating system for a virtual desktop
    machine are not too dissimilar from the process of building a physical desktop
    machine. However, there are some additional tasks and software components that
    we need to install within the operating system to turn it into a true virtual
    desktop machine that''s fit for a Horizon View environment, and more importantly
    for the end users. This chapter will cover each of these steps in more detail
    and also build several OS images along the way. We will use the example lab to
    do so. The build process is shown in the following diagram:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 构建虚拟桌面机器的核心操作系统的步骤与构建物理桌面机器的过程相差无几。然而，我们需要在操作系统中安装一些额外的任务和软件组件，使其成为一个适合 Horizon
    View 环境的真正虚拟桌面机器，更重要的是适合终端用户使用。本章将更详细地介绍每个步骤，并在过程中构建多个操作系统镜像。我们将使用示例实验室进行操作。构建过程如以下图所示：
- en: '![](img/17b74d44-d743-4ae3-abd1-931e6efe7afe.png)'
  id: totrans-3
  prefs: []
  type: TYPE_IMG
  zh: '![](img/17b74d44-d743-4ae3-abd1-931e6efe7afe.png)'
- en: We will build a virtual desktop machine for a Windows 7 desktop. It will be
    configured with a floating-desktop assignment, built using linked clones, and
    a second virtual desktop machine running Windows 7, which will be configured with
    a dedicated assignment and built from a full clone. Finally, we will also look
    at creating an Instant Clone Windows 10-based desktop, before finishing this chapter
    with a look at delivering a Linux-based virtual desktop machine.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将为 Windows 7 桌面构建一台虚拟桌面机器。它将配置为浮动桌面分配，使用链接克隆构建，并且第二台运行 Windows 7 的虚拟桌面机器将配置为专用分配，并从完整克隆构建。最后，我们还将研究创建基于
    Windows 10 的即时克隆桌面，并在本章结束时研究交付基于 Linux 的虚拟桌面机器。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Creating a Windows 7 virtual desktop machine
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建 Windows 7 虚拟桌面机器
- en: Creating a Windows 10 virtual desktop machine
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建 Windows 10 虚拟桌面机器
- en: Creating a GPU-enabled virtual desktop machine
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建支持 GPU 的虚拟桌面机器
- en: Creating a Linux virtual desktop machine
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建 Linux 虚拟桌面机器
- en: Preparing virtual desktops for delivery
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备虚拟桌面以供交付
- en: Best practices for building virtual desktop images
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 构建虚拟桌面镜像的最佳实践
- en: In this section, we are going to discuss some of the best practices and processes
    for building your virtual desktop machine images.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将讨论一些构建虚拟桌面机器镜像的最佳实践和流程。
- en: 'In a physical desktop environment, there are a number of ways in which the
    operating system can be built and deployed. For example, you could use the **Microsoft
    Deployment Toolkit** (**MDT**) or maybe the Microsoft **System Center Configuration
    Manager** (**SCCM**). Both of these options can be used along with all the other
    tools that are available to build desktop images, including VMware''s own Mirage
    product, of course. So, we just talked about a couple of options that you can
    use to build your desktop images, but let''s just highlight the one that you should
    not use: the **physical-to-virtual tool** (**P2V**), which turns your physical
    image into a virtual one.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在物理桌面环境中，有多种方法可以构建和部署操作系统。例如，你可以使用**Microsoft 部署工具包**（**MDT**）或微软的**系统中心配置管理器**（**SCCM**）。这两种选项都可以与所有其他可用的工具一起使用，用来构建桌面镜像，当然也包括
    VMware 自己的 Mirage 产品。所以，我们刚才讨论了几种可以用来构建桌面镜像的选项，但让我们特别强调一个你不应该使用的选项：**物理到虚拟工具**（**P2V**），它将物理镜像转化为虚拟镜像。
- en: A best practice is to build a new virtual desktop image from scratch, so it
    starts off life as being designed to be a virtual machine from day one. After
    all, you would potentially build a new image for a new hardware platform, and
    that's what you are doing in reality. There are a few reasons to not use your
    physical image to create your virtual desktop image, though. One of the reasons
    is the size of the image, which more than likely will have become bloated, with
    numerous patches and updates being applied over the last year or so. You want
    your VDI image to be lean and fresh, with just the most recent and relevant software
    installed.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 最佳实践是从零开始构建一个新的虚拟桌面映像，使其从一开始就设计成虚拟机。毕竟，你可能会为新的硬件平台构建一个新的映像，实际上，你正在做的也是这样的事情。然而，有几个原因不建议使用你的物理映像来创建虚拟桌面映像。其中一个原因是映像的大小，这些映像很可能已经膨胀，过去一年中安装了大量的补丁和更新。你希望你的
    VDI 映像保持精简和新鲜，仅安装最新且相关的软件。
- en: Another reason is that there might be some hardware drivers or other hardware-based
    software elements within the image, such as a desktop hardware management solution
    like Intel **Active Management Technology** (**AMT**), which relies on firmware
    and other components that are built into the chipset of the physical machine.
    As you are now using a virtual desktop machine, this type of hardware is not present
    and, therefore, you do not require it to be installed.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个原因是，映像中可能包含某些硬件驱动程序或其他基于硬件的软件元素，如 Intel **主动管理技术** (**AMT**) 这样的桌面硬件管理解决方案，它依赖于固件和其他集成在物理机芯片组中的组件。由于你现在使用的是虚拟桌面机，因此这种硬件不存在，因此你不需要它被安装。
- en: The worst-case scenario is having this type of solution installed, because it
    will affect the performance of your virtual desktop machine.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 最坏的情况是安装这种解决方案，因为它会影响虚拟桌面机的性能。
- en: Technical requirements
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'Before we get into the build process, we need to look at the specifications
    of the virtual desktop machine from a virtual hardware perspective and what we
    need to configure it. The following screenshot lists the virtual desktop machine
    requirements:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在进入构建过程之前，我们需要从虚拟硬件的角度查看虚拟桌面机的规格，以及我们需要配置的内容。以下截图列出了虚拟桌面机的要求：
- en: '![](img/0fcdb73e-cfcf-4226-9247-7c9c06ea24f4.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0fcdb73e-cfcf-4226-9247-7c9c06ea24f4.png)'
- en: You should be able to work out the requirements for your particular environment
    by using the assessment data that you captured at the start of the project. One
    thing to bear in mind is that you can quite easily change the configuration should
    you need to when fine-tuning the performance and the end user experience.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该能够根据项目开始时收集的评估数据，制定适合你特定环境的要求。需要记住的一点是，如果在调整性能和最终用户体验时需要，你可以很容易地更改配置。
- en: Another important factor when configuring the size of virtual desktop machines
    is not to fall into the trap of over-sizing. For example, if you only need one
    CPU, then only give the virtual desktop machine one CPU. Don't be tempted to add
    unnecessary resources, as you will ultimately end up lowering the number of virtual
    desktop machines that you can host on your server infrastructure, thus increasing
    costs and management with the extra hardware. You could also potentially make
    the virtual desktop performance slower. As we mentioned previously, this is why
    your assessment data is critical.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 配置虚拟桌面机大小时，另一个重要因素是避免陷入过度配置的陷阱。例如，如果你只需要一个 CPU，那么就只为虚拟桌面机分配一个 CPU。不要诱惑自己去添加不必要的资源，因为这样最终会降低你在服务器基础设施上能够托管的虚拟桌面机数量，从而增加成本和管理负担。你还可能会使虚拟桌面的性能变慢。正如我们之前提到的，这就是为什么你的评估数据至关重要的原因。
- en: The VDI desktop should be configured using the guidelines for the hardware specifications
    that were outlined in the previous table.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: VDI 桌面应根据前面表格中列出的硬件规格指南进行配置。
- en: Creating a Windows 7 virtual desktop machine
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建 Windows 7 虚拟桌面机
- en: In this section, we are going to build a virtual desktop machine with Windows
    7\. This will be as the operating system to use as the master image that we will
    create virtual desktops from. We will follow the steps that were outlined in the
    diagram at the very start of this chapter and the first diagram to optimize and
    prepare the image that's going to be used as a floating-assigned, linked-clone
    virtual desktop machine.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，我们将构建一个Windows 7虚拟桌面机器。它将作为我们创建虚拟桌面的主映像操作系统。我们将按照本章开头的图示步骤以及第一个图示，优化并准备作为浮动分配的链接克隆虚拟桌面机器的映像。
- en: Creating the virtual desktop machine container
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建虚拟桌面机器容器
- en: 'The first thing we need to do is build and configure the actual virtual desktop
    machine on our vCenter server. This will define the virtual hardware configuration.
    To define the configuration, follow these steps:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要做的第一件事是在vCenter服务器上构建和配置实际的虚拟桌面机器。这将定义虚拟硬件配置。要定义配置，请按照以下步骤操作：
- en: 'Open a browser and log into the vSphere web client for the vCenter `vcs1.pvolab.com`,
    as follows:'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开浏览器并登录到vCenter `vcs1.pvolab.com`的vSphere Web客户端，如下所示：
- en: '![](img/4cb3ffb4-1882-4cd6-99ea-d317adc20469.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4cb3ffb4-1882-4cd6-99ea-d317adc20469.png)'
- en: 'Once logged in, you will see the vSphere Client home page, as shown in the
    following screenshot:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 登录后，你将看到vSphere客户端主页，如下图所示：
- en: '![](img/eb71271c-48ae-492e-8e62-3fd56c93b5e7.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eb71271c-48ae-492e-8e62-3fd56c93b5e7.png)'
- en: 'From the navigation shortcuts on the left-hand side of the screen, click on
    VMs and Templates (**1**), as shown in the following screenshot:'
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕左侧的导航快捷方式中，点击“虚拟机和模板” (**1**)，如下图所示：
- en: '![](img/ab004f20-061e-46fb-8071-5c0626ea66e3.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ab004f20-061e-46fb-8071-5c0626ea66e3.png)'
- en: 'Expand the vCenter `vcs2.pvolab.com`, and then click to highlight the datacenter
    name of where you want to create the virtual desktop machine. In the example lab,
    the data center is called PVO''s Datacenter (**2**). Right-click it, and from
    the contextual menu, click the option for New Virtual Machine... (**3**). You
    will now see the New Virtual Machine configuration box, as shown in the following
    screenshot:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开vCenter `vcs2.pvolab.com`，然后点击高亮显示你希望创建虚拟桌面机器的数据中心名称。在示例实验室中，数据中心名为PVO's Datacenter（**2**）。右键点击它，并从上下文菜单中选择“新建虚拟机…”
    (**3**)。此时你将看到“新建虚拟机配置框”，如下图所示：
- en: '![](img/877c4057-c290-4c26-8830-ac5f838d2d99.png)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![](img/877c4057-c290-4c26-8830-ac5f838d2d99.png)'
- en: 'The first task is to Select a creation type. From the list of options, click
    to highlight Create a new virtual machine (**4**), and then click the NEXT button
    to continue. You will now see the Select a name and folder screen, as shown in
    the following screenshot:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一个任务是选择创建类型。从选项列表中，点击高亮显示“创建新虚拟机” (**4**)，然后点击“下一步”按钮继续。你将看到选择名称和文件夹的屏幕，如下图所示：
- en: '![](img/33258b19-9eb1-4d90-8daf-2c4f35566cfa.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](img/33258b19-9eb1-4d90-8daf-2c4f35566cfa.png)'
- en: In the Virtual machine name box (**5**), type in a name for the new virtual
    desktop machine. In the example lab, this is called `Windows 7 Gold Image`.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在虚拟机名称框（**5**）中，输入新虚拟桌面机器的名称。在示例实验室中，名称为`Windows 7 Gold Image`。
- en: Then, in the Select a location for the virtual machine section, click to highlight
    the datacenter where you want this virtual machine to be created. In the example
    lab, this machine is going to be created in the datacenter called PVO's Datacenter
    (**6**).
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，在选择虚拟机位置的部分，点击以高亮显示你希望在其中创建虚拟机的数据中心。在示例实验室中，这台机器将被创建在名为PVO's Datacenter的**数据中心**（**6**）中。
- en: 'Click the **NEXT** button to continue. You will now see the Select a compute
    resource screen, as shown in the following screenshot:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**按钮继续。你将看到选择计算资源的屏幕，如下图所示：
- en: '![](img/98c0af4d-f0f0-49c2-8509-ae377639dddf.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](img/98c0af4d-f0f0-49c2-8509-ae377639dddf.png)'
- en: Expand the datacenter called PVO's Datacente**r** and then click on the ESX
    server you want to host this virtual desktop. In the example lab, 192.168.1.131
    (**7**) is the IP address of the host server we are going to use to host this
    virtual desktop machine.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开名为PVO's Datacenter的**数据中心**，然后点击你希望托管此虚拟桌面所在的ESX服务器。在示例实验室中，192.168.1.131（**7**）是我们将用于托管虚拟桌面机器的主机服务器的IP地址。
- en: As this is going to be our gold/master image or parent virtual desktop machine,
    it's probably not as important in regards to the location compared to the live
    production virtual desktop machines. So, for the example lab, we will use the
    management block to host this virtual desktop machine.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这将是我们的金像/母机或父虚拟桌面机器，相对于生产环境中的实际虚拟桌面机器来说，位置可能不那么重要。因此，在示例实验室中，我们将使用管理区块来托管此虚拟桌面机器。
- en: 'Click the NEXT button to continue. You will now see the Select storage screen,
    as shown in the following screenshot:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步”按钮继续。接下来，您将看到“选择存储”屏幕，如下图所示：
- en: '![](img/a6fac8ad-43a4-4394-8160-38efe57e1f2b.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a6fac8ad-43a4-4394-8160-38efe57e1f2b.png)'
- en: Select the datastore where this virtual desktop machine will be stored. In the
    example lab, the virtual desktop machine is stored on the default datastore called
    VM Datastore (**8**). Click the NEXT button to continue.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择存储该虚拟桌面机器的存储数据中心。在示例实验室中，虚拟桌面机器存储在默认存储区 VM Datastore（**8**）上。点击“下一步”按钮继续。
- en: You will now see the Select compatibility screen. This is where we will choose
    the virtual machine version for our virtual desktop machine. As it states, for
    the best performance, you should use version 13, which means using vSphere 6.5
    or later as the hosting platform. If you are using a different hosting platform,
    then select the one that is relevant to your environment. However, be aware that
    some features may not be available depending on the version you choose. For example,
    you will need at least vSphere 6 if you want support for features such as instant
    clones and vGPU.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您将看到“选择兼容性”屏幕。在这里，我们将为虚拟桌面机器选择虚拟机版本。如文中所述，为了获得最佳性能，您应该选择版本 13，这意味着使用 vSphere
    6.5 或更高版本作为宿主平台。如果您使用的是其他宿主平台，请选择与您环境相关的版本。然而，请注意，某些功能可能根据您选择的版本而无法使用。例如，如果您希望支持即时克隆和
    vGPU 等功能，则至少需要 vSphere 6。
- en: 'From the dropdown menu (**9**), select ESXi 6.5 and later, as shown in the
    following screenshot:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下拉菜单（**9**）中，选择 ESXi 6.5 及以上版本，如下图所示：
- en: '![](img/549aab80-a038-414b-9e9d-1c17e9dbaf89.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](img/549aab80-a038-414b-9e9d-1c17e9dbaf89.png)'
- en: 'Click the NEXT button to continue. You will now see the Select a guest OS screen,
    as shown in the following screenshot:'
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步”按钮继续。接下来，您将看到“选择客户操作系统”屏幕，如下图所示：
- en: '![](img/1db62ebe-05f1-4506-8486-d539ab595fe7.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1db62ebe-05f1-4506-8486-d539ab595fe7.png)'
- en: The next step is to choose the operating system for the virtual desktop machine.
    In our example, this is the first virtual desktop machine that will be used as
    the gold image template for Windows 7.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是为虚拟桌面机器选择操作系统。在我们的示例中，这是将作为 Windows 7 的金像模板使用的第一台虚拟桌面机器。
- en: From the Guest OS Family box, click the arrow for the dropdown menu (**10**)
    and select Windows. Then, from the Guest OS Version box, click the arrow for the
    dropdown menu (**11**) and select Microsoft Windows 7 (64-bit). The guest OS selection
    is important to get right, as it determines which drivers get installed when VMware
    Tools is installed on the virtual desktop machine.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“客户操作系统家族”框中，点击箭头展开下拉菜单（**10**），然后选择Windows。接着，在“客户操作系统版本”框中，点击箭头展开下拉菜单（**11**），选择
    Microsoft Windows 7（64位）。选择正确的客户操作系统非常重要，因为它决定了安装VMware Tools时在虚拟桌面机器上安装的驱动程序。
- en: Click the NEXT button to continue.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步”按钮继续。
- en: 'You will now see the Customize Hardware screen where you can configure the
    virtual hardware specification for the virtual desktop machine, as shown in the
    following screenshot:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您将看到“自定义硬件”屏幕，您可以在此配置虚拟桌面机器的虚拟硬件规格，如下图所示：
- en: '![](img/dffc1c04-9486-432d-99bf-aa5a7a4492d3.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dffc1c04-9486-432d-99bf-aa5a7a4492d3.png)'
- en: There are a couple of things to change on this configuration screen. First,
    this virtual desktop machine is going to have two vCPUs. In the CPU box, click
    the down arrow (**12**) and select 2 from the dropdown menu (**13**) to configure
    two vCPUs for this virtual desktop machine.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此配置屏幕上有几个需要更改的地方。首先，这个虚拟桌面机器将拥有两个虚拟 CPU。在 CPU 框中，点击下拉箭头（**12**），从下拉菜单（**13**）中选择
    2，为此虚拟桌面机器配置两个虚拟 CPU。
- en: 'Next, expand the New Network option by clicking the arrow (**14**), and then
    on the Adapter Type box, click the down arrow (**15**) and select the option for
    VMXNET 3 (**16**), as shown in the following screenshot:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，通过点击箭头（**14**）展开“新建网络”选项，然后在“适配器类型”框中，点击下拉箭头（**15**），选择 VMXNET 3（**16**）选项，如下图所示：
- en: '![](img/ec4c17e9-1891-4a02-a374-4fa9a5151df2.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ec4c17e9-1891-4a02-a374-4fa9a5151df2.png)'
- en: 'Because we are building a new virtual desktop machine we will need to install
    the operating system. To do this, we are going to attach the install media to
    the virtual desktop machine so that it can boot from it and start the install.
    Scroll down to the New CD/DVD Drive option, as shown in the following screenshot:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 因为我们正在构建一个新的虚拟桌面机器，所以需要安装操作系统。为此，我们将把安装介质连接到虚拟桌面机器，以便它能够从中启动并开始安装。向下滚动到“新建 CD/DVD
    驱动器”选项，如下图所示：
- en: '![](img/58546dfa-a199-4759-8cd3-3271240e53b0.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![](img/58546dfa-a199-4759-8cd3-3271240e53b0.png)'
- en: Click on the down arrow (**17**), and from the list of options that are displayed,
    click on Datastore ISO File (**18**). In the example lab, we have already uploaded
    the ISO images for the installation media to a datastore on the host servers.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击向下箭头 (**17**)，然后在显示的选项列表中点击“数据存储 ISO 文件” (**18**)。在示例实验室中，我们已经将安装介质的 ISO 镜像上传到主机服务器的数据存储中。
- en: 'You will now see the Select File screen displayed, as shown in the following
    screenshot:'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您将看到“选择文件”屏幕，如下图所示：
- en: '![](img/58e5503c-cb48-4aaa-98c9-613bc1067e42.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](img/58e5503c-cb48-4aaa-98c9-613bc1067e42.png)'
- en: Expand the datastore (**19**) and then click on the `ISO Images` folder (**20**).
    Then, click to select the OS that is going to be installed on this virtual desktop
    machine. In this example, we are going to install Windows 7, so click on the en_windows_7_professional_with_sp1_x64_dvd
    option (**21**). You may have your ISO images stored in a different location,
    so just follow this as a guide using your folder locations.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开数据存储 (**19**)，然后点击 `ISO 镜像` 文件夹 (**20**)。接着，点击选择要安装在该虚拟桌面机器上的操作系统。在本示例中，我们将安装
    Windows 7，因此点击 en_windows_7_professional_with_sp1_x64_dvd 选项 (**21**)。您的 ISO 镜像可能存储在不同的位置，只需根据您的文件夹位置参考此示例。
- en: Click the OK button to return to the virtual hardware screen.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“确定”按钮返回虚拟硬件屏幕。
- en: 'One final thing to ensure on this screen is that the ISO file you have just
    added is connected as a New CD/DVD Drive. To do this, check the Connected box
    (**22**), as shown in the following screenshot:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此屏幕上，最后需要确保刚刚添加的 ISO 文件作为新 CD/DVD 驱动器连接。为此，请勾选“已连接”框 (**22**)，如下图所示：
- en: '![](img/aacb60c9-ab99-40ff-ae5a-8eb49e2d1c1e.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](img/aacb60c9-ab99-40ff-ae5a-8eb49e2d1c1e.png)'
- en: In the last part of the hardware configuration, you need to change one of the
    boot options so that the next time the virtual desktop machine powers on and boots,
    it goes straight into the BIOS setup screen. You could, of course, open a console
    to the virtual desktop machine and press the *F2* key as it boots; however, that
    screen can flash past so quickly that you might miss it, so the former option
    is much easier. The reason you need to select this option and go into the BIOS
    setup screen is that we need to change some of the configuration settings so that
    this virtual desktop machine behaves as a virtual machine, rather than as a physical
    desktop PC. We will cover this a bit later when we power on the newly created
    virtual desktop machine for the first time.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在硬件配置的最后部分，您需要更改其中一个启动选项，以便下一次虚拟桌面机器开机并启动时，直接进入 BIOS 设置屏幕。当然，您也可以打开虚拟桌面机器的控制台并在启动时按
    *F2* 键；但是，该屏幕可能闪过得太快，以至于您可能会错过，因此前一种方法要容易得多。您需要选择此选项并进入 BIOS 设置屏幕的原因是，我们需要更改一些配置设置，使得虚拟桌面机器作为虚拟机而非物理桌面
    PC 来运行。我们将在稍后启动新创建的虚拟桌面机器时详细介绍这一点。
- en: 'To configure the boot options, click the VM Options tab (**23**), and then
    expand the arrow for Boot Options (**24**). Check the tick box for Force BIOS
    setup (**25**). This is shown in the following screenshot:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要配置启动选项，请点击 VM 选项卡 (**23**)，然后展开“启动选项”箭头 (**24**)。勾选“强制 BIOS 设置”框 (**25**)。如下图所示：
- en: '![](img/1caa5521-246c-41e2-a1c2-8aea8344900c.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1caa5521-246c-41e2-a1c2-8aea8344900c.png)'
- en: 'Once you have completed the configuration, click the NEXT button to continue.
    You will now see the Ready to complete screen, as shown in the following screenshot:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置完成后，点击“下一步”按钮继续。您将看到“准备完成”屏幕，如下图所示：
- en: '![](img/9543cfde-c94c-4e72-97f3-62355077be4a.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9543cfde-c94c-4e72-97f3-62355077be4a.png)'
- en: Once you are happy with the configuration details, click the FINISH button to
    complete the configuration.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您对配置详情满意，点击“完成”按钮以完成配置。
- en: 'If you now check the Recent Tasks box, you will see that the virtual desktop
    machine has been successfully created, as shown in the following screenshot:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果现在勾选“最近任务”框，您将看到虚拟桌面机器已成功创建，如下图所示：
- en: '![](img/0b7b7ac5-d81c-491d-ba9b-2a493b212948.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0b7b7ac5-d81c-491d-ba9b-2a493b212948.png)'
- en: With the virtual desktop machine now built and configured, it's time to power
    it on and continue the build process. Navigate to the virtual desktop machine
    in the inventory. You should see an entry called Windows 7 Gold Image.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在虚拟桌面机器已经构建并配置完毕后，是时候开机并继续构建过程了。导航到虚拟桌面机器所在的清单中。你应该能看到一个名为 Windows 7 Gold Image
    的条目。
- en: 'Highlight the virtual desktop machine Windows 7 Gold Image (**26**), right-click
    it, and from the contextual menu that''s shown, click on Power (**27**) and then
    click on Power On (**28**), as shown in the following screenshot:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 高亮显示虚拟桌面机器 Windows 7 Gold Image（**26**），右键点击它，然后在显示的上下文菜单中，点击电源（**27**），接着点击开机（**28**），如以下截图所示：
- en: '![](img/40be7869-8fd3-482d-bf6e-dece7959b00a.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](img/40be7869-8fd3-482d-bf6e-dece7959b00a.png)'
- en: The virtual desktop machine will now power on and boot into the BIOS setup screen,
    as that's what we configured to happen on the next boot. Any subsequent bootups
    will boot as normal into the operating system once it's installed.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 虚拟桌面机器现在将开机并进入 BIOS 设置屏幕，因为我们配置了在下一次启动时执行此操作。安装操作系统后，随后的启动将正常进入操作系统。
- en: In the next section, we will make configuration changes to the virtual desktop
    machine's BIOS settings.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一部分中，我们将对虚拟桌面机器的 BIOS 设置进行配置更改。
- en: Updating the virtual desktop machine BIOS
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更新虚拟桌面机器的 BIOS
- en: 'With the virtual desktop machine now powered on and booted into the BIOS setup
    screen, we are going to launch a remote console screen to it so that you can perform
    the configuration steps. To do this, perform the following steps:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在虚拟桌面机器已开机并启动到 BIOS 设置屏幕后，我们将启动远程控制台屏幕，以便你执行配置步骤。为此，请执行以下步骤：
- en: 'Highlight the Windows 7 Gold Image virtual desktop machine in the Inventory
    section, and then under the Summary tab, click the Launch Remote Console link
    (**1**), as shown in the following screenshot:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在清单部分中，高亮显示 Windows 7 Gold Image 虚拟桌面机器，然后在摘要选项卡下，点击启动远程控制台链接（**1**），如以下截图所示：
- en: '![](img/e858c880-1e49-4ab0-88a1-5898badaa742.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e858c880-1e49-4ab0-88a1-5898badaa742.png)'
- en: 'You will now see the PhoenixBIOS Setup Utility screen of the virtual desktop
    machine, as shown in the following screenshot:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在将看到虚拟桌面机器的 PhoenixBIOS 设置工具屏幕，如以下截图所示：
- en: '![](img/c76a096b-ba3e-42dd-9ea0-90f09ea08d4a.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c76a096b-ba3e-42dd-9ea0-90f09ea08d4a.png)'
- en: 'The first thing you need to do is disable the floppy drive. On the Main section
    of the BIOS setup screen, use the cursor keys to move down, highlight the option
    for Legacy Diskette A: (**2**), and then press *Enter*.'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，你需要做的是禁用软盘驱动器。在 BIOS 设置屏幕的主界面中，使用光标键向下移动，高亮显示 Legacy Diskette A:（**2**）选项，然后按*Enter*键。
- en: You will now see a popup box displaying the diskette options. Again, use the
    cursor keys to highlight the Disabled option (**3**) and then press *Enter*.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你将看到一个弹出框，显示软盘选项。再次使用光标键高亮显示禁用选项（**3**），然后按*Enter*键。
- en: 'Next, you need to navigate to the Advanced section of the BIOS setup screen.
    To do this, press the right arrow cursor key to move across the tabs along the
    top until the Advanced tab is highlighted (**4**), as shown in the following screenshot:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，你需要导航到 BIOS 设置屏幕的高级选项卡。为此，按右箭头光标键横向移动到顶部的选项卡，直到高级选项卡被高亮显示（**4**），如以下截图所示：
- en: '![](img/bb17b77d-898e-4e78-a36b-b321c0260ee6.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bb17b77d-898e-4e78-a36b-b321c0260ee6.png)'
- en: 'Using the down-arrow cursor, move down to the option for I/O Device Configuration
    (**5**) and press *Enter*. You will now see the Advanced configuration screen,
    as shown in the following screenshot:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下箭头光标，向下移动到 I/O 设备配置（**5**）选项并按*Enter*键。你现在将看到高级配置屏幕，如以下截图所示：
- en: '![](img/5bbef2d6-2250-4f15-92f3-82bb82ccff39.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5bbef2d6-2250-4f15-92f3-82bb82ccff39.png)'
- en: 'Move the cursor to the entry for Serial port A: and press *Enter*. From the
    popup box, select the option for Disabled (**6**).'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '将光标移到串口 A: 的条目上并按*Enter*键。从弹出框中，选择禁用（**6**）选项。'
- en: 'Follow the same procedure to disable the options for Serial port B:, Parallel
    port:, and the Floppy disk controller: until all of the options have been set
    to Disabled. Once you have completed these configuration changes, press the *F10*
    key to save and exit. You will see the Setup Confirmation box, as shown in the
    following screenshot:'
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '按照相同的步骤禁用串口 B:、并行端口: 和软盘控制器: 等选项，直到所有选项都设置为禁用。完成这些配置更改后，按*F10*键保存并退出。你将看到设置确认框，如以下截图所示：'
- en: '![](img/d5b14624-59bb-4a30-b4d2-fcd81ca86505.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d5b14624-59bb-4a30-b4d2-fcd81ca86505.png)'
- en: Confirm the configuration changes by selecting Yes (**7**), and then press *Enter*.
    The BIOS changes are now saved, and the virtual desktop machine will be rebooted
    automatically.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择“是”(**7**)，然后按 *Enter* 键确认配置更改。BIOS 更改现已保存，虚拟桌面机器将自动重新启动。
- en: You have successfully configured the BIOS. The next step is to install the operating
    system.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经成功配置了 BIOS。接下来的步骤是安装操作系统。
- en: Operating system installation options
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 操作系统安装选项
- en: There are a couple of options you can use to build the operating system for
    the virtual desktop machines. The first option is to use something such as MDT,
    SCCM, or VMware's own Mirage product (used for Full Clone desktops), to deploy
    an image you have already built for VDI, but for the example lab, we will use
    a different option, which is to build the image manually by using the installation
    media to show the different tasks you need to perform to optimize the image for
    VDI.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以选择几种方式来为虚拟桌面机器构建操作系统。第一种方式是使用像 MDT、SCCM 或 VMware 自家的 Mirage 产品（用于完整克隆桌面）之类的工具，部署你已经为
    VDI 构建的镜像，但在这个示例实验室中，我们将使用不同的方式，即通过使用安装介质手动构建镜像，展示你需要执行的不同任务，以优化镜像以适应 VDI。
- en: This build process is no different than how you build any other virtual machine
    on vSphere, so we will briefly cover some of this as a quick reminder for those
    who are already familiar with working on the vSphere platform, and in enough detail
    so that those that are new to the technology can quickly get their first virtual
    desktop machine image built.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 这个构建过程与在 vSphere 上构建其他虚拟机没有区别，因此我们将简要回顾其中的一些内容，以便那些已经熟悉 vSphere 平台的用户能快速复习，并详细讲解，以便那些新接触该技术的用户能够迅速构建他们的第一个虚拟桌面机器镜像。
- en: Installing the guest operating system
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装客户操作系统
- en: Since we connected an ISO image as part of the the virtual desktop machine configuration
    when we built it, as the virtual desktop machine starts up, the ISO image will
    be mounted, and the Windows 7 installation will automatically start.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 由于在构建虚拟桌面机器时，我们作为配置的一部分连接了一个 ISO 镜像，因此当虚拟桌面机器启动时，ISO 镜像会被挂载，Windows 7 安装将自动开始。
- en: We are not going to cover how to install Windows 7, so carry on with a basic
    install, or how you want to configure the OS for the end users. Once the installation
    is complete, make sure you apply any Windows updates and patches and then join
    the virtual desktop machine to the domain.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会详细讲解如何安装 Windows 7，因此请继续进行基本安装，或根据你希望如何配置操作系统给最终用户。一旦安装完成，确保应用任何 Windows
    更新和补丁，然后将虚拟桌面机器加入域。
- en: The reason you need to join the VDI desktop to the domain—even though this machine
    is effectively the template—is so that all the software components, DLL files,
    and so on, that are needed on the machine for it to be domain-joined are present.
    Otherwise, when you create the linked clones from this parent image and try to
    join them to the domain, the virtual desktop machines will ask for the installation
    media to be inserted. That's OK for one or two desktops and when testing, but
    not for thousands in production.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要将 VDI 桌面加入域的原因——即使这台机器实际上是模板——是为了确保机器上所有需要的组件、DLL 文件等，都已经准备好，以便能够成功加入域。否则，当你从这个父镜像创建联动克隆并尝试将其加入域时，虚拟桌面机器会要求插入安装介质。对于一两台桌面机器和测试环境来说，这没问题，但在生产环境中，数千台机器就不行了。
- en: Once you are happy that the operating system for the parent image has been patched
    and is joined to the domain, you can start installing some of the VMware-specific
    virtual machine tools and Horizon View components, starting with VMware Tools.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你确认父镜像的操作系统已经打了补丁并加入了域，你就可以开始安装一些特定于 VMware 的虚拟机工具和 Horizon View 组件，首先是 VMware
    Tools。
- en: Installing VMware Tools
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 VMware Tools
- en: 'VMware Tools enhances the usability of the virtual desktop machine. It installs
    VMware-specific device drivers that allow it to run as a virtual desktop machine,
    replacing the physical hardware equivalents. The installation of VMware Tools
    is initiated from the vSphere Client:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: VMware Tools 增强了虚拟桌面机器的可用性。它安装了 VMware 特定的设备驱动程序，使虚拟桌面机器能够像物理硬件一样运行，并替代物理硬件的等效物。VMware
    Tools 的安装是通过 vSphere 客户端启动的：
- en: 'From the Windows 7 Gold Image virtual machine and its Summary tab, click on
    Install VMware Tools (**1**), as follows:'
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Windows 7 Gold Image 虚拟机及其概览标签中，点击“安装 VMware Tools”(**1**)，如下所示：
- en: '![](img/8fc0b4e0-7548-4a5a-a12b-b5a38c33bf58.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8fc0b4e0-7548-4a5a-a12b-b5a38c33bf58.png)'
- en: 'Initiating the installation from the vSphere Web Client effectively mounts
    the VMware Tools installation media as a virtual CD drive on the virtual desktop
    machine. You will see the following Install VMware Tools dialog box pop up, as
    shown in the following screenshot:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 vSphere Web Client 启动安装将有效地将 VMware Tools 安装媒体挂载为虚拟 CD 驱动器，在虚拟桌面机器上显示安装 VMware
    Tools 对话框，如以下截图所示：
- en: '![](img/bf9d71c4-3c53-4127-8cd1-79a93493dc14.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bf9d71c4-3c53-4127-8cd1-79a93493dc14.png)'
- en: Click the MOUNT button (**2**) to mount the VMware Tools installation media,
    and then switch back to the console of the virtual desktop machine.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 MOUNT 按钮 (**2**) 挂载 VMware Tools 安装媒体，然后返回虚拟桌面机器的控制台。
- en: 'You will now see the AutoPlay dialog box showing that the VMware Tools DVD
    drive has been mounted and that the installation program is available to launch,
    as shown in the following screenshot:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将看到自动播放对话框，显示 VMware Tools DVD 驱动器已挂载，并且安装程序可供启动，如以下截图所示：
- en: '![](img/32fd91af-3f2b-4a96-82d9-ae89b53ba8ff.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](img/32fd91af-3f2b-4a96-82d9-ae89b53ba8ff.png)'
- en: Click Run setup64.exe (**3**) to launch the VMware Tools installer.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击运行 setup64.exe (**3**) 启动 VMware Tools 安装程序。
- en: If you see the User Account Control box pop up warning you about making changes
    to the computer, ignore it by clicking on the Yes button.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果看到用户帐户控制框弹出，警告你有关对计算机进行更改的操作，点击是（Yes）按钮忽略它。
- en: You will now see the Welcome to the installation wizard for VMware Tools dialog
    box.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你将看到 VMware Tools 安装向导的欢迎对话框。
- en: 'Click the Next > button to continue the installation. You will now see the
    Choose Setup Type dialog box, as shown in the following screenshot:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 Next > 按钮继续安装。你将看到 Choose Setup Type 对话框，如下图所示：
- en: '![](img/b24c862c-3577-4b62-9def-2bbb9339c8ad.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b24c862c-3577-4b62-9def-2bbb9339c8ad.png)'
- en: 'Click the radio button for Custom (**4**), and then click the Next > button
    to continue. You can also choose the Typical option, which installs a standard
    set of drivers; however, for the purposes of this book, and to describe all the
    available options, we are going to look at a custom install. You will now see
    the Custom setup dialog box, as shown in the following screenshot:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 Custom (**4**) 单选按钮，然后点击 Next > 按钮继续。你也可以选择 Typical 选项，它将安装一组标准驱动程序；然而，出于本书的目的，并为了描述所有可用的选项，我们将选择自定义安装。现在你将看到
    Custom setup 对话框，如下图所示：
- en: '![](img/73aa2727-e43a-4221-9d70-512a3b7c3e8e.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](img/73aa2727-e43a-4221-9d70-512a3b7c3e8e.png)'
- en: 'VMware Tools will install the following VMware device drivers, depending on
    whether they are selected. By default, all are selected, excluding the VMCI Drivers.
    The drivers and their functions are described here:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: VMware Tools 将安装以下 VMware 设备驱动程序，具体取决于是否选中它们。默认情况下，所有驱动程序都被选中，VMCI 驱动程序除外。下面是这些驱动程序及其功能的描述：
- en: 'Paravirtual SCSI: This is for PVSCSI adapters to enhance the performance of
    virtualized applications.'
  id: totrans-123
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Para虚拟 SCSI：这是针对 PVSCSI 适配器的，旨在增强虚拟化应用程序的性能。
- en: 'Memory Control Driver: This allows memory management of the virtual desktop
    machine when running on an ESXi host.'
  id: totrans-124
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内存控制驱动程序：当虚拟桌面机器在 ESXi 主机上运行时，它可以管理虚拟桌面机器的内存。
- en: 'PS2/USB Mouse Driver: This virtual mouse driver improves the performance of
    the mouse in a virtual desktop machine.'
  id: totrans-125
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: PS2/USB 鼠标驱动程序：这个虚拟鼠标驱动程序提升了虚拟桌面机器中鼠标的性能。
- en: 'SVGA Driver: This enables 32-bit displays, high resolution, and faster graphics
    performance. It installs a virtual SVGA driver that replaces the standard VGA
    driver. On Windows Vista and later versions, the VMware SVGA 3D (Microsoft – WDDM)
    driver is also installed, adding support for Windows Aero.'
  id: totrans-126
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: SVGA 驱动程序：这使得 32 位显示、高分辨率和更快的图形性能成为可能。它安装了一个虚拟的 SVGA 驱动程序，替代了标准的 VGA 驱动程序。在
    Windows Vista 及更高版本中，还会安装 VMware SVGA 3D（Microsoft – WDDM）驱动程序，增加了对 Windows Aero
    的支持。
- en: '**Audio Driver**: This is required for all 64-bit guest operating systems,
    since it enables sound capabilities.'
  id: totrans-127
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**音频驱动程序**：所有 64 位客户操作系统都需要此驱动程序，因为它启用了声音功能。'
- en: 'VMXNET3 NIC Driver: This improves network performance and is recommended for
    virtual desktop machines.'
  id: totrans-128
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMXNET3 网卡驱动程序：它提高了网络性能，建议用于虚拟桌面机器。
- en: 'Volume Shadow Copy Services: This allows you to take backup copies or snapshots
    of the virtual desktop machine.'
  id: totrans-129
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 卷影复制服务：这使得你可以对虚拟桌面机器进行备份或快照。
- en: 'VMCI Driver: This allows faster communication between virtual machines.'
  id: totrans-130
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMCI 驱动程序：这允许虚拟机之间更快的通信。
- en: 'NSX File Introspection Driver: This installs the agent so that you can use
    antivirus offload scanning.'
  id: totrans-131
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: NSX 文件检查驱动程序：这将安装代理程序，以便你可以使用防病毒卸载扫描功能。
- en: The other options in this dialog box are for Browse..., which allows you to
    change where VMware tools are installed, and Disk Usage, to check the disk space
    requirements so that you can check the amount of disk space that VMware Tools
    will need to install your chosen options.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此对话框中的其他选项包括“浏览...”功能，允许你更改 VMware 工具的安装位置，以及“磁盘使用情况”以检查磁盘空间要求，从而了解 VMware Tools
    安装所选选项所需的磁盘空间。
- en: Click the Next > button to continue. You will now see the Ready to install VMware
    Tools dialog box. Click the Install button to start the install process.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步 >”按钮继续。你将看到“准备安装 VMware Tools”对话框。点击“安装”按钮以开始安装过程。
- en: Once completed, you will see the Completed the VMware Tools Setup Wizard dialog
    box. Click on the Finish button to complete the installation process.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，你将看到“完成 VMware Tools 安装向导”对话框。点击“完成”按钮以完成安装过程。
- en: You will now be prompted to restart the virtual desktop machine so that you
    can start the VMware Tools services. From the dialog box, click the Yes button
    to reboot.
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，系统会提示你重启虚拟桌面机器，以便启动 VMware Tools 服务。点击对话框中的“是”按钮以重启。
- en: 'Once the virtual desktop machine has restarted, check that the VMware Tools
    services are up and running by clicking on the taskbar and checking for the VM
    icon (**5**), as shown in the following screenshot:'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦虚拟桌面机器重启，点击任务栏并检查 VM 图标 (**5**) 来确认 VMware Tools 服务是否正常运行，如下面的截图所示：
- en: '![](img/82c18ada-7386-4e2a-a900-a549b83b24e8.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![](img/82c18ada-7386-4e2a-a900-a549b83b24e8.png)'
- en: 'You can also launch the Services console from the virtual desktop machine and
    check that the service is running from there, as shown in the following screenshot:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以从虚拟桌面机器启动服务控制台，并检查服务是否正在运行，具体如下面的截图所示：
- en: '![](img/185dc77d-ed49-4ea6-a598-c1810fb5a87d.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![](img/185dc77d-ed49-4ea6-a598-c1810fb5a87d.png)'
- en: You have successfully installed VMware Tools. The next step is to install any
    core applications that you want to include as part of the parent image.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 你已成功安装 VMware Tools。下一步是安装你希望作为父镜像一部分的核心应用程序。
- en: Installing applications for the parent image
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为父镜像安装应用程序
- en: The next stage is to install any applications that you want to have as part
    of your parent image. These are typically applications that will be used by every
    user in your organization. You could also deliver applications using other technologies,
    such as ThinApp or App Volumes, as, ideally, you would want to try to deliver
    applications on demand, rather than install them into operating system images,
    as this would make them harder to manage.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 下一阶段是安装你希望作为父镜像一部分的应用程序。这些通常是你的组织中每个用户都会使用的应用程序。你也可以使用其他技术（如 ThinApp 或 App Volumes）来交付应用程序，因为理想情况下，你希望按需交付应用程序，而不是将它们安装到操作系统镜像中，因为这样会使得它们更难以管理。
- en: In the example lab, we have installed Adobe Reader in the gold image.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在示例实验室中，我们已经在 gold 镜像中安装了 Adobe Reader。
- en: In the next section, we are going to install the Horizon Agent so that the virtual
    desktop machine is registered with the Horizon environment and the connection
    server.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的步骤中，我们将安装 Horizon Agent，以便将虚拟桌面机器注册到 Horizon 环境和连接服务器。
- en: Installing the Horizon Agent
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Horizon Agent
- en: The Horizon Agent is installed on each virtual desktop machine and is used for
    communication between the Horizon View Client and the virtual desktop machine.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: Horizon Agent 安装在每台虚拟桌面机器上，用于 Horizon View 客户端与虚拟桌面机器之间的通信。
- en: 'It also adds components for things such as View Persona Management and USB
    redirection. We will cover these different components in more detail in this section
    as we install the agent on the virtual desktop machine. To install the Horizon
    Agent, follow these steps:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 它还添加了如 View Persona Management 和 USB 重定向等组件。我们将在本节中更详细地介绍这些不同的组件，随着我们在虚拟桌面机器上安装代理。要安装
    Horizon Agent，请按照以下步骤操作：
- en: Open a console to the Windows 7 Gold Image virtual desktop machine, and from
    the desktop, navigate to the installation file for the Horizon Agent. For simplicity,
    we have created a shared folder on the domain controller so that we can save all
    the installation media on it.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个 Windows 7 Gold Image 虚拟桌面机器的控制台，并从桌面导航到 Horizon Agent 的安装文件。为了简便起见，我们在域控制器上创建了一个共享文件夹，以便将所有安装介质保存在其中。
- en: Launch the `VMware-Horizon-Agent-x86_64-7.6.0-9539447` file to start the installation,
    and if you see the Open File - Security Warning message, click the Run button
    to continue. You will now see the Welcome to the Installation Wizard for VMware
    Horizon Agent screen.
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动`VMware-Horizon-Agent-x86_64-7.6.0-9539447`文件开始安装，如果你看到“Open File - Security
    Warning”消息，点击“Run”按钮继续。你现在将看到“Welcome to the Installation Wizard for VMware Horizon
    Agent”屏幕。
- en: 'Click the Next > button to continue. You will now see the License Agreement
    page, as shown in the following screenshot:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“Next >”按钮继续。你现在将看到许可协议页面，如下图所示：
- en: '![](img/d5d4d543-54f4-4a3d-9d74-8d3deb01d659.png)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d5d4d543-54f4-4a3d-9d74-8d3deb01d659.png)'
- en: Click on the radio button for I accept the terms in the license agreement (**1**).
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“I accept the terms in the license agreement”（**1**）的单选框。
- en: 'Click the Next > button to continue. You will now see the Network protocol
    configuration dialog box, as shown in the following screenshot:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“Next >”按钮继续。你现在将看到网络协议配置对话框，如下图所示：
- en: '![](img/8b299d25-f1ea-4bc2-ae13-91caf13ba7ff.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8b299d25-f1ea-4bc2-ae13-91caf13ba7ff.png)'
- en: 'As this lab is using IPv4, from the options box, click it to highlight IPv4
    (**2**), and then click the Next > button to continue. You will now see the Custom
    Setup page. On the Custom Setup page, you can choose the features and functions
    of the Horizon Agent that you want to install. Not all of these features are installed
    by default, so on this screen, you might want to review some of them and select/deselect
    them from the installation process, as you might not want to use some of the features.
    You can always install them again later if need be. Features that are not installed
    by default are marked with a red X. These features are shown in the following
    screenshot:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于本实验室使用的是IPv4，在选项框中，点击以高亮显示IPv4（**2**），然后点击“Next >”按钮继续。你现在将看到自定义设置页面。在自定义设置页面上，你可以选择要安装的Horizon
    Agent功能。并非所有功能都是默认安装的，因此在此页面，你可能需要查看一些功能，并选择/取消选择它们，因你可能不想使用某些功能。如果需要，你可以稍后重新安装这些功能。未默认安装的功能将标有红色X。这些功能如下图所示：
- en: '![](img/988e9776-568a-4fc9-a138-820014042dbd.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![](img/988e9776-568a-4fc9-a138-820014042dbd.png)'
- en: 'You can choose to install the following features. Note that some of the features
    are OS dependent and therefore may not show as available options:'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以选择安装以下功能。请注意，某些功能依赖操作系统，因此可能不会显示为可用选项。
- en: '3D RDSH: This enables hardware-based 3D rendering in RDSH sessions.'
  id: totrans-158
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 3D RDSH：这启用了RDSH会话中的硬件加速3D渲染。
- en: 'USB Redirection: This allows a USB device to be plugged into the endpoint device
    and then redirects the USB traffic to the virtual desktop machine.'
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: USB重定向：这允许将USB设备插入终端设备，并将USB流量重定向到虚拟桌面机器。
- en: 'VMware Virtualization Pack for Skype for Business: This allows end users to
    make optimized audio and video calls with Skype for Business, running inside a
    virtual desktop machine.'
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware Virtualization Pack for Skype for Business：这允许终端用户通过Skype for Business进行优化的音频和视频通话，且运行于虚拟桌面机器中。
- en: 'VMware Horizon View Composer Agent: This allows the virtual desktop machine
    to be run as a linked-clone desktop.'
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware Horizon View Composer Agent：这允许虚拟桌面机器作为关联克隆桌面运行。
- en: 'Real-Time Audio-Video: This allows you to redirect locally connected audio
    and video devices (such as USB webcams) to your virtual desktop machine.'
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实时音视频：这允许你将本地连接的音频和视频设备（如USB摄像头）重定向到虚拟桌面机器。
- en: 'VMware Horizon Instant Clone Agent: This allows the virtual desktop machine
    to be run as an Instant Clone desktop.'
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware Horizon Instant Clone Agent：这允许虚拟桌面机器作为即时克隆桌面运行。
- en: 'Client Drive Redirection: This allows View Clients to share local drives with
    remote desktops and applications (IPv4 only).'
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 客户端驱动重定向：这允许视图客户端与远程桌面和应用程序共享本地驱动器（仅支持IPv4）。
- en: 'Virtual Printing: This allows users to print to printers without the need to
    install print drivers.'
  id: totrans-165
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟打印：这允许用户无需安装打印机驱动程序即可打印到打印机。
- en: 'vRealize Operations Manager Agent: This allows the virtual desktop machine
    to be monitored by the vRealize Operations Manager for Horizon View.'
  id: totrans-166
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: vRealize Operations Manager Agent：这允许vRealize Operations Manager对虚拟桌面机器进行监控，以便与Horizon
    View集成。
- en: 'VMware Horizon 7 Persona Management: This synchronizes a user''s profile from
    the virtual desktop machine to a repository on a central server, meaning that
    a profile can be delivered to a floating assigned desktop so that you can personalize
    it for that user so that they can access their profile.'
  id: totrans-167
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware Horizon 7个人档案管理：此功能将用户的个人资料从虚拟桌面机器同步到中央服务器上的存储库，这意味着可以将个人资料传递到浮动分配的桌面，以便为该用户个性化设置，使他们可以访问其个人资料。
- en: 'Scanner Redirection: This allows you to redirect a local scanner to the virtual
    desktop machine.'
  id: totrans-168
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扫描仪重定向：此功能允许你将本地扫描仪重定向到虚拟桌面机器。
- en: 'Smartcard Redirection: This allows users to use a smart card for authentication.'
  id: totrans-169
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 智能卡重定向：此功能允许用户使用智能卡进行身份验证。
- en: 'Serial Port Redirection: This allows users to redirect the local serial port
    to the virtual desktop machine.'
  id: totrans-170
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 串口重定向：此功能允许用户将本地串口重定向到虚拟桌面机器。
- en: 'VMware Audio: This enables sound on the local device.'
  id: totrans-171
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware音频：此功能启用本地设备的声音。
- en: 'Flash Redirection: This offloads the processing of Flash-based content to the
    local device.'
  id: totrans-172
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Flash重定向：此功能将Flash内容的处理卸载到本地设备。
- en: 'HTML5 Multimedia Redirection: This redirects HTML5 multimedia content in a
    Chrome or Edge browser to the client, and is used for performance optimization.'
  id: totrans-173
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: HTML5多媒体重定向：此功能将Chrome或Edge浏览器中的HTML5多媒体内容重定向到客户端，并用于性能优化。
- en: 'Device Bridge BAS Plugin: This enables fingerprint readers that are supported
    by the BAS system.'
  id: totrans-174
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设备桥接BAS插件：此功能启用BAS系统支持的指纹读取器。
- en: 'SDO Sensor Redirection: This enables the **Simple Device Orientation** (**SDO**)
    sensor redirection feature.'
  id: totrans-175
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: SDO传感器重定向：此功能启用**简单设备方向**（**SDO**）传感器重定向功能。
- en: 'Geolocation Redirection: This enables the redirection of the client''s geolocation
    to the remote desktop.'
  id: totrans-176
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 地理位置重定向：此功能启用客户端地理位置到远程桌面的重定向。
- en: 'Horizon Performance Tracker: This enables the Horizon performance tracker.
    This utility runs inside a remote desktop and monitors the performance of the
    display protocols and the system resource usage.'
  id: totrans-177
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Horizon性能跟踪器：此功能启用Horizon性能跟踪器。此工具在远程桌面中运行，监控显示协议的性能和系统资源的使用情况。
- en: 3D RDSH option is not shown but will be available when installing on an RDSH
    host server.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 3D RDSH选项未显示，但在安装RDSH主机服务器时将可用。
- en: When you are happy with the features you have chosen to install, click on the
    Next > button to continue.
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当你对选择安装的功能满意时，点击“下一步 >”按钮继续。
- en: 'On the next screen you will see the Remote Desktop Protocol Configuration dialog
    box. You need remote desktop support enabled for the View Agent to work. You could
    always enable this using a Group Policy:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕上，你将看到远程桌面协议配置对话框。你需要启用远程桌面支持才能使视图代理工作。你可以通过组策略始终启用此功能：
- en: '![](img/048babe2-0d69-43cc-a030-4418631cdc75.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![](img/048babe2-0d69-43cc-a030-4418631cdc75.png)'
- en: Click on the radio button to Enable the Remote Desktop capability on this computer
    (**3**), as shown in the preceding screenshot.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击单选按钮以启用此计算机的远程桌面功能（**3**），如前面截图所示。
- en: Click on the Next > button to continue.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步 >”按钮继续。
- en: 'You will now see the Register with Horizon 7 Connection Server dialog box,
    as shown in the following screenshot:'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你将看到“与 Horizon 7 连接服务器注册”对话框，如下截图所示：
- en: '![](img/50105f44-62d2-4ff0-9244-f4bacaf165f3.png)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![](img/50105f44-62d2-4ff0-9244-f4bacaf165f3.png)'
- en: In the (hostname or IP address) box (**4**), enter the name of the connection
    server you want to register this virtual desktop machine with. In the example
    lab, this is our first connection server, called `hzn7-cs1.pvolab.com`.
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在（主机名或IP地址）框（**4**）中，输入要将此虚拟桌面机器注册到的连接服务器的名称。在示例实验室中，这就是我们的第一个连接服务器，名为`hzn7-cs1.pvolab.com`。
- en: In the Authentication section, click the radio button for Specify administrator
    credentials (**5**).
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在身份验证部分，点击“指定管理员凭据”（**5**）单选按钮。
- en: In the Username section (**6**), enter the administrator username. In the example
    lab, this is `administrator`. Note that you need to enter the details in the format
    Domain\User, so in our example, you would type `pvolab\administrator`.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在用户名部分（**6**）中，输入管理员用户名。在示例实验室中，这就是`administrator`。请注意，你需要以“域\用户名”的格式输入详细信息，因此在我们的示例中，你将输入`pvolab\administrator`。
- en: Now, enter the administrator password in the Password box.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，在密码框中输入管理员密码。
- en: Click Next > to continue. You will now see the Ready to Install the Program
    screen.
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步 >”继续。你现在将看到“准备安装程序”屏幕。
- en: Click the Install button to start the installation.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“安装”按钮以开始安装。
- en: Once the installation has finished, you will see the Installer Completed screen.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，您将看到“安装完成”屏幕。
- en: Click on the Finish button to close the installer.
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“完成”按钮以关闭安装程序。
- en: Finally, you will be prompted to reboot the virtual desktop machine. Click on
    the Yes button to reboot. You will have successfully installed the Horizon Agent.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，系统将提示您重启虚拟桌面机器。点击“是”按钮以重启。您将成功安装 Horizon Agent。
- en: In the next section, we will start optimizing the parent image to run as a virtual
    desktop machine.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一部分，我们将开始优化父镜像，使其能够作为虚拟桌面机器运行。
- en: Optimizing the guest operating system
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 优化客户操作系统
- en: There are various automated tools and manual processes to optimize the virtual
    desktop operating systems.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 有多种自动化工具和手动流程可用于优化虚拟桌面操作系统。
- en: Previously, the optimization process was delivered via a set of scripts that
    you would manually execute on the virtual desktop machine that was being used
    to create the gold image. However, in this chapter, we will take a look at the
    GUI-based **VMware Optimization Tool**, as this is available to download as a
    **fling**.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 之前，优化过程是通过一组脚本进行的，您需要手动执行这些脚本来优化正在用于创建金像的虚拟桌面机器。然而，在本章中，我们将介绍基于 GUI 的 **VMware
    优化工具**，因为该工具可以作为 **fling** 下载。
- en: A *fling*, in VMware terms, is a free piece of software for end users to try
    out and provide feedback to VMware on. Often, these products make it into production
    as products in their own right, or they form part of a new feature of an already
    existing product. The only thing to bear in mind, should you choose to use them
    in your production environment, is that these product flings don't have any official
    support; however, you will find a number of blogs that may help you with this.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 在 VMware 的术语中，*fling* 是供最终用户试用并向 VMware 提供反馈的免费软件。通常，这些产品会作为独立产品投入生产，或者成为已有产品的新功能的一部分。需要记住的一点是，如果您选择在生产环境中使用这些工具，产品
    *fling* 不提供官方支持；然而，您可以找到一些博客，它们可能会对您有所帮助。
- en: 'Download the optimization tool and save it in the shared folder. You can download
    the tool from the following link:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 下载优化工具并将其保存在共享文件夹中。您可以通过以下链接下载该工具：
- en: '[https://labs.vmware.com/flings/vmware-os-optimization-tool](https://labs.vmware.com/flings/vmware-os-optimization-tool).'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://labs.vmware.com/flings/vmware-os-optimization-tool](https://labs.vmware.com/flings/vmware-os-optimization-tool)'
- en: 'Once downloaded, we are going to run the optimization tool on the newly built
    Windows 7 Gold Image virtual desktop machine. Follow these steps to do so:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 下载完成后，我们将运行优化工具，在新建的 Windows 7 Gold Image 虚拟桌面机器上进行优化。请按照以下步骤操作：
- en: 'From the Windows 7 Gold Image virtual desktop machine being used to create
    the parent image, navigate to the shared software folder and locate the VMware
    OS Optimization Tool application, as shown in the following screenshot:'
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从用于创建父镜像的 Windows 7 Gold Image 虚拟桌面机器中，导航到共享软件文件夹并找到 VMware OS 优化工具应用程序，如下图所示：
- en: '![](img/72d65f4f-1699-4c5a-a535-5ca1124b015c.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![](img/72d65f4f-1699-4c5a-a535-5ca1124b015c.png)'
- en: 'Launch the `VMwareOSOptimizationTool` file to launch the optimization tool.
    if you see the Open File - Security Warning message, click the Run button to continue.
    You will now see the tool launch, as shown in the following screenshot:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动`VMwareOSOptimizationTool`文件以启动优化工具。如果您看到“打开文件 - 安全警告”消息，请点击“运行”按钮继续。您将看到工具启动，如下图所示：
- en: '![](img/0ab8bb84-2930-4e1f-a940-6c311a9ce0a0.png)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0ab8bb84-2930-4e1f-a940-6c311a9ce0a0.png)'
- en: At the top of the screen (**1**), you can see the details of the virtual desktop
    machine's operating system and hardware configuration.
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕顶部（**1**），您可以看到虚拟桌面机器的操作系统和硬件配置详情。
- en: The next section is Template (**2**), and this is where you choose the template
    you want to use for the optimization. From the dropdown menu, select the relevant
    operating system template that you want to apply to this image. You have the ability
    to create new templates using this tool by clicking on the Template tab from the
    list of tabs across the top of the screen.
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一部分是模板（**2**），在这里您可以选择用于优化的模板。从下拉菜单中选择您希望应用于此镜像的操作系统模板。您还可以通过点击屏幕顶部标签列表中的模板选项卡来使用此工具创建新模板。
- en: To start this process, the tool analyzes the differences between the current
    virtual machine state and the optimizations contained within the chosen template.
    Click on the Analyze button (**3**) to start the process.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要启动此过程，工具会分析当前虚拟机状态与所选模板中包含的优化之间的差异。单击“分析”按钮（**3**）以开始此过程。
- en: The tool will run the analysis and then come back with a report showing the
    components that need to be optimized (**4**). At this stage, you can select or
    deselect options before you actually run the optimization. Scroll through the
    analysis results to understand what is going to be changed.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 该工具将运行分析，并返回一份报告，显示需要优化的组件（**4**）。在此阶段，您可以选择或取消选择选项，然后再实际执行优化。滚动浏览分析结果，以了解将要进行的更改。
- en: 'When you are happy with the options, click the Optimize button (**5**) to start
    the optimization process. The image will now be optimized as per the settings
    and configuration details contained within the template that you chose. The progress
    of the optimization is shown in the following screenshot:'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当您对选项满意时，单击“优化”按钮（**5**）以开始优化过程。此时，图像将根据您选择的模板中的设置和配置细节进行优化。优化进度如下图所示：
- en: '![](img/e57f929c-4ab0-41d6-bb0f-eeb37fafa102.png)'
  id: totrans-212
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e57f929c-4ab0-41d6-bb0f-eeb37fafa102.png)'
- en: 'Once the optimization process has completed, you will automatically see the
    Optimize tab and the results of the optimization, as shown in the following screenshot:'
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 优化过程完成后，您将自动看到“优化”标签和优化结果，如下图所示：
- en: '![](img/a89f9ab2-cbe1-46ec-bcb9-5e45c1a630a5.png)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a89f9ab2-cbe1-46ec-bcb9-5e45c1a630a5.png)'
- en: 'For more detailed information on how to optimize the desktop operating system
    for running in a virtual environment, have a look at the following link, which
    will take you to the VMware Windows Operating System Optimization Tool Guide:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 有关如何优化桌面操作系统以便在虚拟环境中运行的更多详细信息，请查看以下链接，该链接将带您进入 VMware Windows 操作系统优化工具指南：
- en: '[https://www.vmware.com/content/dam/digitalmarketing/vmware/en/pdf/techpaper/vmware-view-virtual-desktops-windows-optimization.pdf](https://www.vmware.com/content/dam/digitalmarketing/vmware/en/pdf/techpaper/vmware-view-virtual-desktops-windows-optimization.pdf).'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.vmware.com/content/dam/digitalmarketing/vmware/en/pdf/techpaper/vmware-view-virtual-desktops-windows-optimization.pdf](https://www.vmware.com/content/dam/digitalmarketing/vmware/en/pdf/techpaper/vmware-view-virtual-desktops-windows-optimization.pdf)'
- en: Once you have completed the optimization process, exit the tool. In the next
    section, we will look at what's next for the example lab-based virtual desktop
    machine.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 完成优化过程后，退出工具。在下一部分中，我们将查看虚拟桌面机器的后续步骤。
- en: Post-optimization tasks
  id: totrans-218
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 优化后的任务
- en: 'One of the final things to do is to release the IP address if you have been
    using DHCP so that when the new virtual desktop machines are created from this
    parent image, they don''t have a duplicate IP address and, therefore, will obtain
    a new IP address:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 最后需要做的一件事是释放 IP 地址，如果您一直在使用 DHCP，以便当从此父映像创建新的虚拟桌面机器时，它们不会有重复的 IP 地址，从而可以获取新的
    IP 地址：
- en: Open a command prompt window by pressing the Windows key and *R*, and then in
    the Run dialog box, type `cmd`.
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过按下 Windows 键和 *R* 打开命令提示符窗口，然后在运行对话框中输入 `cmd`。
- en: 'In the command prompt window that opens, type in the following command:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在打开的命令提示符窗口中，输入以下命令：
- en: '[PRE0]'
  id: totrans-222
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Before shutting down the virtual desktop and completing the image build, there
    are just a few other housekeeping tasks to perform.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 在关闭虚拟桌面并完成映像构建之前，还有一些其他的清理任务需要执行。
- en: The key one is not to forget to tidy up after yourself. For example, empty the
    recycle bin and delete any browser history or temporary files. Basically, delete
    everything that is not part of that parent image. Once you are happy that the
    image is optimized to your specific requirements, you can shut down the virtual
    desktop machine.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 关键的一点是不要忘记整理清理工作。例如，清空回收站，删除任何浏览器历史记录或临时文件。基本上，删除所有不属于父映像的内容。一旦您确认映像已按照您的具体要求进行了优化，便可以关闭虚拟桌面机器。
- en: With the image build for Windows 7 now complete, we will finalize the preparation
    of this image so that it's ready for delivery.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 随着 Windows 7 映像构建的完成，我们将最终准备此映像，使其准备交付。
- en: Creating a Windows 10 virtual desktop machine
  id: totrans-226
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建 Windows 10 虚拟桌面机器
- en: For the example lab, we will repeat the build and optimization process to build
    a second parent image but, this time, we are going to build a Windows 10 virtual
    desktop machine.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 对于示例实验室，我们将重复构建和优化过程，构建第二个父镜像，但这次我们将构建一个 Windows 10 虚拟桌面机器。
- en: Once built, this Windows 10 parent image will then be used to create an Instant
    Clone virtual desktop machine pool.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 构建完成后，这个 Windows 10 父镜像将用于创建即时克隆虚拟桌面机池。
- en: Rather than go through every step again screen by screen, we will list the steps
    we followed when creating the Windows 7 parent image and then just show some screenshots
    to highlight the differences. You can refer to the previous section to get more
    details.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将不再逐步显示每个屏幕，而是列出创建 Windows 7 父镜像时我们所遵循的步骤，并通过一些截图来突出显示差异。您可以参考前面的部分以获取更多细节。
- en: Creating the virtual desktop machine container
  id: totrans-230
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建虚拟桌面机器容器
- en: 'Like with creating the previous virtual desktop machine, the first thing we
    need to do is build and configure the actual virtual desktop machine on the vCenter
    server. This will define the virtual hardware configuration. As we mentioned previously,
    the process is identical to the one we followed for Windows 7, and so we are going
    to cover the tasks and just highlight specific screenshots that are different:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 和创建之前的虚拟桌面机器一样，首先我们需要做的是在 vCenter 服务器上构建和配置实际的虚拟桌面机器。这将定义虚拟硬件配置。正如我们之前提到的，整个过程与
    Windows 7 的构建步骤完全相同，所以我们将覆盖任务并突出显示不同的截图：
- en: 'Follow the steps we described previously for the Windows 7 build up to the
    point where you get to Select a name and folder, as shown in the following screenshot:'
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照之前描述的 Windows 7 构建步骤，直到到达 **选择名称和文件夹** 的步骤，如下所示截图：
- en: '![](img/7584c5cd-2b91-4584-85e6-ceaa7d58f0a7.png)'
  id: totrans-233
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7584c5cd-2b91-4584-85e6-ceaa7d58f0a7.png)'
- en: In the Virtual machine name box (**1**), type in a name for the new virtual
    desktop machine. In the example lab, this is called `Windows 10 Gold Image`.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **虚拟机名称** 框中 (**1**)，输入新虚拟桌面机器的名称。在示例实验室中，这个名称为 `Windows 10 Gold Image`。
- en: Then, in the Select a location for the virtual machine section, click to highlight
    the datacenter where you want this virtual machine to be created. In the example
    lab, this machine is going to be created in the datacenter called PVO's Datacenter
    (**2**).
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，在选择虚拟机位置的部分，点击并高亮显示您希望创建虚拟机的数据中心。在示例实验室中，这台机器将被创建在名为 PVO's Datacenter (**2**)
    的数据中心。
- en: 'Click the NEXT button to continue. Continue with the steps that were described
    in the Windows 7 build until you get to the **S**elect a guest OS screen, as shown
    in the following screenshot:'
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 NEXT 按钮继续。继续执行之前在 Windows 7 构建过程中描述的步骤，直到您看到 **选择客机操作系统** 屏幕，如下所示截图：
- en: '![](img/977dd26e-f51a-4c16-8933-1068076f5480.png)'
  id: totrans-237
  prefs: []
  type: TYPE_IMG
  zh: '![](img/977dd26e-f51a-4c16-8933-1068076f5480.png)'
- en: The next step is to choose the operating system for the virtual desktop machine.
    In the example, this is the second virtual desktop machine that will be used as
    the gold image template for Windows 10.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是选择虚拟桌面机器的操作系统。在这个示例中，这是第二台虚拟桌面机器，将作为 Windows 10 的金像模板。
- en: From the Guest OS Family box, click the arrow for the dropdown menu (**10**),
    and select Windows. Then, from the Guest OS Version box, click the arrow for the
    dropdown menu (**11**) and select Microsoft Windows 10 (64-bit). The guest OS
    selection is important to get right, as it determines which drivers get installed
    when VMware Tools is installed on the virtual desktop machine.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **客机操作系统系列** 下拉框中，点击箭头 (**10**)，选择 Windows。然后，在 **客机操作系统版本** 下拉框中，点击箭头 (**11**)，选择
    Microsoft Windows 10 (64-bit)。选择正确的客机操作系统非常重要，因为它决定了安装 VMware Tools 时哪些驱动程序将被安装到虚拟桌面机器上。
- en: 'Click the NEXT button to continue with the steps that were described in the
    Windows 7 build process until you get to the Select File screen being displayed,
    as shown in the following screenshot:'
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 NEXT 按钮继续执行 Windows 7 构建过程中的步骤，直到显示 **选择文件** 屏幕，如下所示截图：
- en: '![](img/15ea4af5-7662-460c-8cbe-d7f70a759ba4.png)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![](img/15ea4af5-7662-460c-8cbe-d7f70a759ba4.png)'
- en: Expand the datastore (**5**) and then click on the `ISO Images` folder (**6**).
    Then, click to select the OS that is going to be installed on this virtual desktop
    machine. In this example, we are going to install Windows 10, so click on the
    engb_windows_10_enterprise_version_1511_x64_DVD_7224923.iso option (**7**). You
    may have your ISO images stored in a different location, so just follow this as
    a guide by using your folder locations.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开数据存储区（**5**），然后点击 `ISO Images` 文件夹（**6**）。接着，点击选择将要安装在此虚拟桌面机上的操作系统。在此示例中，我们将安装
    Windows 10，因此点击 engb_windows_10_enterprise_version_1511_x64_DVD_7224923.iso 选项（**7**）。你的
    ISO 镜像可能存储在其他位置，请根据自己的文件夹位置进行选择。
- en: Click the OK button to return to the virtual hardware screen, and then continue
    with the steps that were described in the Windows 7 build process.
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“确定”按钮返回到虚拟硬件屏幕，然后继续执行 Windows 7 构建过程中的步骤。
- en: With the virtual desktop machine now built and configured, it's time to power
    it on and continue the build process. Navigate to the virtual desktop machine
    in the inventory. You should see an entry called Windows 10 Gold Image.
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在虚拟桌面机已经构建并配置完成，是时候启动它并继续构建过程了。导航到库存中的虚拟桌面机。你应该看到一个名为 Windows 10 金色镜像的条目。
- en: Highlight the virtual desktop machine Windows 10 Gold Image, right-click it,
    and from the contextual menu now shown, click on Power and then click on Power
    On.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选中虚拟桌面机 Windows 10 金色镜像，右键点击它，在弹出的上下文菜单中点击“电源”，然后点击“开启电源”。
- en: The virtual desktop machine will now power on and boot into the BIOS setup screen,
    as that's what we configured to happen on the next boot. Any subsequent bootups
    will boot as normal into the operating system once it's installed.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 虚拟桌面机现在将启动并进入 BIOS 设置屏幕，因为这是我们配置的下一次启动时发生的情况。随后的启动将正常进入操作系统，一旦操作系统安装完毕。
- en: In the next section, we will make the configuration changes to the virtual desktop
    machine.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将对虚拟桌面机进行配置更改。
- en: Completing the Windows 10 build
  id: totrans-248
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 完成 Windows 10 构建
- en: 'Like with the Windows 7 virtual desktop machine, you need to power on the newly
    created Windows 10 virtual desktop machine and finish the configuration. This
    consists of the following tasks that need to be completed:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 与 Windows 7 虚拟桌面机类似，你需要启动新创建的 Windows 10 虚拟桌面机并完成配置。此过程包括需要完成的以下任务：
- en: Updating the virtual desktop machine BIOS
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新虚拟桌面机 BIOS
- en: Installing the guest operating system (Windows 10)
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装来宾操作系统（Windows 10）
- en: Installing VMware Tools
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 VMware Tools
- en: Installing applications for the parent image
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为父镜像安装应用程序
- en: Installing the Horizon Agent
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 Horizon Agent
- en: Optimizing the guest operating system
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 优化来宾操作系统
- en: Completing post-optimization tasks
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完成优化后的任务
- en: Now that we have completed all the build tasks, all that remains is releasing
    the IP address and then clearing up any temporary files, browser history, and
    so on. Once we have finished doing this, power off the virtual desktop machine,
    which is ready for us to prepare the image as our virtual desktop machine template.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经完成了所有的构建任务，剩下的就是释放 IP 地址，然后清理临时文件、浏览器历史记录等。完成这些后，关闭虚拟桌面机电源，它已经准备好作为虚拟桌面机模板来准备镜像。
- en: Creating a GPU-enabled virtual desktop machine
  id: totrans-258
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建支持 GPU 的虚拟桌面机
- en: In this section, we are going to build a second Windows 10 virtual desktop machine,
    but this time for using with a dedicated hardware-based NVIDIA GPU card. As we
    discussed previously, there are three models for delivering high-end graphics.
    In the next example, we will set up a virtual desktop machine to use NVIDIA GRID
    vGPU.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将构建第二个 Windows 10 虚拟桌面机，但这次是用于配备专用硬件的 NVIDIA GPU 卡。如前所述，有三种提供高端图形的方式。在接下来的示例中，我们将设置一个虚拟桌面机来使用
    NVIDIA GRID vGPU。
- en: Creating the virtual desktop machine container
  id: totrans-260
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建虚拟桌面机容器
- en: The first step, as with the build process we covered previously for Windows
    10, is to build the virtual machine itself. We will follow the steps that were
    previously described in this chapter to build a Windows 10 virtual desktop machine,
    up to the point where we configure the virtual hardware differently, as we need
    to add in the NVIDIA GRID vGPU at this point.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步，和我们之前讨论的 Windows 10 构建过程一样，是构建虚拟机本身。我们将按照本章中之前描述的步骤构建一个 Windows 10 虚拟桌面机，直到我们需要在此时添加
    NVIDIA GRID vGPU 时配置不同的虚拟硬件。
- en: At the time of writing this book, and since we are using vSphere 6.5 as the
    hosting platform, you will also need to use the older Flash-based vSphere client
    for configuring the vGPU settings.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 在编写本书时，由于我们使用的是 vSphere 6.5 作为托管平台，因此你还需要使用基于 Flash 的旧版 vSphere 客户端来配置 vGPU
    设置。
- en: 'Follow the steps to build a Windows 10 machine as described in the previous
    section, *Creating a Windows 10 Virtual Desktop Machine*, until you get to the
    Customize Hardware section, as shown in the following screenshot:'
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照上一部分 *创建 Windows 10 虚拟桌面机器* 中描述的步骤，直到到达“自定义硬件”部分，如下图所示：
- en: '![](img/7d6eb34e-0d11-48ae-821f-2c8f9146f3e3.png)'
  id: totrans-264
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7d6eb34e-0d11-48ae-821f-2c8f9146f3e3.png)'
- en: Under the Virtual Hardware tab, click on the dropdown arrow for Memory (**1**),
    and check the box for Reserve all guest memory (All locked) (**2**).
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“虚拟硬件”选项卡下，点击内存（**1**）的下拉箭头，并勾选“预留所有客户内存（全部锁定）”（**2**）复选框。
- en: If you do not configure memory reservation, then the virtual desktop machine
    will fail to power on, as it can't guarantee that the memory will be available.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有配置内存预留，那么虚拟桌面机器将无法启动，因为它无法确保内存可用。
- en: 'Next, at the bottom of the box, in the New device section, click the dropdown
    arrow (**3**), and from the list of options, click on Shared PCI Device (**4**),
    as shown in the following screenshot:'
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在框的底部，在“新设备”部分，点击下拉箭头（**3**），然后从选项列表中选择共享 PCI 设备（**4**），如下图所示：
- en: '![](img/4c298783-640d-4ace-a91e-0f32fbaa2af6.png)'
  id: totrans-268
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4c298783-640d-4ace-a91e-0f32fbaa2af6.png)'
- en: 'Now, click the Add button (**5**) to add the new PCI device, as shown in the
    following screenshot:'
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，点击“添加”按钮（**5**）以添加新 PCI 设备，如下图所示：
- en: '![](img/46ef9960-d157-49af-8846-d320787eeae5.png)'
  id: totrans-270
  prefs: []
  type: TYPE_IMG
  zh: '![](img/46ef9960-d157-49af-8846-d320787eeae5.png)'
- en: 'You will now see that the NVIDIA GRID vGPU has been added as a device (**6**).
    This device was configured for PCI pass-through when the ESXi host server was
    configured in [Chapter 4](a85150f1-1f32-4c91-87f0-1e8c700b9b96.xhtml), *Installing
    and Configuring Horizon 7 – Part 1*. This is shown in the following screenshot:'
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你将看到 NVIDIA GRID vGPU 已作为设备（**6**）添加。该设备在配置 ESXi 主机服务器时已为 PCI 直通进行配置，详细信息见
    [第 4 章](a85150f1-1f32-4c91-87f0-1e8c700b9b96.xhtml)，*安装和配置 Horizon 7 - 第 1 部分*。如下图所示：
- en: '![](img/440f748e-c50c-452e-ba1c-ba9769a7f309.png)'
  id: totrans-272
  prefs: []
  type: TYPE_IMG
  zh: '![](img/440f748e-c50c-452e-ba1c-ba9769a7f309.png)'
- en: 'If you click the down arrow on the GPU Profile box (**7**), you will see a
    list of the supported GRID profiles you can apply to this desktop. You can select
    the required profile from the list, based on the graphics requirements of the
    virtual desktop machines, and the users that will use it:'
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你点击 GPU 配置框（**7**）上的下拉箭头，你将看到支持的 GRID 配置文件列表，你可以根据虚拟桌面机器的图形需求和用户来选择所需的配置文件：
- en: '![](img/8c816dea-52f0-4c2e-bc6d-85e06e6fd0d8.png)'
  id: totrans-274
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8c816dea-52f0-4c2e-bc6d-85e06e6fd0d8.png)'
- en: With these steps complete, you can now complete the build steps to update the
    BIOS settings before we move on to installing the guest operating system and optimizing
    it.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些步骤后，你可以继续执行构建步骤，以在安装客户操作系统并进行优化之前更新 BIOS 设置。
- en: Installing the operating system for GPU-enabled desktops
  id: totrans-276
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为启用 GPU 的桌面安装操作系统
- en: In the example lab, we are going to build a Windows 10 virtual desktop machine
    to deliver high-end graphics. To install the operating system, follow the steps
    described in the *Installing the guest operating system* section under the *Creating
    a Windows 10 Virtual Desktop Machine* section of this chapter, but with one difference.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 在示例实验室中，我们将构建一台 Windows 10 虚拟桌面机器，以提供高端图形功能。要安装操作系统，请按照本章 *创建 Windows 10 虚拟桌面机器*
    部分下的 *安装客户操作系统* 部分中描述的步骤进行，但有一个区别。
- en: 'After you have installed the Horizon Agent, you need to install the NVIDIA
    drivers on the virtual desktop machine. The drivers can be downloaded from the
    following link: [https://www.nvidia.com/Download/index.aspx?lang=en-us](https://www.nvidia.com/Download/index.aspx?lang=en-us).'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 Horizon Agent 后，你需要在虚拟桌面机器上安装 NVIDIA 驱动程序。驱动程序可以从以下链接下载：[https://www.nvidia.com/Download/index.aspx?lang=en-us](https://www.nvidia.com/Download/index.aspx?lang=en-us)。
- en: 'From here, you can select the correct graphics card for your needs, as shown
    in the following screenshot:'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 从这里，你可以根据需要选择正确的显卡，如下图所示：
- en: '![](img/6cb0c92c-5998-437a-a2be-70a1028ef2c6.png)'
  id: totrans-280
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6cb0c92c-5998-437a-a2be-70a1028ef2c6.png)'
- en: One thing to note is that when you install the NVIDIA driver software, make
    sure that you select all the components to be installed and don't use the express
    option. Express will miss out some of the key components that need to be run in
    a virtual desktop machine.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 需要注意的是，当你安装 NVIDIA 驱动程序软件时，确保选择安装所有组件，而不是使用快速选项。快速选项会遗漏一些需要在虚拟桌面机器中运行的关键组件。
- en: 'Once you have the drivers installed, completed the operating system setup by
    installing any additional applications, and then performed the optimization steps,
    it''s probably worth checking that the graphics card has been installed correctly.
    Do this by checking the device manager of the virtual desktop machine, as shown
    in the following screenshot:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你安装了驱动程序，完成操作系统设置并安装了任何附加应用程序，之后执行优化步骤，最好检查显卡是否正确安装。通过查看虚拟桌面机器的设备管理器来完成此操作，如下图所示：
- en: '![](img/6a7e7cb9-1655-45aa-9fae-f6d3015b558f.png)'
  id: totrans-283
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6a7e7cb9-1655-45aa-9fae-f6d3015b558f.png)'
- en: You should now have a GPU-enabled virtual desktop image ready to be prepared
    for delivery to end users.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你应该已经准备好了一个启用了 GPU 的虚拟桌面镜像，可以为最终用户交付做准备。
- en: Completing the GPU-enabled desktop build
  id: totrans-285
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 完成 GPU 启用的桌面构建
- en: 'With the operating system now built and the NVIDIA components installed, you
    can follow the remaining tasks to complete the build. These are all covered in
    the previous section and are listed as follows:'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 在操作系统已经构建并安装了 NVIDIA 组件后，你可以继续完成剩余的任务以完成构建。所有这些任务在前面的章节中都有介绍，并列出如下：
- en: Installing VMware Tools
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 VMware Tools
- en: Installing applications for the parent image
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为母镜像安装应用程序
- en: Installing the Horizon View Agent
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 Horizon View Agent
- en: Optimizing the guest operating system
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 优化客操作系统
- en: Post-optimization tasks
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 优化后的任务
- en: Once these tasks are complete, you will now have three virtual desktop machines
    built to use as the parent image, ready to create new virtual desktop machines
    to deliver to your end users.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些任务后，你将拥有三个虚拟桌面机器，作为母镜像使用，准备创建新的虚拟桌面机器并交付给最终用户。
- en: Before we look at the final preparation steps, we are going to create one final
    virtual desktop machine, this time using a Linux-based operating system.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 在查看最终准备步骤之前，我们将创建一个最后的虚拟桌面机器，这次使用基于 Linux 的操作系统。
- en: Creating a Linux virtual desktop machine
  id: totrans-294
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建 Linux 虚拟桌面机器
- en: The final virtual desktop that we are going to build is for a Linux operating
    system, and for this example, CentOS is going to be the Linux distribution that
    is used.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 我们要构建的最后一台虚拟桌面是用于 Linux 操作系统的，本例中使用的 Linux 发行版是 CentOS。
- en: The process is almost the same as for installing a Windows-based operating system;
    however, there are some differences when it comes to installing the Horizon Agent.
    The process starts with creating the virtual desktop machine itself.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 该过程与安装 Windows 操作系统几乎相同；但是，在安装 Horizon Agent 时会有一些差异。过程从创建虚拟桌面机器本身开始。
- en: Like with creating the previous virtual desktop machine, the first thing we
    need to do is build and configure the actual virtual desktop machine on the vCenter
    server. This will define the virtual hardware configuration.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 和创建之前的虚拟桌面机器一样，我们首先需要在 vCenter 服务器上构建和配置实际的虚拟桌面机器。这将定义虚拟硬件配置。
- en: 'As we mentioned previously, the process is identical to the one we followed
    for Windows 7 and Windows 10, and so we are going to cover the tasks and just
    highlight specific screenshots that are different:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们之前提到的，过程与我们为 Windows 7 和 Windows 10 所遵循的相同，因此我们将介绍任务并仅突出显示不同的截图：
- en: 'Follow the steps we described previously for the Windows 7 build, up to the
    point where you get to Select a name and folder, as shown in the following screenshot:'
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照我们之前描述的 Windows 7 构建步骤进行，直到你进入“选择名称和文件夹”步骤，如下图所示：
- en: '![](img/e3a18c75-bbd0-468e-b204-84431cd23f5d.png)'
  id: totrans-300
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e3a18c75-bbd0-468e-b204-84431cd23f5d.png)'
- en: In the Virtual machine name box (**1**), type in a name for the new virtual
    desktop machine. In the example lab, this is called `CentOS Linux Desktop`.
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在虚拟机名称框 (**1**) 中，输入新虚拟桌面机器的名称。在示例实验室中，这台机器被称为 `CentOS Linux Desktop`。
- en: Then, in the Select a location for the virtual machine section, click to highlight
    the datacenter where you want this virtual machine to be created. In the example
    lab, this machine is going to be created in the datacenter called PVO's Datacenter
    (**2**).
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，在选择虚拟机位置的部分，点击突出显示你希望创建此虚拟机的机房位置。在本示例实验室中，这台机器将被创建在名为PVO's Datacenter（**2**）的机房中。
- en: 'Click the NEXT button to continue with the build process, as described in the
    Windows 7 build, until you get to the **S****elect a guest OS** screen, as shown
    in the following screenshot:'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击NEXT按钮继续构建过程，按照Windows 7构建中描述的步骤，直到你到达**选择来宾操作系统**界面，如下图所示：
- en: '![](img/409dc135-6349-4338-b99a-d9a09db8e712.png)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![](img/409dc135-6349-4338-b99a-d9a09db8e712.png)'
- en: The next step is to choose the operating system for the virtual desktop machine.
    In the example, this is the second virtual desktop machine that will be used as
    the gold image template for Windows 10.
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是为虚拟桌面机器选择操作系统。在本例中，这是第二台虚拟桌面机器，将用作Windows 10的金像模板。
- en: From the Guest OS Family box, click the arrow for the dropdown menu (**10**)
    and select Linux. Then, from the Guest OS Version box, click the arrow for the
    dropdown menu (**11**) and select CentOS 7 (64-bit). The guest OS selection is
    important to get right as it determines which drivers get installed when VMware
    Tools is installed on the virtual desktop.
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“来宾操作系统系列”框中，点击下拉菜单的箭头（**10**）并选择Linux。然后，在“来宾操作系统版本”框中，点击下拉菜单的箭头（**11**）并选择CentOS
    7（64位）。正确选择来宾操作系统非常重要，因为它决定了VMware Tools安装时将安装哪些驱动程序。
- en: 'Click the NEXT button to continue with the build, process as described in the
    Windows 7 build, until you get to the Select File screen, as shown in the following
    screenshot:'
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击NEXT按钮继续构建过程，按照Windows 7构建中描述的步骤，直到你到达选择文件界面，如下图所示：
- en: '![](img/f8312a4e-62b9-4693-986a-ff15f2750900.png)'
  id: totrans-308
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f8312a4e-62b9-4693-986a-ff15f2750900.png)'
- en: Expand the datastore1 (**5**), and then click on the `ISO Images` folder (**6**).
    Then, click to select the OS that is going to be installed on this virtual desktop
    machine. In this example, we are going to install Windows 10, so click on the
    CentOS-7-x86_64-DVD-1511.iso option (**7**). You may have your ISO images stored
    in a different location, so just follow this as a guide while using your folder
    locations.
  id: totrans-309
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开datastore1（**5**），然后点击`ISO Images`文件夹（**6**）。接着，点击选择将要安装到此虚拟桌面机器上的操作系统。在本例中，我们将安装Windows
    10，因此点击CentOS-7-x86_64-DVD-1511.iso选项（**7**）。你可能将ISO镜像存储在其他位置，因此请按照此示例操作，并根据你的文件夹位置进行选择。
- en: Click the OK button to return to the virtual hardware screen and continue with
    the build process, as we described previously. With the virtual desktop machine
    now built and configured, it's time to power it on and continue the build process.
    Navigate to the virtual desktop machine in the inventory. You should see an entry
    called CentOS Linux Desktop.
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“OK”按钮返回虚拟硬件屏幕，并继续之前描述的构建过程。现在虚拟桌面机器已经构建并配置完成，是时候启动它并继续构建过程了。进入虚拟桌面机器的清单中。你应该会看到一个名为CentOS
    Linux Desktop的条目。
- en: Highlight the virtual desktop machine called CentOS Linux Desktop, right-click
    it, and from the contextual menu that's now shown, click on Power and then click
    on Power On.
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 高亮选择名为CentOS Linux Desktop的虚拟桌面机器，右键单击它，在弹出的上下文菜单中点击“电源”，然后点击“开机”。
- en: The virtual desktop machine will now power on and boot into the BIOS setup screen,
    as that's what we configured to happen on the next boot. Any subsequent bootups
    will boot as normal into the operating system once it's installed.
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在虚拟桌面机器将启动并进入BIOS设置界面，因为这是我们配置的下一次启动行为。一旦操作系统安装完成，后续启动将正常进入操作系统。
- en: In the next section, we will make the configuration changes to the virtual desktop
    machines.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分，我们将对虚拟桌面机器进行配置更改。
- en: Completing the Linux virtual desktop build
  id: totrans-314
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 完成Linux虚拟桌面构建
- en: 'Like with the Windows 7 and Windows 10 virtual desktop machine, you need to
    power on the newly created Linux virtual desktop machine and finish the configuration.
    This consists of the following tasks:'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 与Windows 7和Windows 10虚拟桌面机器一样，你需要启动新创建的Linux虚拟桌面机器并完成配置。此过程包括以下任务：
- en: Updating the virtual desktop machine BIOS
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新虚拟桌面机器的BIOS
- en: Installing the guest operating system (Windows 10)
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装来宾操作系统（Windows 10）
- en: Installing VMware Tools
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装VMware Tools
- en: Installing applications for the parent image
  id: totrans-319
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为母镜像安装应用程序
- en: Installing the Horizon Agent (see the following)
  id: totrans-320
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装Horizon Agent（见下文）
- en: Optimizing the guest operating system
  id: totrans-321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 优化客户操作系统
- en: Completing post-optimization tasks
  id: totrans-322
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完成后优化任务
- en: Now that we have completed all the build tasks, all that remains is releasing
    the IP address and then clearing up any temporary files, browser history, and
    so on. Once we have finished these, power off the virtual desktop machine, which
    is ready so that we can prepare the image as our virtual desktop machine template.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经完成了所有的构建任务，剩下的就是释放 IP 地址，然后清理临时文件、浏览器历史记录等。完成这些后，关闭虚拟桌面机器，它已经准备好，可以作为我们的虚拟桌面机器模板进行使用。
- en: Installing the Horizon Agent
  id: totrans-324
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Horizon Agent
- en: 'Now, we can install the Horizon View Agent. The installation process is a little
    different than previous installations, as this is a Linux-based operating system:'
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以安装 Horizon View Agent。安装过程与之前的安装略有不同，因为这是基于 Linux 的操作系统：
- en: You can either download the Horizon Agent for the Linux installer from the VMware
    download website by using the Linux desktop or from the example lab since the
    installer was copied onto the Linux desktop using WinSCP.
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以通过使用 Linux 桌面从 VMware 下载网站下载 Linux 安装程序，或者从示例实验室下载，因为安装程序已经通过 WinSCP 复制到
    Linux 桌面上。
- en: 'The `.tar` file called `VMware-horizonagent-linux-x86_64-7.0.0-3617131.tar.gz`
    (**1**) is copied and then extracted to get the installer, as shown in the following
    screenshot:'
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`.tar` 文件 `VMware-horizonagent-linux-x86_64-7.0.0-3617131.tar.gz` (**1**) 被复制并提取，以获取安装程序，如下图所示：'
- en: '![](img/1c07e942-5ea5-4e1c-8663-a603e7f9f11d.png)'
  id: totrans-328
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1c07e942-5ea5-4e1c-8663-a603e7f9f11d.png)'
- en: With the software extracted, the next task is to run the installer script.
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提取完软件后，接下来的任务是运行安装脚本。
- en: 'From the desktop of the Linux virtual desktop, open a Terminal session by clicking
    Applications (**3**), Favourites (**4**), and then Terminal (**5**), as shown
    in the following screenshot:'
  id: totrans-330
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Linux 虚拟桌面的桌面，点击应用程序 (**3**)，收藏 (**4**)，然后选择终端 (**5**) 打开一个终端会话，如下图所示：
- en: '![](img/6048c9f4-142e-4457-b486-a6f5f034ced8.png)'
  id: totrans-331
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6048c9f4-142e-4457-b486-a6f5f034ced8.png)'
- en: 'Once you have an open terminal session, change to the directory of where the
    VMware Agent software was extracted to, as shown in the following screenshot:'
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开终端会话后，切换到 VMware Agent 软件提取目录，如下图所示：
- en: '![](img/bd9d0c5a-7103-4a8c-9e78-c1714981f040.png)'
  id: totrans-333
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bd9d0c5a-7103-4a8c-9e78-c1714981f040.png)'
- en: 'Next, launch the installer script using the following syntax and options:'
  id: totrans-334
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下语法和选项启动安装脚本：
- en: '[PRE1]'
  id: totrans-335
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The switch options are as follows:'
  id: totrans-336
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 切换选项如下：
- en: '`-b`: The fully qualified name of the connection server for the agent to register
    with'
  id: totrans-337
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-b`：要注册的连接服务器的完全限定名称'
- en: '`-d:` The name of your domain'
  id: totrans-338
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-d:`：您的域名'
- en: '`-u`: The username of the account that has privileges to register with the
    connection server'
  id: totrans-339
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-u`：具有注册权限的帐户用户名'
- en: '`-p`: The password for the account'
  id: totrans-340
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-p`：帐户密码'
- en: 'When the installer script launches, you will first see the EULA message. At
    the bottom of the screen, you will see the `Are you sure you want to install linux
    agent y/n?` prompt, as shown in the following screenshot:'
  id: totrans-341
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当安装脚本启动时，您将首先看到 EULA 信息。在屏幕底部，您将看到 `Are you sure you want to install linux agent
    y/n?` 提示，如下图所示：
- en: '![](img/d56af974-cc4a-4d97-b511-843228b1cdbc.png)'
  id: totrans-342
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d56af974-cc4a-4d97-b511-843228b1cdbc.png)'
- en: 'Type *Y* and then press *Enter*. Once completed, you will see the following
    screenshot:'
  id: totrans-343
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入 *Y* 然后按 *Enter*。完成后，您将看到以下截图：
- en: '![](img/5ba4dcfd-c4d9-40d2-83de-ba797f6de012.png)'
  id: totrans-344
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5ba4dcfd-c4d9-40d2-83de-ba797f6de012.png)'
- en: The Horizon Agent for Linux has now been successfully installed. Restart the
    virtual desktop machine to complete the installation.
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: Horizon Agent for Linux 现在已经成功安装。请重启虚拟桌面机器以完成安装。
- en: Optimizing the guest operating system
  id: totrans-346
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 优化客户操作系统
- en: Unlike Windows-based operating systems, there is no automated optimization tool
    available; however, you should still look at optimizing the image by switching
    off any tasks or applications that take up unnecessary resources, such as disk
    I/O or CPU cycles. You also need to ensure that you configure the operating system
    to work with the Active Directory authentication.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 与基于 Windows 的操作系统不同，Linux 系统没有自动优化工具可用；然而，您仍然应考虑通过关闭占用不必要资源的任务或应用程序来优化镜像，例如磁盘
    I/O 或 CPU 周期。您还需要确保配置操作系统以与 Active Directory 身份验证兼容。
- en: With the desktop images now built, we can now prepare them so that we can deliver
    them to the end users.
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 现在镜像已经构建完成，我们可以准备这些镜像以便将其交付给最终用户。
- en: Preparing virtual desktops for delivery
  id: totrans-349
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备虚拟桌面以便交付
- en: Now that we have our fully optimized virtual desktop machine parent images that
    can be used by Horizon View, the next stage of the process is to prepare them
    for delivery to the end users.
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经拥有了完全优化的虚拟桌面机器父镜像，可以供 Horizon View 使用，下一阶段是将这些镜像准备好以交付给最终用户。
- en: There are two different ways in which a desktop needs to be prepared, depending
    on whether you are using a Full Clone desktop or a Linked/Instant Clone desktop.
    Full Clones will use a VM template to create virtual desktop machines, while Linked/Instant
    Clones will use a snapshot to create virtual desktop machines.
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 桌面准备有两种不同的方式，取决于你是使用完整克隆桌面，还是使用链接/即时克隆桌面。完整克隆将使用虚拟机模板来创建虚拟桌面机器，而链接/即时克隆将使用快照来创建虚拟桌面机器。
- en: Pool design – a quick overview
  id: totrans-352
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 池设计——快速概览
- en: We will cover creating desktop pools in more detail in [Chapter 8](d44c9a7b-bcae-4758-a857-197be388a4be.xhtml),
    *Configuring and Managing Desktop Pools – Part 1*, but, for now, let's just have
    a quick overview of the basics around pool design and where the images that we
    created in this chapter are going to be used.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在[第8章](d44c9a7b-bcae-4758-a857-197be388a4be.xhtml)中更详细地介绍桌面池的创建，*配置和管理桌面池
    - 第一部分*，但现在，我们先快速概览一下池设计的基础知识，以及我们在本章中创建的镜像将如何使用。
- en: 'You will typically have a desktop pool for each type of virtual desktop machine
    you want to deliver, probably categorized by use case or department. In this chapter,
    we have built several different types of virtual desktop machines that will be
    used in the following desktop pools:'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，你会为每种类型的虚拟桌面机器创建一个桌面池，通常按使用场景或部门分类。在本章中，我们已构建了几种不同类型的虚拟桌面机器，这些虚拟桌面机器将在以下桌面池中使用：
- en: '**Windows 7**: This is to be used as a non-persistent, linked clone-built desktop'
  id: totrans-355
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows 7**：这将作为非持久性的链接克隆构建的桌面使用'
- en: '**Windows 10**: This is to be used as a dedicated full clone with a hardware-enabled
    GPU'
  id: totrans-356
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows 10**：这将作为带硬件启用 GPU 的专用完整克隆使用'
- en: '**Windows 10**: This is to be used as a non-persistent instant clone-built
    desktop'
  id: totrans-357
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows 10**：这将作为非持久性的即时克隆构建的桌面使用'
- en: '**CentOS 7:** This is to be used as a persistent Linux desktop'
  id: totrans-358
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**CentOS 7**：这将作为持久性的 Linux 桌面使用'
- en: As we have Linked Clone, Full Clone, and Instant Clone desktops, the preparation
    method for each is different. We will cover this in the following sections.
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们有链接克隆、完整克隆和即时克隆桌面，每种桌面的准备方法不同。我们将在接下来的章节中介绍这些内容。
- en: Creating a snapshot for linked clones
  id: totrans-360
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为链接克隆创建快照
- en: 'The first virtual desktop machine we are going to prepare for delivery is for
    the Windows 7 non-persistent, linked clone virtual desktop machine. To prepare
    this image for delivery, we will need to take a snapshot of the virtual desktop
    machine using vCenter and the vSphere web client. Once you have taken the snapshot,
    it can then be used by the View Administrator to create a new desktop pool for
    virtual desktop machines, which is built using Linked Clones. It will be used
    to create the replica in View Composer:'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将为交付准备的第一台虚拟桌面机器是 Windows 7 非持久性链接克隆虚拟桌面机器。为了准备这个镜像进行交付，我们需要使用 vCenter 和 vSphere
    Web Client 对虚拟桌面机器进行快照。完成快照后，View 管理员可以使用它创建一个新的桌面池，虚拟桌面机器将基于链接克隆构建。它将用于在 View
    Composer 中创建副本：
- en: To create the snapshot, log into the vSphere Web Client and navigate to the
    Windows 7 Gold Image virtual desktop machine (**1)**, ensuring that it's powered
    off before you do this.
  id: totrans-362
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要创建快照，请登录 vSphere Web Client，导航至 Windows 7 金像机虚拟桌面机器（**1)**），确保在操作之前该虚拟机已关闭。
- en: 'Click on the virtual desktop machine to highlight it, right-click it, and from
    the menu that pops up, click on Snapshots (**2**), and then select the option
    for Take Snapshot… (**3**), as shown in the following screenshot:'
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击虚拟桌面机器以选中它，右键单击它，在弹出的菜单中选择“快照”（**2**），然后选择“创建快照…”（**3**）选项，如下图所示：
- en: '![](img/6b0049d8-ecc1-444f-84d7-fa0beabfeaf4.png)'
  id: totrans-364
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6b0049d8-ecc1-444f-84d7-fa0beabfeaf4.png)'
- en: 'You will now see the Take VM Snapshot for Windows 7 Gold Image dialog box,
    as shown in the following screenshot:'
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你将看到“为 Windows 7 金像机创建虚拟机快照”对话框，如下图所示：
- en: '![](img/ec4202c0-a47e-4aa3-96b8-fd2444172cde.png)'
  id: totrans-366
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ec4202c0-a47e-4aa3-96b8-fd2444172cde.png)'
- en: Type in a name for this snapshot in the Name box (**4**). In the example lab,
    we have called this Windows 7 Gold Image. It's a best practice to call it something
    that you easily recognize, as you will search for this snapshot in the View administrator
    when configuring desktop pools. In the Description box (**5**), type in a description
    to describe the purpose of the snapshot in more detail.
  id: totrans-367
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在名称框（**4**）中输入此快照的名称。在示例实验室中，我们将其命名为 Windows 7 Gold Image。最佳实践是给它起一个容易识别的名称，因为你将在配置桌面池时，在视图管理员中搜索这个快照。在描述框（**5**）中，输入描述，以更详细地说明该快照的目的。
- en: Click the OK button when you are ready to create the snapshot.
  id: totrans-368
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当你准备好创建快照时，点击“确定”按钮。
- en: To check that the snapshot has been taken, navigate to the snapshot manager.
  id: totrans-369
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要检查是否已拍摄快照，请导航至快照管理器。
- en: 'To do this, from the vSphere Web Client, highlight the Windows 7 Gold Image
    virtual desktop machine (**6**). Right-click it, and from the menu that pops ups,
    click on Snapshots (**7**), and then select the option for Manage Snapshots (**8**),
    as shown in the following screenshot:'
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为此，在 vSphere Web 客户端中，选中 Windows 7 Gold Image 虚拟桌面机器（**6**）。右键点击它，在弹出的菜单中点击“快照”（**7**），然后选择“管理快照”选项（**8**），如下所示的截图：
- en: '![](img/33acff0b-af1e-4f70-a5ec-6ca56a1898f1.png)'
  id: totrans-371
  prefs: []
  type: TYPE_IMG
  zh: '![](img/33acff0b-af1e-4f70-a5ec-6ca56a1898f1.png)'
- en: 'You will now see the Manage Snapshots for the Windows 7 Gold Image dialog box,
    where you will be able to see the snapshot that was just taken, as shown in the
    following screenshot:'
  id: totrans-372
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你将看到 Windows 7 Gold Image 的管理快照对话框，在这里你可以看到刚刚拍摄的快照，如下图所示：
- en: '![](img/f06a6f65-99fa-470d-9911-c9acb35ea181.png)'
  id: totrans-373
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f06a6f65-99fa-470d-9911-c9acb35ea181.png)'
- en: You will also be able to see how many snapshots have been taken and also when
    they were created. This will help with version control of your parent images.
  id: totrans-374
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你还将能够看到已经拍摄了多少快照，并且能查看它们的创建时间。这有助于对父镜像进行版本控制。
- en: Click on DONE to close the Manage Snapshots screen.
  id: totrans-375
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“完成”关闭管理快照屏幕。
- en: You have now successfully taken a snapshot that can be used as the base image
    for all virtual desktop machines that are created from it. We will see how this
    snapshot is used to deliver the linked clone virtual desktop machines in [Chapter
    8](d44c9a7b-bcae-4758-a857-197be388a4be.xhtml), *Configuring and Managing Desktop
    Pools – Part 1*.
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在已经成功拍摄了一个快照，可以作为从中创建的所有虚拟桌面机器的基础镜像。我们将在[第8章](d44c9a7b-bcae-4758-a857-197be388a4be.xhtml)中看到如何使用这个快照交付链接克隆虚拟桌面机器，*配置与管理桌面池——第1部分*。
- en: Creating a snapshot for instant clones
  id: totrans-377
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建即时克隆的快照
- en: The next image to prepare for delivery is the Windows 10 image. As this is going
    to be used with an Instant Clone desktop pool, then the base image again starts
    off life as a snapshot of the parent image.
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个要准备交付的镜像是 Windows 10 镜像。由于它将用于即时克隆桌面池，因此基础镜像再次从父镜像的快照开始。
- en: To create the snapshot, follow the process as we described in the previous section
    to create a new snapshot, but this time use the Windows 10 Gold Image virtual
    desktop machine to create the snapshot.
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建该快照，请按照前一节中描述的过程创建新快照，但这次使用 Windows 10 Gold Image 虚拟桌面机器来创建快照。
- en: Creating a template for full clones
  id: totrans-380
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建完全克隆的模板
- en: For the second Windows 10 virtual desktop machine (with GPU-enabled), and the
    CentOS Linux virtual desktop machines, we are going to create persistent full
    clone virtual desktop machines. To do this, we are going to follow the tasks that
    were described in this section.
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 对于第二个 Windows 10 虚拟桌面机器（启用 GPU），以及 CentOS Linux 虚拟桌面机器，我们将创建持久的完全克隆虚拟桌面机器。为此，我们将按照本节中描述的任务进行操作。
- en: To use these virtual desktop machines as parent virtual desktop machines for
    full clone virtual desktops, you will first need to convert them into a virtual
    machine template or use the clone-to- template feature using vCenter and the vSphere
    Client.
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 要将这些虚拟桌面机器用作完全克隆虚拟桌面的父虚拟桌面机器，你需要先将它们转换为虚拟机模板，或使用 vCenter 和 vSphere 客户端的克隆到模板功能。
- en: Once that's completed, you can then use View Administrator to create new desktop
    pools (one for Linux and one for Windows 7 GPU), based on the virtual desktop
    machines, using these templates for each desktop pool.
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦完成，你可以使用视图管理员基于虚拟桌面机器创建新的桌面池（一个用于 Linux，另一个用于 Windows 7 GPU），并为每个桌面池使用这些模板。
- en: 'In the example lab, we will use the Windows 7 image. The process for creating
    the Linux virtual desktop machine is exactly the same, so repeat these instructions
    to create the template for that particular operating system. However, the pool
    configuration will be different for each one, as we will see in [Chapter 8](d44c9a7b-bcae-4758-a857-197be388a4be.xhtml),
    *Configuring and Managing Desktop Pools - Part 1*:'
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 在示例实验中，我们将使用 Windows 7 镜像。创建 Linux 虚拟桌面机器的过程完全相同，因此请重复这些步骤，为该操作系统创建模板。然而，每个模板的池配置会有所不同，正如我们在[第
    8 章](d44c9a7b-bcae-4758-a857-197be388a4be.xhtml)《配置和管理桌面池 - 第 1 部分》中所看到的，*配置和管理桌面池
    - 第 1 部分*：
- en: To create the snapshot, log into the vSphere Web Client and navigate to the
    Windows 10 Gold Image virtual desktop machine (**1**), ensuring that it's powered
    off.
  id: totrans-385
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要创建快照，请登录 vSphere Web Client，并导航到 Windows 10 Gold Image 虚拟桌面机器（**1**），确保该机器已关闭电源。
- en: 'Click on the virtual desktop machine to highlight it, right-click it, and from
    the menu that pops ups, click on Clone (**2**), and then select the option for
    Clone to Template… (**3**), as shown in the following screenshot:'
  id: totrans-386
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击虚拟桌面机器以突出显示它，右键单击，从弹出的菜单中点击 Clone（**2**），然后选择 Clone to Template…（**3**）选项，如下图所示：
- en: '![](img/70f36549-cc27-4f88-b754-4deb984329ea.png)'
  id: totrans-387
  prefs: []
  type: TYPE_IMG
  zh: '![](img/70f36549-cc27-4f88-b754-4deb984329ea.png)'
- en: You will now see the Windows 10 Gold Image – Clone Virtual Machine to Template
    configuration dialog box.
  id: totrans-388
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您将看到 Windows 10 Gold Image – Clone 虚拟机到模板的配置对话框。
- en: In the VM template name box (**4**), type in a name for the template. In the
    example lab, this is called Windows 10 Gold Image Template.
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在虚拟机模板名称框（**4**）中，输入模板的名称。在示例实验中，此模板称为 Windows 10 Gold Image Template。
- en: 'Then, in the Select a location for the template section, click to highlight
    the datacenter where you want this virtual machine to be created (**6**). In the
    example lab, this machine is going to be created in the datacenter called PVO''s
    Datacenter, as shown in the following screenshot:'
  id: totrans-390
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，在选择模板的位置部分，点击以突出显示您希望创建虚拟机的那个数据中心（**6**）。在示例实验中，这台机器将被创建在名为 PVO's Datacenter
    的数据中心，如下图所示：
- en: '![](img/29de83ab-2701-4079-a755-dc2341a779a6.png)'
  id: totrans-391
  prefs: []
  type: TYPE_IMG
  zh: '![](img/29de83ab-2701-4079-a755-dc2341a779a6.png)'
- en: Click the NEXT button to continue.
  id: totrans-392
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 NEXT 按钮继续。
- en: You will now see the Select a compute resource screen. Expand the datacenter
    called PVO's Datacenter and then click on the ESXi host server you want to host
    this template on. In the example lab, `esx-1.pvolab.com` is going to be the host
    server.
  id: totrans-393
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在将看到选择计算资源屏幕。展开名为 PVO's Datacenter 的数据中心，然后点击您希望托管此模板的 ESXi 主机服务器。在示例实验中，`esx-1.pvolab.com`
    将作为托管服务器。
- en: Click the NEXT button to continue.
  id: totrans-394
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 NEXT 按钮继续。
- en: You will now see the Select storage screen. Select the datastore where this
    template will be stored. In the example lab, the template is stored on VM Datastore.
  id: totrans-395
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在将看到选择存储屏幕。选择存储此模板的数据存储库。在示例实验中，模板存储在 VM Datastore 上。
- en: Click the NEXT button to continue. You will now see the Ready to complete screen.
  id: totrans-396
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 NEXT 按钮继续。您现在将看到“准备完成”屏幕。
- en: Click the FINISH button to complete the configuration and create the virtual
    desktop machine template for Windows 10.
  id: totrans-397
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 FINISH 按钮以完成配置，并创建 Windows 10 的虚拟桌面机器模板。
- en: 'You have successfully created a template that can be used as the parent image
    to create a new virtual desktop machine. Repeat the same process and create a
    template for the Linux desktop virtual machine, and call the template CentOS Linux
    Desktop Template. Once completed, if you navigate to the VMs and templates view
    in vCenter, you will see the following:'
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 您已成功创建一个模板，可以作为父镜像用于创建新的虚拟桌面机器。重复相同的过程，为 Linux 桌面虚拟机创建模板，并将该模板命名为 CentOS Linux
    Desktop Template。完成后，如果您导航到 vCenter 中的虚拟机和模板视图，您将看到以下内容：
- en: '![](img/ebaba054-2cb8-4f3a-9fde-f4a53a19b5d5.png)'
  id: totrans-399
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ebaba054-2cb8-4f3a-9fde-f4a53a19b5d5.png)'
- en: We will use these templates in [Chapter 8](d44c9a7b-bcae-4758-a857-197be388a4be.xhtml),
    *Configuring and Managing Desktop Pools – Part 1*, when we create the desktop
    pools.
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在[第 8 章](d44c9a7b-bcae-4758-a857-197be388a4be.xhtml)《配置和管理桌面池 – 第 1 部分》中使用这些模板，创建桌面池时。
- en: Summary
  id: totrans-401
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we have built several virtual desktop machine images that will
    act as the parent images from which all the virtual desktop machines in the environment
    will be created from.
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们已构建了多个虚拟桌面机器镜像，这些镜像将作为所有虚拟桌面机器的父镜像。
- en: To build and configure the virtual desktop machines, we outlined and followed
    a process. This process is started by creating the virtual hardware containers,
    installing the guest operating systems, installing the Horizon-specific components,
    optimizing them to run as Horizon virtual desktop machines, and then finally preparing
    them by creating either templates or snapshots that are ready to be used to create
    virtual desktop machines that are going to be delivered to the end users.
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: 为了构建和配置虚拟桌面机器，我们制定并遵循了一个流程。这个流程从创建虚拟硬件容器、安装客户操作系统、安装特定于Horizon的组件、优化它们以作为Horizon虚拟桌面机器运行开始，最后通过创建模板或快照来准备它们，这些模板或快照将用于创建将交付给最终用户的虚拟桌面机器。
- en: In the next chapter, we are going to start looking at how to configure and manage
    desktop pools.
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章，我们将开始了解如何配置和管理桌面池。
