- en: Chapter 1. Installing VCM
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章 安装VCM
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下内容：
- en: Preparing our VCM deployment – installing SQL
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备我们的VCM部署 – 安装SQL
- en: Preparing our VCM deployment – installing and configuring IIS
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备我们的VCM部署 – 安装和配置IIS
- en: Preparing our VCM deployment – configuring SSRS
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备我们的VCM部署 – 配置SSRS
- en: Preparing our VCM deployment – installing other prerequisites
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备我们的VCM部署 – 安装其他先决条件
- en: Installing VCM – single-tier deployment
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装VCM – 单层部署
- en: Installing VCM – two-tier deployment
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装VCM – 双层部署
- en: Installing VCM – three-tier deployment
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装VCM – 三层部署
- en: VCM post-installation tasks – database fine-tuning
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VCM安装后任务 – 数据库微调
- en: Introduction
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: What is **vRealize Configuration Manager** (**VCM**) and what it can do for
    you?
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 什么是**vRealize Configuration Manager**（**VCM**），它能为你做些什么？
- en: vRealize Configuration Manager is a complete configuration management solution
    provided by VMware. This is a part of the vRealize Operations suite along with
    **vRealize Operations Manager**, **vRealize Hyperic**, and **vRealize Infrastructure
    Navigator**, to name a few. Being a part of the suite, VCM is responsible for
    compliance and patch management, these being its core functionalities.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: vRealize配置管理器是VMware提供的完整配置管理解决方案。这是vRealize Operations套件的一部分，包括**vRealize Operations
    Manager**、**vRealize Hyperic**和**vRealize Infrastructure Navigator**等。作为该套件的一部分，VCM负责合规性和补丁管理，这也是它的核心功能。
- en: VCM is a tool that collects data automatically from managed machines, which
    may be running Windows or Unix, and virtualization tools such as **vCenter**, **vShield**,
    and **vCloud Director**, and based on that data, VCM can perform compliance checks
    and help you manage your virtual machines from the console.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: VCM是一个自动从受管机器收集数据的工具，这些机器可以运行Windows或Unix系统，以及虚拟化工具如**vCenter**、**vShield**和**vCloud
    Director**等。基于这些数据，VCM可以执行合规性检查并帮助你通过控制台管理虚拟机。
- en: VCM can perform the patching of managed machines, which may either be physical
    or virtual, and Windows and many flavors of Unix/Linux are supported, such as
    **Red Hat Enterprise Linux** (**RHEL**), **SUSE**, **CentOS**, and **Mac OS**.
    To patch these operating systems, we need a RHEL server acting as a patch repository.
    For non-windows servers, this RHEL patch repository downloads the patches, and
    all the managed machines can come and download them over HTTP, HTTPS, FTP, or
    NFS. VCM can patch all the supported versions of Windows.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: VCM可以执行受管机器的补丁管理，这些机器可以是物理或虚拟的，并且支持Windows和多种Unix/Linux版本，如**Red Hat Enterprise
    Linux**（**RHEL**）、**SUSE**、**CentOS**和**Mac OS**。为了对这些操作系统进行补丁更新，我们需要一台RHEL服务器作为补丁仓库。对于非Windows服务器，这个RHEL补丁仓库会下载补丁，所有受管机器可以通过HTTP、HTTPS、FTP或NFS下载它们。VCM可以对所有支持的Windows版本进行补丁更新。
- en: You can download various compliance packs created by VMware and others. Just
    download and import them, and they will be ready for use with your managed machines.
    The packages include but are not limited to security best practices developed
    by the **Defense Information Systems Agency** (**DISA**), the **National Institute
    of Standards and Technology** (**NIST**), the **Center for Internet Security**
    (**CIS**); regulatory mandates such as **Sarbanes-Oxley** (**SOX**), the **Payment
    Card Industry** (**PCI**) standard, the **Health Insurance Portability and Accountability
    Act** (**HIPAA**), and the **Federal Information Security Management Act** (**FISMA**);
    and hardening guidelines from VMware and Microsoft.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以下载VMware和其他组织创建的各种合规性包。只需下载并导入它们，它们就可以与你的受管机器一起使用。这些包包括但不限于**国防信息系统局**（**DISA**）、**国家标准与技术研究院**（**NIST**）、**互联网安全中心**（**CIS**）开发的安全最佳实践；**萨班斯-奥克斯利法案**（**SOX**）、**支付卡行业**（**PCI**）标准、**健康保险流通与问责法案**（**HIPAA**）、以及**联邦信息安全管理法案**（**FISMA**）等法规要求；以及来自VMware和微软的强化指南。
- en: You not only can check the compliance of your infrastructure but also enforce
    it to enhance your compliance score. Enforcing compliance means VCM can make necessary
    changes to the server to make it compliant.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 你不仅可以检查基础设施的合规性，还可以强制执行它以提升你的合规性评分。强制执行合规性意味着VCM可以对服务器进行必要的更改，使其符合合规要求。
- en: This does not limit you from creating your own rules and compliance templates;
    you can either create a completely new rule or combine rules from various rulesets
    provided by VMware.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 这并不限制你创建自己的规则和合规模板；你可以创建一个全新的规则，或者结合VMware提供的多个规则集中的规则。
- en: VCM can be used to install an operating system on bare metal, or you can deploy
    a virtual machine. You can use VCM to deploy applications on managed machines,
    which is limited to Windows. With features such as **VCM Remote Client**, you
    can manage communication and management mechanisms for mobile Windows machines
    as they connect to and disconnect from the network.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: VCM 可以用于在裸金属上安装操作系统，或者你可以部署虚拟机。你可以使用 VCM 在托管机器上部署应用程序，且此功能仅限于 Windows。通过 **VCM
    远程客户端** 等功能，你可以管理移动 Windows 机器的通信和管理机制，帮助它们连接和断开网络。
- en: With the **vRealize Operations** (**vROps**) **Manager** Management Pack, you
    can push the compliance score of managed virtual machines to the vROps console.
    vROps is a monitoring solution from VMware used to monitor virtual infrastructure;
    pushing the compliance score to the console gives us the view of the infrastructure
    under one console. Also, if required, an alert can be configured if the score
    goes beyond a certain limit.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 **vRealize Operations**（**vROps**）**管理器**管理包，你可以将托管虚拟机的合规性评分推送到 vROps 控制台。vROps
    是 VMware 提供的监控解决方案，用于监控虚拟基础设施；将合规性评分推送到控制台，可以让我们在一个控制台下查看基础设施。同时，如果需要，可以配置警报，当评分超过某个限制时触发。
- en: Along with all this, we can use VCM to manage **Active Directory**. VCM for
    Active Directory collects Active Directory objects across domains and forests
    and displays them through a single console. The information is consolidated and
    organized under the Active Directory slider, allowing you to view your Active
    Directory structure, troubleshoot issues, detect changes, and ensure compliance.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 除此之外，我们还可以使用 VCM 管理 **Active Directory**。VCM for Active Directory 可以跨域和森林收集
    Active Directory 对象，并通过单一控制台显示它们。信息会被汇总并组织在 Active Directory 滑块下，让你查看 Active Directory
    结构、排查问题、检测变化，并确保合规性。
- en: Understanding VCM components
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解 VCM 组件
- en: 'VCM is an application composed of multiple components, as described in the
    following figure:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: VCM 是由多个组件组成的应用程序，如下图所示：
- en: '![Understanding VCM components](img/image_01_001.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![理解 VCM 组件](img/image_01_001.jpg)'
- en: The database server
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据库服务器
- en: The database server contains the `VCM`, `VCM_Coll`, `VCM_Raw`, and `VCM_UNIX`
    databases. Using a shared SQL Server instance is supported by VCM. However, VCM
    makes heavy use of SQL Server for query and transaction processing. You must ensure
    that you have or can add enough capacity to a shared SQL Server instance so that
    VCM and any other databases on the shared server do not experience poor performance.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 数据库服务器包含 `VCM`、`VCM_Coll`、`VCM_Raw` 和 `VCM_UNIX` 数据库。VCM 支持使用共享 SQL Server 实例。然而，VCM
    在查询和事务处理方面大量依赖 SQL Server。你必须确保你有足够的能力，或者可以向共享 SQL Server 实例添加足够的容量，以确保 VCM 及其他共享服务器上的数据库不会出现性能下降的情况。
- en: VCM operates with the Standard, Enterprise, or Datacenter editions of SQL Server.
    You must install the 64-bit SQL Server 2008 R2, 2012, or 2014 versions on the
    database server used by VCM.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: VCM 与 SQL Server 的标准版、企业版或数据中心版兼容。你必须在 VCM 使用的数据库服务器上安装 64 位 SQL Server 2008
    R2、2012 或 2014 版本。
- en: The SQL Server license must include **SQL Server Reporting Services** (**SSRS**),
    which is used by VCM for the reporting feature.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: SQL Server 许可证必须包括 **SQL Server Reporting Services**（**SSRS**），该服务被 VCM 用于报告功能。
- en: The VCM Collector server
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: VCM 收集器服务器
- en: The **VCM Collector** is a standalone application that can run even when no
    other VCM components are active. This is particularly useful in the case of scheduled
    collections, because it means the VCM Portal does not have to be up and running.
    The Collector has all the necessary information and capabilities to perform the
    requested functions. You can stop the Collector and still look at data as the
    UI does not interact directly with the collector service; instead, it communicates
    with various executables that are installed on the same machine as the Collector.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '**VCM 收集器**是一个独立的应用程序，即使其他 VCM 组件未激活，它仍然可以运行。这在定时收集的情况下特别有用，因为这意味着 VCM 门户不必保持运行。收集器拥有执行请求功能所需的所有信息和能力。你可以停止收集器，仍然查看数据，因为
    UI 不直接与收集器服务交互；相反，它通过与安装在与收集器相同机器上的各种可执行文件进行通信。'
- en: Windows patches will be hosted on the VCM Collector as per the default configuration.
    Linux patches will be handled by the **Standby Continuous Replication** (**SCR**)
    server. We will have a look at Linux patching in  [Chapter 3](ch03.html "Chapter 3. Linux
    Patching") , *Linux Patching*.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: Windows 补丁将在默认配置下托管在 VCM 收集器上。Linux 补丁将由 **备用连续复制**（**SCR**）服务器处理。我们将在 [第 3
    章](ch03.html "第 3 章。Linux 补丁") 中详细了解 Linux 补丁，*Linux 补丁*。
- en: Supported operating systems for installing the VCM Collector are Windows Server
    2008 R2, 2012, or 2012 R2\. The VCM Collector must be installed on a AD domain
    member.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 VCM Collector 的支持操作系统包括 Windows Server 2008 R2、2012 或 2012 R2。VCM Collector
    必须安装在 AD 域成员上。
- en: We will discuss the installation of the VCM Collector server in multiple recipes
    in this chapter.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本章中的多个食谱中讨论 VCM Collector 服务器的安装。
- en: The web server
  id: totrans-33
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Web 服务器
- en: The web server contains web applications such as IIS and SSRS, other services,
    and VCM software components. Before you install VCM, you must configure the web
    server. The Windows machine that hosts the web components must be running **Internet
    Information Services** (**IIS**) 7.5\. Supported operating systems to install
    the web server to are Windows Server 2008 R2, 2012, or 2012 R2.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: Web 服务器包含诸如 IIS 和 SSRS、其他服务以及 VCM 软件组件等 Web 应用程序。在安装 VCM 之前，必须配置 Web 服务器。托管
    Web 组件的 Windows 机器必须运行 **Internet 信息服务** (**IIS**) 7.5。支持安装 Web 服务器的操作系统包括 Windows
    Server 2008 R2、2012 或 2012 R2。
- en: We will discuss the installation and configuration of the web server in the
    *Preparing our VCM deployment - installing and configuring IIS* recipe.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在 *准备我们的 VCM 部署 - 安装并配置 IIS* 这一食谱中讨论 Web 服务器的安装和配置。
- en: The managing agent
  id: totrans-36
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 管理代理
- en: We need to install an agent to manage the machines through VCM. In the case
    of vCenter Server, vCloud Director, and vCloud Networking and Security Manager,
    VCM uses an intermediary **managing agent** for data collection. This intermediary
    collects data through the use of the vSphere VIMAPI, vCloud REST API, and vCloud
    Networking and Security Manager REST API, and it then passes it to VCM Server.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要安装代理来通过 VCM 管理这些机器。对于 vCenter Server、vCloud Director 和 vCloud Networking
    and Security Manager，VCM 使用中介 **管理代理** 来收集数据。此中介通过使用 vSphere VIMAPI、vCloud REST
    API 和 vCloud Networking and Security Manager REST API 收集数据，然后将其传递给 VCM Server。
- en: We need to install VCM agent 5.5 or higher on the system designated as being
    the managing agent. However, after the agent deployment, there is an additional
    step. Mutual two-way trust must be established with the system designated as the
    managing agent before the collection of any vCenter, vCloud Networking and Security,
    or vCloud Director data can be done.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要在指定为管理代理的系统上安装 VCM agent 5.5 或更高版本。然而，在代理部署之后，还需要进行一个额外步骤。在收集任何 vCenter、vCloud
    Networking and Security 或 vCloud Director 数据之前，必须与指定为管理代理的系统建立双向互信。
- en: The vCenter collection process via the managing agent is serial and very CPU
    intensive. For this reason, a separate managing agent is recommended for virtual
    infrastructures. If the number of vCenter or vCloud Server instances increases,
    the number of managing agents can be horizontally scaled.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 通过管理代理进行的 vCenter 收集过程是串行的，且非常消耗 CPU。基于这个原因，建议为虚拟基础设施使用单独的管理代理。如果 vCenter 或
    vCloud Server 实例的数量增加，可以水平扩展管理代理的数量。
- en: We will see this in action in the [Chapter 2](ch02.html "Chapter 2. Configuring
    VCM to Manage Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure*,
    in the *Configuring a managing agent machine for virtual environment management* recipe.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在 [第2章](ch02.html "第2章 配置 VCM 来管理您的基础架构")，*配置 VCM 来管理您的基础架构* 中，看到这一操作，内容来自
    *为虚拟环境管理配置管理代理机器* 这一食谱。
- en: The SCR Tool
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: SCR 工具
- en: To ensure that all patch dependencies are met when VCM deploys the patches,
    the SCR Tool downloads all of the necessary patches (except for patches that have
    been superseded by newer patches). VCM patching handles all the dependencies when
    the patches are deployed. If the patch was available when the SCR Tool was installed
    and configured, it would have been downloaded. If the patch was not available
    when the SCR Tool was last synchronized, it would not have been downloaded and
    hence not available for distribution to managed machines. If the patch is still
    available from the OS vendor, it will be available for download using the SCR
    Tool patch-replication process. The SCR server does not share or sync the details
    of the patches downloaded by it; VCM gets the details of the released patches
    from [http://www.vmware.com/](http://www.vmware.com/) . So, we need to make sure
    is fully synced with vendors such as RHEL or SUSE and has all the patches downloaded
    in the repository.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 为确保在 VCM 部署补丁时所有补丁依赖项都得到满足，SCR 工具会下载所有必要的补丁（除了已经被更新补丁替代的补丁）。VCM 补丁管理在补丁部署时处理所有依赖项。如果补丁在
    SCR 工具安装和配置时可用，它将被下载。如果补丁在 SCR 工具最后同步时不可用，则不会下载，因此也无法分发到管理的机器上。如果补丁仍然由操作系统供应商提供，它将通过
    SCR 工具的补丁复制过程进行下载。SCR 服务器不会共享或同步它下载的补丁详细信息；VCM 从 [http://www.vmware.com/](http://www.vmware.com/)
    获取已发布补丁的详细信息。因此，我们需要确保与供应商如 RHEL 或 SUSE 完全同步，并且已将所有补丁下载到存储库中。
- en: The SCR Tool is not used to run patch assessments or deployments. It also does
    not assess the machine configuration or the downloaded patch content that is used
    for patch deployment. That job is done by the VCM server.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: SCR 工具不用于运行补丁评估或部署。它也不会评估机器配置或用于补丁部署的下载补丁内容。这个任务由 VCM 服务器完成。
- en: The SCR Tool downloads the patch signature files and OS vendor patch content
    from the **content distribution network** (**CDN**) and downloads subscription-only
    content from the OS vendor's content web sites. We will look at this in more detail
    in  [Chapter 3](ch03.html "Chapter 3. Linux Patching") , *Linux Patching*.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: SCR 工具从**内容分发网络**（**CDN**）下载补丁签名文件和操作系统供应商的补丁内容，并从操作系统供应商的内容网站下载仅限订阅内容。我们将在
    [第 3 章](ch03.html "第 3 章. Linux 补丁")中更详细地介绍 *Linux 补丁*。
- en: Distributed VCM deployment
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 分布式 VCM 部署
- en: Depending upon the size of the infrastructure you manage, VCM can be deployed
    in multiple ways.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您管理的基础架构的规模，VCM 可以以多种方式部署。
- en: 'If you plan to install VCM on two or three tiers, check out this link for how
    to size your hardware environment: [http://kb.vmware.com/kb/2033894](http://kb.vmware.com/kb/2033894)
    .'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您计划在两层或三层上安装 VCM，请查看此链接了解如何调整硬件环境： [http://kb.vmware.com/kb/2033894](http://kb.vmware.com/kb/2033894)。
- en: Single-tier installation
  id: totrans-48
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 单层安装
- en: A single-tier installation can be used by organizations smaller than 2,000 managed
    servers and POC/pilot engagements.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 单层安装适用于管理服务器少于 2,000 台的组织以及 POC/试点项目。
- en: 'All the components, such as the VCM Database server, web server, and the VCM
    Collector, are installed on the same server, like this:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 所有组件，如 VCM 数据库服务器、Web 服务器和 VCM 收集器，均安装在同一台服务器上，如下所示：
- en: '![Single-tier installation](img/image_01_002.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![单层安装](img/image_01_002.jpg)'
- en: Two-tier installation
  id: totrans-52
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 双层安装
- en: A two-tier installation can be used by organizations where the number of managed
    servers is between 2,000 and 5,000.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 双层安装适用于管理服务器数量在 2,000 到 5,000 之间的组织。
- en: 'In this deployment, we have the application server (Collector) and IIS on one
    machine, SQL Server instance on the other machine, and SSRS on either system,
    as shown here:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个部署中，我们将应用服务器（收集器）和 IIS 放在一台机器上，将 SQL Server 实例放在另一台机器上，SSRS 可以安装在任一系统上，如下所示：
- en: '![Two-tier installation](img/image_01_003.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![双层安装](img/image_01_003.jpg)'
- en: Three-tier installation
  id: totrans-56
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 三层安装
- en: 'A three-tier installation can be used by organizations with more than 5,000
    servers. It is constructed in this manner:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 三层安装适用于管理服务器数量超过 5,000 台的组织。其结构如下所示：
- en: The application server (Collector), IIS, and SQL Server instance are on separate
    machines
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用服务器（收集器）、IIS 和 SQL Server 实例分别安装在不同的机器上。
- en: SSRS can be either on the IIS or the SQL Server system
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SSRS 可以安装在 IIS 或 SQL Server 系统上。
- en: 'This figure depicts a three-tier installation:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 该图展示了一个三层安装：
- en: '![Three-tier installation](img/image_01_004.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![三层安装](img/image_01_004.jpg)'
- en: Understanding the requirements of VCM
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 了解 VCM 的要求
- en: Every software application we install has its own requirements for successful
    installation and functioning. VCM is no different. In this section, we will discuss
    the hardware and software requirements for getting VCM deployed.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 每个安装的软件应用程序都有其成功安装和运行所需的要求，VCM 也不例外。在本节中，我们将讨论部署 VCM 所需的硬件和软件要求。
- en: Software requirements
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 软件要求
- en: 'We need the following software to install VCM:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 VCM 所需的软件：
- en: '| **Software component** | **Versions supported** |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '| **软件组件** | **支持的版本** |'
- en: '| Operating system for VCM Web, Collector, and Database server | Windows Server
    2008 R2, Windows Server 2012, or Windows Server 2012 R2 |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '| VCM Web、Collector 和数据库服务器的操作系统 | Windows Server 2008 R2、Windows Server 2012
    或 Windows Server 2012 R2 |'
- en: '| SQL version | SQL Server 2008 R2, 2012, or 2014 Standard, Enterprise, or
    Datacenter Edition (64-bit) |'
  id: totrans-68
  prefs: []
  type: TYPE_TB
  zh: '| SQL 版本 | SQL Server 2008 R2、2012 或 2014 标准版、企业版或数据中心版（64 位） |'
- en: '| SSRS version | SQL Server 2008 R2, 2012, or 2014 Reporting Services |'
  id: totrans-69
  prefs: []
  type: TYPE_TB
  zh: '| SSRS 版本 | SQL Server 2008 R2、2012 或 2014 报告服务 |'
- en: '| OS for SCR* | RHEL 7.x |'
  id: totrans-70
  prefs: []
  type: TYPE_TB
  zh: '| SCR 的操作系统* | RHEL 7.x |'
- en: '(*SCR: software content repository. It is used to download and store patches
    for non-Windows operating systems)'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: (*SCR：软件内容库，用于下载和存储非 Windows 操作系统的补丁)
- en: Minimum hardware requirements
  id: totrans-72
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 最低硬件要求
- en: 'Hosting the VCM has some hardware requirements as well, which are provided
    in the following tables:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 托管 VCM 也有一些硬件要求，这些要求在以下表格中提供：
- en: 'Minimum hardware requirements to support 1-1,000 managed machines:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 支持 1-1,000 台管理机器的最低硬件要求：
- en: '|  | **Single Tier** | **2-Tier****Database** | **2-Tier****Web/Collector**
    | **3-Tier****Database** | **3-Tier****Web** | **3-Tier****Collector** |'
  id: totrans-75
  prefs: []
  type: TYPE_TB
  zh: '|  | **单层** | **2层数据库** | **2层 Web/Collector** | **3层数据库** | **3层 Web** | **3层
    Collector** |'
- en: '| **RAM** | 8 GB | 8 GB | 4 GB | 8 GB | 4 GB | 4 GB |'
  id: totrans-76
  prefs: []
  type: TYPE_TB
  zh: '| **RAM** | 8 GB | 8 GB | 4 GB | 8 GB | 4 GB | 4 GB |'
- en: '| **Processor** | Dual Xeon or single dual-core 2 GHz | Dual Xeon or single
    dual-core 2 GHz | Dual Xeon or single dual-core 2 GHz | Dual Xeon or single dual-core
    2 GHz | Single 2-GHz processor | Single 2-GHz processor |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
  zh: '| **处理器** | 双 Xeon 或单个双核 2 GHz | 双 Xeon 或单个双核 2 GHz | 双 Xeon 或单个双核 2 GHz |
    双 Xeon 或单个双核 2 GHz | 单个 2 GHz 处理器 | 单个 2 GHz 处理器 |'
- en: 'Minimum hardware requirements to support 1,001-2,000 managed machines:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 支持 1,001-2,000 台管理机器的最低硬件要求：
- en: '|  | **Single Tier** | **2-Tier****Database** | **2-Tier****Web/Collector**
    | **3-Tier****Database** | **3-Tier****Web** | **3-Tier****Collector** |'
  id: totrans-79
  prefs: []
  type: TYPE_TB
  zh: '|  | **单层** | **2层数据库** | **2层 Web/Collector** | **3层数据库** | **3层 Web** | **3层
    Collector** |'
- en: '| **RAM** | 12 GB | 12 GB | 4 GB | 12 GB | 4 GB | 4 GB |'
  id: totrans-80
  prefs: []
  type: TYPE_TB
  zh: '| **RAM** | 12 GB | 12 GB | 4 GB | 12 GB | 4 GB | 4 GB |'
- en: '| **Processor** | Quad Xeon or two dual-core 2 GHz | Quad Xeon or two dual-core
    2 GHz | Quad Xeon or two dual-core 2 GHz | Quad Xeon or two dual-core 2 GHz |
    Single 2-GHz processor | Dual Xeon or single dual-core 2 GHz |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
  zh: '| **处理器** | 四路 Xeon 或两个双核 2 GHz | 四路 Xeon 或两个双核 2 GHz | 四路 Xeon 或两个双核 2 GHz
    | 四路 Xeon 或两个双核 2 GHz | 单个 2 GHz 处理器 | 双 Xeon 或单个双核 2 GHz |'
- en: 'Minimum hardware requirements to support 2,001-5,000 managed machines:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 支持 2,001-5,000 台管理机器的最低硬件要求：
- en: '|  | **Single Tier** | **2-Tier****Database** | **2-Tier****Web/Collector**
    | **3-Tier****Database** | **3-Tier****Web** | **3-Tier****Collector** |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
  zh: '|  | **单层** | **2层数据库** | **2层 Web/Collector** | **3层数据库** | **3层 Web** | **3层
    Collector** |'
- en: '| **RAM** | 16 GB | 16 GB | 8 GB | 16 GB | 4 GB | 8 GB |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
  zh: '| **RAM** | 16 GB | 16 GB | 8 GB | 16 GB | 4 GB | 8 GB |'
- en: '| **Processor** | Eight-way Xeon or four dual-core 2 GHz | Eight-way Xeon or
    four dual-core 2 GHz | Dual Xeon or single dual-core 2 GHz | Eight-way Xeon or
    four dual-core 2 GHz | Single 2-GHz processor | Dual Xeon or single dual-core
    2 GHz |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '| **处理器** | 八路 Xeon 或四个双核 2 GHz | 八路 Xeon 或四个双核 2 GHz | 双 Xeon 或单个双核 2 GHz
    | 八路 Xeon 或四个双核 2 GHz | 单个 2 GHz 处理器 | 双 Xeon 或单个双核 2 GHz |'
- en: Service accounts
  id: totrans-86
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 服务账户
- en: Let's look at the list of accounts and the privileges required for VCM to work
    properly.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看 VCM 正常工作所需的账户和权限列表。
- en: You can reuse an account for more than one function, but dedicated accounts
    might be useful for troubleshooting and tracking.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以将一个账户重用于多个功能，但为故障排除和追踪创建专用账户可能会更有帮助。
- en: The Collector, VCM Remote, Tomcat, and vSphere Client VCM plug-ins can be used
    from the same account. If you reuse one account, apply the permissions shown for
    the Collector service account.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: Collector、VCM Remote、Tomcat 和 vSphere Client VCM 插件可以使用同一个账户。如果你重复使用一个账户，请应用为
    Collector 服务账户显示的权限。
- en: '| **Role** | **Permissions** | **Description** |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
  zh: '| **角色** | **权限** | **描述** |'
- en: '| VCM Administrator | (During installation only) Local admin access on the
    VCM Collector and Web server.(During installation only) System admin access to
    the VCM SQL Server instance on the database server.This must be an interactive
    account and separate from the other accounts in this table. | The VCM Administrator
    account is the login account used when installing VCM and possibly post installation
    for the administration and maintenance of VCM. |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
  zh: '| VCM 管理员 | （仅在安装期间）VCM 收集器和 Web 服务器的本地管理员权限。（仅在安装期间）数据库服务器上 VCM SQL Server
    实例的系统管理员权限。此帐户必须是交互式帐户，并且与表中其他帐户分开。 | VCM 管理员帐户是安装 VCM 时使用的登录帐户，并且可能会在安装后用于 VCM
    的管理和维护。 |'
- en: '| VCM Collector Service | Local admin access on the VCM Collector and Web servers.This
    is not a domain administrator or interactive user account. | The Collector service
    account is the account under which the VCM Collector, VCM Database, and VCM Patch
    Management services run. During installation, VCM configures the Collector service
    account with DBO and bulk insert rights in SQL Server for the VCM databases. |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
  zh: '| VCM 收集器服务 | VCM 收集器和 Web 服务器的本地管理员权限。这不是域管理员或交互式用户帐户。 | 收集器服务帐户是 VCM 收集器、VCM
    数据库和 VCM 补丁管理服务运行的帐户。在安装期间，VCM 会为收集器服务帐户配置 SQL Server 中 VCM 数据库的 DBO 和批量插入权限。
    |'
- en: '| VCM Remote Service | Local admin access on the VCM Web server.This is not
    a domain administrator or interactive user account. | The VCM Remote service account
    is used by the VCM Remote client for anonymous access to the VCM Remote virtual
    directory on the Web server. |'
  id: totrans-93
  prefs: []
  type: TYPE_TB
  zh: '| VCM 远程服务 | VCM Web 服务器的本地管理员权限。这不是域管理员或交互式用户帐户。 | VCM 远程服务帐户由 VCM 远程客户端用于对
    Web 服务器上 VCM 远程虚拟目录的匿名访问。 |'
- en: '| VCM Tomcat Service | Local admin access on the VCM Database server.Public
    access on VCM databases.This is not an interactive user account. | The Tomcat
    service account serves as the VCM application programming interface for SQL login
    to the E12VCM Database server. |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '| VCM Tomcat 服务 | VCM 数据库服务器的本地管理员权限。对 VCM 数据库的公共访问权限。这不是一个交互式用户帐户。 | Tomcat
    服务帐户作为 VCM 应用程序编程接口，用于 SQL 登录到 E12VCM 数据库服务器。 |'
- en: '| vSphere Client VCM Plug-in Service | Local admin on the VCM Web server.This
    is not an interactive user account. | The **vSphere Client VCM Plug-In** (**VCVP**)
    account provides vSphere access over HTTP to VCM managed machines.The **VCM Advanced
    Installation** option prompts for credentials for the VCVP account. Typical Installation
    does not. |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '| vSphere 客户端 VCM 插件服务 | VCM Web 服务器的本地管理员权限。这不是交互式用户帐户。 | **vSphere 客户端 VCM
    插件**（**VCVP**）帐户通过 HTTP 提供 vSphere 访问到 VCM 管理的机器。**VCM 高级安装**选项会提示输入 VCVP 帐户的凭据。典型安装不会提示。
    |'
- en: '| VCM Default Network Authority | Local admin access on Windows machines that
    VCM collects from using the DCOM agent.Depending on the enterprise size and for
    convenience, a separate, domain administrator account with rights on the Windows
    machines.This is not an interactive user account. | The network authority account
    is for data collection from DCOM Windows machines. |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
  zh: '| VCM 默认网络权限 | 对使用 DCOM 代理从 VCM 收集数据的 Windows 机器的本地管理员权限。根据企业规模和便利性，可能需要一个具有
    Windows 机器权限的独立域管理员帐户。这不是一个交互式用户帐户。 | 网络权限帐户用于从 DCOM Windows 机器收集数据。 |'
- en: Tip
  id: totrans-97
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**IMPORTANT**: Never use the service accounts for logging in to the VCM Console
    or for any other purpose. Logging in to VCM using a service account can lead to
    unexpected or inconsistent behavior. Services that use the same account as a logged-in
    user might modify the logged-in user''s current role or machine group or log the
    user out of the system.'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '**重要**：绝不要使用服务帐户登录 VCM 控制台或用于任何其他目的。使用服务帐户登录 VCM 可能会导致意外或不一致的行为。使用相同帐户作为已登录用户的服务可能会修改已登录用户的当前角色或机器组，或者将用户从系统中注销。
    |'
- en: 'If for some reason you don''t get a local admin account to be used as the NAA,
    you need at least the privileges mentioned in the following table. For VCM to
    make changes on licensed machines, such as rebooting and managing audit settings,
    the account used to interact with the VCM agent needs the following permissions
    and rights on each licensed machine:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 如果由于某种原因您无法获得用于 NAA 的本地管理员帐户，您至少需要以下表中提到的权限。为了让 VCM 对许可的机器进行更改，例如重启和管理审计设置，与
    VCM 代理交互的帐户需要在每台许可机器上具有以下权限和权利：
- en: '| **Action** | **Required user right** |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
  zh: '| **操作** | **所需用户权限** |'
- en: '| Emergency repair disk | Back up files and directories |'
  id: totrans-101
  prefs: []
  type: TYPE_TB
  zh: '| 紧急修复磁盘 | 备份文件和目录 |'
- en: '| NTFS permissions | Manage auditing and security logs |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
  zh: '| NTFS 权限 | 管理审计和安全日志 |'
- en: '| Reboot | Shut down the system, force shutdown from a remote system |'
  id: totrans-103
  prefs: []
  type: TYPE_TB
  zh: '| 重启 | 关闭系统，强制从远程系统关机 |'
- en: '| Services change | Shut down the system |'
  id: totrans-104
  prefs: []
  type: TYPE_TB
  zh: '| 服务变更 | 关闭系统 |'
- en: '| Share permissions | Manage auditing and security logs |'
  id: totrans-105
  prefs: []
  type: TYPE_TB
  zh: '| 共享权限 | 管理审计和安全日志 |'
- en: 'To check or set the appropriate rights on each machine, you can use either
    of these:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 要检查或设置每台机器的适当权限，你可以使用以下任何一种方法：
- en: '**Local security policy**: **Security Settings** | **Local Policies** | **User
    Rights Assignment**'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**本地安全策略**: **安全设置** | **本地策略** | **用户权限分配**'
- en: '**Group Policy plugin**: **Local Computer Policy** | **Computer Configuration**
    | **Windows Settings** | **Security Settings** | **Local Policies** | **User Rights
    Assignment**'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**组策略插件**: **本地计算机策略** | **计算机配置** | **Windows 设置** | **安全设置** | **本地策略** |
    **用户权限分配**'
- en: VCM databases
  id: totrans-109
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: VCM 数据库
- en: There are four databases created by VCM; there is a list of them along with
    their purpose in the following table. The databases are created when we deploy
    VCM using the installer.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: VCM 创建了四个数据库；下表列出了这些数据库及其用途。部署 VCM 时，安装程序会创建这些数据库。
- en: Tip
  id: totrans-111
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Make sure autogrowth is enabled on the databases.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 确保数据库启用了自动增长。
- en: '| **Database name** | **Minimum size** | **Purpose** |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| **数据库名称** | **最小大小** | **用途** |'
- en: '| `VCM` | 3 GB | This contains configuration data for the VCM application itself,
    collected data from Window systems and virtual infrastructure, change details
    from all systems, and results of patch and compliance assessments. The base name
    `VCM` is a default and may be changed. |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| `VCM` | 3 GB | 该数据库包含 VCM 应用程序本身的配置数据、来自 Windows 系统和虚拟基础设施的收集数据、所有系统的更改详细信息，以及补丁和合规性评估的结果。基本名称
    `VCM` 是默认的，可以更改。 |'
- en: '| `VCM_Coll` | 1 GB | This provides operational state information for the Collector
    service and is mainly used to track details of running jobs and the last contact
    state of managed client systems. |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| `VCM_Coll` | 1 GB | 该数据库提供 Collector 服务的操作状态信息，主要用于跟踪正在运行的作业和已管理客户端系统的最后联系状态。
    |'
- en: '| `VCM_Unix` | 1 GB | This contains the collected managed machine data gathered
    from any Linux, Unix, or Mac agents in the environment. |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| `VCM_Unix` | 1 GB | 该数据库包含从环境中的任何 Linux、Unix 或 Mac 代理收集的已管理机器数据。 |'
- en: '| `VCM_RAW` | 1 GB | To improve performance, this database temporarily holds
    collection data before it is transformed into the `VCM` and `VCM_UNIX` databases.
    The raw database should not be backed up or be included in maintenance plans.
    |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| `VCM_RAW` | 1 GB | 为了提高性能，该数据库临时存储收集的数据，直到这些数据被转换成 `VCM` 和 `VCM_UNIX` 数据库。原始数据库不应备份或包含在维护计划中。
    |'
- en: OSes supported by VCM
  id: totrans-118
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: VCM 支持的操作系统
- en: The list of OSes supported by VCM is as per the following table, but this is
    not a comprehensive list.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: VCM 支持的操作系统列表如下表所示，但这不是一个完整的列表。
- en: You can take a look at the *Hardware and Operating System Requirements for VCM
    Managed Machines* chapter of the *VMware vRealize Configuration Manager Installation
    Guide* ( [http://www.vmware.com/pdf/vrealize-configuration-manager-58-installation-guide.pdf](http://www.vmware.com/pdf/vrealize-configuration-manager-58-installation-guide.pdf)
    ) for the complete list.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以查看 *VMware vRealize Configuration Manager 安装指南* 中的 *VCM 管理机器的硬件和操作系统要求* 章节
    ([http://www.vmware.com/pdf/vrealize-configuration-manager-58-installation-guide.pdf](http://www.vmware.com/pdf/vrealize-configuration-manager-58-installation-guide.pdf))
    以获得完整的列表。
- en: '| **Supported operating system** | **Supported hardware platform** |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| **支持的操作系统** | **支持的硬件平台** |'
- en: '| Microsoft Windows Server 2003 SP2 | x86 and x64 |'
  id: totrans-122
  prefs: []
  type: TYPE_TB
  zh: '| Microsoft Windows Server 2003 SP2 | x86 和 x64 |'
- en: '| Microsoft Windows Server 2008 R2 Enterprise Gold | x64 |'
  id: totrans-123
  prefs: []
  type: TYPE_TB
  zh: '| Microsoft Windows Server 2008 R2 Enterprise Gold | x64 |'
- en: '| Microsoft Windows 7 Enterprise Gold | x86 and x64 |'
  id: totrans-124
  prefs: []
  type: TYPE_TB
  zh: '| Microsoft Windows 7 Enterprise Gold | x86 和 x64 |'
- en: '| Microsoft Windows 8.1 Enterprise | x86 and x64 |'
  id: totrans-125
  prefs: []
  type: TYPE_TB
  zh: '| Microsoft Windows 8.1 Enterprise | x86 和 x64 |'
- en: '| Microsoft Windows Server 2012 R2 Datacenter | x64 |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '| Microsoft Windows Server 2012 R2 Datacenter | x64 |'
- en: '| Red Hat Enterprise Linux 5.0-5.11, 6.0-6.5, and 7.0(x64) Server, Desktop
    with Workstation, and Advanced Platform | x86 and x64 |'
  id: totrans-127
  prefs: []
  type: TYPE_TB
  zh: '| Red Hat Enterprise Linux 5.0-5.11, 6.0-6.5, 和 7.0(x64) 服务器、桌面工作站及高级平台 | x86
    和 x64 |'
- en: '| SUSE Linux Enterprise Server (SLES) 10.0-10.2 (up to agent version 5.5.0
    only)SUSE Linux Enterprise Server (SLES) 10.3-10.4, 11.0-11.3, and 12 | x86 and
    x64 |'
  id: totrans-128
  prefs: []
  type: TYPE_TB
  zh: '| SUSE Linux Enterprise Server (SLES) 10.0-10.2（仅支持到代理版本 5.5.0）SUSE Linux Enterprise
    Server (SLES) 10.3-10.4, 11.0-11.3, 和 12 | x86 和 x64 |'
- en: '| Windows 10 | x86 and x64 |'
  id: totrans-129
  prefs: []
  type: TYPE_TB
  zh: '| Windows 10 | x86 和 x64 |'
- en: vRealize Configuration Manager port and protocol summary
  id: totrans-130
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: vRealize Configuration Manager 端口和协议概述
- en: 'The following table shows the port and protocol requirements for proper functioning
    in the environment:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 下表显示了环境中正确功能所需的端口和协议要求：
- en: '| **Source** | **Target** | **Port and protocol** | **Description** |'
  id: totrans-132
  prefs: []
  type: TYPE_TB
  zh: '| **来源** | **目标** | **端口和协议** | **描述** |'
- en: '| Managing agent | vCloud Management vCenter | HTTPS: 443 | The web service
    connection to the vCenter API.Valid credentials and certificate thumbprint are
    required. |'
  id: totrans-133
  prefs: []
  type: TYPE_TB
  zh: '| 管理代理 | vCloud 管理 vCenter | HTTPS：443 | 与 vCenter API 的 Web 服务连接。需要有效凭据和证书指纹。
    |'
- en: '| Managing agent | vCloud vCenter | HTTPS: 443 | The web service connection
    to the vCenter API.Valid credentials and certificate thumbprint are required.
    |'
  id: totrans-134
  prefs: []
  type: TYPE_TB
  zh: '| 管理代理 | vCloud vCenter | HTTPS：443 | 与 vCenter API 的 Web 服务连接。需要有效凭据和证书指纹。
    |'
- en: '| VCM Collector | VCM Database Server | SQL: 1433 | Windows authenticated connection.
    |'
  id: totrans-135
  prefs: []
  type: TYPE_TB
  zh: '| VCM 收集器 | VCM 数据库服务器 | SQL：1433 | Windows 身份验证连接。 |'
- en: '| VCM Collector | VCM Database Server | DCOM: 135 | DCOM is required between
    the Collector and the DB Server in a two-tier configuration so that the DB server
    can call back to the Collector at the end of various jobs. |'
  id: totrans-136
  prefs: []
  type: TYPE_TB
  zh: '| VCM 收集器 | VCM 数据库服务器 | DCOM：135 | 在两层配置中，收集器和数据库服务器之间需要 DCOM，以便数据库服务器在各种作业结束时回调到收集器。
    |'
- en: '| VCM Collector | VCM Database Server | SMB: TCP ports 139 and 445 | VCM creates
    a share to the DB server during installation. |'
  id: totrans-137
  prefs: []
  type: TYPE_TB
  zh: '| VCM 收集器 | VCM 数据库服务器 | SMB：TCP 端口 139 和 445 | VCM 在安装期间向数据库服务器创建共享。 |'
- en: '| VCM Collector | VCM Database Server | HTTP: 80 | An SSRS connection from
    VCM Server to the DB SSRS instance. |'
  id: totrans-138
  prefs: []
  type: TYPE_TB
  zh: '| VCM 收集器 | VCM 数据库服务器 | HTTP：80 | 从 VCM 服务器到 DB SSRS 实例的 SSRS 连接。 |'
- en: '| VCM Collector | VCM Database Server | ICMP | Login details are not sent to
    the agent.Mutual authentication is used and the agent runs under LocalSystem.
    Data is pulled back to the Collector over a new TLS session. |'
  id: totrans-139
  prefs: []
  type: TYPE_TB
  zh: '| VCM 收集器 | VCM 数据库服务器 | ICMP | 登录详细信息不会发送到代理。使用双向身份验证，代理在 LocalSystem 下运行。数据通过新的
    TLS 会话传回到收集器。 |'
- en: '| VCM Collector | Agent | HTTP: 26542 | Login details are not sent to the agent.Mutual
    authentication is used and the agent runs under LocalSystem. Data is pulled back
    to the Collector over a new TLS session. |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '| VCM 收集器 | 代理 | HTTP：26542 | 登录详细信息不会发送到代理。使用双向身份验证，代理在 LocalSystem 下运行。数据通过新的
    TLS 会话传回到收集器。 |'
- en: '| VCM Collector | Agent | ICMP | Login details are not sent to the agent.Mutual
    authentication is used and the agent runs under LocalSystem. Data is pulled back
    to the Collector over a new TLS session. |'
  id: totrans-141
  prefs: []
  type: TYPE_TB
  zh: '| VCM 收集器 | 代理 | ICMP | 登录详细信息不会发送到代理。使用双向身份验证，代理在 LocalSystem 下运行。数据通过新的 TLS
    会话传回到收集器。 |'
- en: '| VCM Collector | Agent | SMB: TCP ports 139 and 445 | This is a mapped driver
    for Windows patch downloads. |'
  id: totrans-142
  prefs: []
  type: TYPE_TB
  zh: '| VCM 收集器 | 代理 | SMB：TCP 端口 139 和 445 | 这是 Windows 补丁下载的映射驱动器。 |'
- en: '| Agent software | RedHat Patch Server | HTTPS: 443/80 | This depends on how
    you have configured Apache, which will be used to download patches from the patch
    repository. |'
  id: totrans-143
  prefs: []
  type: TYPE_TB
  zh: '| 代理软件 | RedHat 补丁服务器 | HTTPS：443/80 | 这取决于您如何配置 Apache，用于从补丁库下载补丁。 |'
- en: Licensing
  id: totrans-144
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 许可
- en: 'vRealize Operations is available with two license models:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: vRealize Operations 提供两种许可模型：
- en: '**Per processor with unlimited VMs**: For virtual environments with high consolidation
    ratios, vRealize Operations is available per processor as a part of VMware vRealize
    Suite, VMware vCloud Suite, and VMware vSphere with Operations Management.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**每个处理器带有无限 VM**：对于高共享比例的虚拟环境，vRealize Operations 作为 VMware vRealize Suite、VMware
    vCloud Suite 和 VMware vSphere with Operations Management 的一部分，按处理器提供。'
- en: '**Per virtual machine or physical server**: For virtual environments with low
    consolidation ratios, vRealize Operations is also available à la carte in 25 VM
    or OS instance license packs.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**每个虚拟机或物理服务器**：对于低共享比例的虚拟环境，vRealize Operations 还可以按照 25 VM 或 OS 实例许可包单独购买。'
- en: 'The new release, VCM 5.8.2, supports Hybrid Cloud Suite license keys, as VCM
    will not be part of vCloud Suite anymore. This keeps changing; you can contact
    VMware for current pricing details or check out more details here: [https://www.vmware.com/products/vrealize-operations/pricing](https://www.vmware.com/products/vrealize-operations/pricing)
    .'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 新版本 VCM 5.8.2 支持混合云套件许可密钥，因此 VCM 将不再是 vCloud Suite 的一部分。这些内容随时会变动；您可以联系 VMware
    获取当前定价详情或在此处查看更多详情：[https://www.vmware.com/products/vrealize-operations/pricing](https://www.vmware.com/products/vrealize-operations/pricing)。
- en: Preparing our VCM deployment - installing SQL
  id: totrans-149
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备我们的 VCM 部署 - 安装 SQL
- en: VCM requires four databases on a dedicated SQL system. In this recipe, we will
    learn how to correctly install the SQL Server component.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: VCM 需要专用 SQL 系统上的四个数据库。在本文中，我们将学习如何正确安装 SQL Server 组件。
- en: Getting ready
  id: totrans-151
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Depending upon the deployment type we choose, we will need either a dedicated
    SQL Server (two- and three-tier deployment) or we can use the Windows server used
    for the VCM Collector server (single-tier deployment).
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 根据我们选择的部署类型，我们需要一个专用 SQL Server（用于两层和三层部署），或者我们可以使用用于 VCM Collector 服务器的 Windows
    服务器（单层部署）。
- en: We will need an operating system-Windows Server 2012 (or better)-and SQL 2012.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要操作系统——Windows Server 2012（或更高版本）——和 SQL 2012。
- en: For proof of concept or testing purposes, you can use shared SQL; or else, use
    dedicated SQL.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 出于概念验证或测试目的，你可以使用共享 SQL；否则，使用专用 SQL。
- en: How to do it...
  id: totrans-155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: The steps to install SQL are the same for all the three types of VCM deployments–only
    the server will change depending upon the type of tier.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 SQL 的步骤在所有三种类型的 VCM 部署中都是相同的——只有服务器会根据层级类型的不同而变化。
- en: Note
  id: totrans-157
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: As this is not a dedicated guide to installing and configuring SQL, we will
    not include all the screenshots; if you need further help, consult your DBA team
    for detailed instructions.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这不是专门的 SQL 安装和配置指南，我们不会包括所有的屏幕截图；如果需要进一步的帮助，请咨询你的 DBA 团队以获取详细的指导。
- en: 'Follow these steps:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤操作：
- en: Start the SQL installer.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动 SQL 安装程序。
- en: Under the installation menu, select **New SQL Server standalone installation
    or add features to an existing installation**.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装菜单下，选择**新建 SQL Server 独立安装或为现有安装添加功能**。
- en: Make sure all the setup support rules have been passed.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保所有设置支持规则已通过。
- en: Ignore product update errors if you do not have an Internet connection.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果没有 Internet 连接，忽略产品更新错误。
- en: Enter the product key.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入产品密钥。
- en: Accept the EULA.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受最终用户许可协议（EULA）。
- en: Under **Setup Role**, select **SQL Server Feature Installation**.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**设置角色**下，选择**SQL Server 功能安装**。
- en: 'Select the following features:'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择以下功能：
- en: '**Instance Features**'
  id: totrans-168
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**实例功能**'
- en: '**Database Engine Service**'
  id: totrans-169
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库引擎服务**'
- en: '**Full-Text and Semantic Extractions for Search**'
  id: totrans-170
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**全文和语义提取用于搜索**'
- en: '**Reporting Service - Native**'
  id: totrans-171
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**报告服务 - 原生**'
- en: '**Shared Features**'
  id: totrans-172
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**共享功能**'
- en: '**Documentation Components**'
  id: totrans-173
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文档组件**'
- en: '**Management Tools - Basic**'
  id: totrans-174
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理工具 - 基本**'
- en: '**Management Tools - Complete**'
  id: totrans-175
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**管理工具 - 完整**'
- en: Choose the installation folder according to your server configuration.
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据你的服务器配置选择安装文件夹。
- en: Make sure all the installation rules have been passed.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保所有安装规则已通过。
- en: Go with the default instance and again change the installation folder location
    if required.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择默认实例，并在需要时更改安装文件夹位置。
- en: It is always better to use a service account to run SQL services, and you need
    to have a domain account if you will be installing a two- or three-tier VCM instance.
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用服务帐户来运行 SQL 服务总是更好的，如果你将安装一个两层或三层 VCM 实例，你需要一个域帐户。
- en: Note
  id: totrans-180
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: In a multi-tier VCM deployment, the database is on a different server, and we
    need a domain service account so that SQL can communicate over the network.
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在多层 VCM 部署中，数据库位于不同的服务器上，我们需要一个域服务帐户，以便 SQL 能够通过网络通信。
- en: Provide the correct service accounts to the SQL installation wizard.
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 提供正确的服务帐户给 SQL 安装向导。
- en: The collation setting supported by VCM is `SQL_Latin1_General_CP1_CI_AS`; make
    sure this is selected.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: VCM 支持的排序规则是`SQL_Latin1_General_CP1_CI_AS`；请确保选择此项。
- en: Add the SQL admin group from Active Directory. Depending on company policy,
    enable **Mixed** mode and provide the `SA` account with a password.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Active Directory 添加 SQL 管理员组。根据公司政策，启用**混合**模式并为`SA`帐户设置密码。
- en: For reporting services, we will be only installing SSRS and not configuring
    it.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于报告服务，我们只会安装 SSRS，而不会进行配置。
- en: Follow the wizard and install SQL.
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照向导步骤安装 SQL。
- en: How it works...
  id: totrans-187
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: SQL will host all the four databases required for VCM. We don't need to create
    or configure any database right now; they will be created when we install VCM.
    We will need special permissions for SQL Server, as previously stated in the *Service
    accounts* subsection.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: SQL 将托管 VCM 所需的所有四个数据库。我们现在不需要创建或配置任何数据库；它们将在安装 VCM 时创建。我们需要为 SQL Server 提供特殊权限，如前述的*服务帐户*小节中所述。
- en: Also, all activities such as compliance check and patch status for a machine
    are performed using the data available in the database, so this puts extra workload
    on the database, which highlights the need for a dedicated SQL Server. All the
    schedules are stored as SQL jobs in SQL, putting another layer of work pressure
    on the SQL Server.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，所有与机器相关的活动，如合规性检查和补丁状态检查，都是使用数据库中可用的数据来执行的，这增加了数据库的工作负载，突出了对专用 SQL Server
    的需求。所有计划任务都以 SQL 作业的形式存储在 SQL 中，这进一步增加了 SQL Server 的工作压力。
- en: VCM uses SSRS to host the reporting feature; we installed SSRS as well while
    deploying SQL, and in the following recipes we will configure it.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: VCM 使用 SSRS 托管报告功能；在部署 SQL 时我们也安装了 SSRS，接下来的教程中我们将对其进行配置。
- en: Preparing our VCM deployment - installing and configuring IIS
  id: totrans-191
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备我们的 VCM 部署 - 安装并配置 IIS
- en: Another important part after the SQL database is IIS. A VCM application is a
    web-based portal connected to a database, so all the actions are performed via
    the web interface, which needs IIS. In this recipe, we will install and configure
    IIS.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个重要的部分是 SQL 数据库之后的 IIS。VCM 应用程序是一个连接到数据库的基于 Web 的门户，因此所有操作都是通过 Web 界面执行的，这需要
    IIS。在本教程中，我们将安装并配置 IIS。
- en: Getting ready
  id: totrans-193
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: Again, depending upon the type of VCM deployment, you either need dedicated
    servers (two- or three-tier) or a single VCM server (single-tier) installation.
    We will need Windows Server 2012 R2 to start with the recipe.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，根据 VCM 部署的类型，您可能需要专用服务器（二层或三层）或单个 VCM 服务器（单层）安装。我们需要 Windows Server 2012
    R2 来开始此过程。
- en: As seen in the first diagram in this chapter (in the *Understanding VCM components*
    subsection) and the *Distributed VCM deployment* subsection, the placement of
    IIS changes according to the type of deployment.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 如本章第一张图（在 *理解 VCM 组件* 小节中）和 *分布式 VCM 部署* 小节所示，IIS 的位置根据部署类型而变化。
- en: How to do it...
  id: totrans-196
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: The web components of VCM Collector contain web applications such as IIS and
    SSRS, other services, and VCM software components. Before you install VCM, you
    must configure the web components of VCM Collector.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: VCM Collector 的 Web 组件包括 IIS 和 SSRS 等 Web 应用程序、其他服务和 VCM 软件组件。在安装 VCM 之前，必须先配置
    VCM Collector 的 Web 组件。
- en: Note
  id: totrans-198
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: We will cover the installation process on Windows 2012 R2\. Installation on
    Windows 2008 might differ.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将介绍在 Windows 2012 R2 上的安装过程。Windows 2008 上的安装可能有所不同。
- en: Installing IIS
  id: totrans-200
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装 IIS
- en: 'Follow these steps to install IIS:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤安装 IIS：
- en: Log in to the IIS server and launch **Server Manager**. Go to **Manage** |**Add
    roles and features**.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录 IIS 服务器并启动 **服务器管理器**。进入 **管理** | **添加角色和功能**。
- en: Add the **Web Server (IIS)** role.![Installing IIS](img/image_01_005.jpg)
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加 **Web 服务器（IIS）** 角色。 ![安装 IIS](img/image_01_005.jpg)
- en: Add the **.NET Framework 3.5** feature.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加 **.NET Framework 3.5** 特性。
- en: 'Add the following components:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加以下组件：
- en: '| **Sr. no.** | **Option** | **Action** |'
  id: totrans-206
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **序号** | **选项** | **操作** |'
- en: '| **1** | Common HTTP features | Static ContentDefault DocumentDirectory BrowsingHTTP
    ErrorsHTTP Redirection |'
  id: totrans-207
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **1** | 常见 HTTP 功能 | 静态内容默认文档目录浏览HTTP 错误HTTP 重定向 |'
- en: '| **2** | Application development | ASP.NET.NET Extensibility 3.5.NET Extensibility
    4.5ASPASP .NET 3.5ASP .NET 4.5ISAPI ExtensionsISAPI Filters |'
  id: totrans-208
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **2** | 应用开发 | ASP.NET.NET 扩展性 3.5.NET 扩展性 4.5ASPASP .NET 3.5ASP .NET 4.5ISAPI
    扩展ISAPI 过滤器 |'
- en: '| **3** | Health and diagnostics | HTTP LoggingLogging ToolsRequest MonitorTracing
    |'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **3** | 健康与诊断 | HTTP 日志记录工具请求监控追踪 |'
- en: '| **4** | Security | Basic AuthenticationWindows AuthenticationDigest AuthenticationURL
    AuthorizationRequest FilteringIP and Domain Restrictions |'
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **4** | 安全性 | 基本认证Windows 认证摘要认证URL 授权请求过滤IP 和域限制 |'
- en: '| **5** | Performance | Static Content CompressionDynamic Content Compression
    |'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **5** | 性能 | 静态内容压缩动态内容压缩 |'
- en: '| **6** | Management tools | IIS Management ConsoleIIS Management Scripts and
    ToolsManagement Service |'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **6** | 管理工具 | IIS 管理控制台IIS 管理脚本和工具管理服务 |'
- en: Provide a path to the Windows 2012 ISO if required.
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如有需要，提供 Windows 2012 ISO 的路径。
- en: Click on **Install** and let the installation begin; follow the wizard and make
    sure the installation is successful.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **安装**，让安装开始；按照向导完成安装，并确保安装成功。
- en: Configuring IIS
  id: totrans-215
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 配置 IIS
- en: 'Once IIS has been installed, we need to configure it:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装了 IIS，我们需要配置它：
- en: Click on **Start** and go to **All Programs** | **Administrative Tools** | **Internet
    Information Services (IIS) Manager**.
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **开始**，进入 **所有程序** | **管理工具** | **Internet 信息服务（IIS）管理器**。
- en: Expand **<server name>**, expand **Sites**, and click on **Default Web Site**.
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开**<服务器名称>**，展开**站点**，然后点击**默认网站**。
- en: In the **Actions** pane, under **Manage Web Site** and **Browse Web Site**,
    click on **Advanced Settings**.
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**操作**窗格中，点击**管理网站**和**浏览网站**下的**高级设置**。
- en: Expand connection's **Limits** and set **Connection Time-out (seconds)** to `3600`.
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开连接的**限制**并将**连接超时（秒）**设置为`3600`。
- en: Click on **OK**
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**
- en: '![Configuring IIS](img/5400_01_pg-22.jpg)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![配置 IIS](img/5400_01_pg-22.jpg)'
- en: Configuring the IIS 7.5 default website
  id: totrans-223
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 配置 IIS 7.5 默认网站
- en: IIS 7.5 provides a default website, which defines the default authentication
    settings for applications and virtual directories. Verify that the IIS 7.5 default
    website has the correct settings.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: IIS 7.5 提供了一个默认网站，用于定义应用程序和虚拟目录的默认身份验证设置。验证 IIS 7.5 默认网站是否具有正确的设置。
- en: 'Follow these steps to configure IIS:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤配置 IIS：
- en: Click on Start and go to **All Programs** | **Administrative Tools** | **Internet
    Information Services (IIS) Manager**.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击开始，进入**所有程序** | **管理工具** | **Internet 信息服务 (IIS) 管理器**。
- en: Expand **<server name>**, expand **Sites**, and click on **Default Web Site**.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开**<服务器名称>**，展开**站点**，然后点击**默认网站**。
- en: In the **Default Web Site** home pane, locate the IIS options.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**默认网站**的主页窗格中，找到 IIS 选项。
- en: 'Double click on **Authentication** and set the authentication settings as follows:'
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击**身份验证**并将身份验证设置如下：
- en: '| **Sr. no.** | **Option** | **Action** |'
  id: totrans-230
  prefs: []
  type: TYPE_TB
  zh: '| **序号** | **选项** | **操作** |'
- en: '| **1** | **Anonymous Authentication** | Set to **Disabled**. |'
  id: totrans-231
  prefs: []
  type: TYPE_TB
  zh: '| **1** | **匿名身份验证** | 设置为**禁用**。 |'
- en: '| **2** | **ASP.NET Impersonation** | Set to **Disabled**. |'
  id: totrans-232
  prefs: []
  type: TYPE_TB
  zh: '| **2** | **ASP.NET 假冒身份验证** | 设置为**禁用**。 |'
- en: '| **3** | **Basic Authentication** | Set to **Enabled**. |'
  id: totrans-233
  prefs: []
  type: TYPE_TB
  zh: '| **3** | **基本身份验证** | 设置为**启用**。 |'
- en: '| **4** | **Forms Authentication** | Set to **Disabled** |'
  id: totrans-234
  prefs: []
  type: TYPE_TB
  zh: '| **4** | **表单身份验证** | 设置为**禁用** |'
- en: 'Your screen should look like this:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 你的屏幕应该如下所示：
- en: '![Configuring the IIS 7.5 default website](img/5400_01_pg-23-1.jpg)'
  id: totrans-236
  prefs: []
  type: TYPE_IMG
  zh: '![配置 IIS 7.5 默认网站](img/5400_01_pg-23-1.jpg)'
- en: How it works...
  id: totrans-237
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: VCM uses IIS to host the web applications that present the data. The web applications
    relay the commands we give from the VCM console to the database, the operations
    are performed, and the end result is again presented on the console GUI. VCM creates
    multiple applications inside IIS that are required for VCM. `CMAppPool` and `CMServices`
    are IIS application pools used for VCM virtual directories and web services.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: VCM 使用 IIS 托管展示数据的 Web 应用程序。Web 应用程序将我们从 VCM 控制台发送的命令转发给数据库，操作执行后，最终结果会再次显示在控制台
    GUI 上。VCM 在 IIS 中创建多个应用程序，这些应用程序是 VCM 所需的。`CMAppPool` 和 `CMServices` 是 IIS 应用程序池，用于
    VCM 虚拟目录和 Web 服务。
- en: Preparing our VCM deployment - configuring SSRS
  id: totrans-239
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备我们的 VCM 部署 - 配置 SSRS
- en: SSRS is used by VCM for providing the reporting functionality.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: SSRS 被 VCM 用于提供报表功能。
- en: Getting ready
  id: totrans-241
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备中
- en: In this recipe, we will configure SSRS to be used by VCM; as this is not a dedicated
    SQL guide, it is recommended you consult your DBA team while configuring SSRS.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 在本配方中，我们将配置 SSRS 以供 VCM 使用；由于这不是一个专门的 SQL 指南，建议在配置 SSRS 时向 DBA 团队咨询。
- en: To avoid getting charged for multiple licenses of SQL, it is recommended you
    install SSRS on the same server as the database server, which is what we did when
    we installed SQL Server.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 为了避免因 SQL 的多重许可证收费，建议将 SSRS 安装在与数据库服务器相同的服务器上，这也是我们在安装 SQL Server 时所采取的做法。
- en: We will need SSRS installed on the database server before we start.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要在数据库服务器上安装 SSRS 才能开始。
- en: How to do it...
  id: totrans-245
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Connect to the database server with the service account credentials, launch
    **Reporting Service Configuration Manager**, and follow the wizard:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 使用服务账户凭据连接到数据库服务器，启动**报告服务配置管理器**，并按照向导操作：
- en: Connect to the SQL Server instance where the reporting service is installed.
    Provide the correct server name and instance.
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连接到安装了报告服务的 SQL Server 实例。提供正确的服务器名称和实例。
- en: On the **Service Account** page, in this case, use the same service account
    which will be used by the VCM service. Click on **Apply**.![How to do it...](img/image_01_008.jpg)
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**服务账户**页面，使用将用于 VCM 服务的相同服务账户。点击**应用**。![如何操作...](img/image_01_008.jpg)
- en: On the **Web Service URL** page, select port `80` and click on **Apply**.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**Web 服务 URL**页面，选择端口`80`并点击**应用**。
- en: 'Under **Database**, click on **Change Database** and follow another wizard
    to **Create a new report database**. It involves these steps:'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**数据库**下，点击**更改数据库**并按照向导**创建一个新的报告数据库**。这包括以下步骤：
- en: Select **Create a new report server database**.
  id: totrans-251
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**创建新的报告服务器数据库**。
- en: 'Under **Connect to the Database Server**, provide these values:'
  id: totrans-252
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**连接到数据库服务器**下，提供以下值：
- en: '**Server Name**: The SQL database server name'
  id: totrans-253
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**服务器名称**：SQL 数据库服务器的名称'
- en: '**Authentication Type**: **Current User - Integrated Security**'
  id: totrans-254
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**身份验证类型**：**当前用户 - 集成安全性**'
- en: Use the default database name and language.
  id: totrans-255
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用默认的数据库名称和语言。
- en: Under **Credentials**, use **Service Credentials**.
  id: totrans-256
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**凭据**下，使用**服务凭据**。
- en: Accept the summary, click on **Next** and then on **Finish** on the next page
    to complete the database creation.
  id: totrans-257
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受摘要，点击**下一步**，然后在下一页点击**完成**来完成数据库创建。
- en: For the **Report Manager URL** tab, select **Virtual Directory: **`Reports`
    and click on **Apply**.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于**报告管理器 URL**标签，选择**虚拟目录：**`Reports`，然后点击**应用**。
- en: We don't need the rest of the parameters for VCM; you can check with your DBA
    team if they need to configure them and, if so, what the best options for you
    are.
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 VCM 其余的参数我们不需要配置；你可以和你的数据库管理员（DBA）团队确认是否需要配置这些参数，如果需要，应该选择哪些最佳选项。
- en: Write down the URL (we will need this when we install VCM).
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 写下 URL（我们在安装 VCM 时需要用到这个）。
- en: How it works...
  id: totrans-261
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: The report manager and web service URLs will be provided when we install VCM
    and will then be used by VCM to present reports via its console.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装 VCM 时，会提供报告管理器和 Web 服务的 URL，VCM 将使用这些 URL 通过其控制台展示报告。
- en: When we install VCM, the installer will create default reports on the SSRS instance
    that will be accessed by users when they start using VCM.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们安装 VCM 时，安装程序会在 SSRS 实例上创建默认的报告，用户在开始使用 VCM 时会访问这些报告。
- en: Preparing our VCM deployment - installing other prerequisites
  id: totrans-264
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备 VCM 部署 - 安装其他先决条件
- en: There are a few other prerequisites that we need to install before we can actually
    start installing VCM. We will install them in this recipe.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们实际开始安装 VCM 之前，还有一些其他的先决条件需要安装。我们将在这个步骤中进行安装。
- en: Getting ready
  id: totrans-266
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: We need Internet access to download the following installers if they are not
    already available. We need to install them on all the servers in the VCM hierarchy.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这些安装程序尚未可用，我们需要访问互联网以下载它们。我们需要在 VCM 层级中的所有服务器上安装这些工具。
- en: We need to install them in the same sequence, or else they won't get installed.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要按顺序安装它们，否则它们将无法安装。
- en: 'The following links are used in this book; they might change if you change
    the SQL version, such as those of **SQL Native Client** and **SQL Command Line
    Utilities**:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了以下链接；如果你更换了 SQL 版本，这些链接可能会发生变化，例如**SQL Native Client**和**SQL 命令行工具**的链接：
- en: '| **Sr. no.** | **Description** | **Download location** |'
  id: totrans-270
  prefs: []
  type: TYPE_TB
  zh: '| **序号** | **描述** | **下载位置** |'
- en: '| **1** | SQL Native Client | [http://go.microsoft.com/fwlink/?LinkID=239648&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=239648&clcid=0x409)
    |'
  id: totrans-271
  prefs: []
  type: TYPE_TB
  zh: '| **1** | SQL Native Client | [http://go.microsoft.com/fwlink/?LinkID=239648&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=239648&clcid=0x409)
    |'
- en: '| **2** | SQL Command Line Utilities | [http://go.microsoft.com/fwlink/?LinkID=239650&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=239650&clcid=0x409)
    |'
  id: totrans-272
  prefs: []
  type: TYPE_TB
  zh: '| **2** | SQL 命令行工具 | [http://go.microsoft.com/fwlink/?LinkID=239650&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=239650&clcid=0x409)
    |'
- en: '| **3** | SQLXML 4.0 SP1 | [http://www.microsoft.com/en-us/download/details.aspx?id=30403](http://www.microsoft.com/en-us/download/details.aspx?id=30403)
    |'
  id: totrans-273
  prefs: []
  type: TYPE_TB
  zh: '| **3** | SQLXML 4.0 SP1 | [http://www.microsoft.com/en-us/download/details.aspx?id=30403](http://www.microsoft.com/en-us/download/details.aspx?id=30403)
    |'
- en: How to do it...
  id: totrans-274
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: This is a very simple installation and you just need to click on **Next** and
    **Finish**.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个非常简单的安装过程，你只需要点击**下一步**和**完成**。
- en: Just follow the sequence and install all the three utilities. You must install
    them on all the servers, that is, if you are deploying a three-tier VCM installation,
    these three must be installed on all the three servers.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 只需按顺序进行操作并安装所有三个工具。你必须在所有服务器上安装它们，也就是说，如果你正在部署一个三层的 VCM 安装，这三个工具必须在所有三台服务器上安装。
- en: How it works...
  id: totrans-277
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: These utilities are used by VCM to communicate with the SQL database. If they
    are not present on the server, then the foundation checker will fail and you will
    have to install them and start the installer again.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 这些工具被 VCM 用于与 SQL 数据库进行通信。如果服务器上缺少它们，那么基础检查将会失败，你必须安装这些工具并重新启动安装程序。
- en: Installing VCM - single-tier deployment
  id: totrans-279
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 VCM - 单层部署
- en: 'In this recipe, we will deploy vRealize Configuration Manager 5.8.2 on a Windows
    Server 2012 R2\. As the title suggests, this is a single-tier installation; hence,
    all the VCM components will be installed on a single server. So, the VCM Database
    server, web server, and the VCM Collector components will reside on a single Windows
    Server 2008 R2, 2012, or 2012 R2 machine (in our case, Windows Server 2012 R2),
    which is referred to as the VCM Collector, as illustrated here:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们将在 Windows Server 2012 R2 上部署 vRealize Configuration Manager 5.8.2。如标题所示，这是一个单层安装；因此，所有
    VCM 组件将安装在一台服务器上。因此，VCM 数据库服务器、Web 服务器和 VCM Collector 组件将驻留在一台 Windows Server
    2008 R2、2012 或 2012 R2 机器上（在我们的案例中是 Windows Server 2012 R2），这台机器被称为 VCM Collector，如下图所示：
- en: '![Installing VCM - single-tier deployment](img/image_01_009-1.jpg)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![安装 VCM - 单层部署](img/image_01_009-1.jpg)'
- en: Getting ready
  id: totrans-282
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: In this case, we will need a single Windows Server 2012 R2 installation where
    we have already installed SQL, configured IIS, and installed all the prerequisites
    by following the previous recipes.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 在本案例中，我们将需要一个已经安装了 SQL、配置了 IIS 并通过前面的步骤安装了所有先决条件的单个 Windows Server 2012 R2 安装。
- en: The VCM installer is available on [http://www.vmware.com/](http://www.vmware.com/)
    . You need to have an account on  [my.vmware.com](http://my.vmware.com) to download
    the installer.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: VCM 安装程序可以在[http://www.vmware.com/](http://www.vmware.com/)下载。你需要在[my.vmware.com](http://my.vmware.com)上拥有账户才能下载安装程序。
- en: You need to have all the required service accounts ready in Active Directory,
    and they should have the permissions described in the requirements document of
    VCM. The server should be a part of the Active Directory domain, and you must
    log in with an AD account that is a local administrator on the server.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要在 Active Directory 中准备好所有必需的服务账户，并且它们应该具有 VCM 需求文档中描述的权限。服务器应该是 Active Directory
    域的一部分，并且你必须使用具有服务器本地管理员权限的 AD 账户登录。
- en: How to do it...
  id: totrans-286
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: You need to log in with the account that you want to have VCM admin rights to,
    as the account that is used to install VCM gets full admin rights on the VCM application,
    so you can choose either your account or any specifically created VCM administrator
    account.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要使用希望拥有 VCM 管理权限的账户登录，因为用于安装 VCM 的账户将获得 VCM 应用程序的完全管理员权限，因此你可以选择自己的账户或任何专门创建的
    VCM 管理员账户。
- en: 'Download the installer from the Internet and copy it to the VCM server. Then,
    follow these steps:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 从互联网下载安装程序并将其复制到 VCM 服务器。然后，按照以下步骤操作：
- en: Mount the ISO and start the installation wizard by double clicking on `setup.exe`.
    Select **Typical Installation**.![How to do it...](img/image_01_010.jpg)
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装 ISO 并通过双击`setup.exe`启动安装向导。选择**典型安装**。![如何操作...](img/image_01_010.jpg)
- en: Note
  id: totrans-290
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Typical Installation**: This is mostly used for single- or two-tier installations
    and asks for less information.'
  id: totrans-291
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**典型安装**：主要用于单层或双层安装，所需信息较少。'
- en: '**Advanced Installation**: This is mostly used for three-tier installations,
    as in this type, we need to spread the installation of the Collector and web server
    on different servers.'
  id: totrans-292
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**高级安装**：主要用于三层安装，在这种类型中，我们需要将 Collector 和 Web 服务器的安装分布到不同的服务器上。'
- en: Read and accept the license agreement and select "**I am an authorised agent
    and/or representative of the customer/end user"** and **"I have read the terms
    and conditions stated above**".
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 阅读并接受许可协议，并选择“**我是客户/最终用户的授权代理人和/或代表**”以及**“我已阅读并同意上述条款和条件**”。
- en: It will perform the prerequisite checks and run a few tests for that; once the
    tests are complete, select **View full results of prerequisite check**.![How to
    do it...](img/image_01_011.jpg)
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它将执行先决条件检查并运行一些测试；测试完成后，选择**查看先决条件检查的完整结果**。![如何操作...](img/image_01_011.jpg)
- en: The results will be launched in Internet Explorer and check whether there are
    any errors and/or warnings; you can install if there are any warnings but can't
    proceed if there are errors.
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 结果将在 Internet Explorer 中启动，并检查是否有任何错误和/或警告；如果有警告可以继续安装，但如果有错误则无法继续。
- en: Once you see any error, you can drill down by clicking on the error link in
    the report; it will then tell you why you faced the error.
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦看到任何错误，你可以点击报告中的错误链接进一步查看，它会告诉你为何出现错误。
- en: 'In our case, we had not installed the `ServerSideIncludes` IIS role service,
    as shown in the following error report:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的案例中，我们没有安装 `ServerSideIncludes` IIS 角色服务，以下是错误报告：
- en: '![How to do it...](img/image_01_012.jpg)'
  id: totrans-298
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作...](img/image_01_012.jpg)'
- en: After installing the missing component, we can resume the installer.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 安装缺失的组件后，我们可以继续安装程序。
- en: 'In the next step, we need to provide the following details:'
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一步中，我们需要提供以下信息：
- en: '**VCM Database Server (a local or a remote SQL Server instance)**: The same
    server where we are installing as this is a single-tier installation.'
  id: totrans-301
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VCM 数据库服务器（本地或远程 SQL Server 实例）**: 我们安装的服务器，因为这是一个单层部署。'
- en: '**SQL Server Reporting Services WebService URL**: You must have noted this
    down while configuring SSRS; if not, go and launch the SSRS configuration wizard
    to check the URL. The default is `http://<Server-Name>/ReportServer`.'
  id: totrans-302
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SQL Server Reporting Services WebService URL**: 在配置 SSRS 时你必须记下这个 URL；如果没有，去启动
    SSRS 配置向导来查看 URL。默认值为 `http://<Server-Name>/ReportServer`。'
- en: '![How to do it...](img/image_01_013.jpg)'
  id: totrans-303
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/image_01_013.jpg)'
- en: 'Click on **Validate...** under SSRS Web service, and provide the following
    information:'
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **验证...** 在 SSRS Web 服务下，提供以下信息：
- en: '**Database Server**: The hostname of the SSRS server'
  id: totrans-305
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库服务器**: SSRS 服务器的主机名'
- en: '**Domain**: The Active Directory domain'
  id: totrans-306
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**域**: Active Directory 域'
- en: '**User Name**: The account to be used to can connect to the SSRS instance'
  id: totrans-307
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户名**: 用于连接到 SSRS 实例的帐户'
- en: '**Password**: Password for the user'
  id: totrans-308
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**密码**: 用户的密码'
- en: '**Port**: The port configured while configuring SSRS'
  id: totrans-309
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**端口**: 配置 SSRS 时配置的端口'
- en: '**Virtual Directory**: Configured while configuring SSRS'
  id: totrans-310
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**虚拟目录**: 配置 SSRS 时配置的目录'
- en: Click on **Validate** and make sure the validation is successful.
  id: totrans-311
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 点击 **验证**，确保验证成功。
- en: 'After you fill in the details, the screen should look like this:'
  id: totrans-312
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 填写完信息后，屏幕应显示如下：
- en: '![How to do it...](img/image_01_014.jpg)'
  id: totrans-313
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/image_01_014.jpg)'
- en: Enter the license key, provide the service account username and password, and
    click on **Validate**.
  id: totrans-314
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入许可证密钥，提供服务帐户的用户名和密码，然后点击 **验证**。
- en: Provide the installation path.
  id: totrans-315
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供安装路径。
- en: Select **Use HTTPS. By default a self-signed certificate will be generated.
    Select an alternate certificate here.**
  id: totrans-316
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **使用 HTTPS。默认情况下会生成一个自签名证书。这里可以选择其他证书。**
- en: 'It will autogenerate a certificate; if you want, you can add your own certificate
    here:'
  id: totrans-317
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 它将自动生成一个证书；如果需要，你也可以在此处添加自己的证书：
- en: '![How to do it...](img/image_01_015.jpg)'
  id: totrans-318
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/image_01_015.jpg)'
- en: The installation can take upto an hour, depending upon the configuration of
    the server.
  id: totrans-319
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 安装过程可能需要最多一个小时，具体取决于服务器的配置。
- en: '![How to do it...](img/image_01_016.jpg)'
  id: totrans-320
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/image_01_016.jpg)'
- en: Once it is complete, launch the console using `https://<IP or Hostname of Collector>/VCM`.
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，使用 `https://<Collector 的 IP 或主机名>/VCM` 启动控制台。
- en: As mentioned at the start of the recipe, only the account that has access to
    the VCM console is the one that is used for installation; we can add another users
    later.![How to do it...](img/image_01_017.jpg)
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如本步骤开始所提到的，只有具有访问 VCM 控制台权限的帐户才能用于安装；我们可以稍后添加其他用户。![如何操作...](img/image_01_017.jpg)
- en: Click on **Login**, and you will be presented with the VCM console for the first
    time:![How to do it...](img/image_01_018.jpg)
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **登录**，首次展示 VCM 控制台界面：![如何操作...](img/image_01_018.jpg)
- en: How it works...
  id: totrans-324
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: We are installing VCM on a single server where we have already installed SQL,
    SSRS, and IIS. This console can then be used to manage the entire infrastructure.
    We will use this console to perform patching, checking compliance, publishing
    software exporting reports, and a lot more in the upcoming chapters.
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在一台已经安装了 SQL、SSRS 和 IIS 的单台服务器上安装 VCM。然后可以使用此控制台来管理整个基础架构。在接下来的章节中，我们将使用该控制台执行补丁管理、合规性检查、发布软件导出报告等操作。
- en: Installing VCM - two-tier deployment
  id: totrans-326
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 VCM - 两层部署
- en: As you now know, VCM depends on SQL, and if we have a medium-sized infrastructure,
    it becomes too much load–the SQL, SSRS, web, and Collector server components–to
    carry on a single server. We can split the load in two by moving SQL databases
    to a dedicated server and the web and Collector components on another server.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所知，VCM 依赖于 SQL，如果我们有中等规模的基础架构，单台服务器承载 SQL、SSRS、Web 和 Collector 组件会成为过重的负担。我们可以通过将
    SQL 数据库移至专用服务器，并将 Web 和 Collector 组件移至另一台服务器来分担负载。
- en: 'This is how the two-tier deployment will look:'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是两层部署的示意图：
- en: '![Installing VCM - two-tier deployment](img/image_01_019-1.jpg)'
  id: totrans-329
  prefs: []
  type: TYPE_IMG
  zh: '![安装 VCM - 两层部署](img/image_01_019-1.jpg)'
- en: Getting ready
  id: totrans-330
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We will need two servers; on one, SQL Server 2012 should be installed with SSRS,
    and SSRS should be configured as per previous recipes.
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要两台服务器；其中一台需要安装 SQL Server 2012 并配置 SSRS，SSRS 配置应根据之前的步骤进行。
- en: Install all the prerequisites on both the SQL and Collector servers. Have all
    the mentioned service accounts ready and firewall ports open wherever required.
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 在 SQL 和 Collector 服务器上安装所有前提条件。确保所有提到的服务账户已准备好，并在需要的地方打开防火墙端口。
- en: Install and configure IIS as per the *Preparing our VCM deployment - installing
    and configuring IIS* recipe.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 按照*准备我们的 VCM 部署 - 安装和配置 IIS* 方案安装并配置 IIS。
- en: How to do it...
  id: totrans-334
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: As this is a two-tier VCM deployment recipe, you must have guessed that we need
    to perform the installation on two servers–not exactly correct; we just need to
    install SQL, configure SSRS, and install the prerequisites on the SQL Server;
    all the action happens on the VCM Collector server.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这是一个双层 VCM 部署方案，你应该猜到我们需要在两台服务器上进行安装——其实并不完全正确；我们只需要在 SQL 服务器上安装 SQL、配置 SSRS，并安装前提条件；所有操作都会在
    VCM Collector 服务器上进行。
- en: Log in to the collector server with a domain account that has local admin privileges;
    this is the account on which you want to have admin access on the VCM application.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 使用具有本地管理员权限的域账户登录到 Collector 服务器；这是你希望在 VCM 应用程序中获得管理员访问权限的账户。
- en: Copy the downloaded ISO to the server and mount it.
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 将下载的 ISO 文件复制到服务器并挂载。
- en: 'Start the installation by double-clicking on `setup.exe` on the installer disk,
    and follow the wizard to install VCM, like this:'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 双击安装盘中的`setup.exe`启动安装程序，并按照向导安装 VCM，如下所示：
- en: In this recipe, we will choose **Advanced Installation**.
  id: totrans-339
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此方案中，我们将选择**高级安装**。
- en: Click on **Next** for the introduction page.
  id: totrans-340
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**进入介绍页面。
- en: Click on **Next** for the patent information page.
  id: totrans-341
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**进入专利信息页面。
- en: Read and accept the license agreement and select "**I am an authorised agent
    and/or representative of the customer/end user"** and **"I have read the terms
    and conditions stated above**".
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 阅读并接受许可协议，并选择“**我是客户/最终用户的授权代理和/或代表**”以及“**我已阅读上述条款和条件**”。
- en: 'Under **Select Installation Type**, select the following:'
  id: totrans-343
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**选择安装类型**下，选择以下选项：
- en: '**VMware vRealize Configuration Manager**'
  id: totrans-344
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMware vRealize 配置管理器**'
- en: '**VCM Web Console**'
  id: totrans-345
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VCM Web 控制台**'
- en: '**VCM Collector Components**'
  id: totrans-346
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VCM Collector 组件**'
- en: '**Tools**'
  id: totrans-347
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**工具**'
- en: '**ImportExport Utility**'
  id: totrans-348
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**导入导出工具**'
- en: '**Foundation Checker**'
  id: totrans-349
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基础检查器**'
- en: '**VMware VCM Package Manager for Windows**'
  id: totrans-350
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMware VCM 包管理器 for Windows**'
- en: '**VMware VCM Package Studio**'
  id: totrans-351
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMware VCM 包工作室**'
- en: '![How to do it...](img/image_01_020.jpg)'
  id: totrans-352
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/image_01_020.jpg)'
- en: The installer will perform a prerequisite check and present the results; after
    the checks are successful, click on **Next**; if there are errors, click on **View
    Results**, remedy any errors and warnings, and perform a recheck.
  id: totrans-353
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装程序将执行前提条件检查并展示结果；检查成功后，点击**下一步**；如果有错误，点击**查看结果**，解决任何错误和警告，并重新检查。
- en: Do not proceed further unless there are no errors; you can proceed if there
    are warnings, but it is not recommended. This is what a successful check looks
    like:![How to do it...](img/image_01_021.jpg)
  id: totrans-354
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 除非没有错误，否则不要继续；如果有警告，你可以继续，但不推荐这样做。这是一个成功检查的示例：![如何操作...](img/image_01_021.jpg)
- en: On the next page, enter the serial key.
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，输入序列号。
- en: On the **Configure Components** page, provide the hostname of the SQL Server
    and enter `VCM` as the database name; click on **Validate**.
  id: totrans-356
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**配置组件**页面，提供 SQL 服务器的主机名，并输入`VCM`作为数据库名称；点击**验证**。
- en: If the validation is successful, it will provide you with the path for the data
    and log files, along with the **Size** and **Auto Grow** options. You can go with
    the defaults.
  id: totrans-357
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果验证成功，它会为你提供数据和日志文件的路径，并提供**大小**和**自动增长**选项。你可以选择默认设置。
- en: '![How to do it...](img/image_01_022.jpg)'
  id: totrans-358
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/image_01_022.jpg)'
- en: On the next page, provide the Tomcat service account and its password.
  id: totrans-359
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，提供 Tomcat 服务账户及其密码。
- en: On the next page, provide the URL in **WebService URL**; credentials to validate
    the details include the **Domain**, **User Name**, and **Password**. Click on **Validate**.
    Accept the warning about insecure SRS, as we had configured it with port `80`.![How
    to do it...](img/image_01_023.jpg)
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，提供**WebService URL**中的 URL；验证详细信息的凭据包括**域**、**用户名**和**密码**。点击**验证**。接受关于不安全
    SRS 的警告，因为我们已将其配置为使用端口`80`。![如何操作...](img/image_01_023.jpg)
- en: Provide the path to install the web console to.
  id: totrans-361
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供安装 Web 控制台的路径。
- en: Provide a URL to the application; the default `/VCM` is a good option.
  id: totrans-362
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供一个应用程序的 URL；默认的`/VCM`是一个不错的选择。
- en: We can provide an SMTP address; the default is the collector server. If you
    don't know it now, it can be configured in the VCM console.
  id: totrans-363
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们可以提供SMTP地址；默认值为收集器服务器。如果现在不知道，稍后可以在VCM控制台中配置。
- en: Provide a path to install the collector component to, and accept the SSL3 warning.
  id: totrans-364
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供安装收集器组件的路径，并接受SSL3警告。
- en: Provide a path to store the staging data to; this is the path where data is
    temporarily stored before being added to the database.
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供一个路径用于存储暂存数据；这是数据在添加到数据库之前临时存储的路径。
- en: Provide the details of the Collector service account. This account will be given
    rights to log in as a service; accept the confirmation dialog.
  id: totrans-366
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供Collector服务账户的详细信息。该账户将被授予作为服务登录的权限；接受确认对话框。
- en: Provide details of network authority accounts. We can add as many accounts as
    we want later, but we need at least one for the time being. More details about
    this can be found in the *Service accounts* subsection of this chapter's introduction.
  id: totrans-367
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供网络权限账户的详细信息。我们以后可以添加任意数量的账户，但目前至少需要一个。更多细节请参考本章介绍中的*服务账户*小节。
- en: The next page is about certificates. Click on **Generate** and then on **Next**.![How
    to do it...](img/image_01_024.jpg)
  id: totrans-368
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一页是关于证书的内容。点击**生成**，然后点击**下一步**。![操作方法...](img/image_01_024.jpg)
- en: On the next page, which lets you select domains to run the discovery, select
    specific NetBIOS and AD domains.
  id: totrans-369
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，您可以选择要运行发现的域，选择特定的NetBIOS和AD域。
- en: Note
  id: totrans-370
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you have multiple AD or NetBIOS domains, it will take more than 24 hours
    to detect all the domains, and the installation could eventually fail. To avoid
    such a scenario, select a few domains to start with and add the rest of them once
    VCM is ready.
  id: totrans-371
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您有多个AD或NetBIOS域，检测所有域可能需要超过24小时，最终安装可能会失败。为了避免这种情况，请先选择一些域进行开始，等VCM准备好后再添加其余域。
- en: '![How to do it...](img/image_01_025.jpg)'
  id: totrans-372
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![操作方法...](img/image_01_025.jpg)'
- en: Provide details about the virtual directory and credentials to access it.
  id: totrans-373
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供虚拟目录的详细信息和访问凭据。
- en: Provide the credentials for the Virtualization Client plugin.
  id: totrans-374
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供虚拟化客户端插件的凭据。
- en: On the next page, provide the path to install package manager components to.
  id: totrans-375
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，提供安装包管理器组件的路径。
- en: On the next page, provide the path to the local package cache.
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，提供本地软件包缓存的路径。
- en: On the next page, provide the path to the software repository and local cache.
  id: totrans-377
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，提供软件库和本地缓存的路径。
- en: Provide the name of the virtual directory.
  id: totrans-378
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供虚拟目录的名称。
- en: Provide the path to the Package Studio components.
  id: totrans-379
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供Package Studio组件的路径。
- en: Finally, we will have reached the summary page; check the options and click
    on **Install**.![How to do it...](img/image_01_026.jpg)
  id: totrans-380
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们将到达总结页面；检查选项并点击**安装**。![操作方法...](img/image_01_026.jpg)
- en: Log in to the portal and make sure the installation was successful.![How to
    do it...](img/image_01_027.jpg)
  id: totrans-381
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录门户并确保安装成功。![操作方法...](img/image_01_027.jpg)
- en: How it works...
  id: totrans-382
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: We installed VCM on two servers; we had already installed SQL and SSRS on the
    SQL Server, while IIS for the web and collector components are on the Collector
    server. The console can then be used to manage the infrastructure. We will use
    this console to perform patching, compliance checking, publishing software exporting
    reports, and a lot more in upcoming chapters.
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在两台服务器上安装了VCM；我们已经在SQL Server上安装了SQL和SSRS，而Web和收集器组件则安装在Collector服务器上。然后，控制台可以用于管理基础架构。我们将在接下来的章节中使用该控制台进行修补、合规检查、发布软件导出报告等操作。
- en: Installing VCM - three-tier deployment
  id: totrans-384
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装VCM - 三层部署
- en: So far, we have covered installing VCM on single and two-tier systems. There
    will be times when these are not sufficient, and you have a larger infrastructure
    to manage. To provide services to such large infrastructures, we can share the
    load across three tiers, namely, the database, web, and collector servers. In
    this recipe, we will install VCM on three different servers.
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经讲解了在单一和两层系统上安装VCM。将来可能会遇到这些配置不够的情况，您需要管理更大的基础架构。为了为这种大型基础架构提供服务，我们可以将负载分配到三个层次，分别是数据库层、Web层和收集器层。在这个方案中，我们将在三台不同的服务器上安装VCM。
- en: 'This is how the three-tier deployment will be configured:'
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是三层部署的配置方式：
- en: '![Installing VCM - three-tier deployment](img/image_01_028.jpg)'
  id: totrans-387
  prefs: []
  type: TYPE_IMG
  zh: '![安装VCM - 三层部署](img/image_01_028.jpg)'
- en: Getting ready
  id: totrans-388
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We will need three different servers to install the database, web, and collector
    components of the VCM server to.
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将需要三台不同的服务器来安装VCM服务器的数据库、Web和采集组件。
- en: We need all the prerequisites installed on all three servers. We should have
    all the mentioned service accounts ready, and firewall ports should be open wherever
    required.
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要在所有三台服务器上安装所有先决条件。我们应准备好所有提到的服务账户，并确保需要的防火墙端口已打开。
- en: IIS needs to be configured on the web server only.
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 仅需在Web服务器上配置IIS。
- en: SQL Server must be installed and SSRS configured as per previous recipes.
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 必须安装SQL Server并按前述步骤配置SSRS。
- en: How to do it...
  id: totrans-393
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Even though this is a three-tier installation, we don't need to do much on the
    SQL Server; in addition to installing SQL Server 2012, we need to install the
    SQL Native Client, SQL Command Line Utilities, and SQLXML 4.0 SP1.
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这是三层安装，但我们在SQL服务器上无需做太多事情；除了安装SQL Server 2012外，还需要安装SQL Native Client、SQL命令行工具和SQLXML
    4.0 SP1。
- en: We will look at the web and collector servers in detail.
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将详细查看Web和采集服务器。
- en: Let's cover the web server first.
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 我们先来看看Web服务器。
- en: Installing web components
  id: totrans-397
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装Web组件
- en: 'We need to log in to the web server with a domain account that has local administrative
    privileges. Mount the `VCM` ISO and double-click on `setup.exe` on the installer
    disk. Follow the steps in the wizard to install the web component of VCM, as follows:'
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要使用具有本地管理员权限的域账户登录到Web服务器。挂载`VCM` ISO文件，并双击安装盘上的`setup.exe`。按照向导中的步骤安装VCM的Web组件，具体如下：
- en: Select **Advanced Installation**, as this is a three-tier installation.
  id: totrans-399
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**高级安装**，因为这是一个三层安装。
- en: Click on **Next** for the introduction page.
  id: totrans-400
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**进入介绍页面。
- en: Click on **Next** for the patent information page.
  id: totrans-401
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**进入专利信息页面。
- en: Read and accept the license agreement and select "**I am an authorized agent
    and/or representative of the customer/end user**" and "**I have read the terms
    and conditions stated above**".
  id: totrans-402
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 阅读并接受许可协议，然后选择“**我为客户/最终用户的授权代理人和/或代表**”以及“**我已阅读上述条款和条件**”。
- en: 'Under **Select Installation Type**, select the following:'
  id: totrans-403
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**选择安装类型**下，选择以下选项：
- en: '**VMware vRealize Configuration Manager**'
  id: totrans-404
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMware vRealize Configuration Manager**'
- en: '**VCM Web Console**'
  id: totrans-405
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VCM Web控制台**'
- en: '**Tools**'
  id: totrans-406
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**工具**'
- en: '**VMware VCM Package Manager for Windows**'
  id: totrans-407
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMware VCM Package Manager for Windows**'
- en: '**VMware VCM Package Studio**'
  id: totrans-408
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMware VCM Package Studio**'
- en: '![Installing web components](img/image_01_029.jpg)'
  id: totrans-409
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![安装Web组件](img/image_01_029.jpg)'
- en: Accept that you have intentionally chosen to split the installation by clicking
    on **OK** in the dialog box that pops up.
  id: totrans-410
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出的对话框中点击**确定**，接受你已故意选择拆分安装。
- en: The installer will perform a prerequisite check and present the results. If
    the check is successful, click on **Next**; if there are failures, click on **View
    Results**, remedy any errors and warnings, and perform a recheck. Do not proceed
    further until there are zero errors.![Installing web components](img/image_01_030.jpg)
  id: totrans-411
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装程序将进行先决条件检查并显示结果。如果检查成功，点击**下一步**；如果有失败，点击**查看结果**，修正所有错误和警告后进行重新检查。直到没有错误才能继续操作。![安装Web组件](img/image_01_030.jpg)
- en: On the next page, enter the serial key.
  id: totrans-412
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，输入序列号。
- en: On the **Configure Components** page, provide the hostname of the SQL Server
    and enter `VCM` as the database name; click on **Validate**.
  id: totrans-413
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**配置组件**页面，提供SQL服务器的主机名并输入`VCM`作为数据库名称；点击**验证**。
- en: If the validation is successful, you will be provided with a path for the data
    and logfiles, along with the **Size** and **Auto Grow** options. You can go with
    the defaults.
  id: totrans-414
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果验证成功，系统将为数据和日志文件提供路径，并提供**大小**和**自动增长**选项。你可以使用默认值。
- en: '![Installing web components](img/image_01_031.jpg)'
  id: totrans-415
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![安装Web组件](img/image_01_031.jpg)'
- en: On the next page, provide the Tomcat service account details and its password.
  id: totrans-416
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，提供Tomcat服务账户的详细信息及其密码。
- en: On the next page, provide the URL in **WebService URL**. Credentials to validate
    the details include the **Domain**, **User Name**, and **Password**. Click on **Validate**.
    Accept the SRS insecure warning as we had configured it with port `80`.
  id: totrans-417
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，在**WebService URL**中提供网址。验证详细信息的凭据包括**域名**、**用户名**和**密码**。点击**验证**。接受SRS不安全警告，因为我们已将其配置为使用端口`80`。
- en: Provide the path to install the web console to.
  id: totrans-418
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供安装Web控制台的路径。
- en: Provide the URL to the application; it's okay to use the default value.
  id: totrans-419
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供应用程序的URL；使用默认值也是可以的。
- en: We can provide an SMTP address. The default is the collector server. If you
    don't know it now, it can be configured in the VCM console.
  id: totrans-420
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们可以提供一个 SMTP 地址，默认是采集器服务器。如果现在不清楚，可以在 VCM 控制台中进行配置。
- en: Provide the credentials for the Virtualization Client plugin.
  id: totrans-421
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供虚拟化客户端插件的凭证。
- en: On the next page, provide the path to install the package manager components
    to.
  id: totrans-422
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页面，提供安装包管理器组件的路径。
- en: On the next page, provide the path to the local package cache.
  id: totrans-423
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页面，提供本地包缓存的路径。
- en: On the next page, provide the path to the software repository and local cache.
  id: totrans-424
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页面，提供软件仓库和本地缓存的路径。
- en: Provide the name of the virtual directory.
  id: totrans-425
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供虚拟目录的名称。
- en: Provide the path for the Package Studio components.
  id: totrans-426
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供 Package Studio 组件的路径。
- en: After this, you'll reach the summary page. Check the options and click on **Install**.![Installing
    web components](img/image_01_032.jpg)
  id: totrans-427
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 之后，你将进入总结页面。检查选项并点击**安装**。![安装 Web 组件](img/image_01_032.jpg)
- en: Click on **Finish** to exit the wizard.
  id: totrans-428
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**完成**退出向导。
- en: This completes the web component installation; now, we have to perform similar
    steps on the Collector server.
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了 Web 组件的安装；接下来，我们需要在采集器服务器上执行类似的步骤。
- en: Installing Collector server components
  id: totrans-430
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 正在安装采集器服务器组件
- en: Once you are finished with the web server, log in to the Collector server with
    a domain account that has local administrative privileges. Copy the ISO of the
    VCM installer from the downloaded location and mount it.
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: 完成 Web 服务器配置后，使用具有本地管理权限的域账户登录到采集器服务器。从下载位置复制 VCM 安装程序的 ISO 文件并挂载。
- en: Double-click on the `setup.exe` file from the installer media mounted, and follow
    these steps to complete the wizard.
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 双击已挂载安装介质中的`setup.exe`文件，并按照这些步骤完成向导。
- en: Start with **Advanced Installation**.
  id: totrans-433
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**高级安装**开始。
- en: Click on **Next** for the introduction page.
  id: totrans-434
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**进入介绍页面。
- en: Click on **Next** for the patent information page.
  id: totrans-435
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**进入专利信息页面。
- en: Read and accept the license agreement and select "**I am an authorized agent
    and/or representative of the customer/end user**" and "**I have read the terms
    and conditions stated above**".
  id: totrans-436
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 阅读并接受许可协议，选择“**我是客户/最终用户的授权代理人和/或代表**”以及“**我已阅读上述条款和条件**”。
- en: 'Under **Select Installation Type**, select the following:'
  id: totrans-437
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**选择安装类型**下，选择以下选项：
- en: '**VMware vRealize Configuration Manager**'
  id: totrans-438
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMware vRealize 配置管理器**'
- en: '**VCM Collector Components**'
  id: totrans-439
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VCM 采集器组件**'
- en: '**Tools**'
  id: totrans-440
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**工具**'
- en: '**ImportExport Utility**'
  id: totrans-441
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**导入导出工具**'
- en: '**Foundation Checker**'
  id: totrans-442
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基础检查器**'
- en: '**VMware VCM Package Manager for Windows**'
  id: totrans-443
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**VMware VCM 包管理器（Windows版）**'
- en: '![Installing Collector server components](img/image_01_033.jpg)'
  id: totrans-444
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![安装采集器服务器组件](img/image_01_033.jpg)'
- en: Accept that you have intentionally chosen to split the installation–click on **OK**.
  id: totrans-445
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受你有意选择分离安装–点击**确定**。
- en: The installer will perform a prerequisite check and present the results. If
    the check is successful, click on **Next**; if there are failures, click on **View
    Results**, remedy any errors and warnings, and perform a recheck. Do not proceed
    further until there are zero errors.
  id: totrans-446
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装程序将执行前提检查并展示结果。如果检查成功，请点击**下一步**；如果检查失败，请点击**查看结果**，修复任何错误和警告，并重新检查。出现零错误之前，请不要继续操作。
- en: On the next page, enter the serial key.
  id: totrans-447
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页面，输入序列号。
- en: Provide the path to install the collector component to and accept the SSL3 warning.
  id: totrans-448
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供安装采集器组件的路径，并接受 SSL3 警告。
- en: Specify the same database server and database name used when you installed the
    web components.
  id: totrans-449
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定与你安装 Web 组件时相同的数据库服务器和数据库名称。
- en: Provide details of a Collector service account; this account will be given rights
    to log in as a service; accept the corresponding dialog box.
  id: totrans-450
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供采集器服务账户的详细信息；该账户将被授予作为服务登录的权限；接受相应的对话框。
- en: Provide details of network authority accounts. We can add as many accounts as
    we want later, but we need at least one for the time being. More details about
    this can be found in the *Service accounts* subsection of this chapter's introduction.
  id: totrans-451
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供网络权限账户的详细信息。我们可以稍后添加任意数量的账户，但目前至少需要一个。更多信息可以在本章介绍的*服务账户*小节中找到。
- en: The next page is for certificates; click on **Generate** and click on **Next**.
  id: totrans-452
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一页面是证书页面；点击**生成**并点击**下一步**。
- en: On the next page, in order to select domains to run the discovery, select **Specific
    NetBIOS and AD domains**.
  id: totrans-453
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页面，为了选择运行发现的域，选择**特定的 NetBIOS 和 AD 域**。
- en: Note
  id: totrans-454
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you have multiple AD or NetBIOS domains, it will take more than 24 hours
    to detect all the domains, and the installation could eventually fail. To avoid
    such a scenario, select a few domains to start with and add the rest of them once
    VCM is ready.
  id: totrans-455
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你有多个AD或NetBIOS域，检测所有域可能需要超过24小时，并且安装最终可能会失败。为了避免这种情况，建议先选择几个域进行启动，并在VCM准备好后再添加其他域。
- en: On the next page, provide the path to install package manager components to.
  id: totrans-456
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，提供安装包管理组件的路径。
- en: On the next page, provide the path to the local package cache.
  id: totrans-457
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，提供本地包缓存的路径。
- en: You will now reach the summary page; check the options and click on **Install**.![Installing
    Collector server components](img/image_01_034.jpg)
  id: totrans-458
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你将进入总结页面；检查选项并点击**安装**。[安装收集器服务器组件](img/image_01_034.jpg)
- en: On the final page of the wizard, click on **Finish** to close it and launch
    the VCM console.
  id: totrans-459
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导的最后页面，点击**完成**以关闭它并启动VCM控制台。
- en: Once connected to the console, you will be able to notice the difference in
    single and two-tier deployments versus a three-tier deployment.
  id: totrans-460
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦连接到控制台，你将能察觉到单层和双层部署与三层部署的不同之处。
- en: Earlier, our collector and web server were the same, but now, the Collector
    is different from the web server. Of course, this is expected as we just finished
    installing them separately.
  id: totrans-461
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 之前，我们的收集器和Web服务器是相同的，但现在，收集器与Web服务器是不同的。当然，这一点是预期的，因为我们刚刚完成了它们的单独安装。
- en: '![Installing Collector server components](img/image_01_035.jpg)'
  id: totrans-462
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![安装收集器服务器组件](img/image_01_035.jpg)'
- en: How it works...
  id: totrans-463
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: For larger environments, such as where we need to manage more than 2,000 machines,
    it is recommended to have a three-tier deployment. Here, the Collector acts as
    middleware between the frontend IIS web component and the backend SQL database
    component. This distributes load between all the three components.
  id: totrans-464
  prefs: []
  type: TYPE_NORMAL
  zh: 对于较大的环境，比如需要管理超过2000台机器的环境，建议使用三层架构部署。在这里，收集器充当前端IIS Web组件和后端SQL数据库组件之间的中介。这样可以在所有三个组件之间分配负载。
- en: 'In a three-tier installation, when you want to connect to the VCM console,
    you need to use a web server and not a collector server. So, the link will be
    something like this:'
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: 在三层架构的安装中，当你需要连接到VCM控制台时，你需要使用Web服务器，而不是收集器服务器。所以，链接将类似于这样：
- en: '`https://<Web Server IP/Hostname>/VCM`'
  id: totrans-466
  prefs: []
  type: TYPE_NORMAL
  zh: '`https://<Web Server IP/Hostname>/VCM`'
- en: VCM post-installation tasks - database fine tuning
  id: totrans-467
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: VCM安装后任务 - 数据库优化调整
- en: VCM relies heavily on its SQL databases for operation. You must update the default
    settings in order to optimize SQL Server performance. We will create a maintenance
    plan for VCM databases.
  id: totrans-468
  prefs: []
  type: TYPE_NORMAL
  zh: VCM在操作中高度依赖其SQL数据库。为了优化SQL Server性能，你必须更新默认设置。我们将为VCM数据库创建一个维护计划。
- en: Getting ready
  id: totrans-469
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备中
- en: Log in to SQL Server with an account that has SQL admin privileges.
  id: totrans-470
  prefs: []
  type: TYPE_NORMAL
  zh: 使用具有SQL管理员权限的帐户登录到SQL Server。
- en: How to do it...
  id: totrans-471
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: We will perform the fine-tuning at three different levels, as detailed in the
    following subsections.
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在以下子章节中详细说明，如何在三个不同的层次上进行优化调整。
- en: SQL Server - database settings
  id: totrans-473
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: SQL Server - 数据库设置
- en: To ensure that VCM runs at peak performance and requires little operator intervention
    during its lifecycle, set up a routine maintenance plan. Take a look at the *VCM
    Administration Guide*.
  id: totrans-474
  prefs: []
  type: TYPE_NORMAL
  zh: 为确保VCM在生命周期内的高效运行，并且需要较少的操作员干预，请设置定期维护计划。可以参考*VCM管理指南*。
- en: 'Open SQL Server Management Studio and connect to the VCM SQL Server instance.
    Then, follow these steps:'
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: 打开SQL Server管理工作室并连接到VCM SQL Server实例。然后，按照以下步骤操作：
- en: Right-click on the SQL instance that you installed and select **Properties**.
  id: totrans-476
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键点击你安装的SQL实例，并选择**属性**。
- en: In the **Select a page** area, select **Database Settings**.
  id: totrans-477
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**选择页面**区域，选择**数据库设置**。
- en: 'Configure the following settings:'
  id: totrans-478
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置以下设置：
- en: '**Default index fill factor**: Set the fill factor to `80%` in order to keep
    20% free space available in each index page'
  id: totrans-479
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**默认索引填充因子**：将填充因子设置为`80%`，以确保每个索引页面保留20%的空闲空间。'
- en: Tip
  id: totrans-480
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**Note**: This sets a percentage value for the amount of free space in each
    index page when the page is rebuilt. Set the fill factor to `80% `to keep 20%
    free space available in each index page. This setting is part of the SQL maintenance
    plan wizard. If you configure the default fill factor using this setting, keep
    space free in an index when you run a maintenance plan.'
  id: totrans-481
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**注意**：此设置为每个索引页面重建时可用的空闲空间设置一个百分比值。将填充因子设置为`80%`，以确保每个索引页面保留20%的空闲空间。此设置是SQL维护计划向导的一部分。如果你使用此设置配置默认填充因子，当运行维护计划时，保持索引页面的空闲空间。'
- en: '**Recovery interval (minutes)**: Set the value to `5`'
  id: totrans-482
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**恢复间隔（分钟）**：将值设置为`5`'
- en: Tip
  id: totrans-483
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**Note**: This configures the approximate amount of time that SQL Server takes
    to run the recovery process. The default setting is `0`, which causes SQL Server
    to adjust this value and base the values on the historical operation of the server.
    In large environments, the recovery interval can affect the overall performance
    of VCM. Because VCM constantly updates how it interacts with SQL Server to process
    activities whose intervals differ, such as an inspection request and a compliance
    run, the server expends a lot of time constantly adjusting this value. By setting
    the recovery interval to `5` minutes, SQL Server no longer needs to tune this
    value.'
  id: totrans-484
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**注意**：此配置了SQL Server执行恢复过程所需的大致时间。默认设置为`0`，这会使SQL Server调整此值，并根据服务器的历史操作来基于该值进行计算。在大型环境中，恢复间隔可能会影响VCM的整体性能。由于VCM不断更新与SQL
    Server的交互方式，以处理那些间隔不同的活动，如检查请求和合规运行，因此服务器会花费大量时间不断调整此值。通过将恢复间隔设置为`5`分钟，SQL Server将不再需要调优此值。'
- en: Click on **OK** to save the settings.
  id: totrans-485
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**保存设置。
- en: SQL Server - maintenance plan
  id: totrans-486
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: SQL Server - 维护计划
- en: To ensure that VCM runs at peak performance and requires little operator intervention
    during its lifecycle, you must set up a routine maintenance plan. VCM relies heavily
    on its SQL databases for operation.
  id: totrans-487
  prefs: []
  type: TYPE_NORMAL
  zh: 为确保VCM在整个生命周期中保持最佳性能，并且需要的操作员干预最小，必须设置常规维护计划。VCM的运行严重依赖其SQL数据库。
- en: The maintenance plan uses the automated maintenance functions on the SQL Server
    instances that host the VCM database.
  id: totrans-488
  prefs: []
  type: TYPE_NORMAL
  zh: 该维护计划使用SQL Server实例上的自动化维护功能，这些实例托管着VCM数据库。
- en: 'On the VCM SQL Server instance, follow these steps:'
  id: totrans-489
  prefs: []
  type: TYPE_NORMAL
  zh: 在VCM SQL Server实例上，执行以下步骤：
- en: Click on **Start**.
  id: totrans-490
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**开始**。
- en: Select **All Programs** | **Microsoft SQL Server {version}** | **SQL Server
    Management Studio**.
  id: totrans-491
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**所有程序** | **Microsoft SQL Server {version}** | **SQL Server Management Studio**。
- en: Expand the **Management** folder, right-click on **Maintenance Plans**, and
    select **Maintenance Plan Wizard**.
  id: totrans-492
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开**管理**文件夹，右键点击**维护计划**，然后选择**维护计划向导**。
- en: On the **Maintenance Plan Wizard** page, click on **Next**.
  id: totrans-493
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**维护计划向导**页面，点击**下一步**。
- en: On the **Select Plan Properties** page, enter a maintenance plan name, select **Single
    schedule for the entire plan or no schedul**e, and click on **Change**.
  id: totrans-494
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**选择计划属性**页面，输入维护计划名称，选择**整个计划的单一计划或无计划**，然后点击**更改**。
- en: On the **Job Schedule Properties - Maintenance Plan** page, set the scheduling
    properties to run the maintenance plan when the SQL Server is idle or has low
    usage.
  id: totrans-495
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**作业计划属性 - 维护计划**页面，设置计划属性，使维护计划在SQL Server空闲或负载低时运行。
- en: Click on **OK** to return to the **Select Plan Properties** page, and click
    on **Next**.
  id: totrans-496
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**确定**返回到**选择计划属性**页面，然后点击**下一步**。
- en: 'On the **Select Maintenance Tasks** page, select the following maintenance
    tasks and click on **Next**:'
  id: totrans-497
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**选择维护任务**页面，选择以下维护任务并点击**下一步**：
- en: '**Check Database Integrity**'
  id: totrans-498
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**检查数据库完整性**'
- en: '**Rebuild Index**'
  id: totrans-499
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**重建索引**'
- en: '**Update Statistics**'
  id: totrans-500
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更新统计信息**'
- en: '**Clean Up History**'
  id: totrans-501
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**清理历史**'
- en: On the **Select Maintenance Task Order** page, order the maintenance tasks and
    click on **Next**.
  id: totrans-502
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**选择维护任务顺序**页面，排列维护任务顺序并点击**下一步**。
- en: 'On the **Define Database Check Integrity Task** page, define how the maintenance
    plan will check database integrity:'
  id: totrans-503
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**定义数据库完整性检查任务**页面，定义维护计划如何检查数据库完整性：
- en: Click on the **Databases** drop-down menu.
  id: totrans-504
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**数据库**下拉菜单。
- en: 'Select the following databases and click on **OK**:'
  id: totrans-505
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择以下数据库并点击**确定**：
- en: '`VCM`'
  id: totrans-506
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VCM`'
- en: '`VCM_Coll`'
  id: totrans-507
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VCM_Coll`'
- en: '`VCM_Raw`'
  id: totrans-508
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VCM_Raw`'
- en: '`VCM_UNIX`'
  id: totrans-509
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VCM_UNIX`'
- en: Tip
  id: totrans-510
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**Note**: You must select the `VCM_Raw` database, because it contains transient
    data that the other databases consume.'
  id: totrans-511
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**注意**：你必须选择`VCM_Raw`数据库，因为它包含其他数据库所使用的临时数据。'
- en: Select **Include indexes** and click on **Next**.
  id: totrans-512
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**包括索引**，然后点击**下一步**。
- en: 'On the **Define Rebuild Index Task** page, define how the maintenance plan
    will rebuild the index:'
  id: totrans-513
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**定义重建索引任务**页面，定义维护计划如何重建索引：
- en: Click on the **Databases** drop-down menu.
  id: totrans-514
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**数据库**下拉菜单。
- en: 'Select the following databases and click on **OK**:'
  id: totrans-515
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择以下数据库并点击**确定**：
- en: '`VCM`'
  id: totrans-516
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VCM`'
- en: '`VCM_Coll`'
  id: totrans-517
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VCM_Coll`'
- en: '`VCM_UNIX`'
  id: totrans-518
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VCM_UNIX`'
- en: Tip
  id: totrans-519
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**Note**: Do not rebuild the index for the `VCM_Raw` database.'
  id: totrans-520
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**注意**：不要重建`VCM_Raw`数据库的索引。'
- en: In the **Advanced Options** area, select **Sort results in tempdb** and click
    on **Next**.
  id: totrans-521
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**高级选项**区域，选择**在tempdb中排序结果**，然后点击**下一步**。
- en: 'On the **Define Update Statistics Task** page, define how the maintenance plan
    will update database statistics:'
  id: totrans-522
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**定义更新统计信息任务**页面，定义维护计划如何更新数据库统计信息：
- en: Click on the **Databases** drop-down menu.
  id: totrans-523
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**数据库**下拉菜单。
- en: 'Select the following databases and click on **OK**:'
  id: totrans-524
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择以下数据库并点击**确定**：
- en: '`VCM`'
  id: totrans-525
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VCM`'
- en: '`VCM_Coll`'
  id: totrans-526
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VCM_Coll`'
- en: '`VCM_UNIX`'
  id: totrans-527
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`VCM_UNIX`'
- en: Tip
  id: totrans-528
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**Note**: Do not update statistics for the `VCM_Raw` database.'
  id: totrans-529
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**注意**：不要更新`VCM_Raw`数据库的统计信息。'
- en: 'On the **Define History Cleanup Task** page, define how the maintenance plan
    will clean up historical data from the SQL Server machine, and click on **Next**:'
  id: totrans-530
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**定义历史数据清理任务**页面，定义维护计划如何清理SQL Server机器上的历史数据，然后点击**下一步**：
- en: Select **Backup and restore history**.
  id: totrans-531
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**备份和恢复历史**。
- en: Select **SQL Server Agent job history**.
  id: totrans-532
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**SQL Server Agent 作业历史**。
- en: Select **Maintenance plan history**.
  id: totrans-533
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**维护计划历史**。
- en: Set the cleanup task to remove historical data older than 4 months.
  id: totrans-534
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置清理任务以删除超过4个月的历史数据。
- en: 'On the **Select Report Options** page, save a report of the maintenance plan
    actions:'
  id: totrans-535
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**选择报告选项**页面，保存维护计划操作的报告：
- en: Select **Write a report to a text file**.
  id: totrans-536
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**将报告写入文本文件**。
- en: Select a folder for the report and click **Next**.
  id: totrans-537
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个文件夹保存报告并点击**下一步**。
- en: On the **Complete the Wizard** page, verify your selections in the **Maintenance
    Plan Wizard** summary, expand the selections to view the settings, and click on **Finish**.
  id: totrans-538
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**完成向导**页面，验证你在**维护计划向导**摘要中的选择，展开选择以查看设置，然后点击**完成**。
- en: When the **Maintenance Plan Wizard** progress has finished, verify that each
    action was successful.
  id: totrans-539
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当**维护计划向导**进度完成时，验证每个操作是否成功。
- en: How it works...
  id: totrans-540
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In this recipe, we tried to make sure that our SQL Server for VCM is performing
    optimally and we don't need much operator intervention for VCM maintenance.
  id: totrans-541
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，我们试图确保VCM的SQL Server运行最优，并且我们不需要太多操作员干预来进行VCM维护。
- en: We scheduled a maintenance plan to keep our database clutter free and help it
    perform better.
  id: totrans-542
  prefs: []
  type: TYPE_NORMAL
  zh: 我们安排了一个维护计划，以保持我们的数据库整洁并帮助其更好地运行。
