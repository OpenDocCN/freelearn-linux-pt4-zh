- en: Software Package Management
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 软件包管理
- en: To keep your system up to date and install or remove applications as you choose,
    Linux supports multiple methods. One method is to use the source code of the application
    for compilation and installation on your machine. Another one is using pre-built
    programs or groups of programs known as **packages**, which are ready for installation
    on a particular distribution.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 为了保持系统最新，并根据需要安装或删除应用程序，Linux支持多种方法。一种方法是使用应用程序的源代码进行编译并安装到机器上。另一种方法是使用预构建的程序或一组程序，称为**包**，这些程序已经准备好在特定的发行版上安装。
- en: In this chapter, you will learn how to manage these pre-built software packages
    using RPM and the YUM utility. You will also learn how to add or remove official
    and third-party repositories in CentOS 7.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将学习如何使用RPM和YUM工具管理这些预构建的软件包。你还将学习如何在CentOS 7中添加或删除官方和第三方仓库。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Managing applications using RPM
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用RPM管理应用程序
- en: Managing applications using YUM
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用YUM管理应用程序
- en: Managing official and third-party repositories
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理官方和第三方仓库
- en: Creating custom repositories
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建自定义仓库
- en: Managing applications using RPM
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用RPM管理应用程序
- en: '**RPM** (short for **Red Hat Package Manager**) is an open source package management
    utility developed by Red Hat for RPM-based systems such as RHEL, CentOS, and Fedora.
    Using the RPM utility, the user can install, remove, update, query, and verify
    application packages built in the `.rpm` format. You can download `.rpm` packages
    from repositories containing application packages in `.rpm` format.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '**RPM**（即**Red Hat软件包管理器**）是由Red Hat为基于RPM的系统（如RHEL、CentOS和Fedora）开发的开源包管理工具。使用RPM工具，用户可以安装、删除、更新、查询和验证以`.rpm`格式构建的应用程序包。你可以从包含`.rpm`格式应用程序包的仓库下载`.rpm`包。'
- en: An RPM package may or may not require any resource prerequisites. If a rpm package
    requires any resource, such as a shared library or another package to be available
    on system before proceeding ahead with that rpm package installation, then those
    resources are known as dependencies of that package. A package management utility
    such as YUM automatically resolves the dependencies when a package is installed,
    while the RPM utility lacks this feature. Using the RPM utility, you can find
    out a package dependency, but RPM cannot automatically install them. The RPM utility is
    also known as a low-level package management tool.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 一个RPM包可能需要或不需要任何资源前提。如果一个RPM包需要某些资源，比如共享库或其他包必须在安装该RPM包之前存在于系统中，那么这些资源被称为该包的依赖项。像YUM这样的包管理工具会在安装包时自动解决依赖关系，而RPM工具则没有此功能。使用RPM工具，你可以查找包的依赖项，但RPM无法自动安装它们。RPM工具也被称为低级包管理工具。
- en: Anatomy of a RPM
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: RPM的结构
- en: 'The naming of each RPM package file follows a standard, as given here:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 每个RPM包文件的命名遵循一个标准，如下所示：
- en: '[PRE0]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The naming convention used for RPM packages is shown in the following diagram:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 用于RPM包的命名约定如下面的图示所示：
- en: '![](img/14a4c9ae-4b6c-4bfe-b9a5-0825a9f2be8c.png)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![](img/14a4c9ae-4b6c-4bfe-b9a5-0825a9f2be8c.png)'
- en: 'The following table describes the breakdown of various fields used in the naming
    of RPM packages, and their descriptions:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 下表描述了用于命名RPM包的各个字段及其描述：
- en: '| **Field** | **Description** |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| **字段** | **描述** |'
- en: '| Name | It consists of a string describing the contents of the application.
    |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| 名称 | 它由描述应用程序内容的字符串组成。 |'
- en: '| Version | It is the version number of the application. |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| 版本 | 它是应用程序的版本号。 |'
- en: '| Release | It is the release number of the package set by the packager. |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| 发布 | 它是由打包者设置的包的发布编号。 |'
- en: '| Arch | It describes the architecture of the package. It says for what architecture
    the package was built: 32-bit, 64-bit, or both:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '| 架构 | 它描述了包的架构。它说明包是为哪种架构构建的：32位、64位，或两者兼有：'
- en: '`i386`: 32-bit'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`i386`：32位'
- en: '`x86_64`: 64-bit'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`x86_64`：64位'
- en: '`noarch`: Not specific to any architecture, can be used on both 32-bit and
    64-bit'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`noarch`：与任何架构无关，可以在32位和64位系统上使用'
- en: '|'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Using RPM packages for installing an application has the added advantage of
    manageability (tracking package files, updating the package, removing the package).
    Almost all software provided by CentOS is in the form of RPM packages.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 使用RPM包安装应用程序具有管理的额外优势（跟踪包文件、更新包、删除包）。几乎所有CentOS提供的软件都是以RPM包的形式提供的。
- en: 'An RPM package primarily consists of three components: metadata, files, and
    scripts. Metadata consists of package name, version, release, builder, date, dependencies,
    and so on. Files consist of archives of files contained in the package to be installed.
    The scripts file inside an RPM package is executed when the package is installed,
    removed, or updated.'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: RPM 包主要由三个部分组成：元数据、文件和脚本。元数据包含包名、版本、发布、构建者、日期、依赖关系等信息。文件部分包含要安装的包中包含的文件档案。RPM
    包内的脚本文件会在安装、移除或更新包时执行。
- en: What happens when you update an application
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更新应用程序时会发生什么
- en: When an application is updated, typically, the older version of the package
    is removed from the system. The existing configuration files are generally retained,
    but retaining, overwriting, or writing a new configuration file with a different
    name is decided while creating the package.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 当应用程序更新时，通常，旧版本的包会从系统中移除。现有的配置文件通常会被保留，但是否保留、覆盖或以不同的名称写入新的配置文件则是在创建包时决定的。
- en: In a typical scenario, only one version of an application is installed at a
    time. However, in certain cases, multiple versions of the same application exist,
    such as in kernel packages or in a multi-architecture environment where the same
    package is installed for different architectures (32-bit and 64-bit). A kernel
    package is designed so that multiple versions can be kept in the system. If a
    new installation of the kernel fails, the older kernel is always available as
    a standby. Always remember that the kernel package is never updated using the update
    option of the RPM utility. It is always installed and not updated.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在典型情况下，每次只安装一个版本的应用程序。然而，在某些情况下，可能会存在同一应用程序的多个版本，比如内核包或在多架构环境中，同一包会为不同架构（32位和64位）安装。内核包设计时考虑到可以保留多个版本。如果新的内核安装失败，旧版本的内核始终可以作为备用。请始终记住，内核包从不通过
    RPM 工具的更新选项进行更新，它总是安装而不是更新。
- en: Using RPM to query options with RPM packages
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 RPM 查询选项与 RPM 包一起使用
- en: 'There are several options that are used in combination with query options.
    Some popular ones are as follows:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 有几个选项可以与查询选项一起使用。一些常用的选项如下：
- en: 'List all the packages installed in the system:'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列出系统中安装的所有包：
- en: '[PRE1]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Find a specific package installed in the system by piping the output of the previous
    command to the `grep` command, as shown here:'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过将上一命令的输出传递给 `grep` 命令来查找系统中安装的特定包，如下所示：
- en: '![](img/85839048-0beb-4a96-9155-afe92f81925f.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](img/85839048-0beb-4a96-9155-afe92f81925f.png)'
- en: 'Identify the package that installed a file on the system, as shown here:'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如下所示，识别安装了某个文件的包：
- en: '![](img/a57bfb1f-7be4-4926-96e7-80a44b59fdcf.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a57bfb1f-7be4-4926-96e7-80a44b59fdcf.png)'
- en: 'Display the list of files installed by an RPM package, as shown here:'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示 RPM 包安装的文件列表，如下所示：
- en: '![](img/7ef018a6-f8c7-4d19-b151-8ee8a0970b4e.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7ef018a6-f8c7-4d19-b151-8ee8a0970b4e.png)'
- en: 'Display the recently installed RPM package, as shown here:'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示最近安装的 RPM 包，如下所示：
- en: '![](img/666d967a-d6a6-4423-9f08-c390aec06d47.png)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![](img/666d967a-d6a6-4423-9f08-c390aec06d47.png)'
- en: 'Display information on the installed package, as shown here:'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示已安装包的信息，如下所示：
- en: '![](img/c6878191-6639-45e4-aa36-8c38c9b15e35.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c6878191-6639-45e4-aa36-8c38c9b15e35.png)'
- en: 'Display the documentation of the file installed by a package, as shown here:'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示包安装的文件文档，如下所示：
- en: '![](img/7af55afd-6654-4030-8d96-4350c949b32c.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7af55afd-6654-4030-8d96-4350c949b32c.png)'
- en: 'Display the documentation installed by package, name as shown here:'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示包安装的文档，名称如下所示：
- en: '![](img/e453eeb6-d809-445d-91d7-25daa639c132.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e453eeb6-d809-445d-91d7-25daa639c132.png)'
- en: 'Display the configuration file installed by the package, as shown here:'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示包安装的配置文件，如下所示：
- en: '![](img/2f3813e5-33eb-4e41-bc17-f68feca32dc0.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2f3813e5-33eb-4e41-bc17-f68feca32dc0.png)'
- en: 'Display the list of change information of a specific package, as shown here:'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示特定包的变更信息列表，如下所示：
- en: '![](img/3b5046eb-cf4e-4016-acbc-40d2e20c08da.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3b5046eb-cf4e-4016-acbc-40d2e20c08da.png)'
- en: Verifying RPM package signatures
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 验证 RPM 包签名
- en: 'The RPM packages are generally signed by the organization, community, or individual
    that packages them using the GPG private key. Before installing a package on our
    system, we should always verify the signature of the package with its public GPG
    key to ascertain its integrity. The following command is used to check the signature
    of RPM packages:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: RPM包通常由打包它们的组织、社区或个人使用GPG私钥签名。在我们系统上安装包之前，我们应始终使用其公共GPG密钥验证包的签名，以确认其完整性。以下命令用于检查RPM包的签名：
- en: '[PRE2]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Using RPM to install packages
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用RPM安装包
- en: 'To install a package, the `-i` option is used. It is generally clubbed with
    the `-v` and `-h` options for verbosity and to display the progress of the installation
    using hash symbols, as shown in the following screenshot:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装包，使用`-i`选项。通常与`-v`和`-h`选项一起使用，以便在安装过程中显示详细信息并使用哈希符号显示安装进度，如下所示：
- en: '![](img/42e2b1b1-3cca-40a8-a53f-826ae2bff25f.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42e2b1b1-3cca-40a8-a53f-826ae2bff25f.png)'
- en: The disadvantage of using this method is that RPM is unable to resolve the dependency
    automatically, and hence it will exit installation in-between if it encounters
    any unmet dependencies while installing the package.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 使用此方法的缺点是RPM无法自动解析依赖关系，因此如果在安装包时遇到任何未满足的依赖关系，它将中途退出安装。
- en: We can use RPM to install a package forcefully as well, by disabling the dependency
    check during the installation process using the `--nodeps` option. This method
    is not recommended as a program may fail to work after, that is, if it is installed
    without resolving its dependencies.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以使用RPM强制安装包，通过在安装过程中使用`--nodeps`选项禁用依赖检查。这个方法不推荐使用，因为程序可能会在没有解析依赖关系的情况下失败。
- en: 'An example of forceful installation of a package using the RPM utility is shown
    in the following screenshot:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 使用RPM工具强制安装包的示例如下所示：
- en: '![](img/dfc24aba-3969-494b-a4dd-0edc3b3d3191.png)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dfc24aba-3969-494b-a4dd-0edc3b3d3191.png)'
- en: Using rpm to remove packages
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用rpm删除包
- en: 'We can remove a package by specifying the package name with the `-e` option,
    as shown here:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过指定包名和`-e`选项来删除一个包，如下所示：
- en: '![](img/44d0ea80-b191-4c71-b4b7-0356edce8f4d.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![](img/44d0ea80-b191-4c71-b4b7-0356edce8f4d.png)'
- en: 'We can also remove a package without doing the dependency check. It will forcefully
    remove the package from the system and any application, depending on that particular
    package may fail to run. The following diagram shows how to remove a package without
    checking its dependencies:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 我们也可以在不进行依赖检查的情况下删除一个包。这将强制从系统中删除包，任何依赖该包的应用程序可能无法运行。以下图示显示了如何在不检查依赖关系的情况下删除包：
- en: '![](img/68b95824-0f88-4d5a-a414-f469788c58f9.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](img/68b95824-0f88-4d5a-a414-f469788c58f9.png)'
- en: Using RPM to upgrade packages
  id: totrans-68
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用RPM升级包
- en: 'Most of the time, installed packages are automatically upgraded using a high-level
    package manager such as YUM. However, if a package is not available for upgrade
    through the central repository, it can be downloaded from the internet and upgraded
    manually, as shown here:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数情况下，已安装的包会通过像YUM这样的高级包管理器自动升级。然而，如果包无法通过中央仓库升级，可以从互联网下载并手动升级，如下所示：
- en: '[PRE3]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'We can use either the preceding command or the following command to upgrade
    a package manually:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用前面的命令或下面的命令手动升级一个包：
- en: '[PRE4]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'An example of the `rpm` command to upgrade a package is shown here:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是使用`rpm`命令升级包的示例：
- en: '![](img/3c847701-9ffb-4bea-b4df-c0b7dd71675e.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3c847701-9ffb-4bea-b4df-c0b7dd71675e.png)'
- en: Using RPM to verify packages
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用RPM验证包
- en: 'Verify the installed files of the package against the files available in the RPM
    file, as shown here:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如下所示，验证包的已安装文件与RPM文件中的文件是否一致：
- en: '![](img/a202d399-7ce3-4c06-a831-0fa1c5c335c3.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a202d399-7ce3-4c06-a831-0fa1c5c335c3.png)'
- en: Importing a RPM GPG key
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导入RPM GPG密钥
- en: 'To verify package integrity before installation, the repository or package
    author''s public GPG key must be imported into our system. The following screenshot
    shows the command that''s used to import the CentOS 7 GPG key:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装前验证包的完整性时，必须将仓库或包作者的公共GPG密钥导入到系统中。以下截图显示了导入CentOS 7 GPG密钥的命令：
- en: '![](img/006dd2d3-587b-47d4-8d59-adb8ba3f8d7c.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](img/006dd2d3-587b-47d4-8d59-adb8ba3f8d7c.png)'
- en: 'Display all the imported RPM repositories'' GPG keys on the system, as shown
    in the following screenshot:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 显示系统上所有导入的RPM仓库的GPG密钥，如下图所示：
- en: '![](img/747c14eb-d8ac-4f0c-85a5-327bf70e8346.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](img/747c14eb-d8ac-4f0c-85a5-327bf70e8346.png)'
- en: Managing applications using YUM
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用YUM管理应用程序
- en: '**YUM** (short for **Yellowdog Updater Modified**) is an open source tool that
    was developed by Red Hat Inc for RPM-based systems. It is a high-level package
    management tool that''s used for easily installing, removing, updating, or searching
    software packages on systems or in network repositories. It allows us to use a
    CentOS base and third-party repositories that are created on remote or local servers
    to install individual packages or groups of packages automatically, after resolving
    their dependencies.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '**YUM**（**Yellowdog Updater Modified**的缩写）是由Red Hat公司为基于RPM的系统开发的开源工具。它是一个高级包管理工具，用于在系统或网络仓库中轻松安装、删除、更新或搜索软件包。它允许我们使用CentOS基础和第三方仓库，这些仓库可以托管在远程或本地服务器上，在解决依赖关系后自动安装单个包或一组包。'
- en: In upcoming versions, YUM is being replaced by DNF (which is compatible in its
    command set). YUM has already been replaced with DNF (Dandified YUM) as the main
    package manager in Fedora.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在未来的版本中，YUM将被DNF替代（其命令集兼容）。YUM已在Fedora中被DNF（改良版YUM）替代，成为主要的包管理工具。
- en: Understanding the YUM package manager
  id: totrans-86
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解YUM包管理器
- en: The main configuration file of YUM is `/etc/yum.conf`, and the main directory,
    which stores the repository configuration file, is `/etc/yum.repos.d/`. The repository
    configuration file has got a specific syntax, and it should end with a `.repo`
    extension in the `/etc/yum.repos.d/` directory.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: YUM的主配置文件是`/etc/yum.conf`，存储仓库配置文件的主目录是`/etc/yum.repos.d/`。仓库配置文件有特定的语法，且应以`.repo`扩展名结尾，存放在`/etc/yum.repos.d/`目录下。
- en: The repository configuration file contains the URL of the repository, the `repo
    id`, `repo name`, instructions to use GPG for checking package signatures, and
    an option to enable or disable the repository.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 仓库配置文件包含仓库的URL、`repo id`、`repo name`、使用GPG检查软件包签名的说明以及启用或禁用仓库的选项。
- en: Using the YUM command line
  id: totrans-89
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用YUM命令行
- en: In this section, we will learn about package management by using YUM on the Linux
    command line.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将学习如何在Linux命令行中使用YUM进行包管理。
- en: Finding an application using yum
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用yum查找应用程序
- en: 'We can search for a package name using YUM in multiple ways. The search option
    with a keyword (package name) lists the package in which the specified keyword
    is present in the package name itself and in the summary field of packages also.
    The following example are used to illustrate the working `yum search` command:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过多种方式使用YUM搜索包名。带有关键字（包名）的搜索选项将列出包名本身以及包的摘要字段中包含指定关键字的包。以下示例用于说明`yum search`命令的工作方式：
- en: 'Search for a package by name only using `yum search` command, as shown here:'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仅通过包名使用`yum search`命令查找包，如下所示：
- en: '[PRE5]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'An example of yum search command to find the package named `whois` is shown
    here:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是一个使用yum search命令查找名为`whois`的包的示例：
- en: '![](img/e2761b6f-2cb3-455c-932d-0163197fc31e.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e2761b6f-2cb3-455c-932d-0163197fc31e.png)'
- en: 'Find the package if the search string is available in name, summary, and description
    fields, as shown here:'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查找包时，如果搜索字符串出现在名称、摘要和描述字段中，则可以找到包，如下所示：
- en: '![](img/d1ab168e-4a3b-4613-83e7-23816cebf407.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d1ab168e-4a3b-4613-83e7-23816cebf407.png)'
- en: 'Search for a package by package description using the `yum whatprovides` command,
    as shown here:'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`yum whatprovides`命令根据包描述搜索包，如下所示：
- en: '[PRE6]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'An example of the `yum whatprovides` command to find the package name `lynx`
    is shown here:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是一个使用`yum whatprovides`命令查找包名`lynx`的示例：
- en: '![](img/cee7a719-4d84-4fca-b660-377bdad504d8.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cee7a719-4d84-4fca-b660-377bdad504d8.png)'
- en: 'Identify the package that installed a file (absolute path name) on the system
    using the `yum provides` command, as shown here:'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`yum provides`命令识别在系统中安装了某个文件（绝对路径名）的包，如下所示：
- en: '![](img/ce00c151-1b7d-4e02-ac15-899e49cd8db9.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ce00c151-1b7d-4e02-ac15-899e49cd8db9.png)'
- en: Installing applications using YUM
  id: totrans-105
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用YUM安装应用程序
- en: We can install a new package using the YUM utility. The YUM utility will resolve
    all the dependencies of the package and prompt for confirmation before installation.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用YUM工具安装新包。YUM工具将解析包的所有依赖关系，并在安装前提示确认。
- en: '**The following are examples to illustrate the usage of the yum command for
    package installation:**'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '**以下是一些示例，用于说明使用yum命令安装包的方法：**'
- en: 'Use the following command to install an application using YUM:'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用以下命令通过YUM安装应用程序：
- en: '[PRE7]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Install an application without prompting for confirmation by using the `-y`
    option:'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`-y`选项安装应用程序而不提示确认：
- en: '[PRE8]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Install a package without verifying its signature:'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装一个不验证其签名的包：
- en: '[PRE9]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Install a downloaded RPM file from a local directory. It automatically downloads
    the dependencies of the package from the configured repositories:'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从本地目录安装已下载的RPM文件。它会自动从配置的仓库下载包的依赖项：
- en: '[PRE10]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'An example of the `yum localinstall` command is shown here:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '`yum localinstall`命令的示例如下所示：'
- en: '![](img/33d4c78f-c158-4bb0-9708-3575c764c5d9.png)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![](img/33d4c78f-c158-4bb0-9708-3575c764c5d9.png)'
- en: Displaying packages and their information with YUM
  id: totrans-118
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用YUM显示软件包及其信息
- en: 'The following are examples of displaying detailed information of a package
    using the `yum` command:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用`yum`命令显示软件包详细信息的示例：
- en: 'The usage of the `yum info` command is shown here:'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`yum info`命令的用法如这里所示：'
- en: '![](img/cde369be-6945-4d7b-88c6-387d13ee637c.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cde369be-6945-4d7b-88c6-387d13ee637c.png)'
- en: 'The usage of the `yum list` command to display the installed packages list
    is shown in the command line here:'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`yum list`命令显示已安装软件包列表，如命令行中所示：
- en: '[PRE11]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The usage of the `yum list` command to display the installed and available
    package information using its name is shown in the following screenshot:'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`yum list`命令按名称显示已安装和可用的软件包信息，如下图所示：
- en: '![](img/0fac6c4e-d248-4dae-9bc9-a5e876ba4803.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0fac6c4e-d248-4dae-9bc9-a5e876ba4803.png)'
- en: 'The `yum list` command can also be used to display all available packages in
    repositories from the YUM database, as shown in command line here:'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`yum list`命令也可以用来显示来自YUM数据库的所有可用软件包，如命令行中所示：'
- en: '[PRE12]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Removing applications using yum
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用yum删除应用程序
- en: 'The following are examples to illustrate the usage of the `yum command` for
    removing an application package:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用`yum`命令删除应用程序包的示例：
- en: 'The `yum` command can be used to remove a package with all its dependencies,
    as shown in the command line here:'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`yum`命令可用于删除一个软件包及其所有依赖项，如命令行中所示：'
- en: '[PRE13]'
  id: totrans-131
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The `yum` command can also be used with the `-y` option to remove an application
    without prompting for confirmation, as shown in the command line here:'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`yum`命令还可以与`-y`选项一起使用，以在没有提示确认的情况下删除应用程序，如命令行中所示：'
- en: '[PRE14]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Updating applications and the system using yum
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用yum更新应用程序和系统
- en: 'We can see whether there are any updates available for the packages installed
    on our system by executing the command line, as shown here:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过执行命令行来查看系统中已安装的软件包是否有更新，如下所示：
- en: '[PRE15]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'We can also update an installed application and its dependencies to the latest
    stable version using the `yum` command. In this process, YUM preserves the existing
    configuration files, except in cases where it is mandatory to update the configuration
    file for working on an updated version of the application, as shown in command
    line here:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以使用`yum`命令将已安装的应用程序及其依赖项更新到最新的稳定版本。在此过程中，YUM会保留现有的配置文件，除非必须更新配置文件以便在更新版本的应用程序上工作，如命令行中所示：
- en: '[PRE16]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'We can update our system and installed application together in a single command
    by not specifying any application name to the `yum update` command, as shown in
    command line here:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过不指定任何应用程序名称给`yum update`命令，从而在一条命令中同时更新系统和已安装的应用程序，如命令行中所示：
- en: '[PRE17]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: While updating the system or application, all applications except the kernel
    are updated immediately at runtime. The latest kernel version comes into effect
    only after rebooting the system. We can use the `uname -r` command to view the
    running kernel version.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在更新系统或应用程序时，除了内核以外，所有应用程序会立即在运行时更新。最新的内核版本仅在重新启动系统后生效。我们可以使用`uname -r`命令查看当前运行的内核版本。
- en: Managing groups of applications using YUM
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用YUM管理应用程序组
- en: 'In CentOS 7, related packages that serve a common purpose are grouped under
    one category. We can also install a particular group containing related packages,
    in place of installing them one by one, as shown in the following examples:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在CentOS 7中，执行相同功能的相关软件包被分组在同一类别下。我们还可以通过安装特定的包含相关软件包的组来代替逐一安装，如下所示的示例：
- en: 'Display all the package groups by using the `yum grouplist` command, as shown
    here:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`yum grouplist`命令显示所有软件包组，如下所示：
- en: '[PRE18]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Install a specific package group of related packages by using the `yum groupinstall`
    command, as shown here:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`yum groupinstall`命令安装相关软件包的特定包组，如下所示：
- en: '[PRE19]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Update packages in an existing installed package group by using the `yum groupupdate`
    command, as shown here:'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`yum groupupdate`命令更新现有安装的软件包组中的软件包，如下所示：
- en: '[PRE20]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'We can also remove an installed group of packages from the system by using
    the `yum groupremove` command, as shown here:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以使用`yum groupremove`命令从系统中移除已安装的软件包组，如下所示：
- en: '[PRE21]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'We can display information about mandatory, default, and optional packages
    that are installed or not installed with the group in the system by using the `yum
    groupinfo` command. The output of this command displays the list of packages in
    that group, with each package name displayed with a symbol in front of them. The
    following table lists the symbol and its corresponding meaning, as follows:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用`yum groupinfo`命令显示系统中已安装或未安装的强制性、默认和可选软件包的信息。此命令的输出显示该组中的软件包列表，每个软件包名前都会显示一个符号。下表列出了符号及其对应的含义：
- en: '| **Symbol** | **Meaning** |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| **符号** | **含义** |'
- en: '| `=` | Package was installed as part of the group and is presently installed
    on the system. |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| `=` | 软件包作为该组的一部分被安装，并且目前已安装在系统上。 |'
- en: '| `+` | Package is not installed on the system. It will get installed if the group
    is installed or updated. |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| `+` | 系统上未安装该软件包。如果安装或更新该组，软件包将会被安装。 |'
- en: '| `-` | Package is not installed on the system and it will not get installed
    if the group is installed or updated. |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| `-` | 系统上未安装该软件包，如果安装或更新该组，软件包将不会被安装。 |'
- en: '| No symbol | Package is installed on the system, but it was not installed
    through the group. |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| 无符号 | 软件包已安装在系统上，但不是通过该组安装的。 |'
- en: 'An example of the `yum groupinfo` command to find the information of packages
    installed with a group is shown in the command line here:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '`yum groupinfo`命令的一个示例，用于查找通过组安装的软件包的信息，如命令行所示：'
- en: '[PRE22]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Using YUM history
  id: totrans-160
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 YUM 历史记录
- en: 'YUM keeps a record of all the past install and remove transactions in a log
    file that is, `/var/log/yum.log`. An example to display the record of yum transactions
    kept in a log file is shown in the following screenshot:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: YUM 会在日志文件`/var/log/yum.log`中记录所有过去的安装和移除事务。以下截图显示了如何查看存储在日志文件中的 yum 事务记录：
- en: '![](img/bfdf793a-0bef-41df-b717-39a8f760a44b.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bfdf793a-0bef-41df-b717-39a8f760a44b.png)'
- en: 'We can display the history of installed and removed packages with the `yum` command,
    as shown here:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用`yum`命令显示已安装和已移除的软件包的历史记录，如下所示：
- en: '![](img/cdc822bf-3dbe-49d2-8ade-c8e9b33a98e5.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cdc822bf-3dbe-49d2-8ade-c8e9b33a98e5.png)'
- en: 'We can undo a previous transaction using the `yum history undo` command, as
    shown here:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用`yum history undo`命令撤销之前的事务，如下所示：
- en: '![](img/eb27fb19-1cb8-4007-8d6f-01b7ff07db54.png)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eb27fb19-1cb8-4007-8d6f-01b7ff07db54.png)'
- en: Managing application repositories using YUM
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 YUM 管理应用程序仓库
- en: 'To manage application repositories using YUM, do the following:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用 YUM 管理应用程序仓库，请执行以下操作：
- en: 'Display only all enabled repositories in the system using the `yum repolist`
    command, as shown here:'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`yum repolist`命令仅显示系统中已启用的仓库，如下所示：
- en: '[PRE23]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Display all available (enabled or disabled) repositories in the system using
    the `yum repolist all` command, as shown here:'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`yum repolist all`命令显示系统中所有可用（启用或禁用）的仓库，如下所示：
- en: '[PRE24]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'We can install a package from a specific repository by enabling it for runtime only.
    It is used to install a package from a specific repository when it exists in more
    than one repository, as shown in command line here:'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以通过仅在运行时启用某个仓库来安装来自特定仓库的软件包。它用于在一个软件包存在于多个仓库时，从特定仓库安装该软件包，如命令行所示：
- en: '[PRE25]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'We can permanently enable or disable a repository by using the `yum-config-manager`
    utility. It makes necessary changes in the file stored in the `/etc/yum.repos.d/`
    directory, as shown in command line here:'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以使用`yum-config-manager`工具永久启用或禁用一个仓库。它会在`/etc/yum.repos.d/`目录下的文件中进行必要的更改，如命令行所示：
- en: '[PRE26]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The `yum-config-manager` utility can also be used to create a client repo configuration
    file inside `/etc/yum.repos.d`, as shown in the following command line:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '`yum-config-manager`工具还可以用于在`/etc/yum.repos.d`目录下创建客户端仓库配置文件，如下所示：'
- en: '`$ yum-config-manager       \                                        --addrepo=http://repo.example.com/7/x86_64/`'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: '`$ yum-config-manager       \                                        --addrepo=http://repo.example.com/7/x86_64/`'
- en: Handling other miscellaneous options of yum
  id: totrans-179
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 处理其他杂项 yum 选项
- en: 'The YUM utility also provides an interactive shell using the `yum shell` command
    for performing multiple tasks in one go. To exit from the YUM shell, type `exit`
    or `quit`, or press *Ctrl* + *D.* The example in the following screenshot illustrates
    the usage of the `yum shell` command:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: YUM 工具还提供了一个交互式 Shell，通过 `yum shell` 命令一次性执行多个任务。要退出 YUM Shell，请输入 `exit` 或
    `quit`，或按 *Ctrl* + *D*。以下截图中的示例说明了 `yum shell` 命令的用法：
- en: '![](img/eb66ad06-c127-4ec5-a217-9dbe8f76a434.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eb66ad06-c127-4ec5-a217-9dbe8f76a434.png)'
- en: 'YUM keeps all the enabled repositories'' cached packages and other data in
    the `/var/cache/yum` directory. Here, YUM creates a subdirectory for each repository.
    We can clean or empty the cached directory to save space at any time by executing
    the following command:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: YUM 会将所有启用的仓库的缓存包和其他数据存储在 `/var/cache/yum` 目录中。在这里，YUM 会为每个仓库创建一个子目录。我们可以通过执行以下命令随时清理或清空缓存目录，以节省空间：
- en: '[PRE27]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'We can display the usage information of YUM by using the following command:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用以下命令显示 YUM 的使用信息：
- en: '[PRE28]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: Managing official and third-party repositories
  id: totrans-186
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理官方和第三方仓库
- en: Sometimes, the desired software is not available in the base (official) repositories
    of CentOS 7\. In such scenarios, CentOS 7 and other Linux communities have contributed
    to several third-party repositories that can be used to install a variety of applications
    that are not available in official repositories. This section discusses various
    popular third-party repositories that are available for CentOS 7.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，所需的软件在 CentOS 7 的基础（官方）仓库中不可用。在这种情况下，CentOS 7 和其他 Linux 社区已贡献了多个第三方仓库，可以用于安装官方仓库中没有的各种应用程序。本节将讨论适用于
    CentOS 7 的各种流行第三方仓库。
- en: Official repositories of CentOS 7
  id: totrans-188
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: CentOS 7 的官方仓库
- en: By default, CentOS 7 provides the base repository, the updates repository, and
    the extras repository. These repositories are managed by the CentOS community
    and are sufficient for completing most of the daily operations requirements.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，CentOS 7 提供基础仓库、更新仓库和附加仓库。这些仓库由 CentOS 社区管理，足以满足大多数日常操作需求。
- en: Third-party repositories
  id: totrans-190
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第三方仓库
- en: These are the repositories that are not managed by the official CentOS community.
    Sometimes, we need to add them to our YUM database of repositories to download
    and install certain software, which is not available in CentOS official repositories.
    However, if these are added, they should be managed separately to prevent any
    unintended or conflicting updates from them.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是没有由官方 CentOS 社区管理的仓库。有时，我们需要将它们添加到 YUM 仓库数据库中，以便下载和安装在 CentOS 官方仓库中没有的软件。然而，如果添加这些仓库，应该单独管理它们，以避免它们带来的任何意外或冲突更新。
- en: 'The following is a list of certain repositories that have certain additional CentOS packages
    that are not available in the CentOS base or updates repository:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些特定仓库的列表，这些仓库包含在 CentOS 基础仓库或更新仓库中没有的额外 CentOS 包：
- en: '**Extra Packages for the Enterprise Linux (EPEL) repository**: This repository
    is maintained by the Fedora community and is one of the most trusted third-party
    repositories that can be added in your system. We can add this repository to our
    system with the following command:'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**企业 Linux 扩展包（EPEL）仓库**：该仓库由 Fedora 社区维护，是可以添加到系统中的最受信任的第三方仓库之一。我们可以使用以下命令将此仓库添加到系统中：'
- en: '[PRE29]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '**Community Enterprise Linux Repository (ELRepo)**: This is an Enterprise Linux
    repository that provides hardware-related RPM packages. It includes filesystem
    drivers, graphics, sound, webcam, video, and network drivers, and the latest kernel
    packages. We can add this repository to our system with the following command:'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**社区企业 Linux 仓库（ELRepo）**：这是一个企业 Linux 仓库，提供与硬件相关的 RPM 包。它包括文件系统驱动程序、图形、声音、摄像头、视频和网络驱动程序，以及最新的内核包。我们可以使用以下命令将此仓库添加到系统中：'
- en: '![](img/05c9efb8-7922-4d48-9c6e-bae87c52f04a.png)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
  zh: '![](img/05c9efb8-7922-4d48-9c6e-bae87c52f04a.png)'
- en: '**Nux-desktop repository**: This repository provides desktop and multimedia-related
    packages for Enterprise Linux. Some popular multimedia software such as VLC media
    player, mplayer, and so on are available through this repository. Some of the
    packages in this repository have some dependencies that are resolved with the EPEL
    repository. At the same time, it is strongly recommended not to use this repository
    with RPMForge or the ATRPMS repository as it may lead to conflict between packages
    and dependencies. Also, RPMForge is a dead project and is not being maintained.
    We can add the Nux-desktop repository to our system with the following command:'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Nux-desktop 仓库**：该仓库提供面向企业版 Linux 的桌面和多媒体相关软件包。一些流行的多媒体软件，如 VLC 媒体播放器、mplayer
    等，都可以通过这个仓库安装。此仓库中的一些软件包有一些依赖项，这些依赖项可以通过 EPEL 仓库解决。同时，强烈建议不要与 RPMForge 或 ATRPMS
    仓库一起使用此仓库，因为它可能会导致软件包和依赖项之间的冲突。此外，RPMForge 已经是一个废弃的项目，不再维护。我们可以通过以下命令将 Nux-desktop
    仓库添加到系统中：'
- en: '[PRE30]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '**Remi repository**: This is a third-party repository, mainly famous for providing
    the latest versions of the PHP stack, MySQL, and related software used in Enterprise
    Linux. It also requires the EPEL repository to be installed on CentOS before installing
    it. We can push the remi repository to our system with the following commands:'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Remi 仓库**：这是一个第三方仓库，主要以提供最新版本的 PHP 堆栈、MySQL 及相关软件而闻名，通常用于企业版 Linux。安装之前，它还需要先在
    CentOS 上安装 EPEL 仓库。我们可以通过以下命令将 Remi 仓库添加到系统中：'
- en: '[PRE31]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: The remi repository is not enabled by default on installation. To install packages
    using this repository, we need to first enable it.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，remi 仓库在安装时未启用。要使用此仓库安装软件包，我们需要先启用它。
- en: '**RPM fusion repository**: This third-party repository offers some free and
    non-free add-on packages that the Fedora project or Red Hat do not want to share
    with Enterprise Linux. We can add this repository to our system with the following
    command:'
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**RPM Fusion 仓库**：这个第三方仓库提供一些 Fedora 项目或 Red Hat 不希望与企业版 Linux 共享的免费和非免费附加包。我们可以通过以下命令将此仓库添加到系统中：'
- en: '[PRE32]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'There are many third-party repositories available; some of them are not maintained,
    whereas some of them have conflicting packages. For more information about repositories,
    such as which repositories should be avoided and which are recommended, you can
    go to the following wiki page of CentOS:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多第三方仓库可供选择，其中一些不再维护，而一些则存在包冲突。有关仓库的更多信息，例如哪些仓库应该避免使用，哪些仓库推荐使用，你可以访问 CentOS
    的以下 Wiki 页面：
- en: '[https://wiki.centos.org/AdditionalResources/Repositories](https://wiki.centos.org/AdditionalResources/Repositories).'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://wiki.centos.org/AdditionalResources/Repositories](https://wiki.centos.org/AdditionalResources/Repositories)'
- en: Creating custom repositories
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建自定义仓库
- en: Creating a YUM repository is one of the easiest and best ways to install software
    or security updates on multiple systems over LAN. We can download all the packages
    from the internet repository or from the DVD and host them on the local server,
    which will be known as the YUM server. Other Linux machines on the LAN can be
    configured to download the required packages from the local YUM server and they
    will be known as the YUM clients. This saves internet bandwidth, provides offline
    installation of packages to clients, and speeds up the update process.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个 YUM 仓库是通过局域网在多台系统上安装软件或安全更新的最简单和最好的方法之一。我们可以从互联网仓库或 DVD 下载所有的软件包，并将它们托管在本地服务器上，该服务器将被称为
    YUM 服务器。局域网中的其他 Linux 机器可以配置为从本地 YUM 服务器下载所需的软件包，这些机器将被称为 YUM 客户端。这样可以节省互联网带宽，提供离线安装软件包给客户端，并加速更新过程。
- en: 'In this section, we will create a custom repository of the packages shipped
    in the CentOS 7 DVD and share this repository to clients using an FTP server,
    as follows:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将创建一个自定义的 CentOS 7 DVD 包仓库，并通过 FTP 服务器将该仓库共享给客户端，步骤如下：
- en: 'Mount the media containing the packages. In our case, it will be the CentOS
    7 DVD, as shown here:'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 挂载包含软件包的介质。在本例中，它将是 CentOS 7 DVD，如下所示：
- en: '![](img/92c96960-530f-4917-8646-f0b7b5cbdd83.png)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![](img/92c96960-530f-4917-8646-f0b7b5cbdd83.png)'
- en: 'Install the FTP server package, `vsftpd`, from the mounted DVD, as shown here:'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从挂载的 DVD 中安装 FTP 服务器包 `vsftpd`，如下所示：
- en: '![](img/23cab79d-7d1b-4b08-aaea-e2aef5247c03.png)'
  id: totrans-212
  prefs: []
  type: TYPE_IMG
  zh: '![](img/23cab79d-7d1b-4b08-aaea-e2aef5247c03.png)'
- en: 'Now, enable the service to start `vsftpd` on boot automatically and start the
    service, as shown here:'
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，启用服务以便在启动时自动启动 `vsftpd` 并启动该服务，如下所示：
- en: '![](img/5412a63b-3ec2-4d28-8a8a-eada17911721.png)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5412a63b-3ec2-4d28-8a8a-eada17911721.png)'
- en: 'Install the `createrepo` package to create a local repository database. If
    the internet is connected to our system, we can use YUM to install the `createrepo`
    package, as shown in command line here:'
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装`createrepo`软件包以创建本地仓库数据库。如果系统连接了互联网，我们可以使用YUM来安装`createrepo`软件包，如命令行所示：
- en: '[PRE33]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'If you don’t have an internet connection, then install the package using the
    RPM package manager, as shown here:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有互联网连接，可以使用RPM包管理器安装软件包，如下所示：
- en: '![](img/fb72259c-a44a-4a96-a8af-87766a7e1802.png)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fb72259c-a44a-4a96-a8af-87766a7e1802.png)'
- en: 'We got the preceding error because in our system the `createrepo` package dependencies
    were not installed. So, we met the dependencies of `createrepo` package. First,
    install the following packages in the same order that''s shown here:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 我们遇到前面的错误是因为在系统中未安装`createrepo`软件包的依赖项。因此，我们满足了`createrepo`软件包的依赖关系。首先，按以下顺序安装以下软件包：
- en: '![](img/54e2211e-8420-43ba-89f5-6a1857e4ca56.png)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![](img/54e2211e-8420-43ba-89f5-6a1857e4ca56.png)'
- en: 'Store the packages in the `ftp` folder to build the local repository, as shown
    here:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将软件包存储在`ftp`文件夹中以构建本地仓库，如下所示：
- en: '![](img/ca92fa8d-6a2a-4361-ac08-3fe4243c1489.png)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ca92fa8d-6a2a-4361-ac08-3fe4243c1489.png)'
- en: 'Restore the SELinux tag on packages copied from the DVD, as per the `vsftpd`
    server files, as shown here:'
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据`vsftpd`服务器文件恢复从DVD复制的软件包的SELinux标签，如下所示：
- en: '![](img/e9cb118e-2b40-4c93-b403-73cf3b05ec1e.png)'
  id: totrans-224
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e9cb118e-2b40-4c93-b403-73cf3b05ec1e.png)'
- en: 'Create a YUM server configuration file with the `.repo` extension in the `/etc/yum.repos.d/`
    directory, as shown in command line here:'
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`/etc/yum.repos.d/`目录下创建一个以`.repo`扩展名结尾的YUM服务器配置文件，如命令行所示：
- en: '[PRE34]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'The content of the `localserver.repo` file is shown here:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: '`localserver.repo`文件的内容如下所示：'
- en: '![](img/debb73f8-9625-4db2-a11c-417b30de4175.png)'
  id: totrans-228
  prefs: []
  type: TYPE_IMG
  zh: '![](img/debb73f8-9625-4db2-a11c-417b30de4175.png)'
- en: 'Enable the local YUM server repository and clean the yum cache by using the
    `yum` command, as shown here:'
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用本地YUM服务器仓库并使用`yum`命令清理YUM缓存，如下所示：
- en: '[PRE35]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'After cleaning the previous cache of the YUM database, build the YUM database
    of the repository from scratch with the command that''s shown here:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 在清理YUM数据库的先前缓存后，使用如下命令从头开始构建仓库的YUM数据库：
- en: '![](img/1f820123-9c11-4160-bba1-185a0f52cbee.png)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1f820123-9c11-4160-bba1-185a0f52cbee.png)'
- en: You can use any other application such as a web server or an NFS server for
    sharing the packages of the YUM server (system serving the packages) to the YUM
    client (system downloading the packages). We also need to open the corresponding
    application port in the firewall to allow access for YUM clients for downloading
    packages from the YUM server.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用其他应用程序，如Web服务器或NFS服务器，来共享YUM服务器（提供软件包的系统）到YUM客户端（下载软件包的系统）。我们还需要在防火墙中打开相应的应用程序端口，以允许YUM客户端从YUM服务器下载软件包。
- en: Summary
  id: totrans-234
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we began with learning methods to keep your system and application
    software up to date. We learned how package management utilities such as RPM and
    YUM are used to install, remove, or update application packages. We had a look
    at different third-party repositories for CentOS 7\. Finally, we wrapped up this
    chapter by creating or own custom repository and making it available for clients.
    Keeping your system and applications updated is vital to make sure they are free
    from any vulnerabilities. This helps in securing your information and making the
    system safe from malware and hackers.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们首先学习了如何保持系统和应用程序软件的更新。我们了解了如何使用RPM和YUM等软件包管理工具来安装、移除或更新应用程序包。我们还查看了CentOS
    7的不同第三方仓库。最后，我们通过创建自定义仓库并使其对客户端可用来结束本章。保持系统和应用程序的更新至关重要，可以确保它们没有任何漏洞，有助于保护信息并使系统免受恶意软件和黑客的攻击。
- en: In our next chapter, we will learn some of the essential utilities of CentOS
    7\. We will see how system logging works and how you can manage system services.
    Then, we will understand the functionality of the firewall and SELinux for hardening
    system security.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将学习一些CentOS 7的基本工具。我们将看到系统日志如何工作以及如何管理系统服务。接着，我们将了解防火墙和SELinux在强化系统安全方面的功能。
