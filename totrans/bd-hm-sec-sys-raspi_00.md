# 序言

树莓派是一款强大且低成本的信用卡大小计算机，非常适合作为复杂家庭安防系统的控制器。利用现有的板载接口，树莓派可以扩展以连接几乎无限数量的安防传感器和设备。树莓派具备足够的处理能力和接口，能够构建复杂的家庭安防系统，但其成本仅为商业安防系统的一个小部分。

*使用树莓派构建家庭安防系统* 从向你展示树莓派及其如何设置基于 Linux 的操作系统开始。接着，本书引导你通过安全地将开关传感器和 LED 灯连接到原生的 GPIO 连接器，并展示如何使用简单的 Bash 脚本来访问这些设备。随着你深入了解，你将学习如何使用 I2C 接口和电源供应构建输入/输出扩展板，进而连接一个典型家庭安防系统所需的大量传感器。

本书配有清晰的图表和代码，列出了每个步骤，帮助你构建一个真正复杂且模块化的家庭安防系统。

# 本书内容

第一章，*设置树莓派*，从将树莓派从包装盒中取出并准备作为家庭安防系统的核心开始。在这个过程中，我们将安装和设置操作系统，将树莓派连接到网络并远程访问它。我们还将确保树莓派的安全，并确保它能正确地保持时间。

第二章，*通过 GPIO 连接设备到树莓派*，探讨了 GPIO 端口及其各种接口功能。我们将讨论如何通过 GPIO 将各种设备（如开关和传感器）连接到树莓派，开始构建我们的家庭安防系统。

第三章，*扩展树莓派连接更多设备*，探讨了扩展我们能连接到树莓派的设备数量的方法。我们通过挖掘 GPIO 上其他接口并构建自己的输入/输出扩展板，克服了仅有的八个数字引脚的限制。

第四章，*添加磁性接触传感器*，开始实际连接设备到我们的家庭安防系统，如磁性传感器和其他类型的接触设备。你将学习如何使用 Bash 脚本编程我们的 I2C 扩展端口，以便读取传感器的状态并开启警告 LED。我们还将开始开发控制脚本，使系统能够开关和设定延时计时器。

第五章, *添加被动红外运动传感器*，介绍了被动红外运动探测器的工作原理，以及如何将有线和无线类型连接到我们的家庭安全系统。我们还将学习如何使用 Bash 脚本根据事件创建日志文件，以便我们能够维护探测器状态变化的历史记录。

第六章, *将摄像头添加到我们的安全系统*，教你如何将 Raspberry Pi 摄像头模块和 USB 摄像头连接到我们的 Pi 板，以便在家庭安全系统需要时拍摄图像和视频。我们还将学习如何将图像叠加信息性文本，并立即通过电子邮件将文件发送给我们。

第七章, *构建基于网络的控制面板*，开始着手构建模块，建立一个适用于移动设备的网络控制面板，用于我们的家庭安全系统。你将学会如何在 Raspberry Pi 上设置网页服务器并使用网页控制面板操作文件，这意味着我们将开始探索到目前为止所有元素如何作为我们最终系统的一部分整合在一起。

第八章, *杂项*，探讨了其他一些内容，例如如何将与入侵者检测无关的其他传感器添加到我们的家庭安全系统中。我们还将讨论如何通过网页浏览器远程管理整个 Raspberry Pi 系统，并访问我们的家庭安全控制面板。

第九章, *将一切整合*，是我们一直在等待的时刻；我们将把前面各章的所有元素和概念结合起来，组建出我们完整的系统，包括我们希望展示的各个元素。重点将是我们的 Bash 脚本，它们将把这些元素连接起来，并为整个系统提供控制逻辑。

# 本书所需的工具

你需要以下软件：

+   Gparted dd fake-hwclock

+   Win32 Disk Imager 0.9.5 PuTTY

+   i2c-tools

# 本书适合谁阅读

本书适合任何有兴趣使用 Raspberry Pi 板、基础电子元件、传感器和简单脚本从零开始构建模块化家庭安全系统的人。本书非常适合热心的初学者程序员、电子爱好者以及工程专业人士。如果你有一些基本的焊接技能，以便构建一些接口模块，那会更好。

# 约定

在本书中，你会看到多种文本样式，用以区分不同种类的信息。以下是这些样式的示例及其含义的解释。

文本中的代码词汇、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟 URL、用户输入以及 Twitter 用户名，均按如下方式显示：“将`2015-09-24-raspbian-jessie.img`提取到你的`Home`文件夹。”

代码块按如下方式设置：

```
# passwd
root@raspberrypi:/home/pi# passwd
Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully
root@raspberrypi:/home/pi#
```

任何命令行输入或输出都按如下方式编写：

```
$ sudo apt-get install fake-hwclock

```

**新术语**和**重要词汇**以粗体显示。你在屏幕上看到的单词，如菜单或对话框中的内容，将像这样出现在文本中：“在主机名框中输入树莓派的 IP 地址，然后点击**打开**。”

### 注意

警告或重要说明会以这样的框显示。

### 提示

提示和技巧如下所示。

# 读者反馈

我们非常欢迎读者的反馈。告诉我们你对本书的看法——你喜欢或不喜欢的部分。读者反馈对我们非常重要，帮助我们开发出能让你最大化收益的书籍。

要向我们发送一般反馈，只需发送电子邮件到`<feedback@packtpub.com>`，并在邮件主题中提到书名。

如果你在某个领域有专长，并且有兴趣参与写作或为书籍做贡献，请参阅我们的作者指南，网址：[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

既然你已经成为了 Packt 书籍的骄傲拥有者，我们为你提供了一些帮助，以确保你最大程度地从购买中获益。

## 下载示例代码

你可以从你的 Packt 账户下载你购买的所有 Packt 书籍的示例代码文件。[`www.packtpub.com`](http://www.packtpub.com)。如果你是在其他地方购买的这本书，可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，文件将直接通过电子邮件发送给你。

## 勘误

尽管我们已尽力确保内容的准确性，但错误有时还是会发生。如果你发现我们书中的某个错误——无论是文本中的错误还是代码中的错误——我们将非常感激你能够报告给我们。这样一来，你可以避免其他读者的困扰，帮助我们改进后续版本的书籍。如果你发现任何勘误，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择你的书籍，点击勘误提交表格链接，填写勘误的详细信息。一旦勘误得到验证，你的提交将被接受，并且勘误会上传到我们的网站或加入到该书的勘误部分的现有列表中。

要查看之前提交的勘误，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索框中输入书名。所需的信息将在勘误部分显示。

## 盗版

网络上对版权材料的盗版问题在所有媒体中都在持续存在。在 Packt，我们非常重视版权和许可证的保护。如果您在互联网上发现任何非法复制的我们作品的版本，无论形式如何，请立即向我们提供该位置地址或网站名称，以便我们采取补救措施。

如果您发现涉嫌盗版的材料，请通过`<copyright@packtpub.com>`与我们联系，并提供相关链接。

我们感谢您的帮助，以保护我们的作者和我们为您带来有价值内容的能力。

## 问题

如果您在本书的任何方面遇到问题，请通过`<questions@packtpub.com>`与我们联系，我们将尽力解决。
