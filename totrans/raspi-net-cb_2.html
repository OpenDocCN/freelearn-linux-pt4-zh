<html><head></head><body><div class="chapter" title="Chapter&#xA0;2.&#xA0;Administration"><div class="titlepage"><div><div><h1 class="title"><a id="ch02"/>Chapter 2. Administration</h1></div></div></div><p>In this chapter, we will cover the following topics:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Executing commands with privileges (<code class="literal">sudo</code>)</li><li class="listitem" style="list-style-type: disc">Expanding the size of a filesystem (<code class="literal">raspi-config</code>)</li><li class="listitem" style="list-style-type: disc">Configuring memory usage (<code class="literal">raspi-config</code>)</li><li class="listitem" style="list-style-type: disc">Configuring remote access (<code class="literal">raspi-config</code>)</li><li class="listitem" style="list-style-type: disc">Obtaining remote access by using SSH</li><li class="listitem" style="list-style-type: disc">Obtaining remote access by using PuTTY</li><li class="listitem" style="list-style-type: disc">Changing the login password (<code class="literal">passwd</code>)</li><li class="listitem" style="list-style-type: disc">Adding a user (<code class="literal">adduser</code>)</li><li class="listitem" style="list-style-type: disc">Giving a user sudo privileges (<code class="literal">id</code> and <code class="literal">usermod</code>)</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec18"/>Introduction</h1></div></div></div><p>The recipes in this chapter are for the basic administration of the Raspberry Pi. This chapter starts with a recipe that shows how you can use the <code class="literal">sudo</code> command to execute other commands that require superuser privileges. The next three recipes use the <code class="literal">raspi-config</code> command-line tool to complete the following three initial configuration tasks:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Expanding the filesystem to use all the space on an SD card</li><li class="listitem" style="list-style-type: disc">Changing the memory allocation for better performance</li><li class="listitem" style="list-style-type: disc">Enabling remote access to the Raspberry Pi</li></ul></div><p>The following two recipes show how the Raspberry Pi can be accessed remotely:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Using the <code class="literal">SSH</code> command-line client from Linux or Mac OS X computers</li><li class="listitem" style="list-style-type: disc">Using the PuTTY client from Windows computers</li></ul></div><p>The final three recipes in this chapter, which are as follows, are for user administration:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">How to change the password of the default user whose username is <code class="literal">pi</code></li><li class="listitem" style="list-style-type: disc">How to create a new user login</li><li class="listitem" style="list-style-type: disc">How to add a user to the privileged <code class="literal">sudo</code> user group</li></ul></div><p>Once you've completed this chapter, you will be able to administer the Raspberry Pi remotely via a network connection without a keyboard or display.</p></div></div>
<div class="section" title="Executing commands with privileges (sudo)"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec19"/>Executing commands with privileges (sudo)</h1></div></div></div><p>This <a class="indexterm" id="id107"/>recipe shows how you can execute <a class="indexterm" id="id108"/>privileged commands using <code class="literal">sudo</code>.</p><p>The default Raspberry Pi user (<code class="literal">pi</code>) is an ordinary user and not a super-user. The <code class="literal">sudo</code> command is used to temporarily grant an ordinary user the privileges of a super-user.</p><p>After you've completed this recipe, you will be able to execute commands with super-user privileges by using <code class="literal">sudo</code> as a command prefix.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec49"/>Getting ready</h2></div></div></div><p>The following ingredients are required for this recipe:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You need an initial setup or a basic networking setup for the Raspberry Pi that has been powered on. You also need to be logged in as the user whose username is <code class="literal">pi</code> (refer to the recipes in <a class="link" href="ch01.html" title="Chapter 1. Installation and Setup">Chapter 1</a>, <span class="emphasis"><em>Installation and Setup</em></span>, for instructions on how to boot and log in and the recipes given later in this chapter for instructions on how to log in remotely).</li><li class="listitem" style="list-style-type: disc">A network connection is an optional requirement.</li></ul></div><p>If the Raspberry Pi has remote access enabled, this recipe can be completed remotely using SSH or PuTTY (refer to the <span class="emphasis"><em>Remote access (SSH)</em></span> and <span class="emphasis"><em>Remote access (PuTTY)</em></span> recipes that are given later in this chapter).</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec50"/>How to do it...</h2></div></div></div><p>This recipe executes a privileged command, first without and then with privileges:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">First, try executing a privileged command, such as <code class="literal">reboot</code>, as an ordinary user, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>reboot</strong></span>

reboot: must be superuser.

pi@raspberrypi ~ $</pre></div></li><li class="listitem">Then, try executing the command again with super-user privileges, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>sudo reboot</strong></span>

Broadcast message from root@raspberrypi (pts/0) (Sat Jun 27 21:16:19 2015):
The system is going down for reboot NOW!</pre></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec51"/>How it works...</h2></div></div></div><p>The <code class="literal">sudo</code> command is for nonprivileged users who wish to temporarily grant another command<a class="indexterm" id="id109"/> super-user privileges (as a super-user would do something).</p><p>In this <a class="indexterm" id="id110"/>recipe, the privileged command, <code class="literal">reboot</code>, was first executed without super-user privileges by the ordinary user <code class="literal">pi</code>. The <code class="literal">reboot</code> command then reported an error by stating that <code class="literal">must be superuser</code>. An ordinary user cannot execute the <code class="literal">reboot</code> command.</p><p>Finally, the <code class="literal">sudo</code> command was used like a super-user prefix to temporarily give the ordinary user, <code class="literal">pi</code>, super-user privileges. Then, the system was rebooted as requested.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec52"/>There's more...</h2></div></div></div><p>The following are a few more commands that can be used.</p><div class="section" title="Switch user (sudo –u)"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec12"/>Switch user (sudo –u)</h3></div></div></div><p>The <code class="literal">sudo</code> command is really a <span class="emphasis"><em>switch user</em></span> and <span class="emphasis"><em>do something</em></span> command.</p><p>By <a class="indexterm" id="id111"/>default, the <code class="literal">sudo</code> command temporarily switches to the <code class="literal">root user</code>, who's the superuser. When a command is run as the <code class="literal">root</code> user, the command has all the privileges that the <code class="literal">root</code> user enjoys.</p><p>When executed with the <code class="literal">–u</code> command-line argument, <code class="literal">sudo</code> can be used to impersonate any user on the system, temporarily giving one command all the privileges of another user.</p><p>For more information on creating additional users for the Raspberry Pi, refer to the <span class="emphasis"><em>Adding a user</em></span> recipe at the end of this chapter.</p><p>Here is an example of using the <code class="literal">sudo</code> command to switch to another user that already exists on your Raspberry Pi, the user whose username is <code class="literal">nobody</code>. The user <code class="literal">nobody</code> has no privileges (that is its purpose – to have no privileges; it is a security feature), but we can use <code class="literal">nobody</code> to show how the <code class="literal">sudo</code> command works. This example creates and deletes two files – a file that belongs to the user <code class="literal">pi</code> and another that belongs to the user <code class="literal">nobody</code>:</p><div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>ls -l /tmp</strong></span>

total 0

pi@raspberrypi ~ $ <span class="strong"><strong>touch /tmp/i-belong-to-pi</strong></span>

pi@raspberrypi ~ $ <span class="strong"><strong>ls -l /tmp</strong></span>

total 0
-rw-r--r-- 1 pi pi 0 Jun 27 21:54 i-belong-to-pi

pi@raspberrypi ~ $</pre></div><p>Note that<a class="indexterm" id="id112"/> there is now one file in the temporary directory and this file is owned by the user <code class="literal">pi</code> (the third column of the <code class="literal">ls –l</code> command's output contains the file's owner):</p><div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>sudo -u nobody touch /tmp/i-belong-to-nobody</strong></span>

pi@raspberrypi ~ $ <span class="strong"><strong>ls -l /tmp</strong></span>

total 0
-rw-r--r-- 1 nobody nogroup 0 Jun 27 21:55 i-belong-to-nobody
-rw-r--r-- 1 pi     pi      0 Jun 27 21:54 i-belong-to-pi

pi@raspberrypi ~ $</pre></div><p>There are now two files in the <code class="literal">/tmp</code> directory. One file, <code class="literal">i-belong-to-pi</code>, belongs to the user <code class="literal">pi</code> and the other file, <code class="literal">i-belong-to-nobody</code>, belongs to the user <code class="literal">nobody</code>.</p><p>Now, let's try to remove the two files that we created from the temporary directory, as follows:</p><div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>rm /tmp/i-belong-to-pi </strong></span>

pi@raspberrypi ~ $ <span class="strong"><strong>ls -l /tmp</strong></span>

total 0
-rw-r--r-- 1 nobody nogroup 0 Jun 27 21:55 i-belong-to-nobody

pi@raspberrypi ~ $</pre></div><p>Removing the <code class="literal">i-belong-to-pi</code> file worked. There is only file left in the directory:</p><div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>rm /tmp/i-belong-to-nobody </strong></span>

rm: remove write-protected regular empty file `/tmp/i-belong-to-nobody'? y
rm: cannot remove `/tmp/i-belong-to-nobody': Operation not permitted

pi@raspberrypi ~ $</pre></div><p>Removing the <code class="literal">i-belong-to-nobody</code> file does not work because the file is owned by the user <code class="literal">nobody</code>.</p><p>If you want to delete the <code class="literal">i-belong-nobody</code> file, you will first have to switch to the user <code class="literal">nobody</code> using the <code class="literal">sudo</code> command, as follows:</p><div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>sudo -u nobody rm /tmp/i-belong-to-nobody </strong></span>

pi@raspberrypi ~ $ <span class="strong"><strong>ls -l /tmp</strong></span>

total 0

pi@raspberrypi ~ $</pre></div><p>Using <code class="literal">sudo –u</code> <code class="literal">nobody</code> worked! There are no files left in the <code class="literal">/tmp</code> directory.</p></div><div class="section" title="Password"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec13"/>Password</h3></div></div></div><p>The Raspbian Linux distribution's default configuration requires no password when using <code class="literal">sudo</code> for users in the <code class="literal">sudo</code> group.</p><p>If you <a class="indexterm" id="id113"/>are using another Linux distribution, you may be required to enter a password when using <code class="literal">sudo</code>. If you are required to enter a password, use the same password as the one that you used when logging in to the Raspberry Pi.</p></div><div class="section" title="The sudo group"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec14"/>The sudo group</h3></div></div></div><p>If you<a class="indexterm" id="id114"/> have added additional users to the Raspberry Pi, you will also need to add them to the <code class="literal">sudo</code> user group if you wish those users to use privileged commands, such as <code class="literal">shutdown</code> and <code class="literal">reboot</code>, or change files in the configuration directory (<code class="literal">/etc</code>). Users that are not in the <code class="literal">sudo</code> group will not be able to execute privileged commands or change privileged files.</p><p>The recipes at the end of this chapter have more information about user administration, including how to add users to the <code class="literal">sudo</code> user group.</p></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec53"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>sudo, sudoedit – execute a command as another user</strong></span> (<a class="ulink" href="http://manpages.debian.net/cgi-bin/man.cgi?query=sudo">http://manpages.debian.net/cgi-bin/man.cgi?query=sudo</a>): The switch<a class="indexterm" id="id115"/> user command temporarily executes a command as another user. The Debian manual page for the <code class="literal">sudo</code> command describes all of its features and options.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>touch – change file timestamps</strong></span> (<a class="ulink" href="http://manpages.debian.net/cgi-bin/man.cgi?query=touch">http://manpages.debian.net/cgi-bin/man.cgi?query=touch</a>): The <code class="literal">touch</code> command will create a file if it does <a class="indexterm" id="id116"/>not exist. The Debian man page for the touch command describes all of its features and options.</li></ul></div></div></div>
<div class="section" title="Expanding the size of a filesystem (raspi-config)"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec20"/>Expanding the size of a filesystem (raspi-config)</h1></div></div></div><p>This <a class="indexterm" id="id117"/>recipe shows how you <a class="indexterm" id="id118"/>can use the <code class="literal">raspi-config</code> command to expand the Raspberry Pi's filesystem so that it uses all the available disk space on an SD card.</p><p>The operating system images for the Raspberry Pi are compacted and compressed to use as little disk space as possible. This reduction in the size of an operating system image helps improve the speed of downloading the image. When these reduced images are copied to an SD card, it is very likely that the SD card will still have space left over. Larger SD Cards (greater than 8 GB) will be mostly empty!</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note07"/>Note</h3><p>If you used NOOBS to install the Raspberry Pi, you do not need to expand the filesystem. NOOBS has already expanded the filesystem for you.</p></div></div><p>This <a class="indexterm" id="id119"/>recipe uses the <code class="literal">raspi-config</code> command-line utility to expand the filesystem of the operating system image so<a class="indexterm" id="id120"/> that it includes all the available space on an SD card.</p><p>After you've completed this recipe, the filesystem that your Raspberry Pi uses for storage will be expanded to include all the available space on the SD card.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec54"/>Getting ready</h2></div></div></div><p>The following ingredients are required for this recipe:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You need an initial setup or a basic networking setup for the Raspberry Pi that has been powered on. You also need to be logged in as the user <code class="literal">pi</code> (refer to the recipes in <a class="link" href="ch01.html" title="Chapter 1. Installation and Setup">Chapter 1</a>, <span class="emphasis"><em>Installation and Setup</em></span>, for instructions on how to boot and log in and the recipes later in this chapter for instructions on how to log in remotely).</li><li class="listitem" style="list-style-type: disc">A network connection is an optional requirement.</li></ul></div><p>If the Raspberry Pi has remote access enabled, this recipe can be completed remotely using SSH or PuTTY (refer to the <span class="emphasis"><em>Remote access (SSH)</em></span> and <span class="emphasis"><em>Remote access (PuTTY)</em></span> recipes provided later in this chapter).</p><p>The SD card used in the examples for this recipe has a storage of 32 GB.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec55"/>How to do it...</h2></div></div></div><p>Use the following steps to expand the Raspberry Pi's filesystem:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Use the <code class="literal">df</code> command to see how much disk space is available, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>df –h</strong></span>

Filesystem      Size  Used Avail Use% Mounted on
/dev/root       3.9G  3.1G  596M  84% /
devtmpfs        459M     0  459M   0% /dev
tmpfs           463M     0  463M   0% /dev/shm
tmpfs           463M   13M  451M   3% /run
tmpfs           5.0M  4.0K  5.0M   1% /run/lock
tmpfs           463M     0  463M   0% /sys/fs/cgroup
/dev/mmcblk0p1   56M   20M   37M  36% /boot
tmpfs            93M     0   93M   0% /run/user/1000

pi@raspberrypi ~ $</pre></div></li><li class="listitem">Note <a class="indexterm" id="id121"/>that the <span class="strong"><strong>Size</strong></span> (column 2) of the root filesystem (<code class="literal">/dev/root</code>) is only <code class="literal">3.9 G</code>, even though the actual disk size is<a class="indexterm" id="id122"/> much larger.</li><li class="listitem">Execute the <code class="literal">raspi-config</code> command to expand the size of the root file system, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>sudo raspi-config</strong></span></pre></div></li><li class="listitem">The <code class="literal">raspi-config</code> main menu is then displayed:<div class="informalexample"><pre class="programlisting">┌─────────┤ Raspberry Pi Software Configuration Tool (raspi-config) ├──────────┐
│                                                                              │
│    1 Expand Filesystem              Ensures that all of the SD card s        │
│    2 Change User Password           Change password for the default u        │
│    3 Boot Options                   Choose whether to boot into a des        │
│    4 Internationalisation Options   Set up language and regional sett        │
│    5 Enable Camera                  Enable this Pi to work with the R        │
│    6 Add to Rastrack                Add this Pi to the online Raspber        │
│    7 Overclock                      Configure overclocking for your P        │
│    8 Advanced Options               Configure advanced settings              │
│    9 About raspi-config             Information about this configurat        │
│                                                                              │
│                     &lt;Select&gt;                     &lt;Finish&gt;                    │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘</pre></div></li><li class="listitem">Press the <span class="emphasis"><em>Enter</em></span> key to select the first menu item, <code class="literal">Expand Filesystem</code>. Use the up and down arrow keys to change the selection.</li><li class="listitem">After a brief moment, the screen displays this:<div class="informalexample"><pre class="programlisting">          ┌──────────────────────────────────────────────────────────┐ 
          │                                                          │ 
          │ Root partition has been resized.                         │ 
          │ The filesystem will be enlarged upon the next reboot     │ 
          │                                                          │ 
          │                          &lt;Ok&gt;                            │ 
          │                                                          │ 
          └──────────────────────────────────────────────────────────┘ </pre></div></li><li class="listitem">Press the <span class="emphasis"><em>Enter</em></span> key; you will return to the main menu.</li><li class="listitem">Press the <span class="emphasis"><em>Tab</em></span> key to select <span class="strong"><strong>Finish</strong></span> and then press the <span class="emphasis"><em>Enter</em></span> key:<div class="informalexample"><pre class="programlisting">          ┌──────────────────────────────────────────────────────────┐ 
          │                                                          │ 
          │ Would you like to reboot now?                            │ 
          │                                                          │ 
          │               &lt;Yes&gt;                  &lt;No&gt;                │ 
          │                                                          │ 
          └──────────────────────────────────────────────────────────┘ </pre></div></li><li class="listitem">Press the <span class="emphasis"><em>Enter</em></span> key to select <span class="strong"><strong>Yes</strong></span>. The Raspberry Pi will reboot.</li><li class="listitem">After logging back in, use the <code class="literal">df –h</code> command to check out the available disk space on the root filesystem (<code class="literal">/</code>), as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>df –h /</strong></span>

Filesystem      Size  Used Avail Use% Mounted on
/dev/root        29G  3.1G   24G  12% /

pi@raspberrypi ~ $</pre></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec56"/>How it works...</h2></div></div></div><p>This<a class="indexterm" id="id123"/> recipe begins by displaying the amount of disk space that is available on the Raspberry Pi. The <code class="literal">df</code> command <a class="indexterm" id="id124"/>displays how much disk space is free (df is short for disk free). The <code class="literal">–h</code> command-line argument asks <code class="literal">df</code> to display the result in a human-readable format. The output of the command shows that the <code class="literal">/dev/root</code> filesystem has a total of 3.9 GB and 84% of the filesystem is in use, leaving only 596 MB available.</p><p>Then, the <code class="literal">raspi-config</code> command is run to expand the root filesystem. The first command in the <code class="literal">raspi-config</code> command's main menu, <code class="literal">Expand Filesystem</code>, is selected to resize the Raspberry Pi's root partition (<code class="literal">/dev/root</code>).</p><p>After resizing the root filesystem, the Raspberry Pi needs to be rebooted. Once rebooted, the size of the root filesystem is checked once again. The amount of available disk space is now 24 GB!</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec57"/>There's more...</h2></div></div></div><p>The best time to expand the root filesystem is right after the installation – before you install new software or require additional disk space.</p><p>The <code class="literal">raspi-config</code> utility is used to configure many basic components of the Raspberry Pi. Examples of its use can be found in the recipes named <span class="emphasis"><em>Configuring remote access</em></span> and <span class="emphasis"><em>Configuring memory usage</em></span>.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec58"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">Raspi-config</code> (<a class="ulink" href="https://www.raspberrypi.org/documentation/configuration/raspi-config.md">https://www.raspberrypi.org/documentation/configuration/raspi-config.md</a>): A <a class="indexterm" id="id125"/>reference page for the <code class="literal">raspi-config</code> command can be found in the Raspberry Pi Foundations documentation.</li><li class="listitem" style="list-style-type: disc"><code class="literal">RPi raspi-config</code> (<a class="ulink" href="http://elinux.org/RPi_raspi-config">http://elinux.org/RPi_raspi-config</a>): This documentation <a class="indexterm" id="id126"/>at the Embedded Linux website shows how the <code class="literal">raspi-config</code> script helps you configure the Raspberry Pi.</li></ul></div></div></div>
<div class="section" title="Configuring memory usage (raspi-config)"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec21"/>Configuring memory usage (raspi-config)</h1></div></div></div><p>This <a class="indexterm" id="id127"/>recipe shows how<a class="indexterm" id="id128"/> the <code class="literal">raspi-config</code> utility is used to change the Raspberry Pi's memory split to maximize the amount of memory available for the CPU.</p><p>This book features solutions that do not require a display. Many of these solutions will benefit from having the additional memory that the display is using.</p><p>However, if you are using the Raspberry Pi as a desktop computer, you may want to maximize the amount of video memory. Internet content displayed in web browsers, such as images and video, as well as computer games will benefit from a high video memory.</p><p>After you have completed this recipe, you can choose your own balance between memory dedicated for the video core and the memory available for the CPU.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec59"/>Getting ready</h2></div></div></div><p>The ingredients required for this recipe are an initial setup or a basic networking setup for the Raspberry Pi that has been powered on. You also need to be logged in as the user <code class="literal">pi</code> (refer to the recipes in <a class="link" href="ch01.html" title="Chapter 1. Installation and Setup">Chapter 1</a>, <span class="emphasis"><em>Installation and Setup</em></span>, for instructions on how to boot and log in).</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec60"/>How to do it...</h2></div></div></div><p>Use the following steps to configure the Raspberry Pi's memory usage:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Execute the <code class="literal">raspi-config</code> command, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ sudo raspi-config</pre></div></li><li class="listitem">The <code class="literal">raspi-config</code> main menu is then displayed:<div class="informalexample"><pre class="programlisting">┌─────────┤ Raspberry Pi Software Configuration Tool (raspi-config) ├──────────┐
│                                                                              │
│    1 Expand Filesystem              Ensures that all of the SD card s        │
│    2 Change User Password           Change password for the default u        │
│    3 Boot Options                   Choose whether to boot into a des        │
│    4 Internationalisation Options   Set up language and regional sett        │
│    5 Enable Camera                  Enable this Pi to work with the R        │
│    6 Add to Rastrack                Add this Pi to the online Raspber        │
│    7 Overclock                      Configure overclocking for your P        │
│    8 Advanced Options               Configure advanced settings              │
│    9 About raspi-config             Information about this configurat        │
│                                                                              │
│                     &lt;Select&gt;                     &lt;Finish&gt;                    │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘</pre></div></li><li class="listitem">Use the up and down arrow keys to change the selection. Then, press the <span class="emphasis"><em>Enter</em></span> key to select <span class="strong"><strong>Advanced Options</strong></span>.</li><li class="listitem">The <span class="strong"><strong>Advanced Options</strong></span> menu is displayed, as follows:<div class="informalexample"><pre class="programlisting">┌─────────┤ Raspberry Pi Software Configuration Tool (raspi-config) ├──────────┐
│                                                                              │
│    A1 Overscan                      You may need to configure oversca        │
│    A2 Hostname                      Set the visible name for this Pi         │
│    A3 Memory Split                  Change the amount of memory made         │
│    A4 SSH                           Enable/Disable remote command lin        │
│    A5 Device Tree                   Enable/Disable the use of Device         │
│    A6 SPI                           Enable/Disable automatic loading         │
│    A7 I2C                           Enable/Disable automatic loading         │
│    A8 Serial                        Enable/Disable shell and kernel m        │
│    A9 Audio                         Force audio out through HDMI or 3        │
│    A0 Update                        Update this tool to the latest ve        │
│                                                                              │
│                     &lt;Select&gt;                     &lt;Back&gt;                      │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘</pre></div></li><li class="listitem">Select <span class="strong"><strong>Memory Split</strong></span> from the menu to change the memory split.</li><li class="listitem">You <a class="indexterm" id="id129"/>are prompted to enter an amount of memory for the GPU:<div class="informalexample"><pre class="programlisting">     ┌────────────────────────────────────────────────────────────────────┐ 
     │ How much memory should the GPU have?  e.g. 16/32/64/128/256        │ 
     │                                                                    │ 
     │ 16________________________________________________________________ │ 
     │                                                                    │ 
     │                 &lt;Ok&gt;                     &lt;Cancel&gt;                  │ 
     │                                                                    │ 
     └────────────────────────────────────────────────────────────────────┘ </pre></div></li><li class="listitem">Enter <code class="literal">16</code> and press the <span class="emphasis"><em>Enter</em></span> key to<a class="indexterm" id="id130"/> give the Raspberry Pi's GPU the minimum amount of memory.</li><li class="listitem">You are returned to the main menu of <code class="literal">raspi-config</code>.</li><li class="listitem">Select <span class="strong"><strong>Finish</strong></span> from the main menu and reboot the Raspberry Pi.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec61"/>How it works...</h2></div></div></div><p>One of the selections available from the <span class="strong"><strong>Advanced Options</strong></span> menu of the <code class="literal">raspi-config</code> configuration tool is to specify the memory split between the <span class="strong"><strong>Graphics Processing Unit</strong></span> (<span class="strong"><strong>GPU</strong></span>) used<a class="indexterm" id="id131"/> for video processing and the CPU used for general processing. In this recipe, you entered 16 MB, the minimum value for the GPU.</p><p>The Raspberry Pi shares 256 MB of its total memory (1 GB for the Raspberry Pi 2) between its CPU and GPU. The memory can be split in the following five different ways:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">16 MB for the GPU and 1008 MB for the CPU</li><li class="listitem" style="list-style-type: disc">32 MB for the GPU and 992 MB for the CPU</li><li class="listitem" style="list-style-type: disc">64 MB for the GPU and 960 MB for the CPU</li><li class="listitem" style="list-style-type: disc">128 MB for the GPU and 896 MB for the CPU</li><li class="listitem" style="list-style-type: disc">256 MB for the GPU and 768 MB for the CPU</li></ul></div><p>For many of the recipes in this book, the GPU only needs a minimum of 16 MB of memory. These recipes don't require a display and will benefit if the maximum amount of memory is assigned to the CPU (1008 MB). This will improve the CPU's overall performance.</p><p>For <a class="indexterm" id="id132"/>solutions that require <a class="indexterm" id="id133"/>a display, more memory should be allocated to the GPU. Multimedia solutions, such as OMXPlayer or XBMC distributions, will benefit from having a maximum of 256 MB of Video Core memory.</p><p>Even when the maximum amount of memory is assigned to the GPU, the Raspberry Pi 2 will still have 768 MB of memory left for use by the CPU. To experiment with the recipes in this book, 768 MB is more than enough memory. However, for higher performance or long-term use, the recipes that do not require a display will benefit from having the full 1008 MB available for the CPU.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec62"/>There's more...</h2></div></div></div><p>The <code class="literal">raspi-config</code> utility is used to configure many basic components of the Raspberry Pi. Examples of its use can be found in the recipes in this chapter that are named <span class="emphasis"><em>Expanding the size of the filesystem</em></span> and <span class="emphasis"><em>Configuring remote access</em></span>.</p></div></div>
<div class="section" title="Configuring remote access (raspi-config)"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec22"/>Configuring remote access (raspi-config)</h1></div></div></div><p>This <a class="indexterm" id="id134"/>recipe shows how to use<a class="indexterm" id="id135"/> the <code class="literal">raspi-config</code> utility to configure remote access to the Raspberry Pi.</p><p>For most network applications, a graphical user interface (a GUI desktop) is not needed. The memory and processing power spent creating a GUI desktop can be invested in a better in the network application. The majority of the recipes in this book are written so that they can be used remotely without a graphical user interface.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>If you have installed a Raspbian Linux distribution (as recommended in <a class="link" href="ch01.html" title="Chapter 1. Installation and Setup">Chapter 1</a>, <span class="emphasis"><em>Installation and Setup</em></span>), secure remote access via the SSH protocol is already enabled.</p><p>Raspbian Linux has remote access via SSH enabled by default.</p></div></div><p>After <a class="indexterm" id="id136"/>you've completed this recipe, your Raspberry Pi will be securely accessible on your local network from another PC using the <span class="strong"><strong>Secure Shell</strong></span> (<span class="strong"><strong>SSH</strong></span>) protocol.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec63"/>Getting ready</h2></div></div></div><p>The <a class="indexterm" id="id137"/>following ingredients<a class="indexterm" id="id138"/> are needed for this recipe:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">An initial setup or a basic networking setup for the Raspberry Pi that has been powered on. You also need to be logged in as the user <code class="literal">pi</code> (refer to the recipes in <a class="link" href="ch01.html" title="Chapter 1. Installation and Setup">Chapter 1</a>, <span class="emphasis"><em>Installation and Setup</em></span>, for instructions on how to boot and log in and the recipes later in this chapter for instructions on how to log in remotely).</li><li class="listitem" style="list-style-type: disc">A network connection is an optional requirement.</li></ul></div><p>If the Raspberry Pi has remote access enabled, this recipe can be completed remotely using SSH or PuTTY (refer to the <span class="emphasis"><em>Remote access (SSH)</em></span> and <span class="emphasis"><em>Remote access (PuTTY)</em></span> recipes that are given in the later parts of this chapter).</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec64"/>How to do it...</h2></div></div></div><p>Use the following steps to configure remote access to the Raspberry Pi:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Execute the <code class="literal">raspi-config</code> command, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ sudo raspi-config</pre></div></li><li class="listitem">The <code class="literal">raspi-config</code> main menu is then displayed:<div class="informalexample"><pre class="programlisting">┌─────────┤ Raspberry Pi Software Configuration Tool (raspi-config) ├──────────┐
│                                                                              │
│    1 Expand Filesystem              Ensures that all of the SD card s        │
│    2 Change User Password           Change password for the default u        │
│    3 Boot Options                   Choose whether to boot into a des        │
│    4 Internationalisation Options   Set up language and regional sett        │
│    5 Enable Camera                  Enable this Pi to work with the R        │
│    6 Add to Rastrack                Add this Pi to the online Raspber        │
│    7 Overclock                      Configure overclocking for your P        │
│    8 Advanced Options               Configure advanced settings              │
│    9 About raspi-config             Information about this configurat        │
│                                                                              │
│                     &lt;Select&gt;                     &lt;Finish&gt;                    │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘</pre></div></li><li class="listitem">Use the up and down arrow keys to change the selection and then press the <span class="emphasis"><em>Enter</em></span> key to select <span class="strong"><strong>Advanced Options</strong></span>.</li><li class="listitem">The <span class="strong"><strong>Advanced Options</strong></span> menu is displayed:<div class="informalexample"><pre class="programlisting">┌─────────┤ Raspberry Pi Software Configuration Tool (raspi-config) ├──────────┐
│                                                                              │
│    A1 Overscan                      You may need to configure oversca        │
│    A2 Hostname                      Set the visible name for this Pi         │
│    A3 Memory Split                  Change the amount of memory made         │
│    A4 SSH                           Enable/Disable remote command lin        │
│    A5 Device Tree                   Enable/Disable the use of Device         │
│    A6 SPI                           Enable/Disable automatic loading         │
│    A7 I2C                           Enable/Disable automatic loading         │
│    A8 Serial                        Enable/Disable shell and kernel m        │
│    A9 Audio                         Force audio out through HDMI or 3        │
│    A0 Update                        Update this tool to the latest ve        │
│                                                                              │
│                     &lt;Select&gt;                     &lt;Back&gt;                      │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘</pre></div></li><li class="listitem">Select <span class="strong"><strong>SSH</strong></span> from the <span class="strong"><strong>Advanced Options</strong></span> menu<a class="indexterm" id="id139"/> to enable remote access.</li><li class="listitem">The<a class="indexterm" id="id140"/> following screen appears:<div class="informalexample"><pre class="programlisting">          ┌──────────────────────────────────────────────────────────┐ 
          │                                                          │ 
          │ Would you like the SSH server enabled or disabled?       │ 
          │                                                          │ 
          │               &lt;Enable&gt;               &lt;Disable&gt;           │ 
          │                                                          │ 
          └──────────────────────────────────────────────────────────┘ </pre></div></li><li class="listitem">Use the <span class="emphasis"><em>Tab</em></span> key to select the option and then press the <span class="emphasis"><em>Enter</em></span> key or choose <span class="strong"><strong>Enable</strong></span>.</li><li class="listitem">After a brief moment, the SSH server is enabled:<div class="informalexample"><pre class="programlisting">          ┌──────────────────────────────────────────────────────────┐ 
          │                                                          │ 
          │ SSH server enabled                                       │ 
          │                                                          │ 
          │                          &lt;Ok&gt;                            │ 
          │                                                          │ 
          └──────────────────────────────────────────────────────────┘ </pre></div></li><li class="listitem">Click on <span class="strong"><strong>Ok</strong></span> to return to the main menu.</li><li class="listitem">Click on <span class="strong"><strong>Finish</strong></span> from the main menu and then click on <span class="strong"><strong>Yes</strong></span> to reboot the Raspberry Pi and enable remote access.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec65"/>How it works...</h2></div></div></div><p>One of the selections available in the <code class="literal">raspi-config</code> main menu is to enable the Open SSH Secure Shell server. The Open SSH server enables secure access to the Raspberry Pi over a network connection. Once enabled, the SSH server will be started automatically each time the Raspberry Pi boots.</p><p>To disable remote access, disable the Open SSH server. The server can be disabled from the <code class="literal">raspi-config</code> utility using the same steps in this recipe, except that <span class="strong"><strong>Disable</strong></span> should be selected when the utility asks, "Would you like the SSH server enabled or disabled?".</p><p>The Secure Shell server runs on the Raspberry Pi. A client program – such as SSH on Mac OS X or Linux, or PuTTY on Windows – can be used to connect to the Secure Shell server. The client program is a virtual terminal that, once connected, permits a user to interact <a class="indexterm" id="id141"/>remotely with the Raspberry Pi as though it is connected directly with a keyboard and display. The virtual terminal <a class="indexterm" id="id142"/>cannot run X Windows directly. Therefore, you will need another tool to view the Raspberry Pi's GUI desktop remotely.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec66"/>There's more...</h2></div></div></div><p>This <code class="literal">raspi-config</code> utility is used to configure many of the basic components of the Raspberry Pi. More examples of its use can be found in the recipes named <span class="emphasis"><em>Expanding the size of the filesystem</em></span> and <span class="emphasis"><em>Configuring memory usage</em></span>.</p><p>The <span class="emphasis"><em>Remote access (SSH)</em></span> and <span class="emphasis"><em>Remote access (PuTTY)</em></span> recipes in this chapter have instructions on how to connect remotely from Mac OS X, Linux, and Windows using an SSH client.</p><p>In <a class="link" href="ch05.html" title="Chapter 5. Advanced Networking">Chapter 5</a>, <span class="emphasis"><em>Advanced Networking</em></span>, the <span class="emphasis"><em>Connecting to the desktop remotely</em></span> recipe shows how to access the Raspberry Pi's GUI desktop remotely.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec6060"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Secure Shell</strong></span> (<a class="ulink" href="http://en.wikipedia.org/wiki/Secure_Shell">http://en.wikipedia.org/wiki/Secure_Shell</a>): This Wikipedia <a class="indexterm" id="id143"/>article about the Secure Shell shows how it is a network protocol for secure data communication. The article highlights the history of the protocol, explains its architecture and vulnerabilities, and contains links to the current implementations.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>OpenSSH</strong></span> (<a class="ulink" href="http://www.openssh.org/">http://www.openssh.org/</a>): Open SSH was a SSH1 and SSH2<a class="indexterm" id="id144"/> implementation that was originally designed as a part of the FreeBSD project. It is now a part of most Linux distributions, including Raspbian Linux.</li></ul></div></div></div>
<div class="section" title="Obtaining remote access by using SSH"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec23"/>Obtaining remote access by using SSH</h1></div></div></div><p>This<a class="indexterm" id="id145"/> recipe<a class="indexterm" id="id146"/> shows how to access the Raspberry Pi remotely using the <code class="literal">ssh</code> command.</p><p>After the Raspberry Pi has been configured to automatically start the Secure Shell server when it boots (see the previous recipe named <span class="emphasis"><em>Configuring remote access</em></span> in this chapter), it is possible to access the Raspberry Pi remotely using the Secure Shell client, <code class="literal">ssh</code>.</p><p>The <code class="literal">ssh</code> command is built into the current version of the Mac OS X operating systems and is also available for most Linux distributions. For Microsoft Windows operating systems, another utility will be required (refer to the recipe named <span class="emphasis"><em>Remote Access (PuTTY)</em></span>.</p><p>This recipe starts by logging directly into the Raspberry Pi using an attached keyboard and display to discover the IP address of the Raspberry Pi. Once the IP address is known, the recipe shows how to log in to the Raspberry Pi from another computer using SSH.</p><p>After you've completed this recipe, you will no longer be required to log in directly to the Raspberry Pi with an attached keyboard. You will also not need a display. You will be able to remotely administer your Raspberry Pi from another PC on the same network.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec67"/>Getting ready</h2></div></div></div><p>The following ingredients are needed for this recipe:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You need an initial setup for the Raspberry Pi that has been powered on. You also need to be logged in as the user <code class="literal">pi</code> (refer to the recipes in <a class="link" href="ch01.html" title="Chapter 1. Installation and Setup">Chapter 1</a>, <span class="emphasis"><em>Installation and Setup</em></span>, for instructions on how to boot and log in).</li><li class="listitem" style="list-style-type: disc">A network connection is required.</li><li class="listitem" style="list-style-type: disc">A PC that runs on Mac OS X, Linux, or other Unix-based operating system is also required.</li></ul></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec68"/>How to do it...</h2></div></div></div><p>Perform the following steps to remotely access the Raspberry Pi using the <code class="literal">ssh</code> command:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">On a Max OS X or Linux PC, use the <code class="literal">ssh</code> command to log in as the user <code class="literal">pi</code> on the host named <code class="literal">raspberrypi.local</code>, as follows:<div class="informalexample"><pre class="programlisting">golden-macbook:~ rick$ <span class="strong"><strong>ssh pi@raspberrypi.local</strong></span>

The authenticity of host 'raspberrypi.local (192.168.2.10)' can't be established.
RSA key fingerprint is f3:de:d3:58:eb:66:1e:23:2c:6e:cf:c9:12:0c:e3:e2.</pre></div></li><li class="listitem">Since this is the first time you have connected to your Raspberry Pi remotely using a secure shell, the Raspberry Pi shares its security fingerprint for future identification.</li><li class="listitem">When prompted, answer <code class="literal">yes</code> to <code class="literal">Are you sure you want to continue connecting (yes/no)?</code>, as follows:<div class="informalexample"><pre class="programlisting">Are you sure you want to continue connecting (yes/no)? yes</pre></div></li><li class="listitem">After entering <code class="literal">yes</code>, you are told that your Raspberry Pi's security fingerprint is being permanently added to the list of known hosts. Then, you are prompted for a password:<div class="informalexample"><pre class="programlisting">Warning: Permanently added 'raspberrypi.local' (RSA) to the list of known hosts.

pi@raspberrypi.local's password: </pre></div></li><li class="listitem">Enter<a class="indexterm" id="id147"/> the password for the user <code class="literal">pi</code> on the <a class="indexterm" id="id148"/>Raspberry Pi (if you have not yet changed it, the default password is <code class="literal">raspberry</code>). You will then be shown a logon message and a command prompt:<div class="informalexample"><pre class="programlisting">The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.

Last login: Mon Nov 23 00:43:40 2015 from fe80::12dd:b1ff:feee:dfc6%eth0

pi@raspberrypi ~ $ </pre></div></li><li class="listitem">Type <code class="literal">exit</code> to log out:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ exit

logout
Connection to raspberrypi.local closed.

golden-macbook:~ rick$ </pre></div></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec69"/>How it works...</h2></div></div></div><p>This recipe starts by using the <code class="literal">ssh</code> command to log in to the Raspberry Pi using its default username, <code class="literal">pi</code>, and its default hostname, <code class="literal">raspberrypi.local</code>. The default password is <code class="literal">raspberry</code>.</p><p>The format of the login parameter to the <code class="literal">ssh</code> command is <code class="literal">user@hostname</code>. The example shows <code class="literal">pi@raspberrypi.local</code> because we want to log in to the <code class="literal">raspberrypi</code> host on the local network as the user <code class="literal">pi</code>.</p><p>Since this is the first time that we are logging in to the Raspberry Pi from the golden-macbook computer, the golden-macbook computer says that it cannot establish the authenticity of the Raspberry Pi. So, the Raspberry Pi shares its secure digital fingerprint (<code class="literal">f3:de:d3:58:eb:66:1e:23:2c:6e:cf:c9:12:0c:e3:e2</code>). Once we agree to accepting a connection from this new computer, the golden-macbook computer says that it will store the fingerprint permanently.</p><div class="section" title="Digital fingerprints"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec15"/>Digital fingerprints</h3></div></div></div><p>Secure <a class="indexterm" id="id149"/>digital fingerprints are one part of the SSH protocol. Each computer has its own digital fingerprints that are as unique to the computer as human fingerprints are to humans. The golden-macbook computer stores the Raspberry Pi's fingerprints for reference to prevent <span class="emphasis"><em>spoofing</em></span> that can be done by another computer. The other computer should not have the same digital fingerprints as those in the Raspberry Pi.</p><p>After the Raspberry Pi's fingerprint has been accepted and stored, we are prompted for the password of the user <code class="literal">pi</code> at the <code class="literal">raspberrypi.local</code> host. After entering the password, we are presented with the Raspberry Pi's login message, the date of the last login, and a command prompt.</p><p>For this recipe, there is nothing more left to do. So, we will enter <code class="literal">exit</code> at the command prompt, and the remote connection to the Raspberry Pi is closed.</p></div><div class="section" title="Hostname"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec16"/>Hostname</h3></div></div></div><p>It is<a class="indexterm" id="id150"/> not always possible to log in using the default hostname, which is <code class="literal">raspberrypi.local</code>. Sometimes, you will need to discover the IP address of the Raspberry Pi before you can log in.</p><p>If you have connected the Raspberry Pi to a keyboard and display, you can use the <code class="literal">hostname</code> command to discover the IP address of the Raspberry Pi. The <code class="literal">–I</code> option asks the command to display all the IP addresses for the Raspberry Pi:</p><div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>hostname –I</strong></span>

192.168.2.12 

pi@raspberrypi ~ $</pre></div><p>After the IP address is discovered (192.168.2.12), it can be used to log in remotely to the Raspberry Pi, as follows:</p><div class="informalexample"><pre class="programlisting">golden-macbook:~ rick$ <span class="strong"><strong>ssh pi@192.168.2.12</strong></span>

pi@192.168.2.12's password: </pre></div></div></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec70"/>There's more...</h2></div></div></div><p>Let's have a look at some other requirements for a remote login.</p><div class="section" title="Finding out the IP address of the Raspberry Pi"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec17"/>Finding out the IP address of the Raspberry Pi</h3></div></div></div><p>Before<a class="indexterm" id="id151"/> the remote login is possible, the network address of the Raspberry Pi must be known. The <code class="literal">hostname</code> command can be used to directly discover the IP address from the Raspberry Pi via an attached keyboard and display. It is also possible to discover the IP address from the configuration interface of the local network gateway or DSL router. The following screenshot shows how the IP Address of a device named <code class="literal">raspberrypi</code> is displayed in a DSL router's configuration interface:</p><div class="mediaobject"><img alt="Finding out the IP address of the Raspberry Pi" src="graphics/B04745_02_01.jpg"/></div><p>The IP address of a device, such as the Raspberry Pi, is a mapping between the permanent hardware address of the device's network interface (<code class="literal">b8:27:eb:29:aa:5a</code>) and its current address in the topology of the local network (192.168.1.79). In the previous example, the network ID that was assigned is <code class="literal">79</code> for the device named <code class="literal">raspberrypi</code> in the 192.168.1 subnet of the local network.</p><p>Most home and small office networks attempt to assign network IDs semi-permanently to the same device (the hardware address). So, once discovered, it is not likely that the Raspberry Pi's IP address will change.</p></div><div class="section" title="Spoofing the secure fingerprint"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec18"/>Spoofing the secure fingerprint</h3></div></div></div><p>SSH, the<a class="indexterm" id="id152"/> Secure Shell utility, uses encryption to ensure that communication between the Raspberry Pi and other computers on the network remains secure. On the first launch, the Secure Shell server creates a unique security key that, like a fingerprint, can be used to uniquely identify that particular Secure Shell server. The first time a Secure Shell client connects to a Secure Shell server at a specific IP address, the client prompts the user to verify that the server has the correct fingerprint. Then, it stores the key to identify the server during the next connection.</p><p>The Secure Shell client will prevent logins to a machine with the same IP address but a different security key. This helps prevent a hacker from spoofing a device by stealing its IP address. The following example shows what happens when SSH suspects a hacker. In this case, it is only a new installation of the Raspberry Pi:</p><div class="informalexample"><pre class="programlisting">golden-macbook:~ rick$ <span class="strong"><strong>ssh pi@192.168.2.10</strong></span>

@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now (man-in-the-middle attack)!
It is also possible that a host key has just been changed.
The fingerprint for the RSA key sent by the remote host is
f3:de:d3:58:eb:66:1e:23:2c:6e:cf:c9:12:0c:e3:e2.
Please contact your system administrator.
Add correct host key in /Users/A601012/.ssh/known_hosts to get rid of this message.
Offending RSA key in /Users/A601012/.ssh/known_hosts:58
RSA host key for 192.168.2.10 has changed and you have requested strict checking.
Host key verification failed.

golden-macbook:~ rick$ </pre></div></div><div class="section" title="Each new install creates new digital fingerprints"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl3sec19"/>Each new install creates new digital fingerprints</h3></div></div></div><p>Each new<a class="indexterm" id="id153"/> installation of a computer generates new digital fingerprints. Therefore, the Raspberry Pi's digital fingerprints will change. The digital fingerprint that the golden-macbook just received no longer matches the one that it has stored. Hence, access to the Raspberry Pi is denied. The same safety check that prevents a hacker from completing a successful man-in-the-middle attack also prevents a login to a newly reinstalled Raspberry Pi.</p><p>The old, invalid digital fingerprint of the Raspberry Pi is still stored on the golden-macbook and can be removed using the <code class="literal">–R</code> option of the <code class="literal">ssh-keygen</code> command, as shown in the following piece of code:</p><div class="informalexample"><pre class="programlisting">golden-macbook:~ rick$ <span class="strong"><strong>ssh-keygen -R 192.168.2.10</strong></span>

# Host 192.168.2.10 found: line 3 type RSA
/Users/golden/.ssh/known_hosts updated.
Original contents retained as /Users/golden/.ssh/known_hosts.old

golden-macbook:~ rick$ </pre></div><p>Once the old invalid digital fingerprint has been removed, <code class="literal">ssh</code> will no longer block access to that IP address. The next login using <code class="literal">ssh</code> works the same as the first time. The Raspberry Pi will share its new digital fingerprint, and it will be stored to prevent future <span class="emphasis"><em>attacks</em></span>.</p></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec71"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>hostname – show or set the system's host name</strong></span> (<a class="ulink" href="http://manpages.debian.net/cgi-bin/man.cgi?query=hostname">http://manpages.debian.net/cgi-bin/man.cgi?query=hostname</a>): The <code class="literal">hostname</code> command can be used to display the IP address of the Raspberry Pi. The <a class="indexterm" id="id154"/>Debian manual page for <a class="indexterm" id="id155"/>hostname describes all the command's options and also has notes on how to change the hostname of the system.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>ssh – OpenSSH SSH client (remote login program)</strong></span> (<a class="ulink" href="http://manpages.debian.net/cgi-bin/man.cgi?query=ssh">http://manpages.debian.net/cgi-bin/man.cgi?query=ssh</a>): The Debian<a class="indexterm" id="id156"/> manual page for SSH gives details about the command and its options.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>ssh-keygen – key generation, management and conversion</strong></span> (<a class="ulink" href="http://manpages.debian.net/cgi-bin/man.cgi?query=ssh-keygen">http://manpages.debian.net/cgi-bin/man.cgi?query=ssh-keygen</a>): By <a class="indexterm" id="id157"/>using the <code class="literal">–R</code> option, <code class="literal">ssh-keygen</code> can be used to remove old digital fingerprints from the <code class="literal">known_hosts</code> file. The Debian manual page for <code class="literal">ssh-keygen</code> has information about the command and how it supports the secure shell (SSH) protocol.</li></ul></div></div></div>
<div class="section" title="Obtaining remote access by using PuTTY"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec24"/>Obtaining remote access by using PuTTY</h1></div></div></div><p>This <a class="indexterm" id="id158"/>recipe shows how to create a secure<a class="indexterm" id="id159"/> connection to the Raspberry Pi by using PuTTY, one of the most commonly used Windows Secure Shell clients.</p><p>PuTTY, the Windows Secure Shell client, is not built into the Windows operating system. However, it is a commonly used third-party utility for secure communication. Before you can begin this recipe, you will need to download PuTTY from the Internet and install it on the Windows PC (the download URL is in the next section).</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note09"/>Note</h3><p>There are also versions of PuTTY that are available for Mac OS X and Linux.</p></div></div><p>Once you've completed this recipe, you will be able to remotely administer the Raspberry Pi from a Windows PC.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec72"/>Getting ready</h2></div></div></div><p>The following ingredients are used in this recipe:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You will require an initial setup or a basic networking setup for the Raspberry Pi that has been powered on. You also need to be logged in as the user <code class="literal">pi</code> (refer to the recipes in <a class="link" href="ch01.html" title="Chapter 1. Installation and Setup">Chapter 1</a>, <span class="emphasis"><em>Installation and Setup</em></span>, for instructions on how to boot and log in).</li><li class="listitem" style="list-style-type: disc">A network connection is needed.</li><li class="listitem" style="list-style-type: disc">You<a class="indexterm" id="id160"/> need to have a Windows<a class="indexterm" id="id161"/> PC with PuTTY installed.</li></ul></div><p>You can <a class="indexterm" id="id162"/>find a download link for PuTTY with instructions for its installation at <a class="ulink" href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">http://www.chiark.greenend.org.uk/~sgtatham/putty/</a></p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec73"/>How to do it...</h2></div></div></div><p>Perform the following steps to access the Raspberry Pi remotely by using the PuTTY command:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Start PuTTY on the Windows PC by double-clicking on <code class="literal">PuTTY.exe</code>.</li><li class="listitem">When PuTTY is started, the PuTTY Configuration screen is displayed, as shown in the following screenshot:<div class="mediaobject"><img alt="How to do it..." src="graphics/B04745_02_02.jpg"/></div><p>In the screenshot, the configuration window for PuTTY is being configured to connect to a Raspberry Pi whose IP address is 192.168.1.79.</p></li><li class="listitem">Enter<a class="indexterm" id="id163"/> the Raspberry Pi's IP<a class="indexterm" id="id164"/> address in the <span class="strong"><strong>Host Name</strong></span> field and click on <span class="strong"><strong>Open</strong></span> to connect to the Raspberry Pi.<div class="mediaobject"><img alt="How to do it..." src="graphics/B04745_02_03.jpg"/></div></li><li class="listitem">The<a class="indexterm" id="id165"/> first time you connect remotely<a class="indexterm" id="id166"/> to the Raspberry Pi, PuTTY will display a warning message that says that the Raspberry Pi's digital fingerprint (or the host key) has not been registered with PuTTY because this is the first time that PuTTY has seen the digital fingerprint of the Raspberry Pi.</li><li class="listitem">Click on the <span class="strong"><strong>Yes</strong></span> button to accept the Raspberry Pi's digital fingerprint and continue.</li><li class="listitem">After you've accepted the security warning, you will be asked for a username and password. Enter <code class="literal">pi</code> as the username and then enter the password that you configured during installation for the user whose username is <code class="literal">pi</code> (<code class="literal">raspberry</code> is the default password). The following screenshot shows a successful login using PuTTY:<div class="mediaobject"><img alt="How to do it..." src="graphics/B04745_02_04.jpg"/></div></li><li class="listitem">Type <code class="literal">exit</code> to log out.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec74"/>How it works...</h2></div></div></div><p>This<a class="indexterm" id="id167"/> recipe begins by starting the PuTTY client.</p><p>The IP <a class="indexterm" id="id168"/>address of the Raspberry Pi is entered into the <span class="strong"><strong>Host Name</strong></span> field and the <span class="strong"><strong>Open</strong></span> button is clicked to establish a secure connection to the Raspberry Pi.</p><p>Before the connection is established, PuTTY displays a <span class="strong"><strong>Security Alert</strong></span> dialog box warning that states that the Raspberry Pi's digital fingerprint (or host key) has not been registered and there is <span class="emphasis"><em>no guarantee that the server is the computer you think it is</em></span>. The alert is normal and expected for the first connection to a new computer. Clicking on <span class="strong"><strong>Yes</strong></span> clears the alert and adds the Raspberry Pi to PuTTY's list of known hosts.</p><p>After the security warning has been cleared, the PuTTY Terminal window is opened and we are prompted for the username (<code class="literal">login as:</code>) and password to use when logging in to the Raspberry Pi. After entering the username and password, a welcome message and the time of last login are displayed, which is followed by a command prompt.</p><p>There's nothing more that needs to be done in this recipe. Therefore, we will use the <code class="literal">exit</code> command to close the connection.</p></div><div class="section" title="There's more..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec75"/>There's more...</h2></div></div></div><p>Whenever the Raspberry Pi is reinstalled, it will create a new digital fingerprint. This new fingerprint <a class="indexterm" id="id169"/>will not be recognized by PuTTY<a class="indexterm" id="id170"/> the first time it is used. When PuTTY tries to connect to the newly reinstalled Raspberry Pi, PuTTY will display a warning that states that there has been a <span class="strong"><strong>POTENTIAL SECURITY BREACH</strong></span> (see the following screenshot).</p><p>If you have just reinstalled your Raspberry Pi, do not panic. The Raspberry Pi's new digital fingerprint has not yet been recognized by PuTTY. Simply click on the <span class="strong"><strong>Yes</strong></span> button to accept the new fingerprint.</p><p>If you didn't just reinstall your Raspberry Pi and this warning pops up, you may very well have a security breach. Therefore, check your network connections and ensure that there is no possibility of a man-in-the-middle attack:</p><div class="mediaobject"><img alt="There's more..." src="graphics/B04745_02_05.jpg"/></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec76"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>PuTTY</strong></span> (<a class="ulink" href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">http://www.chiark.greenend.org.uk/~sgtatham/putty/</a>): PuTTY is<a class="indexterm" id="id171"/> a free SSH client for Windows. It is also a telnet client<a class="indexterm" id="id172"/> and an xterm emulator.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>Man-in-the-middle attack</strong></span> (<a class="ulink" href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack">https://en.wikipedia.org/wiki/Man-in-the-middle_attack</a>): Wikipedia has more information about the man-in-the-middle<a class="indexterm" id="id173"/> attack, where the attacker <a class="indexterm" id="id174"/>secretly relays and possibly alters the communication between two parties who believe that they are directly communicating with each other.</li></ul></div></div></div>
<div class="section" title="Changing the login password (passwd)"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec25"/>Changing the login password (passwd)</h1></div></div></div><p>This<a class="indexterm" id="id175"/> recipe shows how to change the login password.</p><p>Once<a class="indexterm" id="id176"/> remote access to the Raspberry Pi has been enabled, anyone on the local network who knows the correct username and password will be able to log in remotely. To prevent unauthorized access to the Raspberry Pi, the default installation password should be changed immediately after the installation is complete.</p><p>The <code class="literal">raspi-config</code> utility can be used to change the login password. However, this recipe uses the <code class="literal">passwd</code> command. The <code class="literal">passwd</code> command is a standard GNU utility that is available with most Linux distributions and can generally be used even when <code class="literal">raspi-config</code> is not available.</p><p>Changing the login password frequently will inhibit unauthorized access to the Raspberry Pi. You should use this recipe on a regular basis to protect access to your Raspberry Pi.</p><p>After completing this recipe, you will be able to change your login password.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec77"/>Getting ready</h2></div></div></div><p>The following ingredients are required for this recipe:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You will require an initial setup or a basic networking setup for the Raspberry Pi that has been powered on. You also need to be logged in as the user <code class="literal">pi</code> (refer to the recipes in <a class="link" href="ch01.html" title="Chapter 1. Installation and Setup">Chapter 1</a>, <span class="emphasis"><em>Installation and Setup</em></span>, for instructions for how to boot and log in and the previous recipes in this chapter for instructions for how to log in remotely).</li><li class="listitem" style="list-style-type: disc">A network connection is an optional requirement.</li></ul></div><p>If the Raspberry Pi has remote access enabled, this recipe can be completed remotely using SSH or PuTTY (refer to the <span class="emphasis"><em>Remote access (SSH)</em></span> and <span class="emphasis"><em>Remote access (PuTTY)</em></span> recipes).</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec78"/>How to do it...</h2></div></div></div><p>Perform the following steps to change the login password:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Use the <code class="literal">passwd</code> command to change the password for the user <code class="literal">pi</code>, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>passwd</strong></span>

Changing password for pi.
(current) UNIX password: 
Enter new UNIX password: 
Retype new UNIX password: 
passwd: password updated successfully

pi@raspberrypi ~ $ </pre></div></li><li class="listitem">Enter the (current) Unix password, which is the password that was used during the login.<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note10"/>Note</h3><p>The passwords will not be displayed when they are entered.</p></div></div></li><li class="listitem">Enter<a class="indexterm" id="id177"/> the new password.</li><li class="listitem">Enter <a class="indexterm" id="id178"/>the new password a second time for verification.</li><li class="listitem">The command responds with <code class="literal">passwd: password updated correctly</code>.</li><li class="listitem">The login password has been changed successfully!</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec79"/>How it works...</h2></div></div></div><p>The <code class="literal">passwd</code> command first prompts for the current login password to ensure that the user who's attempting to change the password is really authorized to do so.</p><p>The password is not displayed as it is typed to protect the password from being overseen. If the current password is not entered correctly, the user will be asked to retype the password.</p><p>Once the user has been authorized, the command prompts for a new Unix password. Again, the new password is not displayed. The command prompts you to retype the new Unix password to ensure that the password was entered correctly. If the two password entries differ, you will be asked to type them again.</p><p>After <a class="indexterm" id="id179"/>the new password has been entered <a class="indexterm" id="id180"/>correctly, you are notified with a message that states this: <code class="literal">password updated successfully</code>. Changing the login password on a regular basis will help prevent unauthorized access to the Raspberry Pi.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec80"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>passwd - change user password</strong></span> (<a class="ulink" href="http://manpages.debian.net/cgi-bin/man.cgi?query=passwd">http://manpages.debian.net/cgi-bin/man.cgi?query=passwd</a>): The Debian manual page for <code class="literal">passwd</code> has details <a class="indexterm" id="id181"/>about the command and its use.</li></ul></div></div></div>
<div class="section" title="Adding a user (useradd)"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec26"/>Adding a user (useradd)</h1></div></div></div><p>This<a class="indexterm" id="id182"/> recipe shows<a class="indexterm" id="id183"/> how to add a new user login to your Raspberry Pi.</p><p>Creating separate logins for different users (or for different purposes) helps improve the security of the Raspberry Pi and organize the use of the Raspberry Pi's filesystem by giving each user a home directory in which they can organize their files.</p><p>After completing this recipe, you will be able to add a new user to the Raspberry Pi.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec81"/>Getting ready</h2></div></div></div><p>The following ingredients are required for this recipe:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You will need an initial setup or a basic networking setup for the Raspberry Pi that has been powered on. You also need to be logged in as the user <code class="literal">pi</code> (refer to the recipes in <a class="link" href="ch01.html" title="Chapter 1. Installation and Setup">Chapter 1</a>, <span class="emphasis"><em>Installation and Setup</em></span>, to learn how to boot and log in and the previous recipes in this chapter to understand how to log in remotely).</li><li class="listitem" style="list-style-type: disc">A network connection is an optional requirement.</li></ul></div><p>If the Raspberry Pi has remote access enabled, this recipe can be completed remotely using SSH or PuTTY (refer to the <span class="emphasis"><em>Remote access (SSH)</em></span> and <span class="emphasis"><em>Remote access (PuTTY)</em></span> recipes).</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec82"/>How to do it...</h2></div></div></div><p>Perform the following steps to add a new user:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Use <code class="literal">ls</code> to display the users who already have home directories, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>ls -l /home</strong></span>

total 8
drwxr-xr-x 3 pi     pi     4096 Jun 28 05:00 pi

pi@raspberrypi ~ $</pre></div></li><li class="listitem">Execute the <code class="literal">adduser</code> command to add the user whose username is <code class="literal">golden</code>, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>sudo adduser golden</strong></span>

Adding user `golden' ...
Adding new group `golden' (1002) ...
Adding new user `golden' (1001) with group `golden' ...
Creating home directory `/home/golden' ...
Copying files from `/etc/skel' ...

Enter new UNIX password: 
Retype new UNIX password: 

passwd: password updated successfully
Changing the user information for golden
Enter the new value, or press ENTER for the default

  Full Name []: <span class="strong"><strong>Rick Golden</strong></span>
  Room Number []: <span class="strong"><strong>rick@golden-garage.net</strong></span>
  Work Phone []: <span class="strong"><strong>+1 (650) 555-1212</strong></span>
  Home Phone []: <span class="strong"><strong>+1 (650) 555-1212</strong></span>
  Other []: 

Is the information correct? [Y/n] <span class="strong"><strong>Y</strong></span></pre></div></li><li class="listitem">The <code class="literal">adduser</code> command prompts for a new Unix password, but it does not display it as it is being typed. Therefore, it asks you to retype the new UNIX password so that the hidden password can be verified.</li><li class="listitem">After <a class="indexterm" id="id184"/>the password is entered, you are prompted for<a class="indexterm" id="id185"/> the new user's full name, room number, work phone, and other information. None of these entries is mandatory. All of them can be left blank.</li><li class="listitem">When the user information for the new user has been completely entered, the command asks <code class="literal">Is the information correct? [Y/n]</code>. Type <span class="emphasis"><em>Y</em></span> and then press the <span class="emphasis"><em>Enter</em></span> key to add the new user to the Raspberry Pi.</li><li class="listitem">Use <code class="literal">ls</code> to show the new user's home directory, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>ls -l /home</strong></span>

total 8
drwxr-xr-x 2 golden golden 4096 Jun 29 04:12 golden
drwxr-xr-x 3 pi     pi     4096 Jun 28 05:00 pi

pi@raspberrypi ~ $ </pre></div></li><li class="listitem">Finally, log out and log back in as the new user!</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec83"/>How it works...</h2></div></div></div><p>First, the current users' home directories are listed. There is only one user home directory in the list, namely the home directory of the user whose username is <code class="literal">pi</code>.</p><p>The new<a class="indexterm" id="id186"/> user, <code class="literal">golden</code>, is added to the system. The new user is <a class="indexterm" id="id187"/>given a password and user information. When all the new user information is entered, the information is accepted and considered to be correct and the new user with <code class="literal">golden</code> as the username is created.</p><p>After the new user is added, the users' home directories are listed again. This time, there are two user home directories listed, namely <code class="literal">golden</code> and <code class="literal">pi</code>.</p><p>Finally, we can log out and log back in as <code class="literal">golden</code>.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec84"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>useradd - create a new user or update default new user information </strong></span><p>(<a class="ulink" href="http://manpages.debian.net/cgi-bin/man.cgi?query=useradd">http://manpages.debian.net/cgi-bin/man.cgi?query=useradd</a>): The Debian manual page for <code class="literal">useradd</code> lists in <a class="indexterm" id="id188"/>detail the features and options of the <code class="literal">useradd</code> command as well as provides background information about how users and groups are managed on the Raspbian Linux distribution.</p></li></ul></div></div></div>
<div class="section" title="Giving a user sudo privileges (id and usermod)"><div class="titlepage"><div><div><h1 class="title"><a id="ch02lvl1sec27"/>Giving a user sudo privileges (id and usermod)</h1></div></div></div><p>This <a class="indexterm" id="id189"/>recipe shows how to add a user to the privileged <code class="literal">sudo</code> group.</p><p>When <a class="indexterm" id="id190"/>users are created, they are given an ordinary set of user privileges by default. The user can log in to the Raspberry Pi, create and delete files in their own user directory, and execute any command that does not require super-user privileges. If you'd like a new user to execute special commands such as <code class="literal">shutdown</code>, <code class="literal">reboot</code>, and <code class="literal">raspi-config</code>, you'll need to add the user to the <code class="literal">sudo</code> user group.</p><p>After completing this recipe, you'll be able to give an ordinary user super-user privileges by adding the user to the <code class="literal">sudo</code> user group.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec85"/>Getting ready</h2></div></div></div><p>The following ingredients are used in this recipe:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">You will require an initial setup or a basic networking setup for the Raspberry Pi that has been powered on. You also need to be logged in as the user <code class="literal">pi</code> (refer to the recipes in <a class="link" href="ch01.html" title="Chapter 1. Installation and Setup">Chapter 1</a>, <span class="emphasis"><em>Installation and Setup</em></span>, to learn how to boot and log in and the previous recipes in this chapter to understand how to log in remotely)</li><li class="listitem" style="list-style-type: disc">A network connection is an optional requirement.</li></ul></div><p>If the Raspberry Pi has remote access enabled, this recipe can be completed remotely by using SSH or PuTTY (refer to the <span class="emphasis"><em>Remote access (SSH)</em></span> and <span class="emphasis"><em>Remote access (PuTTY)</em></span> recipes).</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec86"/>How to do it...</h2></div></div></div><p>Perform the following steps to add a user to the <code class="literal">sudo</code> group:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Use the <code class="literal">id</code> command to see the groups to which the user whose username is <code class="literal">golden</code> currently belongs, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>id golden</strong></span>

uid=1001(golden) gid=1002(golden) groups=1002(golden)

pi@raspberrypi ~ $</pre></div></li><li class="listitem">Then, use the <code class="literal">usermod –a -G</code> command to add the user whose username is <code class="literal">golden</code> to the <code class="literal">sudo</code> user group, as follows:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>sudo usermod -a -G sudo golden</strong></span>

pi@raspberrypi ~ $</pre></div></li><li class="listitem">Use<a class="indexterm" id="id191"/> the <code class="literal">id</code> command to validate that the <a class="indexterm" id="id192"/>user has indeed been added to the <code class="literal">sudo</code> group:<div class="informalexample"><pre class="programlisting">pi@raspberrypi ~ $ <span class="strong"><strong>id golden</strong></span>

uid=1001(golden) gid=1002(golden) groups=1002(golden),27(sudo)

pi@raspberrypi ~ $</pre></div></li><li class="listitem">Now, the user whose username is <code class="literal">golden</code> is a member of the <code class="literal">27</code>(<code class="literal">sudo</code>) group and can execute commands and modify files that require super-user privileges!</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec87"/>How it works...</h2></div></div></div><p>First, the <code class="literal">id</code> command lists the groups for which the uses – chose username is <code class="literal">golden</code> – is currently <a class="indexterm" id="id193"/>a member.</p><p>Then, the <code class="literal">usermod</code> command is used to add (<code class="literal">-a</code>) the <code class="literal">sudo</code> group (<code class="literal">-G sudo</code>) to the user.</p><p>Finally, the <code class="literal">id</code> command is used once again to see which groups <code class="literal">golden</code> is a member of.</p><p>Now, the<a class="indexterm" id="id194"/> user whose username is <code class="literal">golden</code> can execute commands that require super-user privileges by using the <code class="literal">sudo</code> command as a prefix. The first recipe in this chapter, <span class="emphasis"><em>Executing command with privileges</em></span>, has more information on the <code class="literal">sudo</code> command and its use.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch02lvl2sec88"/>See also</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>id - print real and effective user and group IDs</strong></span> (<a class="ulink" href="http://manpages.debian.net/cgi-bin/man.cgi?query=id">http://manpages.debian.net/cgi-bin/man.cgi?query=id</a>): The Debian<a class="indexterm" id="id195"/> manual page for <code class="literal">id</code> lists the command options.</li><li class="listitem" style="list-style-type: disc"><span class="strong"><strong>usermod - change user password</strong></span> (<a class="ulink" href="http://manpages.debian.net/cgi-bin/man.cgi?query=usermod">http://manpages.debian.net/cgi-bin/man.cgi?query=usermod</a>): The Debian manual page for <code class="literal">usermod</code> has details <a class="indexterm" id="id196"/>about this command and its use.</li></ul></div></div></div></body></html>