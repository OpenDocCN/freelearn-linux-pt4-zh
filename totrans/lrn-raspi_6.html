<html><head></head><body><div class="chapter" title="Chapter&#xA0;6.&#xA0;The Console"><div class="titlepage"><div><div><h1 class="title"><a id="ch06"/>Chapter 6. The Console</h1></div></div></div><p>Behind the pretty graphical interfaces of a Linux-based operating system such as Raspbian, is the console.</p><p>The console is the most basic <a class="indexterm" id="id355"/>way of communicating with the innards of the Raspbian operating system. The console's history started at the very beginning of computing where the interface to a computer was a keyboard and a teletype machine. At that time, operators would type a command and the result would be printed in front of them.</p><div class="mediaobject"><img alt="The Console" src="graphics/2192OS_06_01.jpg"/><div class="caption"><p>A teletype machine</p></div></div><p>Fortunately, with the development of computer monitors, we no longer need a typewriter to communicate with our computer and there are many different ways in which this can be done. You already learned how to use the Raspberry Pi's graphical user interface Xfce, and this chapter will run you through how you can use the built-in console terminal application called bash.</p><div class="section" title="Bash"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec45"/>Bash</h1></div></div></div><p>The <span class="strong"><strong>Bourne again shell</strong></span> (<span class="strong"><strong>bash</strong></span>) is a console shell developed by the GNU project that was released in 1989. Originally written by Brian Fox, it has become the de facto standard and is used by default in almost all Linux operating systems, OS X, Novell NetWare, Android, as well as on Windows. The bash was inspired by the <code class="literal">sh</code> shell, which was extremely popular around the time bash was created.</p><p>The bash shell was written as an open <a class="indexterm" id="id356"/>source replacement to the Bourne shell that was the default command-line interpreter for Unix. The bash supports many features, including the autocompletion of commands and filename wildcards.</p></div></div>
<div class="section" title="Launching the bash command interpreter"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec46"/>Launching the bash command interpreter</h1></div></div></div><p>The bash command interpreter is<a class="indexterm" id="id357"/> made available to us in the Xfce environment through the LXTerminal application. Other terminal clients such as Yakuake can be installed using <code class="literal">apt-get</code>. If you have configured Raspbian to not start the Xfce desktop environment, bash will be automatically started after you log in.</p><p>You can launch LXTerminal by double-clicking on its icon on the desktop.</p><div class="mediaobject"><img alt="Launching the bash command interpreter" src="graphics/2192OS_06_02.jpg"/><div class="caption"><p>LXTerminal</p></div></div><p>You can launch and run as many instances of LXTerminal as you like, but don't forget that your Raspberry Pi doesn't have unlimited resources.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note08"/>Note</h3><p>If you are not using the Xfce desktop environment, bash will be launched when you log in.</p></div></div><p>The first thing that you will notice is that you have Command Prompt. By default, this Command Prompt will show you the current directory that you are working in, your Raspberry Pi's hostname (by default <code class="literal">raspberrypi</code>), and your username (by default this is <code class="literal">pi</code>).</p><p>As you move around the<a class="indexterm" id="id358"/> filesystem, you will see the name of the directory that you are in.</p><p>To run a command using the bash command interpreter, simply type the command and press the <span class="emphasis"><em>Enter</em></span> key. The command will run and the results will be displayed. While a command is running, you won't be able to run other commands until it is finished.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip06"/>Tip</h3><p>If you wish to let a command run in the background, all you need to do is add an <code class="literal">&amp;</code> operator to the end of the command. This will let the command run in the background.</p></div></div><p>Linux is a full multiprocessing system and you can run as many instances of LXTerminal as you want. To see which processing commands are running in the background on your Raspberry Pi, simply run <code class="literal">ps –a</code>.</p></div>
<div class="section" title="Basic bash commands"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec47"/>Basic bash commands</h1></div></div></div><p>The best way to start<a class="indexterm" id="id359"/> learning bash is to start using it. Remember that if you really make a mess of things, all you need to do is reimage your SD card and away you go!</p><p>It is easy to get more information about any of the commands that are referred to in this chapter. You can do this using the <code class="literal">man</code> command.</p><p>The <code class="literal">man</code> command launches the built-in documentation system for Linux. Almost every command available has documentation in the man system.</p><p>For example, to find out more information about the <code class="literal">ls</code> command, simply run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>man ls</strong></span>
</pre></div><p>This will launch the <code class="literal">man</code> program and display every bit of information that you need to know about the <code class="literal">ls</code> program.</p><div class="mediaobject"><img alt="Basic bash commands" src="graphics/2192OS_06_03.jpg"/><div class="caption"><p>The man ls command</p></div></div><p>To move around the <code class="literal">man</code> program, you can use the arrow keys on your keyboard. If you wish to skip the whole<a class="indexterm" id="id360"/> page, you can press the spacebar key. When you have finished reading the information, you can exit by pressing the <span class="emphasis"><em>q</em></span> key.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip07"/>Tip</h3><p>Don't forget that Linux is a case-sensitive operating system and it is extremely important that you use the correct case when you are running the command.</p></div></div></div>
<div class="section" title="The autocompletion of commands"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec48"/>The autocompletion of commands</h1></div></div></div><p>One of the most useful features<a class="indexterm" id="id361"/> of bash is its ability to autocomplete the name of the command that you are typing. This is as easy as pressing the <span class="emphasis"><em>Tab</em></span> key.</p><p>For example, if you want to run the command <code class="literal">nano</code> in order to launch the nano text editor, simply type the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>nan</strong></span>
</pre></div><p>Now press the <span class="emphasis"><em>Tab</em></span> key. The bash will automatically autocomplete the command and display this:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>nano</strong></span>
</pre></div><p>This can be a real timesaver. If there is more than one possible combination of autocompletion, you will need to press the <span class="emphasis"><em>Tab</em></span> key twice. This will cause bash to list all the different possibilities.</p><div class="mediaobject"><img alt="The autocompletion of commands" src="graphics/2192OS_06_04.jpg"/><div class="caption"><p>The bash's autocomplete system</p></div></div></div>
<div class="section" title="Running commands as root"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec49"/>Running commands as root</h1></div></div></div><p>Linux is an inherently<a class="indexterm" id="id362"/> secure operating system. Every part of the operating system has been configured to be secure by default. Every file is owned by a particular user, and that user is able to allocate permissions to that file in order to restrict other users and groups from accessing the file.</p><p>By default, all commands that are run in bash are run as the current user. The current user is normally the Pi user. This user is a standard user, and this means that you will not be able to run any commands that can affect other users, such as installing software or changing the network configuration of your Raspberry Pi.</p><p>Fortunately, it is easy to run commands as the root or superuser. This user has unlimited access to every part of the operating system and must be used with caution.</p><p>To run a command as the superuser, you can use use the <code class="literal">sudo</code> utility. The <code class="literal">sudo</code> utility lets you run a command as a different user from what you are logged in as.</p><p>In order to use the <code class="literal">sudo</code> utility to run a command as root, all you need to do is prepend the command that you want to run with <code class="literal">sudo</code>.</p><p>Take an example of the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get moo</strong></span>
</pre></div><p>It will run the <code class="literal">apt-get</code> application as<a class="indexterm" id="id363"/> root. This particular command will invoke <code class="literal">apt-get Easter egg</code>, proving that computer programmers sometimes do have a sense of humor!</p><div class="mediaobject"><img alt="Running commands as root" src="graphics/2192OS_06_05.jpg"/><div class="caption"><p>Running a command as root that can make your Raspberry Pi moo!</p></div></div></div>
<div class="section" title="Moving around the filesystem using bash"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec50"/>Moving around the filesystem using bash</h1></div></div></div><p>The most basic part of using a command interpreter, such as bash, is to be able to move around the Linux<a class="indexterm" id="id364"/> filesystem. It is important to understand how<a class="indexterm" id="id365"/> bash lets you represent directories. This is done in two different ways: using <span class="strong"><strong>absolute paths</strong></span> and <span class="strong"><strong>relative paths</strong></span>.</p><div class="section" title="Absolute paths"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec66"/>Absolute paths</h2></div></div></div><p>An absolute path is a path that<a class="indexterm" id="id366"/> describes the location of a file or folder starting from <code class="literal">/</code> (root). This is easy to spot as it will always <a class="indexterm" id="id367"/>start with <code class="literal">/</code>.</p><p>An example of an<a class="indexterm" id="id368"/> absolute path is <code class="literal">/home/pi/Desktop</code>. This path is the folder that contains all the items on your desktop.</p></div><div class="section" title="Relative paths"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec67"/>Relative paths</h2></div></div></div><p>A relative path is a<a class="indexterm" id="id369"/> path to the file or folder that is described based on where you are in the filesystem.</p><p>An example of a<a class="indexterm" id="id370"/> relative<a class="indexterm" id="id371"/> path is <code class="literal">../Desktop</code>. This means that a folder called <code class="literal">Desktop</code> is stored in a folder that is one level above the one you are in.</p><p>There are several special paths that you should know of in bash, as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Path</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">/</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This is<a class="indexterm" id="id372"/> the root of the Linux filesystem and the highest path that you can have.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">./</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a class="indexterm" id="id373"/> represents the directory that you are currently in.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">../</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This is the<a class="indexterm" id="id374"/> directory one level below the one you are in.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">~</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This represents<a class="indexterm" id="id375"/> your home directory. When you are logged in as the Pi user, this will be <code class="literal">/home/pi</code>. If you are running a command as the root, this will be <code class="literal">/root</code>.</p>
</td></tr></tbody></table></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip08"/>Tip</h3><p>If you don't have a keyboard with the <span class="emphasis"><em>~</em></span> key, you can press <span class="emphasis"><em>F12</em></span> instead.</p></div></div></div></div>
<div class="section" title="Manipulating files"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec51"/>Manipulating files</h1></div></div></div><p>Now that you have an<a class="indexterm" id="id376"/> understanding of how paths are represented in bash, it is time to learn how to manipulate them.</p><p>There are many <a class="indexterm" id="id377"/>commands that you can use to manipulate files in bash, which include the commands in the following table:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">ls</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">cd</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">pwd</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">cat</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">head and tail</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">cp</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">mv</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">rm</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">mkdir</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">touch</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">adduser</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">addgroup</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">passwd</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">chmod</code>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">chown</code>
</p>
</td></tr></tbody></table></div><div class="section" title="ls"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec68"/>ls</h2></div></div></div><p>
<code class="literal">ls</code> is perhaps the most common <a class="indexterm" id="id378"/>basic function, and is used regularly to see <a class="indexterm" id="id379"/>which files are present in the directory that you are in. This is done using the list (<code class="literal">ls</code>) command. By default, this is the current folder that you are in. If you want to see the contents of another folder, simply append the path to the end of the <code class="literal">ls</code> command.</p><div class="mediaobject"><img alt="ls" src="graphics/2192OS_06_06.jpg"/><div class="caption"><p>The contents of the home directory</p></div></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip09"/>Tip</h3><p>
<code class="literal">ls</code> doesn't display any files or folders that begin with (<code class="literal">.</code>). The reason for this is that any file or directories beginning with (<code class="literal">.</code>) are hidden.</p></div></div><p>The <code class="literal">ls</code> command has<a class="indexterm" id="id380"/> many different options that change the output on your screen. Some common <code class="literal">ls</code> parameters are as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Option</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-a</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This shows<a class="indexterm" id="id381"/> hidden files and folders</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-l</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This uses the long<a class="indexterm" id="id382"/> list format. This will show file sizes, file permissions, and the owners of the files</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-h</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This shows all the<a class="indexterm" id="id383"/> files sized in a human-readable format</p>
</td></tr></tbody></table></div></div><div class="section" title="cd"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec69"/>cd</h2></div></div></div><p>The Linux filesystem is made up of many different files and folders. When using bash, it is really important to be<a class="indexterm" id="id384"/> able to move around the filesystem. This is done using the <code class="literal">cd</code> (change directory) command.</p><p>
<code class="literal">cd</code> is easy to use. All you need<a class="indexterm" id="id385"/> to do in order to change the current directory is to run <code class="literal">cd</code> followed by the path of the folder you want to move into. This can either be an absolute directory or a relative directory.</p><div class="mediaobject"><img alt="cd" src="graphics/2192OS_06_07.jpg"/><div class="caption"><p>Changing between directories</p></div></div><p>The directory that you are in after you run <code class="literal">cd</code> is called the current working directory. Unless you specify, a directory bash will look for any commands that you run and any files that you are using in the current working directory. If the command is not in the current folder, bash will look in several other predefined folders for the command. These folders are specified in the <code class="literal">PATH</code> environment variable in bash.</p></div><div class="section" title="pwd"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec70"/>pwd</h2></div></div></div><p>Sometimes, when<a class="indexterm" id="id386"/> navigating the Linux filesystem, you might need to find out which directory you are in. You <a class="indexterm" id="id387"/>can do this using the <code class="literal">pwd</code> (print working directory) command.</p><div class="mediaobject"><img alt="pwd" src="graphics/2192OS_06_08.jpg"/><div class="caption"><p>The pwd command</p></div></div></div><div class="section" title="cat"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec71"/>cat</h2></div></div></div><p>When you are working with files, sometimes it's very handy to quickly view the contents of a file. The <a class="indexterm" id="id388"/>
<code class="literal">cat</code> command does exactly <a class="indexterm" id="id389"/>this. When you run the <code class="literal">cat</code> command followed by a filename, it will display the contents of that file on the screen.</p><div class="mediaobject"><img alt="cat" src="graphics/2192OS_06_09.jpg"/><div class="caption"><p>The cat command</p></div></div><p>
<code class="literal">cat</code> has several options that you can use to customize the format of the file on the screen. Some of the <code class="literal">cat</code> command's parameters are as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Option</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-n</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This shows line<a class="indexterm" id="id390"/> numbers in the file</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-E</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This adds<a class="indexterm" id="id391"/> <span class="strong"><strong>$</strong></span> at the end of every line so that you can see where it is</p>
</td></tr></tbody></table></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip10"/>Tip</h3><p>Remember that everything in Linux is a file. Using the <code class="literal">cat</code> command, you can read in data from the device on your Raspberry Pi, including its serial port and camera. By running <code class="literal">cat /dev/video0 &gt; video.record</code>, you can record the video coming in from your camera.</p></div></div></div><div class="section" title="head and tail"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec72"/>head and tail</h2></div></div></div><p>Another handy set of commands that you can use to see the contents of a file are <code class="literal">head</code> and <code class="literal">tail</code>. The <code class="literal">head</code> and <code class="literal">tail</code> commands go together and show the start of the end of a file. The <a class="indexterm" id="id392"/>
<code class="literal">head</code> command is<a class="indexterm" id="id393"/> extremely useful if you want to see whether a big file is the file that you are looking for and it is too big to be shown using <code class="literal">cat</code>. The<a class="indexterm" id="id394"/> <code class="literal">tail</code> command is<a class="indexterm" id="id395"/> extremely handy if you want to look at the last few entries in a log file.</p><div class="mediaobject"><img alt="head and tail" src="graphics/2192OS_06_10.jpg"/><div class="caption"><p>The head and tail commands</p></div></div><p>The <code class="literal">head</code> and <code class="literal">tail</code> commands have many different options that you can use in order to customize the output format of the file on the screen. The most important is the <code class="literal">–n</code> option. The <code class="literal">–n</code> option followed by a number will display <span class="emphasis"><em>n</em></span> lines of the file. You can find the other options by running <code class="literal">man head</code> or <code class="literal">man tail</code>.</p></div><div class="section" title="cp"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec73"/>cp</h2></div></div></div><p>
<code class="literal">cp</code> is another important command in bash. <code class="literal">cp</code> copies a file or folder from one folder to another. By<a class="indexterm" id="id396"/> default, <code class="literal">cp</code> will overwrite a file in the destination folder if it already exists, so beware!</p><p>To use <code class="literal">cp</code>, you<a class="indexterm" id="id397"/> first need to specify the file or folder that you want to copy followed by the destination folder. If you select a directory, it will copy just this directory. If you want to make an exact copy of the directory, you need to use the <code class="literal">–r</code> command. The <code class="literal">–r</code> command recursively copies the folder.</p><p>Basically, what this command does is it makes an exact copy of the folder you are copying, so you will most likely want to use this option whenever you are copying a directory.</p><div class="mediaobject"><img alt="cp" src="graphics/2192OS_06_11.jpg"/><div class="caption"><p>Copying a file and a folder</p></div></div><p>The <code class="literal">cp</code> command has many different options that change how it copies a file or directory, as shown in the following table:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Option</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-r</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a class="indexterm" id="id398"/> recursively copies a file or directory</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-f</code>
</p>
</td><td style="text-align: left" valign="top">
<p>If an existing file<a class="indexterm" id="id399"/> in the destination directory can't be opened, this removes it and copies it again</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-p</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This preserves the <a class="indexterm" id="id400"/>owner and timestamp of the files that you are copying</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-v</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This indicates <a class="indexterm" id="id401"/>verbose mode, it shows the names of the files that are being copied</p>
</td></tr></tbody></table></div></div><div class="section" title="mv"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec74"/>mv</h2></div></div></div><p>Sometimes, you don't want to copy a file or directory, but instead you want to move it around. The <code class="literal">mv</code> command does <a class="indexterm" id="id402"/>exactly that. Its syntax is exactly<a class="indexterm" id="id403"/> the same as the syntax of <code class="literal">cp</code>. To move a file or folder, it is simply a matter of doing as shown in the following screenshot:</p><div class="mediaobject"><img alt="mv" src="graphics/2192OS_06_12.jpg"/><div class="caption"><p>Moving a file</p></div></div><p>Unlike <code class="literal">cp</code>, <code class="literal">mv</code> automatically moves the whole file or folder and it doesn't have an <code class="literal">–r</code> option. There are several other options available in <code class="literal">mv</code>, shown as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Option</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-f</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a class="indexterm" id="id404"/> overwrites any files and folders that are in the destination location</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-u</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This only<a class="indexterm" id="id405"/> moves the file if it is newer that the file in the destination folder</p>
</td></tr></tbody></table></div></div><div class="section" title="rm"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec75"/>rm</h2></div></div></div><p>Sometimes, a file or directory is no longer required and needs to be deleted. To do this, the <code class="literal">rm</code> command is used.</p><p>To delete a file <a class="indexterm" id="id406"/>or folder, simply<a class="indexterm" id="id407"/> run the <code class="literal">rm</code> command followed by the file or directory that you want to delete. Raspbian and most other Linux distributions don't contain any sort of recycle bin functionality. This means that when you delete something, it is permanently deleted.</p><div class="mediaobject"><img alt="rm" src="graphics/2192OS_06_13.jpg"/><div class="caption"><p>Removing a file</p></div></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip11"/>Tip</h3><p>There are very few things that you can do to destroy a Linux distribution. The <code class="literal">sudo rm –rf /</code> command is one of them. This command will start at the root directory and delete every file on your device, including any files on any removable and network drives attached to your Raspberry Pi. Needless to say, be very careful when using the <code class="literal">–r</code> and<code class="literal">–f</code> flags.</p></div></div><p>By default, when removing a directory, <code class="literal">rm</code> will stop if there are any files in the directory. To delete the directory, you will need to use the <code class="literal">–f</code> flag in order to force the deletion of the folder. Some of the <code class="literal">rm</code> command's parameters are as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Option</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-f</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This never <a class="indexterm" id="id408"/>prompts when deleting any files</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-i</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This prompts<a class="indexterm" id="id409"/> before deleting each and every file</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-r</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This recursively deletes<a class="indexterm" id="id410"/> the files and folders</p>
</td></tr></tbody></table></div></div><div class="section" title="mkdir"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec76"/>mkdir</h2></div></div></div><p>You will often need to create a new folder in order to keep your files organized. The purpose of using <code class="literal">mkdir</code> (make directory) is <a class="indexterm" id="id411"/>exactly that. To use <code class="literal">mkdir</code>, all you <a class="indexterm" id="id412"/>need to do is run <code class="literal">mkdir</code> followed by the name of the directory that you want to create.</p><div class="mediaobject"><img alt="mkdir" src="graphics/2192OS_06_14.jpg"/><div class="caption"><p>Using mkdir</p></div></div><p>Once you have created the directory, it is immediately ready for use. You can use it to keep your files organized. Some of the <code class="literal">mkdir</code> parameters of are as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Option</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-p</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This creates any parent directories, if <a class="indexterm" id="id413"/>necessary—for example, <code class="literal">mkdir new/directory/with/parents –p</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-v</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This displays a<a class="indexterm" id="id414"/> message for every directory that is created</p>
</td></tr></tbody></table></div></div><div class="section" title="touch"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec77"/>touch</h2></div></div></div><p>
<code class="literal">touch</code> is a simple <a class="indexterm" id="id415"/>command that creates an empty file if a file doesn't exist. If the file exists, it updates the access time to when the command is run.</p><p>
<code class="literal">touch</code> is often used when a file needs<a class="indexterm" id="id416"/> to exist. Some examples of this include creating empty log files. In order to use <code class="literal">touch</code>, run <code class="literal">touch</code> followed by the<a class="indexterm" id="id417"/> filename that you want to create or update the access time of.</p><div class="mediaobject"><img alt="touch" src="graphics/2192OS_06_15.jpg"/><div class="caption"><p>Using touch</p></div></div></div><div class="section" title="adduser"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec78"/>adduser</h2></div></div></div><p>Every file in Linux is owned by a user. This helps to keep everything secure. By default, everything in the <code class="literal">/home/pi</code> directory is<a class="indexterm" id="id418"/> owned by the Pi user. All users also belong to a group. You can allocate permissions depending on the owner and group of the user who owns the file.</p><p>You can add<a class="indexterm" id="id419"/> users to your Raspbian installation using the <code class="literal">adduser</code> command. To do this, run <code class="literal">adduser</code> followed by the username of the user that you want to create. Because <code class="literal">adduser</code> is a system command, you will need to add <code class="literal">sudo</code> before it.</p><div class="mediaobject"><img alt="adduser" src="graphics/2192OS_06_16.jpg"/><div class="caption"><p>Creating a user</p></div></div><p>You will be asked <a class="indexterm" id="id420"/>a couple of questions by <code class="literal">adduser</code>, including the username and password. If you don't want to provide your name or phone number, simply press the <span class="emphasis"><em>Enter</em></span> key. The <code class="literal">adduser</code> command will also create a new group with the same name as your new user.</p><p>You can easily see which users you have in your Raspbian system by running the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>cat /etc/passwd</strong></span>
</pre></div><p>The <code class="literal">/etc/passwd</code> file contains all the users that are in Raspbian.</p></div><div class="section" title="addgroup"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec79"/>addgroup</h2></div></div></div><p>Sometimes, you need<a class="indexterm" id="id421"/> to create a new group in<a class="indexterm" id="id422"/> order to organize your file permissions as required. To do this, use the <code class="literal">addgroup</code> command.</p><div class="mediaobject"><img alt="addgroup" src="graphics/2192OS_06_17.jpg"/><div class="caption"><p>Creating a new group</p></div></div><p>The <code class="literal">addgroup</code> command is simple to use. All you need to do is to add the name of the group after the <code class="literal">addgroup</code> command.</p><p>The new group<a class="indexterm" id="id423"/> will be created along with a new ID. To see the groups that are there in Raspbian, run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>cat /etc/group</strong></span>
</pre></div></div><div class="section" title="passwd"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec80"/>passwd</h2></div></div></div><p>As the system administrator of your very own Linux system, you have a lot of power. You can use this power to <a class="indexterm" id="id424"/>change users' passwords using the <code class="literal">passwd</code> command. There are a couple of different ways in which you can use <code class="literal">passwd</code>. One of <a class="indexterm" id="id425"/>them is to change your own password. Another way in which you can use <code class="literal">passwd</code> is to change the password of another user on your system.</p><div class="section" title="Changing your password"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec20"/>Changing your password</h3></div></div></div><p>To change your <a class="indexterm" id="id426"/>own password, run the passwd command as shown in the following screenshot:</p><div class="mediaobject"><img alt="Changing your password" src="graphics/2192OS_06_18.jpg"/><div class="caption"><p>Changing your password</p></div></div><p>This will ask you to enter your current password. After you enter this, you will need to enter the new password twice.</p></div><div class="section" title="Changing another user's password"><div class="titlepage"><div><div><h3 class="title"><a id="ch06lvl3sec21"/>Changing another user's password</h3></div></div></div><p>Changing another<a class="indexterm" id="id427"/> user's password is just as easy as changing your password. To do this, add the username of the user after the <code class="literal">passwd</code> command. This command needs to be run as root, so add <code class="literal">sudo</code> before it.</p><div class="mediaobject"><img alt="Changing another user's password" src="graphics/2192OS_06_19.jpg"/><div class="caption"><p>Changing another user's password</p></div></div><p>This is really useful if you need to change someone else's password. By default, there is no root password<a class="indexterm" id="id428"/> set in Raspbian. To set it, run <code class="literal">sudo passwd</code>.</p></div></div><div class="section" title="chown"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec81"/>chown</h2></div></div></div><p>As mentioned previously, Linux is a multiuser system and all the files have an owner. Sometimes, the owner needs<a class="indexterm" id="id429"/> to be changed. To do this, use the <code class="literal">chown</code> command. <code class="literal">chown</code> can change the user of a file or directory.</p><p>A good example of permissions<a class="indexterm" id="id430"/> in use is the Apache web server. All the configuration files in the <code class="literal">/etc/apache2</code> directory are owned by the Apache2 user, along with the files located in the <code class="literal">/var/www</code> directory where the website that Apache2 is serving.</p><p>Sometimes, when you add a file to this directory, you need to change the owner to be the Apache2 web server. If you don't do this, Apache2 won't be able to serve the file to anyone who wants to take a look at it.</p><p>
<code class="literal">chown</code> needs several parameters. They are the new owner and the group of the file or directory that you want to change the owner of.</p><div class="mediaobject"><img alt="chown" src="graphics/2192OS_06_20.jpg"/><div class="caption"><p>Changing the owner of all the files in Apache2's web root</p></div></div><p>The owner and group need to be separated by a (<code class="literal">:</code>). In the preceding example, the user and group are both Apache2.</p><p>There are several different options that you can add to the <code class="literal">chown</code> command, as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Option</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-R</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This changes<a class="indexterm" id="id431"/> the owner of all the files and folders in the folder recursively</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-v</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This displays a<a class="indexterm" id="id432"/> message for every file that is processed</p>
</td></tr></tbody></table></div><p>Some of the chown command's parameters</p></div><div class="section" title="chmod"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec82"/>chmod</h2></div></div></div><p>The other part of a file's properties in Linux are its permissions. These permissions describe who <a class="indexterm" id="id433"/>can do what to<a class="indexterm" id="id434"/> files and directories. The following <a class="indexterm" id="id435"/>permissions are available:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Owner (o)</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Read</p>
</td><td style="text-align: left" valign="top">
<p>Write</p>
</td><td style="text-align: left" valign="top">
<p>Execute</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Group (g)</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Read</p>
</td><td style="text-align: left" valign="top">
<p>Write</p>
</td><td style="text-align: left" valign="top">
<p>Execute</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>All users (a)</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Read</p>
</td><td style="text-align: left" valign="top">
<p>Write</p>
</td><td style="text-align: left" valign="top">
<p>Execute</p>
</td></tr></tbody></table></div><p>Linux file permissions</p><p>Each of these permissions is represented by a letter, as shown in the following table:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Read</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">r</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Write</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">w</code>
</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Execute</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>
<code class="literal">x</code>
</p>
</td></tr></tbody></table></div><p>If you run the <code class="literal">ls –ll</code> command, you will be able to see what the permissions are for the file and directory that you are in:</p><div class="mediaobject"><img alt="chmod" src="graphics/2192OS_06_21.jpg"/><div class="caption"><p>The default permissions of the /home/pi directory</p></div></div><p>Permissions are grouped together in groups of three. The first three describe the users' permission for the file, the next three describe the group's permissions, and the last three describe permissions of all users.</p><p>The <code class="literal">rw-r—r—</code> permissions of the <code class="literal">ocr_pi.png</code> file are as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom"> </th><th style="text-align: left" valign="bottom">
<p>Permissions</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Owner</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Read and write</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Group</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Read</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>All users</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Read</p>
</td></tr></tbody></table></div><p>Permissions for ocr_pi.png</p></div><div class="section" title="Octal representation of permissions"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec83"/>Octal representation of permissions</h2></div></div></div><p>Permissions can also<a class="indexterm" id="id436"/> be described using an octal representation. This is a little more complicated but very flexible.</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Octal notation</p>
</th><th style="text-align: left" valign="bottom">
<p>Permissions</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>0</p>
</td><td style="text-align: left" valign="top">
<p>No permissions</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>1</p>
</td><td style="text-align: left" valign="top">
<p>Execute</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>2</p>
</td><td style="text-align: left" valign="top">
<p>Write</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>3</p>
</td><td style="text-align: left" valign="top">
<p>Write and execute</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>4</p>
</td><td style="text-align: left" valign="top">
<p>Read</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>5</p>
</td><td style="text-align: left" valign="top">
<p>Read and execute</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>6</p>
</td><td style="text-align: left" valign="top">
<p>Read and write</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>7</p>
</td><td style="text-align: left" valign="top">
<p>Read, write, and execute</p>
</td></tr></tbody></table></div><p>To describe the permissions of a file, simply work out what permissions you want to give. In the following example, we want the <code class="literal">demo.txt</code> file to have the following permissions:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom"> </th><th style="text-align: left" valign="bottom">
<p>Permissions</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Owner</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Read and write</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Group</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Read only</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>All Users</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>No permissions</p>
</td></tr></tbody></table></div><p>A demo of the permissions</p><p>To work out the permissions, we start with the owner and find the read and write permissions. We then do the same for the group and all users' permissions. These permissions work out as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom"> </th><th style="text-align: left" valign="bottom">
<p>Permissions</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Owner</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>6</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Group</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>4</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>All Users</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>0</p>
</td></tr></tbody></table></div><p>Octal permissions for the file</p><p>These permissions are put together to be <code class="literal">640</code>. The <code class="literal">chmod</code> command uses this representation to set the permissions of the file or folder.</p><div class="mediaobject"><img alt="Octal representation of permissions" src="graphics/2192OS_06_22.jpg"/><div class="caption"><p>Changing the permissions of the demo.txt file</p></div></div><p>It is also possible <a class="indexterm" id="id437"/>to individually add and remove permissions from a file or folder. To do this, the user can use the notations described in the previous two tables.</p><p>We have the <code class="literal">demo.txt</code> file with the permissions as shown in the screenshot (<span class="emphasis"><em>The default permissions of the /home/pi directory</em></span>) given earlier in this chapter. The permissions are as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom"> </th><th style="text-align: left" valign="bottom">
<p>Permissions</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Owner</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Read and write</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>Group</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>Read</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<span class="strong"><strong>All Users</strong></span>
</p>
</td><td style="text-align: left" valign="top">
<p>No permissions</p>
</td></tr></tbody></table></div><p>If we want to add the write permission to members of the same group, we do as shown in the following screenshot:</p><div class="mediaobject"><img alt="Octal representation of permissions" src="graphics/2192OS_06_23.jpg"/><div class="caption"><p>Changing the permissions of the demo.txt file</p></div></div><p>The <code class="literal">+</code> symbol adds permissions and the <code class="literal">–</code> symbol removes permissions from files.</p><p>We can see that the file now has group permissions to read and write. The disadvantage of using this method is that you need to separately set the permissions of the file for the owner, group, and <a class="indexterm" id="id438"/>all users.</p><p>There are several <a class="indexterm" id="id439"/>other command-line parameters for <code class="literal">chmod</code>, as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Parameter</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-R</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id440"/>changes all the permissions for all the directories and files</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-v</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This displays a<a class="indexterm" id="id441"/> message for every file that is processed</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-c</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This only<a class="indexterm" id="id442"/> displays files that have their permissions changed</p>
</td></tr></tbody></table></div><p>Command-line parameters for chmod</p></div></div>
<div class="section" title="Redirection in bash"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec52"/>Redirection in bash</h1></div></div></div><p>One of the more<a class="indexterm" id="id443"/> advanced features of bash are the redirection operators. These operators allow you to divert the input or output of a command to another command or file. While this sounds simple, it is an extremely powerful feature. There are several redirection operators built into bash, as shown here:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Operator</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">|</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This is a<a class="indexterm" id="id444"/> general-purpose command that chains similar to &gt;</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">&gt;</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This<a class="indexterm" id="id445"/> redirects the output of a command to a file</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">&lt;</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This reads<a class="indexterm" id="id446"/> a file and passes it to the command</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">&gt;&gt;</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id447"/>appends the output of the command to a file</p>
</td></tr></tbody></table></div><p>Redirection operators</p><p>The <code class="literal">|</code> operator is a general-purpose command-changing tool. A simple example of this is to use it with <code class="literal">cat</code> and the program <code class="literal">more</code>. The <code class="literal">more</code> program is a simple program that lets you move backward and forward throughout a file on the screen in order to read it. The <code class="literal">more</code> command gets the data that you want to read from the <code class="literal">cat</code> command. The <code class="literal">|</code> operator connects two programs together.</p><div class="mediaobject"><img alt="Redirection in bash" src="graphics/2192OS_06_24.jpg"/><div class="caption"><p>The more and cat commands connected using the | operator</p></div></div><div class="section" title="&gt; and &gt;&gt;"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec84"/>&gt; and &gt;&gt;</h2></div></div></div><p>The <code class="literal">&gt;</code> and <code class="literal">&gt;&gt;</code> operators are<a class="indexterm" id="id448"/> really powerful operators<a class="indexterm" id="id449"/> that take the data that is output by a program and write it to a file. The <code class="literal">&gt;</code> operator replaces the file and the <code class="literal">&gt;&gt;</code> operator<a class="indexterm" id="id450"/> appends it to a file.</p><p>Remember that everything in Linux is a<a class="indexterm" id="id451"/> file, so you can use the <code class="literal">&gt;</code> and <code class="literal">&gt;&gt;</code> operators to direct the output to a serial port or a printer.</p><div class="mediaobject"><img alt="&gt; and &gt;&gt;" src="graphics/2192OS_06_25.jpg"/><div class="caption"><p>The &gt; operator writes the result of an ls command to a file</p></div></div></div><div class="section" title="&lt;"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec85"/>&lt;</h2></div></div></div><p>The <code class="literal">&lt;</code> operator is similar to<a class="indexterm" id="id452"/> the <code class="literal">&gt;</code> operator, except that it reads the contents <a class="indexterm" id="id453"/>of a file and feeds it to a program. This can be used in a lot of ways and is in some ways similar to using <code class="literal">&lt;</code>.</p><div class="mediaobject"><img alt="&lt;" src="graphics/2192OS_06_26.jpg"/><div class="caption"><p>Using the &lt; operator to send the contents of dir.txt to the more application</p></div></div></div></div>
<div class="section" title="Environmental variables"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec53"/>Environmental variables</h1></div></div></div><p>Another powerful feature <a class="indexterm" id="id454"/>of bash is the use of environmental variables. Environmental variables are values that are stored in memory and can be used to<a class="indexterm" id="id455"/> temporarily store information and settings. One example of this is the <code class="literal">PATH</code> variable. The <code class="literal">PATH</code> variable tells bash where to look for any programs if they aren't in the current directory.</p><p>All the current environmental variables set can be displayed using the <code class="literal">printenv</code> command. They are loaded into memory automatically when your Raspberry Pi boots up.</p><div class="mediaobject"><img alt="Environmental variables" src="graphics/2192OS_06_27.jpg"/><div class="caption"><p>Some of the environmental variables set up by default in Raspbian</p></div></div><p>You can define your own environmental variables easily in bash. By convention, in bash, all environmental <a class="indexterm" id="id456"/>variables are defined using capital letters.</p><p>To define an environmental variable, you can do as shown in the following screenshot:</p><div class="mediaobject"><img alt="Environmental variables" src="graphics/2192OS_06_28.jpg"/><div class="caption"><p>Defining the MY_VARIABLE environmental value</p></div></div><p>Environmental variables can be used just as easily. To use an environmental variable, simply add <code class="literal">$</code> before it.</p><div class="mediaobject"><img alt="Environmental variables" src="graphics/2192OS_06_29.jpg"/><div class="caption"><p>Using the MY_VARIABLE environmental value</p></div></div><p>Environmental variables are often used in shell scripts to store information and results.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note09"/>Note</h3><p>Do you know that a bug called Shellshock was discovered in 2014 in bash's handling of environmental variables? This bug allowed the execution of arbitrary commands and presented a huge risk to many of the web servers running on the Internet.</p></div></div><p>It is easy to add an environmental variable. To do this, you use the <code class="literal">export</code> command as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>export VARIABLE=value</strong></span>
</pre></div><p>An environmental<a class="indexterm" id="id457"/> variable's name can't contain a space and must contain capital letters.</p></div>
<div class="section" title="Basic scripting"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec54"/>Basic scripting</h1></div></div></div><p>All the commands that you have seen so far are just single commands. The bash has the ability to execute multiple commands together in one go. Commands can be stored in a file called a shell script.</p><p>A shell script has its execute<a class="indexterm" id="id458"/> attribute set. It can then be run by simply changing into the directory that the script is in and typing its name.</p><p>These shell scripts can be run as normal program a on your Raspberry Pi.</p><div class="section" title="Rebooting and shutting down your Raspberry Pi"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec86"/>Rebooting and shutting down your Raspberry Pi</h2></div></div></div><p>You can reboot and <a class="indexterm" id="id459"/>shut down your Raspberry Pi using<a class="indexterm" id="id460"/> the built-in commands. To reboot your Raspberry Pi, all you need to do is run the <code class="literal">reboot</code> command.</p><div class="mediaobject"><img alt="Rebooting and shutting down your Raspberry Pi" src="graphics/2192OS_06_30.jpg"/><div class="caption"><p>Rebooting your Raspberry Pi</p></div></div><p>Sometimes, you will want<a class="indexterm" id="id461"/> to shut down your Raspberry Pi completely. To do this, you can use the <code class="literal">shutdown</code> command.</p><p>The <code class="literal">shutdown</code> command takes two<a class="indexterm" id="id462"/> different parameters: the first parameter is<a class="indexterm" id="id463"/> the type of shutdown that you want to do, and the second parameter is the time at which you want to do the shutdown.</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Parameter</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-r</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This reboots <a class="indexterm" id="id464"/>your Raspberry Pi.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-h</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This powers off the<a class="indexterm" id="id465"/> system after the shutdown is complete. You will still need to disconnect the power to your Raspberry Pi when the shutdown is complete.</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">-k</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This doesn't really shut down<a class="indexterm" id="id466"/> the system, it just sends a warning message.</p>
</td></tr></tbody></table></div><p>The second parameter is normally the word <code class="literal">now</code>, which tells your Raspberry Pi that we want to shut down immediately.</p><div class="mediaobject"><img alt="Rebooting and shutting down your Raspberry Pi" src="graphics/2192OS_06_31.jpg"/><div class="caption"><p>Shutting down your Raspberry Pi!</p></div></div><p>The <code class="literal">halt</code> command can<a class="indexterm" id="id467"/> also be used if you want to shut down your Raspberry Pi. Simply run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>halt</strong></span>
</pre></div><p>Your Raspberry Pi will immediately shut down.</p></div></div>
<div class="section" title="Text editors"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec55"/>Text editors</h1></div></div></div><p>Sometimes, you might need to edit a file on your Raspberry Pi: perhaps to edit the <code class="literal">/etc/network/interfaces</code> file in order to reconfigure your Raspberry Pi network interfaces, or you might need a text editor to write a document.</p><p>Fortunately, there are<a class="indexterm" id="id468"/> several text editors installed with Raspbian. The most commonly used text editors are:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">nano</li><li class="listitem" style="list-style-type: disc">vim</li></ul></div><div class="section" title="nano"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec87"/>nano</h2></div></div></div><p>Originally created in<a class="indexterm" id="id469"/> 1999 by Chris Allegretta, nano is the easiest text editor to use included <a class="indexterm" id="id470"/>on the Raspberry Pi.</p><div class="mediaobject"><img alt="nano" src="graphics/2192OS_06_32.jpg"/><div class="caption"><p>The nano text editor</p></div></div><p>To edit a file in nano, you<a class="indexterm" id="id471"/> simply need to start typing. Once you have made changes, you need to save them and exit. The commands that you see at the bottom of the screen can be accessed by pressing the <span class="emphasis"><em>Ctrl</em></span> key on your keyboard followed by the letter.</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">For instance, to exit after you have made changes, press <span class="emphasis"><em>Ctrl</em></span> + <span class="emphasis"><em>x</em></span>.</li><li class="listitem">You will then be asked whether you want to save these changes. To do so, press <span class="emphasis"><em>y</em></span>.<div class="mediaobject"><img alt="nano" src="graphics/2192OS_06_33.jpg"/><div class="caption"><p>Saving changes in nano</p></div></div></li><li class="listitem">You now need to enter the filename that you want in order to save the file. Once you have done this, simply press <span class="emphasis"><em>Enter</em></span> and your file will be saved.<div class="mediaobject"><img alt="nano" src="graphics/2192OS_06_34.jpg"/><div class="caption"><p>Confirming the filename of the file you are saving</p></div></div></li><li class="listitem">To load the file <a class="indexterm" id="id472"/>you have just saved, just run the <code class="literal">nano</code> command as shown in the following screenshot:<div class="mediaobject"><img alt="nano" src="graphics/2192OS_06_35.jpg"/><div class="caption"><p>Selecting the filename that you want to save the file as</p></div></div></li></ol></div></div><div class="section" title="vim"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec88"/>vim</h2></div></div></div><p>The other text editor <a class="indexterm" id="id473"/>installed on your Raspberry Pi is the vi text editor. The vi editor was originally created for Unix-based operating systems by Bill Joy in 1976.</p><p>The name vi is derived <a class="indexterm" id="id474"/>from the shortened abbreviation of the word visual. The vi editor is one of the most widely used text editors in Linux.</p><div class="mediaobject"><img alt="vim" src="graphics/2192OS_06_36.jpg"/><div class="caption"><p>The vi text editor</p></div></div><p>The vim (improved vi) editor is a bit more complicated to use than nano. The vi editor is designed to stay out of your way, and as such, you won't see any menus or unnecessary information on the screen.</p><p>The vim editor has<a class="indexterm" id="id475"/> several different modes that you use to operate it. One of the modes is insert mode. When you are<a class="indexterm" id="id476"/> in insert mode, you can use vi like you would use the nano text editor, but here you simply type the text and use the arrow keys to navigate the file. To get into insert mode, press the <span class="emphasis"><em>Insert</em></span> key or type a capital <span class="emphasis"><em>I</em></span>.</p><div class="mediaobject"><img alt="vim" src="graphics/2192OS_06_37.jpg"/><div class="caption"><p>The vi text editor in insert mode</p></div></div><p>In order to save the file, we need to enter in the command mode. To do this, press the <span class="emphasis"><em>Esc</em></span> key followed by the <span class="emphasis"><em>:</em></span> key. This will bring up a command prompt at the bottom of the vim window.</p><div class="mediaobject"><img alt="vim" src="graphics/2192OS_06_38.jpg"/><div class="caption"><p>The vi text editor in command mode</p></div></div><p>There are many different commands available in vim, as follows:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Command</p>
</th><th style="text-align: left" valign="bottom">
<p>Description</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">w</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This <a class="indexterm" id="id477"/>writes the file to disk</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">q</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This is used to<a class="indexterm" id="id478"/> quit vim</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">dd</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This deletes<a class="indexterm" id="id479"/> the current line of text</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>
<code class="literal">x</code>
</p>
</td><td style="text-align: left" valign="top">
<p>This deletes<a class="indexterm" id="id480"/> the character where the cursor is</p>
</td></tr></tbody></table></div><p>These commands can be entered in Command Prompt, or when you are navigating the text and are not in insert mode.</p><p>An example of these commands is the <code class="literal">wq</code> command. This command saves and quits vim when you press <span class="emphasis"><em>Enter</em></span>. You won't be asked whether you want to save your changes, as vim knows what you want, based on the command you give!</p><p>If you don't want to save your changes, simply enter the <code class="literal">q!</code> command.</p><p>There are many other text editors that can be installed onto your Raspberry Pi, such as geany.</p></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec56"/>Summary</h1></div></div></div><p>In this chapter, you learned about the bash shell, file permissions, and many of bash's built-in commands. Remember that if you need to find out any more information, all that you need to do is add the <code class="literal">man</code> command in front of the command for which you want to find out more information. You will be able to find out as much information as you could ever need!</p><p>Remember, don't be scared to experiment with the different commands that are built into Raspbian. The worst thing that could happen is that you might need to image your SD card again.</p></div></body></html>