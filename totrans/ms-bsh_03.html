<html><head></head><body>
        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Testing</h1>
                
            
            <article>
                
<p class="calibre1">We have stressed so far the importance of giving a structure to our scripts, to make them flexible, and to have them react to some conditions and situations so that they will help us automate some routine tasks making decisions and performing actions on our behalf. What we saw in the previous chapters enables us to assign variables, change their values in different ways, and also to preserve them; but from the examples shown, it is clear that we need some more and this is what this new chapter is all about. We will see how to test, make comparisons, and get to react accordingly to the results, and we will give our first structure to a script having to make a decision if something happens.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">What if...else</h1>
                
            
            <article>
                
<p class="calibre1">Let's take one of our previous examples and examine it in more detail:</p>
<pre class="codepackt">
#!/bin/bash    <br class="title-page-name"/>echo "Hello user, please give me a number between 10 and 20: "<br class="title-page-name"/>read user_input<br class="title-page-name"/>if [ ${user_input} -ge 10 ] &amp;&amp; [ ${user_input} -le 20 ]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The number ${user_input} is what we were looking for!"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The number ${user_input} is not what we are looking for..."<br class="title-page-name"/>fi  
</pre>
<p class="calibre1">As an exercise to ease its comprehension, let's try to write it in natural language:</p>
<ol class="calibre15">
<li value="1" class="calibre13">Print a greeting asking for a number between 10 and 20</li>
<li value="2" class="calibre13">Read the user input and save it in the <kbd class="calibre9">user_input</kbd> variable</li>
<li value="3" class="calibre13">If the value of <kbd class="calibre9">user_input</kbd> is greater or equal to <kbd class="calibre9">10</kbd> and the value of <kbd class="calibre9">user_input</kbd> is less or equal to <kbd class="calibre9">2</kbd>, then print an OK message to the user</li>
</ol>
<ol start="4" class="calibre15">
<li value="4" class="calibre13">Otherwise (else), if the conditions are not met, print a not OK message</li>
<li value="5" class="calibre13"><kbd class="calibre9">Fi</kbd>, end of condition</li>
</ol>
<p class="calibre1">These are the basics of a conditional statement and it lets you explore on condition: if it succeeds, an instruction is executed, if it fails, another block of instructions is invoked. We can also make it a bit more flexible, introducing an alternative condition to check in case the first fails (<kbd class="calibre9">elif</kbd>):</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">if</kbd> the exit code of the condition tested is 0</li>
<li class="calibre13">then</li>
<li class="calibre13">do something</li>
<li class="calibre13"><kbd class="calibre9">elif</kbd> the exit code of this other condition tested is 0</li>
<li class="calibre13">do something</li>
<li class="calibre13"><kbd class="calibre9">else if</kbd> any of the previous conditions returned 0</li>
<li class="calibre13">do something</li>
<li class="calibre13"><kbd class="calibre9">fi</kbd> we exit from the conditional statement</li>
</ul>
<p class="calibre1">So in this more articulated shape, the condition offers more flexibility and keep in mind that you can have as many <kbd class="calibre9">elif</kbd> blocks as you want and even nest <kbd class="calibre9">if</kbd> into <kbd class="calibre9">if</kbd>, even though it is not recommended for clarity's sake. Now, let us make a real-life example with return codes, starting with the creation of three <kbd class="calibre9">test</kbd> files:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ touch test1 test2 test3</strong>  
</pre>
<p class="calibre1">Now, let us create a small script that will check for the existence of these three files:</p>
<pre class="codepackt">
#!/bin/sh    <br class="title-page-name"/>echo "We are going to test for files test1 test2 test3"    <br class="title-page-name"/>if ls test1<br class="title-page-name"/>then<br class="title-page-name"/>echo "File test1 exists so the ls test1 execution returns $?"<br class="title-page-name"/>elif ls test2<br class="title-page-name"/>then<br class="title-page-name"/>echo "File test2 exists so the ls test2 execution returns $?"<br class="title-page-name"/>elif ls test3<br class="title-page-name"/>then<br class="title-page-name"/>echo "File tes3 exists so the ls test3 execution returns $?"<br class="title-page-name"/>else<br class="title-page-name"/>echo "Neither or test1 or test2 or test3 exist so the the exit <br class="title-page-name"/>code is $?"<br class="title-page-name"/>fi<br class="title-page-name"/>echo "End of the script"  
</pre>
<p class="calibre1">Now, let's run it and have a look at what happens:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./test-files.sh </strong><br class="title-page-name"/><strong class="calibre2">We are going to test for files test1 test2 test3</strong><br class="title-page-name"/><strong class="calibre2">test1</strong><br class="title-page-name"/><strong class="calibre2">File test1 exists so the ls test1 execution returns 0</strong><br class="title-page-name"/><strong class="calibre2">End of the script</strong> 
</pre>
<p class="calibre1">What happened? The first <kbd class="calibre9">ls</kbd> on <kbd class="calibre9">test1</kbd> returned <kbd class="calibre9">0,</kbd> so it was successful and the conditional did not proceed testing the other options end exited the statement executing the next instruction outside the conditional and this was:</p>
<pre class="codepackt">
<strong class="calibre2">echo "End of the script"</strong>  
</pre>
<p class="calibre1">Now it is time to see what happens if the first condition encountered fails, so we are going to delete the <kbd class="calibre9">test1</kbd> file:</p>
<pre class="codepackt">
<strong class="calibre2">rm test1</strong>  
</pre>
<p class="calibre1">And execute the script again:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./test-files.sh </strong><br class="title-page-name"/><strong class="calibre2">We are going to test for files test1 test2 test3</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test1': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">test2</strong><br class="title-page-name"/><strong class="calibre2">File test2 exists so the ls test2 execution retuns 0</strong><br class="title-page-name"/><strong class="calibre2">End of the script</strong>  
</pre>
<p class="calibre1">Again, what happened? The first instruction, <kbd class="calibre9">ls test1</kbd>, failed since there is no <kbd class="calibre9">test1</kbd> file left to show with <kbd class="calibre9">ls</kbd> and so the instruction returned <kbd class="calibre9">1</kbd>. The script then proceeded further into the conditional statement to the second condition, executing <kbd class="calibre9">ls test2</kbd>. In this case, since <kbd class="calibre9">file2</kbd> exists, the command returned <kbd class="calibre9">0</kbd> and the script exited the statement, executing the first instruction outside the conditional, again:</p>
<pre class="codepackt">
<strong class="calibre2">echo "End of the script"</strong>  
</pre>
<p class="calibre1">Let us go on, deleting <kbd class="calibre9">test2</kbd>:</p>
<pre class="codepackt">
<strong class="calibre2">rm test1</strong>  
</pre>
<p class="calibre1">And now invoke the script:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./test-files.sh </strong><br class="title-page-name"/><strong class="calibre2">We are going to test for files test1 test2 test3</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test1': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test2': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">test3</strong><br class="title-page-name"/><strong class="calibre2">File test3 exists so the ls test3 execution retuns 0</strong><br class="title-page-name"/><strong class="calibre2">End of the script</strong>  
</pre>
<p class="calibre1">Since <kbd class="calibre9">test1</kbd> and <kbd class="calibre9">test2</kbd> do not exist, the first two <kbd class="calibre9">ls</kbd> fail and so the first two conditions with them, but not the third <kbd class="calibre9">ls</kbd> since <kbd class="calibre9">test3</kbd> still exists. The third <kbd class="calibre9">ls</kbd> then is successful and returns <kbd class="calibre9">0</kbd>, the script exits the conditional and executes the first instruction outside of it, again:</p>
<pre class="codepackt">
<strong class="calibre2">echo "End of the script"</strong>  
</pre>
<p class="calibre1">Final test, time to remove <kbd class="calibre9">test3</kbd>:</p>
<pre class="codepackt">
<strong class="calibre2">rm test3</strong>  
</pre>
<p class="calibre1">And execute the script:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:$ ./test-files.sh </strong><br class="title-page-name"/><strong class="calibre2">We are going to test for files test1 test2 test3</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test1': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test2': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test3': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">Neither or test1 or test2 or test3 exist so the the exit code is 2</strong><br class="title-page-name"/><strong class="calibre2">End of the script</strong>  
</pre>
<p class="calibre1">It should be clear now what is going on. All the <kbd class="calibre9">if...then</kbd> conditions failed and so the last resort is the else sections, which report the exit code of the <kbd class="calibre9">lstest3</kbd>. Once this is done, the script exits the conditional and executes the first instruction outside of it, which is:</p>
<pre class="codepackt">
<strong class="calibre2">echo "End of the script"</strong>  
</pre>
<p class="calibre1">Be aware that the overall exit status of a conditional statement is the one belonging to the last instruction executed and the overall exit code of the script is the one of the last instruction executed by the script itself:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./test-files.sh ; echo $?</strong><br class="title-page-name"/><strong class="calibre2">We are going to test for files test1 test2 test3</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test1': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test2': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test3': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">Neither or test1 or test2 or test3 exist so the the exit code is 2</strong><br class="title-page-name"/><strong class="calibre2">End of the script</strong><br class="title-page-name"/><strong class="calibre2">0</strong>  
</pre>
<p class="calibre1">What we see here is the script returning a value of <kbd class="calibre9">0</kbd>, and this is correct since the last instruction executed <kbd class="calibre9">echo End of the script</kbd> was successful. Let's now change the last instruction of the script with the following:</p>
<pre class="codepackt">
<strong class="calibre2">else</strong><br class="title-page-name"/><strong class="calibre2">:</strong>  
</pre>
<p class="calibre1">The colon actually means <em class="calibre20">do nothing,</em> so let's see:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli$ ./test-files.sh ; echo $?</strong><br class="title-page-name"/><strong class="calibre2">We are going to test for files test1 test2 test3</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test1': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test2': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test3': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">0</strong>  
</pre>
<p class="calibre1">Again, <kbd class="calibre9">0</kbd>. Now, let's do an inverse check, modifying the third condition adding an <kbd class="calibre9">!</kbd>.</p>
<pre class="codepackt">
<strong class="calibre2">elif !ls test3</strong><br class="title-page-name"/><strong class="calibre2">then</strong><br class="title-page-name"/><strong class="calibre2">echo "File test3 exists so the ls test3 execution retuns $?"</strong>  
</pre>
<p class="calibre1">So, the check is successful if <kbd class="calibre9">ls test3</kbd> returns <kbd class="calibre9">1</kbd>:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~./test-files-not.sh ; echo $?</strong><br class="title-page-name"/><strong class="calibre2">We are going to test for files test1 test2 test3</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test1': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test2': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test3': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">File test3 exists so the ls test3 execution retuns 0</strong><br class="title-page-name"/><strong class="calibre2">0</strong>  
</pre>
<p class="calibre1">Well, the message printed is a red herring since the execution of <kbd class="calibre9">ls test3</kbd> is not successful and cannot return <kbd class="calibre9">0</kbd>:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ls test3 ; echo $?</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'test3': No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">2</strong>  
</pre>
<p class="calibre1">What returns <kbd class="calibre9">0</kbd> is actually the check we made on the inverted condition:</p>
<pre class="codepackt">
<strong class="calibre2">elif !ls file3</strong>  
</pre>
<p class="calibre1">It can be read as the <kbd class="calibre9">if</kbd> condition is verified if <kbd class="calibre9">ls file3</kbd> is not verified. So, since for us verified is successful and successful is represented by a return value of <kbd class="calibre9">0</kbd>, the condition is verified (<kbd class="calibre9">0</kbd>) only if the <kbd class="calibre9">if ls file3</kbd> is not verified (<kbd class="calibre9">-ne 0</kbd>). So, be careful when using such conditions because you could incur in some unexpected results.</p>
<p class="calibre1">We just saw how to check a condition one at a time, but we can combine operators in a single case check so that we can achieve more interesting results. Have a look at the following script:</p>
<pre class="codepackt">
#!/bin/bash    <br class="title-page-name"/>echo "Hello user, please give me a number between 10 and 20, <br class="title-page-name"/>it must be even: "<br class="title-page-name"/>read user_input<br class="title-page-name"/>if [[ ${user_input} -ge 10 &amp;&amp; ${user_input} -le 20 &amp;&amp; <br class="title-page-name"/>$(( $user_input % 2 )) -eq 0 ]]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The number ${user_input} is what we were looking for!"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The number ${user_input} is not what we are looking for..."<br class="title-page-name"/>fi  
</pre>
<p class="calibre1">What we are doing here is testing three different conditions at the same time so the <kbd class="calibre9">if</kbd> will be verified only when the user inputs a number between <kbd class="calibre9">10</kbd> and <kbd class="calibre9">20</kbd> and it must be even. In other words, it must be divisible by 2 and we test it checking that the modulo of the value is <kbd class="calibre9">0</kbd>. Let's try some values:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./userinput-and.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20, it <br class="title-page-name"/>must be even: </strong><br class="title-page-name"/><strong class="calibre2">8</strong><br class="title-page-name"/><strong class="calibre2">The number 8 is not what we are looking for...</strong>  
</pre>
<p class="calibre1">This number satisfied both the third and second conditions since it is even and lower than 20 but it fails the first since it is not equal to or above 10. So, the <kbd class="calibre9">if</kbd> condition is not verified and <kbd class="calibre9">else</kbd> action is triggered:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./userinput-and.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20, it <br class="title-page-name"/>must be even: </strong><br class="title-page-name"/><strong class="calibre2">9</strong><br class="title-page-name"/><strong class="calibre2">The number 9 is not what we are looking for...</strong>  
</pre>
<p class="calibre1">Now the number fails the first and third conditions and satisfies the first, it is not equal or above <kbd class="calibre9">10</kbd>, it is not even but it is less than <kbd class="calibre9">20</kbd>, so the else action is triggered.</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./userinput-and.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20, it <br class="title-page-name"/>must be even: </strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Great! The number 10 is what we were looking for!</strong>  
</pre>
<p class="calibre1">Number <kbd class="calibre9">10</kbd> is good. It satisfies the first and second conditions because it is equal to 10 and less than 20, and it satisfied the third condition because it is even, so the action in the <kbd class="calibre9">then</kbd> block is triggered.</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./userinput-and.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20, it <br class="title-page-name"/>must be even: </strong><br class="title-page-name"/><strong class="calibre2">15</strong><br class="title-page-name"/><strong class="calibre2">The number 15 is not what we are looking for...</strong>  
</pre>
<p class="calibre1">In this case, the first and second conditions are verified, but the third is not. <kbd class="calibre9">15</kbd> is not even, so the <kbd class="calibre9">else</kbd> block action is triggered:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./userinput-and.sh</strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20, it <br class="title-page-name"/>must be even: </strong><br class="title-page-name"/><strong class="calibre2">20<br class="title-page-name"/></strong><strong class="calibre2">Great! The number 20 is what we were looking for!</strong>  
</pre>
<p class="calibre1"><kbd class="calibre9">20</kbd> is good, it is above <kbd class="calibre9">10</kbd>, equal to <kbd class="calibre9">20</kbd>, and we can divide it by <kbd class="calibre9">2</kbd>, so all  three conditions are verified and the <kbd class="calibre9">if</kbd> block action is triggered:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./userinput-and.sh</strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20, it <br class="title-page-name"/>must be even: </strong><br class="title-page-name"/><strong class="calibre2">21</strong><br class="title-page-name"/><strong class="calibre2">The number 21 is not what we are looking for...</strong>  
</pre>
<p class="calibre1">This number satisfies the first condition, being above <kbd class="calibre9">10</kbd>, but fails the other two since it is not equal to or below <kbd class="calibre9">20</kbd> and it is not even. So the else block action is triggered:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./userinput-and.sh</strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20, it <br class="title-page-name"/>must be even: </strong><br class="title-page-name"/><strong class="calibre2">22</strong><br class="title-page-name"/><strong class="calibre2">The number 22 is not what we are looking for...</strong>  
</pre>
<p class="calibre1">Not even this number is good. It satisfies the first condition, being above <kbd class="calibre9">10</kbd>, but fails the second since it is not equal to or below <kbd class="calibre9">20</kbd>. The third condition is satisfied, but this is not enough. So the else block action is triggered.</p>
<p class="calibre1">As we can see, when dealing with multiple conditions, we have to be really careful about what we write and think about the outcome since sometimes we could get something we did not actually want. A rule of thumb, try to keep your conditions as simple as you can or take your time to check them thoroughly. Did we say simple? Look at this:</p>
<pre class="codepackt">
#!/bin/bash<br class="title-page-name"/>echo "Hello user, please give me an even number: "<br class="title-page-name"/>read user_input<br class="title-page-name"/>if ! (( $user_input % 2 ))<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The number ${user_input} is what we were looking for!"<br class="title-page-name"/>fi  
</pre>
<p class="calibre1">We are using an arithmetic evaluation compound command and negate it to check whether a number is even: if it is not true that the modulo operation fails, then the condition is verified. But, look, we have no <kbd class="calibre9">else</kbd> block, we just evaluate the <kbd class="calibre9">if</kbd> condition and exit the conditional because we are not interested in reacting to any other cases. This is typical, for instance, counter exit conditions, as we saw before: we want to exit the loop if the counter reaches a specific value, otherwise we let the cycle run. Let's have a look at the results:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./userinput-and-simple.sh</strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me an even number: </strong><br class="title-page-name"/><strong class="calibre2">20</strong><br class="title-page-name"/><strong class="calibre2">Great! The number 2 is what we were looking for!</strong><br class="title-page-name"/><strong class="calibre2">The modulo of 20 by 2 is 0:</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ a=$((20 % 2 )) ; echo ${a}</strong><br class="title-page-name"/><strong class="calibre2">0</strong>  
</pre>
<p class="calibre1">The modulo operation does not give a result. Have a look at the return code of this operation:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~/$ ((20 % 2 )) ; echo $?<br class="title-page-name"/></strong><strong class="calibre2">1</strong> 
</pre>
<p class="calibre1">And here we are, the return code is <kbd class="calibre9">1</kbd>, which means it is not OK for us. So if a number passed through a modulo operation and gives <kbd class="calibre9">0</kbd>, the return code is failure and this means that dividing the number by two has no reminder. All this means that if a number is divisible for <kbd class="calibre9">2</kbd>; for example, it does not give us any reminder from the division, and it is even. Now, let us try an odd number:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ./userinput-and-simple.shsimple.sh</strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me an even number: </strong><br class="title-page-name"/><strong class="calibre2">25</strong>  
</pre>
<p class="calibre1">No <kbd class="calibre9">then</kbd> block action is triggered, since this is an odd number. Let us verify it:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ ((25 % 2 )) ; echo $?</strong><br class="title-page-name"/><strong class="calibre2">0</strong>  
</pre>
<p class="calibre1">The operation is successful so we have to get some remainder. Double check:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ a=25 ; b=2 ; c=$((a/b)) ; echo ${c}</strong><br class="title-page-name"/><strong class="calibre2">12</strong>  
</pre>
<p class="calibre1">We have <kbd class="calibre9">12</kbd> as a remainder of the division of <kbd class="calibre9">25</kbd> by <kbd class="calibre9">2</kbd>. So now the condition we saw in the previous script is clearer:</p>
<pre class="codepackt">
<strong class="calibre2">if ! (( $user_input % 2 ))</strong>  
</pre>
<p class="calibre1">The <kbd class="calibre9">if</kbd> statement is fulfilled if the modulo by two arithmetic operation fails. So, if a number is not divisible by <kbd class="calibre9">2</kbd> it is even, simple. Now it is time to take a look at how we can test our conditions.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Test command recap</h1>
                
            
            <article>
                
<p class="calibre1">As we have seen in some of our previous examples, we used the shell <kbd class="calibre9">built-in</kbd> test to perform some checks on variables and files along with the conditional <kbd class="calibre9">if...then</kbd> so that we could make our script react to conditions: if the test is successful it returns <kbd class="calibre9">0</kbd>, if it is not, <kbd class="calibre9">1</kbd>, and these are the values that triggered our reactions so far.</p>
<p class="calibre1">We can use a couple of different notations to execute a test and we already saw them:</p>
<pre class="codepackt">
<strong class="calibre2">[expression]</strong>  
</pre>
<p class="calibre1">or</p>
<pre class="codepackt">
<strong class="calibre2">[[expression]]</strong>  
</pre>
<p class="calibre1">We already spoke about the differences between the two, but let us quickly recap them before proceeding:</p>
<ul class="calibre12">
<li class="calibre13">The single bracket implements the standard POSIX compliant <kbd class="calibre9">test</kbd> command and it is available in all POSIX shells. <kbd class="calibre9">[</kbd> is actually a command whose argument is <kbd class="calibre9">],</kbd> and this prevents the single brackets from receiving further arguments.
<ul class="calibre23">
<li class="calibre13">Some Linux versions still have a <kbd class="calibre9">/bin/[</kbd> command, but the <kbd class="calibre9">built-in</kbd> version has the precedence in execution.</li>
</ul>
</li>
<li class="calibre13">The double brackets is only available in Bash, <kbd class="calibre9">zsh</kbd>, and <kbd class="calibre9">korn</kbd> shells.</li>
<li class="calibre13">The double brackets is a keyword, not a program, available from the 2.02 version of the Bash and offers some great features, as follows:</li>
<li class="calibre13">
<ul class="calibre23">
<li class="calibre13">The <kbd class="calibre9">=~</kbd> operator for regular expression matching</li>
<li class="calibre13">The <kbd class="calibre9">=</kbd> or <kbd class="calibre9">==</kbd> are available for pattern matching</li>
<li class="calibre13">You can use <kbd class="calibre9">&lt;&gt;</kbd> without having to escape the <kbd class="calibre9">\&gt; \&lt;</kbd></li>
<li class="calibre13">You can use <kbd class="calibre9">&amp;&amp;</kbd> instead of <kbd class="calibre9">-a</kbd> and <kbd class="calibre9">||</kbd> instead of <kbd class="calibre9">-o</kbd></li>
<li class="calibre13">You do not need to escape the parenthesis <kbd class="calibre9">\( \)</kbd> to group expressions</li>
<li class="calibre13">Glob expansion so a <kbd class="calibre9">*</kbd>can expand to everything, and this comes handy in pattern matching</li>
<li class="calibre13">You do not have to quote variables to keep safe spaces inside them</li>
</ul>
</li>
</ul>
<p class="calibre1">So, it seems that the double brackets gives us a bit of flexibility more than the old command, but before using it widely think about the audience of your scripts. If you want them available across different shells and, inside the same Bash, across different versions try to avoid using commands or built-ins that are only available in some of them. Sticking with the POSIX standard will make your scripts widely shareable, but as a drawback, they will lack the advanced features that some keywords such as double brackets have to offer. So, wisely balance your writing style and adopt the strategy that best matches your goals. We, when possible, will use the single bracket notation just to be as compatible as we can.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Testing files</h1>
                
            
            <article>
                
<p class="calibre1">There is quite a lot to say about testing and one of the most common tasks is checking files on the filesystem or if a directory is available or has some rights. So, imagine a script that has to write some data in a file inside a directory: first, we should check whether the directory exists, then if we can write into it, and finally if there is no name collision between the file we are going to open for writing and an already existing file. So let's have a look at which operators we use to execute some tests on files and devices and remember that they return <kbd class="calibre9">true</kbd> if the condition is met:</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-e</kbd>: Returns true if a file exists:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ls test-files.sh </strong><br class="title-page-name"/><strong class="calibre2">test-files.sh</strong>  
</pre>
<p class="calibre27">We just verified that the file <kbd class="calibre9">test-files.sh</kbd> exists since <kbd class="calibre9">ls</kbd> shows it:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -e test-files.sh ] ; then <br class="title-page-name"/>echo "Yes, this is a file!" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, this is a file device!</strong>  
</pre>
<p class="calibre27">Our test confirms it with a nice message.</p>
<p class="calibre1">Let's verify now that a file named <kbd class="calibre9">aaaaa</kbd> is not present in our current directory:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ lsaaaaa</strong><br class="title-page-name"/><strong class="calibre2">ls: cannot access 'aaaaa': No such file or directory</strong> 
</pre>
<p class="calibre1">OK, there is no file with such a name; let us do a test:</p>
<pre class="codepackt">
<strong class="calibre2">zarrelli:~$ if [ -e aaaaa ] ; then echo "Yes, this is a file!"; <br class="title-page-name"/>else <br class="title-page-name"/>echo "There is not such a file!" ; fi</strong><br class="title-page-name"/><strong class="calibre2">There is not such a file!</strong>  
</pre>
<p class="calibre1">Well, as you can see, we used a semicolon to divide the different parts of the statement. In a script, we would have seen the following:</p>
<pre class="codepackt">
#!/bin/bash<br class="title-page-name"/>if [ -e aaaaa ]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Yes, this is a file!"<br class="title-page-name"/>else<br class="title-page-name"/>echo "There is not such a file!"<br class="title-page-name"/>fi  
</pre>
<p class="calibre1">Each single command must be properly terminated either by a new line or a <kbd class="calibre9">;</kbd>. Each chunk of code delimited by a <kbd class="calibre9">;</kbd> will be executed before the following without the need for a new line.</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-a</kbd>: This has the same purpose of <kbd class="calibre9">-e</kbd>, but it is deprecated.</li>
<li class="calibre13"><kbd class="calibre9">-b</kbd>: This checks whether the file is actually a block device, like a disk, a CD-ROM, or a tape device:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -b /dev/nvme0n1p1 ] ; <br class="title-page-name"/>then <br class="title-page-name"/>echo "Yes, this is a block device!" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, this is a block device!</strong>  

</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-d</kbd>: This checks whether a file is actually a directory or not:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -d test ] ; <br class="title-page-name"/>then echo "Yes, this is a directory!" ; <br class="title-page-name"/>else echo "There is not such a directory!" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, this is a directory!</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-f</kbd>: This checks whether a file is a regular file and does not represent something like a character device or a directory or a block device:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -f /dev/tty7 ] ; <br class="title-page-name"/>then echo "Yes, this is a regular file!" ; <br class="title-page-name"/>else echo "There is not a regular file!" ; fi</strong><br class="title-page-name"/><strong class="calibre2">There is not a regular file!</strong>  
</pre>
<p class="calibre27">Well, this is a file that represents a terminal, so it is clearly not a regular file as <kbd class="calibre9">test.file</kbd> could be:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ touch test.file</strong>    <br class="title-page-name"/><strong class="calibre2">zarrelli:~$ if [ -f test.file ] ; <br class="title-page-name"/>then echo "Yes, this is a regular file!" ; <br class="title-page-name"/>else echo "There is not a regular file!" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, this is a regular file!</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-c</kbd>: This tests if the argument is a character file:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -c /dev/tty7 ] ; <br class="title-page-name"/>then echo "Yes, this is a character file!" ; <br class="title-page-name"/>else echo "There is not a character file!" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, this is a character file!</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-s</kbd>: This is true if the file is not of <kbd class="calibre9">0</kbd> size:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -s test.file ] ; <br class="title-page-name"/>then echo "Yes, the size of this file is not 0!" ; <br class="title-page-name"/>else echo "The size of this file is 0!" ; fi</strong><br class="title-page-name"/><strong class="calibre2">The size of this file is 0!</strong>  
</pre>
<p class="calibre27">Well, we just <em class="calibre20">touched</em> the file, so we created it with <kbd class="calibre9">0</kbd> byte size. Let's fill it with a character:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ echo 1 &gt;&gt;test.file
</strong>
</pre>
<p class="calibre27">And now, let's repeat the test:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -s test.file ] ; <br class="title-page-name"/>then echo "Yes, the size of this file is not 0!" ; <br class="title-page-name"/>else echo "The size of this file is 0!" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, the size of this file is not 0!</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-g</kbd>: This is true if the directory has a <kbd class="calibre9">sgid</kbd> flag set. As we saw, the set group ID imposed on a directory forces the files newly created into it to be owned by the group who owns the directory itself:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -g test ] ; <br class="title-page-name"/>then echo "Yes, this dir has a sgid bit" ; <br class="title-page-name"/>else echo "No sgid bit on this dir" ; fi</strong><br class="title-page-name"/><strong class="calibre2">No sgid bit on this dir</strong>  
</pre>
<p class="calibre27">And now:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ chmodg+s test</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ if [ -g test ] ; <br class="title-page-name"/>then echo "Yes, this dir has a sgid bit" ; <br class="title-page-name"/>else echo "No sgid bit on this dir" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, this dir has a sgid bit</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-G</kbd>: This is true if the group ID is the same as that of yours. Let's test on a file first:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -G test.file ] ; <br class="title-page-name"/>then echo "Yes, this file has your same group owner" ; <br class="title-page-name"/>else echo "No the group owner is not the same of yours" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, this file has your same group owner</strong>  
</pre>
<p class="calibre27">And now on a directory:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -G test ] ; <br class="title-page-name"/>then echo "Yes, this file has your same group owner" ; <br class="title-page-name"/>else echo "No the group owner is not the same of yours" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, this file has your same group owner</strong>  
</pre>
<p class="calibre27">Let's double-check changing the group owner of <kbd class="calibre9">test.file</kbd>:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ su</strong><br class="title-page-name"/><strong class="calibre2">Password: </strong><br class="title-page-name"/><strong class="calibre2">root:# chgrp root test.file</strong><br class="title-page-name"/><strong class="calibre2">root:# ls -lahtest.file</strong><br class="title-page-name"/><strong class="calibre2">-rw-r--r-- 1 zarrelli root 2 Feb  6 18:23 test.file</strong><br class="title-page-name"/><strong class="calibre2">root:# exit</strong><br class="title-page-name"/><strong class="calibre2">exit</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ if [ -G test.file ] ; <br class="title-page-name"/>then echo "Yes, this file has your same group owner" ; <br class="title-page-name"/>else echo "No the group owner is not the same of yours" ; fi</strong><br class="title-page-name"/><strong class="calibre2">No the group owner is not the same of yours</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-O</kbd>: This is true if you are the owner:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli$ if [ -O test.file ] ; <br class="title-page-name"/>then echo "Yes, you are the owner" ; <br class="title-page-name"/>else echo "No you are not the owner" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, you are the owner</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ls -lahtest.file</strong><br class="title-page-name"/><strong class="calibre2">-rw-r--r-- 1 zarrellizarrelli 2 Feb  6 18:23 test.file</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-N</kbd>: This is true if the file was modified since the last read. This can become handy when you want to backup a file or just see if new information has been added. A typical scenario would be a log file or a data file being fed by a process, a service: if in a certain amount of time, the file has not been modified it probably means that the process is not running or not working properly so we can probably do something like restart it. So, let's have a look at one of our previous scripts:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -N userinput-or.sh ] ; <br class="title-page-name"/>then echo "Yes, it has been modified since last read" ; <br class="title-page-name"/>else echo "No modifications since last read " ; fi</strong><br class="title-page-name"/><strong class="calibre2">No modifications since last read </strong>  
</pre>
<p class="calibre27">OK, the files seems to have not been modified lately, so it is time to modify it:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ echo 1 &gt;&gt; userinput-or.sh </strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ if [ -N userinput-or.sh ] ; <br class="title-page-name"/>then echo "Yes, it has been modified since last read" ; <br class="title-page-name"/>else echo "No modifications since last read " ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, it has been modified since last read</strong>  
</pre>
<p class="calibre27">That's it. Remember that in all the tests when we say that the test is true when the condition is verified, we imply a second condition that is the file must exist. So in this case, we would say, it is verified if the file exists and has not been modified from last read. Also remember that in Unix everything is a file, so a directory.</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-u</kbd>: This is true if the <kbd class="calibre9">suid</kbd> bit is flagged. This kind of test can become quite useful for different reasons related to the fact that when you run an executable it usually runs with the privileges of the user who invoked it. With the <kbd class="calibre9">suid</kbd> bit flagged the executable is run with the privileges of the owner of that executable file not with the ones of the invoker also not with those of the one who invoked it. So, a program owned by root with the <kbd class="calibre9">suid</kbd> bit flagged can be a real harm to the security of a system since whoever invokes it has the root rights over the system itself. On the other side of the medal some programs, especially those that must have root rights to access a device, need to have the <kbd class="calibre9">suid</kbd> bit flagged because this allows a normal user to access the devices as root without having to access the full root environment:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:$ su</strong><br class="title-page-name"/><strong class="calibre2">Password: </strong><br class="title-page-name"/><strong class="calibre2">root:# chown root test.file</strong><br class="title-page-name"/><strong class="calibre2">root:# ls -lahtest.file</strong><br class="title-page-name"/><strong class="calibre2">-rw-r--r-- 1 root zarrelli 2 Feb  6 18:23 test.file</strong><br class="title-page-name"/><strong class="calibre2">root:# chmod +s test.file</strong><br class="title-page-name"/><strong class="calibre2">root:# ls -lahtest.file</strong><br class="title-page-name"/><strong class="calibre2">-rwSr-Sr-- 1 root zarrelli 2 Feb  6 18:23 test.file</strong><br class="title-page-name"/><strong class="calibre2">root:# exit</strong><br class="title-page-name"/><strong class="calibre2">exit</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ if [ -u test.file ] ; <br class="title-page-name"/>then echo "Yes, it has the suid bit flagged" ; <br class="title-page-name"/>else echo "No suid bit found" ; fi</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-k</kbd>: This is true if the <kbd class="calibre9">sticky</kbd> bit is flagged. This kind of privilege is really interesting because if imposed on a file, it will have the file held in memory resulting in faster access, but applied to a directory it restricts the user rights: only the directory owner of the owner of the file inside a directory with a sticky bit set will be able to delete the file itself. This comes really handy in a collaborative environment where several users have their working file in the same directory, and applying the sticky bit on it will give the file owners the right to delete their files only:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ chmod +t test</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ if [ -k test ] ; <br class="title-page-name"/>then echo "Yes, it has the sticky bit set" ; <br class="title-page-name"/>else echo "No sticky bit set" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, it has the sticky bit set</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-r</kbd>: This is true if the read permission is set for the user executing the test:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -r test.file ] ; <br class="title-page-name"/>then echo "Yes, this user can read the file" ; <br class="title-page-name"/>else echo "No this user cannot read the file" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, this user can read the file</strong>  
</pre>
<p class="calibre27">So, the user can read the file, let's check the following:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli$ ls -lahtest.file</strong><br class="title-page-name"/><strong class="calibre2">-rwSr-Sr-- 1 root zarrelli 2 Feb  6 18:23 test.file</strong>  
</pre>
<p class="calibre27">Oh, well, the file is owned by root and root has read access, so why was the test successful if the read is granted to root? Simple:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ su</strong><br class="title-page-name"/><strong class="calibre2">Password: </strong><br class="title-page-name"/><strong class="calibre2">root:# chmodog-r test.file</strong><br class="title-page-name"/><strong class="calibre2">root:# exit</strong><br class="title-page-name"/><strong class="calibre2">exit</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ if [ -r test.file ] ; <br class="title-page-name"/>then echo "Yes, this user can read the file" ; <br class="title-page-name"/>else echo "No this user cannot read the file" ; fi</strong><br class="title-page-name"/><strong class="calibre2">No this user cannot read the file</strong>  
</pre>
<p class="calibre27">What happened? The first time we tried the test the owner was root, but the user <kbd class="calibre9">zarrelli</kbd> was still able to read the file through group permission and other permission. So, clearing those bits made the file readable only by the root user, no one else.</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-w</kbd>: This is true if the write bit is set:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -w test.file ] ; <br class="title-page-name"/>then echo "Yes, this user can write to the file" ; <br class="title-page-name"/>else echo "No this user cannot write to the file" ; fi</strong><br class="title-page-name"/><strong class="calibre2">No this user cannot write to the file</strong>  
</pre>
<p class="calibre27">Interesting, let's have a look at the file:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ls -lahtest.file</strong><br class="title-page-name"/><strong class="calibre2">-rw---S--- 1 root zarrelli 2 Feb  6 18:23 test.file</strong>  
</pre>
<p class="calibre27">Indeed, only the root user can write to it. Would you like to try and fix the issue then run the test again?</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-x</kbd>: This is true if the execution bit is set:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -x test.file ] ; <br class="title-page-name"/>then echo "Yes, this user can execute it" ; <br class="title-page-name"/>else echo "No this user cannot execute it" ; fi</strong><br class="title-page-name"/><strong class="calibre2">No this user cannot execute it</strong>  
</pre>
<p class="calibre27">Let's see what the access permissions on the file are:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli$ ls -lah test.file</strong><br class="title-page-name"/><strong class="calibre2">-rw---S--- 1 root zarrelli 2 Feb  6 18:23 test.file</strong>  
</pre>
<p class="calibre27">So no execute bit for the user. Now, let's test a directory:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -x test ] ; <br class="title-page-name"/>then echo "Yes, this user can execute it" ; <br class="title-page-name"/>else echo "No this user cannot execute it" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, this user can execute it</strong>  
</pre>
<p class="calibre27">Interesting, time to see the permissions on the directory:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ls -lah test</strong><br class="title-page-name"/><strong class="calibre2">total 8.0K</strong><br class="title-page-name"/><strong class="calibre2">drwxr-sr-t 2 zarrellizarrelli 4.0K Feb  6 18:12 .</strong><br class="title-page-name"/><strong class="calibre2">drwxr-xr-x 3 zarrellizarrelli 4.0K Feb  7 08:12 ..</strong>  
</pre>
<p class="calibre27">What are those dots and double dots? Let's have a closer look:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli$ ls -lai</strong><br class="title-page-name"/><strong class="calibre2">total 8</strong><br class="title-page-name"/><strong class="calibre2">5900830 drwxr-sr-t 2 zarrellizarrelli 4096 Feb  6 18:12 .</strong><br class="title-page-name"/><strong class="calibre2">5899440 drwxr-xr-x 3 zarrellizarrelli 4096 Feb  7 08:12 ..</strong>  
</pre>
<p class="calibre27">Keep in mind the first column. These are the <strong class="calibre2">inode</strong> numbers related to <kbd class="calibre9">.</kbd>. and<kbd class="calibre9">..</kbd>:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli@:~$ cd ..</strong><br class="title-page-name"/><strong class="calibre2">zarrelli@:~$ ls -lai</strong><br class="title-page-name"/><strong class="calibre2">total 36</strong><br class="title-page-name"/><strong class="calibre2">5899440drwxr-xr-x 3 zarrellizarrelli 4096 Feb  7 08:12 .</strong><br class="title-page-name"/><strong class="calibre2">5899435 drwxr-xr-x 3 zarrellizarrelli 4096 Feb  7 20:47 ..</strong><br class="title-page-name"/><strong class="calibre2">5900830 drwxr-sr-t 2 zarrellizarrelli 4096 Feb  6 18:12 <br class="title-page-name"/>test</strong><br class="title-page-name"/><strong class="calibre2">5899311 -rw---S--- 1 root     zarrelli    2 Feb  6 18:23 <br class="title-page-name"/>test.file</strong><br class="title-page-name"/><strong class="calibre2">5899447 -rwxr--r-- 1 zarrellizarrelli  319 Feb  5 11:42 <br class="title-page-name"/>test-files-not.sh</strong><br class="title-page-name"/><strong class="calibre2">5899450 -rwxr--r-- 1 zarrellizarrelli  317 Feb  5 11:21 <br class="title-page-name"/>test-files.sh</strong><br class="title-page-name"/><strong class="calibre2">5898796 -rw-r--r-- 1 zarrellizarrelli    0 Feb  7 08:00 <br class="title-page-name"/>test.modified</strong><br class="title-page-name"/><strong class="calibre2">5899448 -rwxrwxr-x 1 zarrellizarrelli  352 Feb  5 12:31 <br class="title-page-name"/>userinput-and.sh</strong><br class="title-page-name"/><strong class="calibre2">5899449 -rwxr-xr-x 1 zarrellizarrelli  190 Feb  5 12:41 <br class="title-page-name"/>userinput-and-simple.sh</strong><br class="title-page-name"/><strong class="calibre2">5899444 -rwxrwxr-x 1 zarrellizarrelli  305 Feb  7 08:07 <br class="title-page-name"/>userinput-or.sh</strong>  
</pre>
<p class="calibre27">The inode of <kbd class="calibre9">.</kbd> inside the <kbd class="calibre9">test</kbd> directory has the value of <kbd class="calibre9">5900830</kbd>, so now we go up one directory, and we can see that the test directory has an inode value of <kbd class="calibre9">5900830</kbd>. So, we can safely say that <kbd class="calibre9">.</kbd>points to the directory we are in. And what about <kbd class="calibre9">..</kbd>? Look at the value of <kbd class="calibre9">.</kbd>in the parent directory, it is <kbd class="calibre9">5899440</kbd>. Now look inside the <kbd class="calibre9">test</kbd> directory to the value of <kbd class="calibre9">..</kbd>, it is <kbd class="calibre9">5899440,</kbd> and so we can safely say that<kbd class="calibre9">..</kbd>points to the parent directory since both point to the same inode.</p>
<p class="calibre27">Briefly, to understand what relates an inode to a file, we can say that in a Unix style file system, an inode is a metadata structure describing file and directories attributes, such as type timestamp, size, access rights, links count, and pointers to the disk block holding the data that make up a file or directory content. Each inode number is practically an index that allows the kernel to access a file or directory, its content and attributes, such as an index in an array. And actually, you can know quite a bit of a file if you know how to look at it:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ stat test</strong><br class="title-page-name"/><strong class="calibre2">  File: test</strong><br class="title-page-name"/><strong class="calibre2">  Size: 4096      Blocks: 8          IO Block: 4096   <br class="title-page-name"/>  directory</strong><br class="title-page-name"/><strong class="calibre2">Device: fd01h/25025aInode: 5900830     Links: 2</strong><br class="title-page-name"/><strong class="calibre2">Access: (3755/drwxr-sr-t)  Uid: ( 1200/zarrelli)   Gid: ( 1200/zarrelli)</strong><br class="title-page-name"/><strong class="calibre2">Access: 2017-02-06 18:12:53.376827639 +0000</strong><br class="title-page-name"/><strong class="calibre2">Modify: 2017-02-06 18:12:53.376827639 +0000</strong><br class="title-page-name"/><strong class="calibre2">Change: 2017-02-07 19:26:15.936253432 +0000</strong><br class="title-page-name"/><strong class="calibre2"> Birth: -</strong>  
</pre>
<p class="calibre27">So, what we can say is that something pointing to the same inode number is pointing to the same data structure, the same file or directory, and that is what links the <kbd class="calibre9">..</kbd> and <kbd class="calibre9">.</kbd>to the representation of the parent and local directory as we proved by following the inode numbers.</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-h -L</kbd>: This is true if a file is a link. A link is a pointer to another file and you can have either a soft or hard link:</li>
<li class="calibre13">
<ul class="calibre23">
<li class="calibre13">A soft link is a reference to a file that can span across different filesystems. It is a special kind of file holding a reference to another file, so when the operating system tries to access the link, it recognizes it as a link and redirects all the operations to the actual file pointed by it. If the target is removed the link remains, but points to nothing. The main limits of a soft link is that it creates an overhead in the operations; the OS must redirect all the operations from it to the target.</li>
<li class="calibre13">A hard link is another file pointing to the same inode and because inodes are a metastructure of a file system, a hard link cannot span across filesystems. Once the original file is deleted, the hard link is not affected since it points to a valid inode, which actually remains on the file system even if the file is deleted. A limit is that it cannot point to a directory.</li>
</ul>
</li>
</ul>
<p class="calibre27">So, to make it easy, we can say that the soft link is a pointer by name to a file, whereas a hard link is a pointer by inode. Let's see some differences in play starting with a soft link:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ln -s test.filenew.test.file</strong><br class="title-page-name"/><strong class="calibre2">zarrelli@:~$ ls -lah | grep new</strong><br class="title-page-name"/><strong class="calibre2">lrwxrwxrwx 1 zarrellizarrelli    9 Feb  7 21:48 new.test.file -&gt;test.file</strong>  
</pre>
<p class="calibre27">Let's <kbd class="calibre9">cat</kbd> the link:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ su</strong><br class="title-page-name"/><strong class="calibre2">Password: </strong><br class="title-page-name"/><strong class="calibre2">root:# chmoda+rtest.file</strong><br class="title-page-name"/><strong class="calibre2">root:# exit</strong><br class="title-page-name"/><strong class="calibre2">exit</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ cat new.test.file</strong><br class="title-page-name"/><strong class="calibre2">1</strong>  
</pre>
<p class="calibre27">Now, let's remove the original file:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ rmtest.file</strong>
</pre>
<p class="calibre27">And verify if we can access the content through the link:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ cat new.test.file</strong><br class="title-page-name"/><strong class="calibre2">cat: new.test.file: No such file or directory</strong>  
</pre>
<p class="calibre27">The problem is clear with <kbd class="calibre9">ls</kbd>:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ls -lah</strong><br class="title-page-name"/><strong class="calibre2">total 32K</strong><br class="title-page-name"/><strong class="calibre2">drwxr-xr-x 3 zarrellizarrelli 4.0K Feb  7 22:06 .</strong><br class="title-page-name"/><strong class="calibre2">drwxr-xr-x 3 zarrellizarrelli 4.0K Feb  7 22:02 ..</strong><br class="title-page-name"/><strong class="calibre2">lrwxrwxrwx 1 zarrellizarrelli    9 Feb  7 21:48 <br class="title-page-name"/>new.test.file -&gt;test.file</strong><br class="title-page-name"/><strong class="calibre2">drwxr-sr-t 2 zarrellizarrelli 4.0K Feb  6 18:12 <br class="title-page-name"/>test</strong><br class="title-page-name"/><strong class="calibre2">-rwxr--r-- 1 zarrellizarrelli  319 Feb  5 11:42 <br class="title-page-name"/>test-files-not.sh</strong><br class="title-page-name"/><strong class="calibre2">-rwxr--r-- 1 zarrellizarrelli  317 Feb  5 11:21 <br class="title-page-name"/>test-files.sh</strong><br class="title-page-name"/><strong class="calibre2">-rw-r--r-- 1 zarrellizarrelli    0 Feb  7 08:00 <br class="title-page-name"/>test.modified</strong><br class="title-page-name"/><strong class="calibre2">-rwxrwxr-x 1 zarrellizarrelli  352 Feb  5 12:31 <br class="title-page-name"/>userinput-and.sh</strong><br class="title-page-name"/><strong class="calibre2">-rwxr-xr-x 1 zarrellizarrelli  190 Feb  5 12:41 <br class="title-page-name"/>userinput-and-simple.sh</strong><br class="title-page-name"/><strong class="calibre2">-rwxrwxr-x 1 zarrellizarrelli  305 Feb  7 08:07 <br class="title-page-name"/>userinput-or.sh</strong>  
</pre>
<p class="calibre27">The link is still there, but the original file is gone, so when the OS tries to reach it, it fails. Let us recreate the original file and the link:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ rmnew.test.file</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ rmnew.test.file</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ echo 1 &gt;test.file</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ln -s test.filenew.test.file</strong>  
</pre>
<p class="calibre27">Now, let's link across the <kbd class="calibre9">/boot</kbd> filesystem. First, let's check that <kbd class="calibre9">/boot</kbd> is mounted on its own partition and filesystem:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ mount  | grep boot</strong><br class="title-page-name"/><strong class="calibre2">/dev/nvme0n1p1 on /boot type ext2 (rw,relatime,block_validity,barrier,user_xattr,acl)</strong>  
</pre>
<p class="calibre27">OK, it is really another filesystem, so let's soft link:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ su</strong><br class="title-page-name"/><strong class="calibre2">Password: </strong>    <br class="title-page-name"/><strong class="calibre2">root:# ln -s test.file /boot/boot.test.file</strong>  
</pre>
<p class="calibre27">And access the link:</p>
<pre class="calibre21">
<strong class="calibre2">root:# cat /boot/boot.test.file</strong><br class="title-page-name"/><strong class="calibre2">cat: /boot/boot.test.file: No such file or directory</strong>  
</pre>
<p class="calibre27">Well, something has gone wild. What is happening? Have a look with <kbd class="calibre9">ls -lah</kbd>:</p>
<pre class="calibre21">
<strong class="calibre2">root:# ls -lah /boot/boot.test.file</strong><br class="title-page-name"/><strong class="calibre2">lrwxrwxrwx 1 root root 9 Feb  7 22:19 /boot/boot.test.file <br class="title-page-name"/>-&gt;test.file</strong>  
</pre>
<p class="calibre27">Well, the link points to <kbd class="calibre9">test.file</kbd> in <kbd class="calibre9">/boot</kbd> even though we linked from another directory. We need an absolute reference:</p>
<pre class="calibre21">
<strong class="calibre2">root:# ln -s /home/zarrelli/test.file /boot/new.test.file</strong><br class="title-page-name"/><strong class="calibre2">root:# cat /boot/new.test.file</strong><br class="title-page-name"/><strong class="calibre2">1</strong>  
</pre>
<p class="calibre27">And now it works. Finally, let's see what happens if we try to link a directory:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ln -s test new.test</strong>  
</pre>
<p class="calibre27">We linked <kbd class="calibre9">new.test</kbd> to the <kbd class="calibre9">test</kbd> directory and now just check that the <kbd class="calibre9">test</kbd> directory is empty:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ls -lah test</strong><br class="title-page-name"/><strong class="calibre2">total 8.0K</strong><br class="title-page-name"/><strong class="calibre2">drwxr-sr-t 2 zarrellizarrelli 4.0K Feb  7 22:29 .</strong><br class="title-page-name"/><strong class="calibre2">drwxr-xr-x 3 zarrellizarrelli 4.0K Feb  7 22:26 ..</strong>  
</pre>
<p class="calibre27">Now, let's create a file using the link:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ echo 2 &gt;new.test/testing</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ cat test/testing </strong><br class="title-page-name"/><strong class="calibre2">2</strong>  
</pre>
<p class="calibre27">And let's see what is in test:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ cat test/testing </strong><br class="title-page-name"/><strong class="calibre2">2</strong>  
</pre>
<p class="calibre27">Here we are; we can reach the data inside test using the <kbd class="calibre9">new.test</kbd> soft link.</p>
<p class="calibre27">Now it is time to hard link across filesystems:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ su</strong><br class="title-page-name"/><strong class="calibre2">Password: </strong><br class="title-page-name"/><strong class="calibre2">root:# ln  /home/zarrelli/test.file /boot/hard.test.file</strong><br class="title-page-name"/><strong class="calibre2">ln: failed to create hard link '/boot/hard.test.file' =&gt;'/home/zarrelli/test.file': Invalid cross-device link</strong>  
</pre>
<p class="calibre27">No way! We cannot reference with a hard link across filesystems; the inode restriction is preventing us from doing it.</p>
<p class="calibre27">Now, let's try to link a directory:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ln test hard.test</strong><br class="title-page-name"/><strong class="calibre2">ln: test: hard link not allowed for directory</strong>  
</pre>
<p class="calibre27">Again, no good to go. Now, let us try to hard link in the same filesystem:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ lntest.filehard.test.file</strong>  
</pre>
<p class="calibre27">No problem, but let's have a look at the inodes:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ls -lai</strong><br class="title-page-name"/><strong class="calibre2">total 40</strong><br class="title-page-name"/><strong class="calibre2">5899440 drwxr-xr-x 3 zarrellizarrelli 4096 Feb  7 22:35 .</strong><br class="title-page-name"/><strong class="calibre2">5899435 drwxr-xr-x 3 zarrellizarrelli 4096 Feb  7 22:33 ..</strong><br class="title-page-name"/><strong class="calibre2">5899465 -rw-r--r-- 2 zarrellizarrelli    2 Feb  7 22:11 <br class="title-page-name"/>hard.test.file</strong><br class="title-page-name"/><strong class="calibre2">5899355 lrwxrwxrwx 1 zarrellizarrelli    4 Feb  7 22:26 <br class="title-page-name"/>new.test -&gt; test</strong><br class="title-page-name"/><strong class="calibre2">5900839 lrwxrwxrwx 1 zarrellizarrelli    9 Feb  7 22:12 <br class="title-page-name"/>new.test.file -&gt;test.file</strong><br class="title-page-name"/><strong class="calibre2">5900830 drwxr-sr-t 2 zarrellizarrelli 4096 Feb  7 22:31 <br class="title-page-name"/>test</strong><br class="title-page-name"/><strong class="calibre2">5899465 -rw-r--r-- 2 zarrellizarrelli    2 Feb  7 22:11 <br class="title-page-name"/>test.file</strong><br class="title-page-name"/><strong class="calibre2">5899447 -rwxr--r-- 1 zarrellizarrelli  319 Feb  5 11:42 <br class="title-page-name"/>test-files-not.sh</strong><br class="title-page-name"/><strong class="calibre2">5899450 -rwxr--r-- 1 zarrellizarrelli  317 Feb  5 11:21 <br class="title-page-name"/>test-files.sh</strong><br class="title-page-name"/><strong class="calibre2">5898796 -rw-r--r-- 1 zarrellizarrelli    0 Feb  7 08:00 <br class="title-page-name"/>test.modified</strong><br class="title-page-name"/><strong class="calibre2">5899448 -rwxrwxr-x 1 zarrellizarrelli  352 Feb  5 12:31 <br class="title-page-name"/>userinput-and.sh</strong><br class="title-page-name"/><strong class="calibre2">5899449 -rwxr-xr-x 1 zarrellizarrelli  190 Feb  5 12:41 <br class="title-page-name"/>userinput-and-simple.sh</strong><br class="title-page-name"/><strong class="calibre2">5899444 -rwxrwxr-x 1 zarrellizarrelli  305 Feb  7 08:07 <br class="title-page-name"/>userinput-or.sh</strong>  
</pre>
<p class="calibre27">The hard link points to the same inode of the original file, the soft link does not. Now remove the original file again and try to <kbd class="calibre9">cat</kbd> the hard and soft link:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ rmtest.file</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ cat new.test.file</strong><br class="title-page-name"/><strong class="calibre2">cat: new.test.file: No such file or directory</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ cat hard.test.file</strong><br class="title-page-name"/><strong class="calibre2">1</strong>  
</pre>
<p class="calibre27">As we expected, the soft link failed because there is no filename to point to, the hard link succeeded because the inode is still there:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli$ ls -lahi</strong><br class="title-page-name"/><strong class="calibre2">total 36K</strong><br class="title-page-name"/><strong class="calibre2">5899440 drwxr-xr-x 3 zarrellizarrelli 4.0K Feb  7 22:40 .</strong><br class="title-page-name"/><strong class="calibre2">5899435 drwxr-xr-x 3 zarrellizarrelli 4.0K Feb  7 22:33 ..</strong><br class="title-page-name"/><strong class="calibre2">5899465 -rw-r--r-- 1 zarrellizarrelli    2 Feb  7 22:11 <br class="title-page-name"/>hard.test.file</strong><br class="title-page-name"/><strong class="calibre2">5899355 lrwxrwxrwx 1 zarrellizarrelli    4 Feb  7 22:26 <br class="title-page-name"/>new.test -&gt; test</strong><br class="title-page-name"/><strong class="calibre2">5900839 lrwxrwxrwx 1 zarrellizarrelli    9 Feb  7 22:12 <br class="title-page-name"/>new.test.file -&gt;test.file</strong><br class="title-page-name"/><strong class="calibre2">5900830 drwxr-sr-t 2 zarrellizarrelli 4.0K Feb  7 22:31 <br class="title-page-name"/>test</strong><br class="title-page-name"/><strong class="calibre2">5899447 -rwxr--r-- 1 zarrellizarrelli  319 Feb  5 11:42 <br class="title-page-name"/>test-files-not.sh</strong><br class="title-page-name"/><strong class="calibre2">5899450 -rwxr--r-- 1 zarrellizarrelli  317 Feb  5 11:21 <br class="title-page-name"/>test-files.sh</strong><br class="title-page-name"/><strong class="calibre2">5898796 -rw-r--r-- 1 zarrellizarrelli    0 Feb  7 08:00 <br class="title-page-name"/>test.modified</strong><br class="title-page-name"/><strong class="calibre2">5899448 -rwxrwxr-x 1 zarrellizarrelli  352 Feb  5 12:31 <br class="title-page-name"/>userinput-and.sh</strong><br class="title-page-name"/><strong class="calibre2">5899449 -rwxr-xr-x 1 zarrellizarrelli  190 Feb  5 12:41 <br class="title-page-name"/>userinput-and-simple.sh</strong><br class="title-page-name"/><strong class="calibre2">5899444 -rwxrwxr-x 1 zarrellizarrelli  305 Feb  7 08:07 <br class="title-page-name"/>userinput-or.sh</strong>  
</pre>
<p class="calibre27">A quick rule of thumb is do not use soft link to reference frequently accessed files, such as web pages, use them for <kbd class="calibre9">config</kbd> files for instance, as they are just read at the startup. Soft links are slow. Hard links are good for referencing files and preserve their content despite what happens to the origin:</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-p</kbd>: This is true if the file is a pipe. Recall for a while what we said in the first chapter about pipes and named pipes; they are a way to get different processes to communicate between each other. If a process is spawned by a parent is not a big deal, they share the same environment and the same file descriptors, on the open descriptor of the parent process, the child will be able to read data in the same order it was written with a buffer kernel to host the bits waiting to be read. For processes that do not share a common environment we can use a pipe that leverages a file that the processes can cling to: this file can last longer than the processes that make use of it, usually until a reboot and can be deleted or redirected. These kinds of interprocess communication structures are called <strong class="calibre2">named pipes</strong> or <strong class="calibre2">First In First Out</strong> (<strong class="calibre2">FIFO</strong>) pipes, based on the order of the data processed. Let us make an example and create a pipe, either with <kbd class="calibre9">mkfifo</kbd> or <kbd class="calibre9">mknode</kbd>:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ mkfifomyfifo</strong>  
</pre>
<p class="calibre27">Now, let's open a second terminal and issue, in the same directory, the command:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ cat myfifo</strong>  
</pre>
<p class="calibre27">The process will hang waiting for something to read. Now, let's go back to the first terminal and write something to the named pipe:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ echo hello &gt;myfifo</strong>  
</pre>
<p class="calibre27">Now back to the second terminal to check what happened:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ cat myfifo</strong><br class="title-page-name"/><strong class="calibre2">hello</strong>  
</pre>
<p class="calibre27">We will see more on named pipes in one of the next chapters, now we will just check if <kbd class="calibre9">myfifo</kbd> is really a named pipe:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -p myfifo ] ; <br class="title-page-name"/>then echo "Yes, it is a named pipe" ; <br class="title-page-name"/>else echo "No it is not a pipe" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, it is a named pipe</strong>  

</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-S</kbd>: This is true if it is a socket. As we already saw, a socket is an endpoint between two devices on the same system or across the network and it allows the devices to exchange data, quite as we saw for pipes and named pipes. As you can easily guess, a Linux system has quite a bunch of sockets:</li>
</ul>
<pre class="codepackt">
    <strong class="calibre2">zarrelli:~$ if [ -S /tmp/OSL_PIPE_1000_SingleOfficeIPC_39e ] ; then echo "Yes, it is a named pipe" ; else echo "No it is not a pipe" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, it is a named pipe</strong>
</pre>
<p class="calibre27">And we can double-check looking for and in the property of the file as listed by <kbd class="calibre9">ls</kbd>:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ls -lah /tmp/OSL_PIPE_1000_SingleOfficeIPC_39e </strong><br class="title-page-name"/><strong class="calibre2">srwxr-xr-x 1 zarrellizarrelli 0 Feb 12 09:02 /tmp/OSL_PIPE_1000_SingleOfficeIPC_39e</strong>
</pre>
<p class="calibre27">We can see an <em class="calibre20">s</em> character at the beginning of the permissions list, and this is what tells has that this file is exactly a socket, as we expected.</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-t</kbd>: This is true if a file is linked to a terminal. A classic use for this test, as you will find almost in all guides, is to check if a <kbd class="calibre9">stdin</kbd> or a <kbd class="calibre9">stderr</kbd> in a script is linked to a terminal. Let's check what the <kbd class="calibre9">stdout</kbd> of our shell:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ -t 1 ] ; <br class="title-page-name"/>then echo "Yes, it is associated to a terminal" ; <br class="title-page-name"/>else echo "No it is not associated to a terminal" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, it is associated to a terminal</strong>  
</pre>
<p class="calibre27">Need to double-check it? Simple, since the output of our command issued in the current shell has been printed to our monitor, which is connected to the terminal.</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">file -ntother_file</kbd>: This is true if the file is newer than other files, comparison made on their modification dates. Let's have a look:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ touch other_file ; <br class="title-page-name"/>for i in {1..10}; do : ; done ; touch file; <br class="title-page-name"/>if [ file -ntother_file ] ; <br class="title-page-name"/>then echo "Yes, file is newer then other_file" ; <br class="title-page-name"/>else echo "No file is not newer than other_file" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, file is newer then other_file</strong>  
</pre>
<p class="calibre27">So, what did we do? We simply chained some commands, and since <kbd class="calibre9">other_file</kbd> must be the older piece, we started off creating it. Then, we setup a simple "for" loop iterating between <kbd class="calibre9">1</kbd> and <kbd class="calibre9">10</kbd> doing nothing, as implied by the double colon, since we had to let some time pass before creating the newer file. Passed <kbd class="calibre9">10</kbd> iterations we created a new file and compared the two. One thing that appears interesting in this example is the use of:</p>
<pre class="calibre21">
<strong class="calibre2">{1..10}</strong>  
</pre>
<p class="calibre27">This is a construct available since Bash newer than 3.0. Let us quickly set up a range writing the starting number and the ending one. From Bash newer than 4.0, we can also define a range with increments, in the form of:</p>
<pre class="calibre21">
<strong class="calibre2">{start..end..step}</strong>  
</pre>
<p class="calibre27">Like in the following example:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ touch other_file ; <br class="title-page-name"/>for i in {1..120..2}; do if [ $(($i%5)) -eq 0 ] ; <br class="title-page-name"/>then echo "Waiting...cycle $i" ; fi ; sleep 1 ; done ; <br class="title-page-name"/>touch file; if [ file -ntother_file ] ; <br class="title-page-name"/>then echo "Yes, file is newer then other_file" ; <br class="title-page-name"/>else echo "No file is not newer than other_file" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 5</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 15</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 25</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 35</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 45</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 55</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 65</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 75</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 85</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 95</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 105</strong><br class="title-page-name"/><strong class="calibre2">Waiting...cycle 115</strong><br class="title-page-name"/><strong class="calibre2">Yes, file is newer then other_file</strong>  
</pre>
<p class="calibre27">Well, added few things here: the cycle now goes from <kbd class="calibre9">1</kbd> to <kbd class="calibre9">120</kbd> in steps of 2 and prints out a message only if the cycle number can be divided by 5, so we will not clutter the screen. Finally, we wait for one sec at each cycle using the sleep command to ensure that at the end of the cycle we spent 60 seconds before creating the last file and making the comparison.</p>
<div class="packt_tip">We can also modify the date of a file using a specific date, even back in the past, using touch with the format <kbd class="calibre28">-t YYMMDDHHmm</kbd>:<br class="calibre29"/>
<kbd class="calibre28">zarrelli:~$ ls -lahtest.file</kbd><br class="calibre29"/>
<kbd class="calibre28">-rw-r--r-- 3 zarrellizarrelli 0 Feb 12 14:56 test.file</kbd><br class="calibre29"/>
<kbd class="calibre28">touch -t 8504251328 test.file</kbd><br class="calibre29"/>
<kbd class="calibre28">zarrelli:~$ ls -lahtest.file</kbd><br class="calibre29"/>
<kbd class="calibre28">-rw-r--r-- 3 zarrellizarrelli 0 Apr 25 1985 test.file</kbd></div>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">file -otother_file</kbd>: This is true if the file is older than <kbd class="calibre9">other_file</kbd>:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~/$ if [ userinput-or.sh -otother_file ] ; <br class="title-page-name"/>then echo "Yes, the first file is older than the second" ; <br class="title-page-name"/>else echo "No the first file is not older than the second" ; fi</strong>  
</pre>
<p class="calibre27">And indeed:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~/$ ls -laht userinput-or.sh other_file</strong><br class="title-page-name"/><strong class="calibre2">-rw-r--r-- 1 zarrellizarrelli   0 Feb 12 14:16 other_file</strong><br class="title-page-name"/><strong class="calibre2">-rwxrwxr-x 1 zarrellizarrelli 305 Feb  7 08:07 userinput-or.sh</strong>  
</pre>
<p class="calibre27">Now just touch the <kbd class="calibre9">userinput-or.sh</kbd>:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ if [ userinput-or.sh -otother_file ] ; <br class="title-page-name"/>then echo "Yes, the first file is older than the second" ; <br class="title-page-name"/>else echo "No the first file is not older than the second" ; fi</strong><br class="title-page-name"/><strong class="calibre2">No the first file is not older than the second</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">file -efother_file</kbd>: This is true if the file and other files share the same inode number and device. Have you already heard about files with the same inode number and that they cannot be on different devices? Yes, we call them hard links:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">zarrelli$ rmtest.file</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ rmnew.test.file</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ touch test.file</strong><br class="title-page-name"/><strong class="calibre2">zarrelli$ lntest.filenew.test.file</strong><br class="title-page-name"/><strong class="calibre2">zarrelli$ lntest.fileother.new.test.file</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ if [ new.test.file -efother.new.test.file ] ; <br class="title-page-name"/>then echo "Yes, the files share the same inode number and device" ; else echo "No the files do not share the same inode number and device" ; fi</strong><br class="title-page-name"/><strong class="calibre2">Yes, the files share the same inode number and device</strong>  
</pre>
<p class="calibre27">Now let's double-check:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ lls -laihtest.fileother.new.test.fileother<br class="title-page-name"/>.new.test.file</strong><br class="title-page-name"/><strong class="calibre2">5900839 -rw-r--r-- 3 zarrellizarrelli 0 Feb 12 14:56 other.new.test.file</strong><br class="title-page-name"/><strong class="calibre2">5900839 -rw-r--r-- 3 zarrellizarrelli 0 Feb 12 14:56 other.new.test.file</strong><br class="title-page-name"/><strong class="calibre2">5900839 -rw-r--r-- 3 zarrellizarrelli 0 Feb 12 14:56 <br class="title-page-name"/>test.file</strong>  
</pre>
<p class="calibre27">All three files share the same inode and, since the inode is a metastructure of a file system, a single file system.</p>
<p class="calibre1">We are done with the file comparison, but there is some more that we have to see, for instance how we can test integers since they are quite a common presence in all the script we see around the Internet.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Testing integers</h1>
                
            
            <article>
                
<p class="calibre1">As we saw with comparisons between files, we can do much the same thing with integers using some binary operators. This comes handy in case we want to take a decision based on the value a variable has taken, as we saw in earlier examples, and it is a type of action widely performed when dealing with scripts:</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-eq</kbd>: This is true if the first integer is equal to the second:</li>
</ul>
<pre class="calibre21">
#!/bin/bash    <br class="title-page-name"/>echo "Hello user, please type in one integer and press enter:"<br class="title-page-name"/>read user_input1 <br class="title-page-name"/>echo "Now type in the number again and press enter:"<br class="title-page-name"/>read user_input2 <br class="title-page-name"/>if [ ${user_input1} -eq ${user_input2} ]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The integer ${user_input1} is equal to ${user_input2}"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The integer ${user_input1} is not equal to ${user_input2}..."<br class="title-page-name"/>fi  
</pre>
<p class="calibre27">The code is quite simple, it does not sports any checks on the input but even though it is so bare bones it fits our purposes:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./eq.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 10 is equal to 10</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./eq.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">20</strong><br class="title-page-name"/><strong class="calibre2">The integer 10 is not equal to 20...</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-ne</kbd>: This is true if the first integer is not equal to the second integer. Let's just modify the previous script a bit:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">if [ ${user_input1} -ne ${user_input2} ]</strong><br class="title-page-name"/><strong class="calibre2">then</strong><br class="title-page-name"/><strong class="calibre2">echo "Great! The integer ${user_input1} is not equal to <br class="title-page-name"/>${user_input2}"</strong><br class="title-page-name"/><strong class="calibre2">else</strong><br class="title-page-name"/><strong class="calibre2">echo "The integer ${user_input1} is equal to ${user_input2}..."</strong><br class="title-page-name"/><strong class="calibre2">fi</strong>  
</pre>
<p class="calibre27">And now, let's execute the new bunch of code:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./ne.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">100</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">50</strong><br class="title-page-name"/><strong class="calibre2">Great! The integers 100 is not equal to 50</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-gt</kbd>: This is true if the fist integer is greater than the second integer. Again, let's modify a bunch of lines:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">if [ ${user_input1} -gt ${user_input2} ]</strong><br class="title-page-name"/><strong class="calibre2">then</strong><br class="title-page-name"/><strong class="calibre2">echo "Great! The integer ${user_input1} is greater than <br class="title-page-name"/>${user_input2}"</strong><br class="title-page-name"/><strong class="calibre2">else</strong><br class="title-page-name"/><strong class="calibre2">echo "The integer ${user_input1} is not greater than <br class="title-page-name"/>${user_input2}..."</strong><br class="title-page-name"/><strong class="calibre2">fi</strong>  
</pre>
<p class="calibre27">Now, let's try it out:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./gt.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">999</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">333</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 999 is greater than 333</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./gt.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">222</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">888</strong><br class="title-page-name"/><strong class="calibre2">The integer 222 is not greater than 888...</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-ge</kbd>: This is true if the first integer is greater than or equal to the second integer. Here are a few amendments:</li>
</ul>
<pre class="calibre21">
if [ ${user_input1} -ge ${user_input2} ]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The integer ${user_input1} is greater than or <br class="title-page-name"/>equal to ${user_input2}"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The integer ${user_input1} is not greater than or <br class="title-page-name"/>equal to ${user_input2}..."<br class="title-page-name"/>fi  
</pre>
<p class="calibre27">And now here are some tests:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./ge.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">5</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 10 is greater than or equal to 5</strong><br class="title-page-name"/><strong class="calibre2">zarrelli@moveaway:~/Documents/My books/Mastering bash/Chapter 3/Scripts$ ./ge.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 10 is greater than or equal to 10</strong><br class="title-page-name"/><strong class="calibre2">zarrelli@moveaway:~/Documents/My books/Mastering bash/Chapter 3/Scripts$ ./ge.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">11</strong><br class="title-page-name"/><strong class="calibre2">The integer 10 is not greater than or equal to 11...</strong>  

</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-lt</kbd>: This is true if the first integer is less than the second integer. So, another small amendments are as follows:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">if [ ${user_input1} -lt ${user_input2} ]</strong><br class="title-page-name"/><strong class="calibre2">then</strong><br class="title-page-name"/><strong class="calibre2">echo "Great! The integer ${user_input1} is less than <br class="title-page-name"/>${user_input2}"</strong><br class="title-page-name"/><strong class="calibre2">else</strong><br class="title-page-name"/><strong class="calibre2">echo "The integer ${user_input1} is not less than <br class="title-page-name"/>${user_input2}..."</strong><br class="title-page-name"/><strong class="calibre2">fi</strong>  
</pre>
<p class="calibre27">And now a couple of tests:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./lt.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">5</strong><br class="title-page-name"/><strong class="calibre2">The integer 10 is not less than 5...</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./lt.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">20</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 10 is less than 20</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-le</kbd>: This is true if the first integer is less than or equal to the second:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">if [ ${user_input1} -le ${user_input2} ]</strong><br class="title-page-name"/><strong class="calibre2">then</strong><br class="title-page-name"/><strong class="calibre2">echo "Great! The integer ${user_input1} is less than or <br class="title-page-name"/>equal to ${user_input2}"</strong><br class="title-page-name"/><strong class="calibre2">else</strong><br class="title-page-name"/><strong class="calibre2">echo "The integer ${user_input1} is not less than or <br class="title-page-name"/>equal to ${user_input2}..."</strong><br class="title-page-name"/><strong class="calibre2">fi</strong>  
</pre>
<p class="calibre27">And now the usual tests are:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./le.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">30</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">20</strong><br class="title-page-name"/><strong class="calibre2">The integer 30 is not less than or equal to 20...</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./le.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">60</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">70</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 60 is less than or equal to 70</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./le.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">70</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">70</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 70 is less than or equal to 70</strong> 
</pre>
<p class="calibre1">We also have a bunch of operators that can be used with the double parenthesis notation, which performs an arithmetic expansion and evaluation:</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">&lt;</kbd>: This is true if the first integer is less than the second. Here is the modified code:</li>
</ul>
<pre class="calibre21">
#!/bin/bash    <br class="title-page-name"/>echo "Hello user, please type in one integer and press enter:"<br class="title-page-name"/>read user_input1<br class="title-page-name"/>echo "Now type in the number again and press enter:"<br class="title-page-name"/>read user_input2<br class="title-page-name"/>if (($user_input1 &lt; $user_input2))<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The integer $user_input1 is less than $user_input2"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The integer $user_input1 is not less than $user_input2..."<br class="title-page-name"/>fi  
</pre>
<p class="calibre27">And now, let's test it:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./minor.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">100</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">50</strong><br class="title-page-name"/><strong class="calibre2">The integer 100 is not less than 50...</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./minor.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">100</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 10 is less than 100</strong>  

</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">&lt;=</kbd>: This is true if the first integer is less than or equal to the second. Just a small change to the previous code:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">if (($user_input1 &lt;= $user_input2))</strong><br class="title-page-name"/><strong class="calibre2">then</strong><br class="title-page-name"/><strong class="calibre2">echo "Great! The integer $user_input1 is less than or equal to $user_input2"</strong><br class="title-page-name"/><strong class="calibre2">else</strong><br class="title-page-name"/><strong class="calibre2">echo "The integer $user_input1 is not less than or equal to $user_input2..."</strong><br class="title-page-name"/><strong class="calibre2">fi</strong>  
</pre>
<p class="calibre27">And the usual tests:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./minequal.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">20</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 10 is less than or equal to 20</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./minequal.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">20</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">The integer 20 is not less than or equal to 10...</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./minequal.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">20</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">20</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 20 is less than or equal to 20</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">&gt;</kbd>: This is true if the first integer is greater than the second. Just a small change:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">if (($user_input1 &gt; $user_input2))</strong><br class="title-page-name"/><strong class="calibre2">then</strong><br class="title-page-name"/><strong class="calibre2">echo "Great! The integer $user_input1 is greater than <br class="title-page-name"/>$user_input2"</strong><br class="title-page-name"/><strong class="calibre2">else</strong><br class="title-page-name"/><strong class="calibre2">echo "The integer $user_input1 is not greater than <br class="title-page-name"/>$user_input2..."</strong><br class="title-page-name"/><strong class="calibre2">fi</strong>  
</pre>
<p class="calibre27">And the usual tests because we are testing all we are writing:</p>
<pre class="codepackt">
    <strong class="calibre2">zarrelli:~$ ./greater.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">20</strong><br class="title-page-name"/><strong class="calibre2">The integer 10 is not greater than 20...</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./greater.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">5</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 10 is greater than 5</strong>
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">&gt;=</kbd>: This is true if the first integer is greater than or equal to the second:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">if (($user_input1 &gt;= $user_input2))</strong><br class="title-page-name"/><strong class="calibre2">then</strong><br class="title-page-name"/><strong class="calibre2">echo "Great! The integer ${user_input1} is greater than or equal to ${user_input2}"</strong><br class="title-page-name"/><strong class="calibre2">else</strong><br class="title-page-name"/><strong class="calibre2">echo "The integer ${user_input1} is not greater than or equal to ${user_input2}..."</strong><br class="title-page-name"/><strong class="calibre2">fi</strong>  
</pre>
<p class="calibre27">And now, let's run some checks:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./greaqual.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 10 is greater than or equal to 10</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./greaqual.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">5</strong><br class="title-page-name"/><strong class="calibre2">Great! The integer 10 is greater than or equal to 5</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./greaqual.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type in one integer and press enter:</strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Now type in the number again and press enter:</strong><br class="title-page-name"/><strong class="calibre2">20</strong><br class="title-page-name"/><strong class="calibre2">The integer 10 is not greater than or equal to 20...</strong>  
</pre>
<p class="calibre1"> </p>
<p class="calibre1"> </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Testing strings</h1>
                
            
            <article>
                
<p class="calibre1">We just saw some interesting comparisons, but now things start to become more interesting because we are going to introduce some tests on strings, and this brings us a step forward in what we can do to make our scripts more reactive:</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">=</kbd>: This is true if the first string is equal to the second string:</li>
</ul>
<pre class="codepackt">
<strong class="calibre2">#!/bin/bash</strong> <br class="title-page-name"/><strong class="calibre2">echo "Hello user, please type a string and press enter:"</strong><br class="title-page-name"/><strong class="calibre2">read user_input1 </strong><br class="title-page-name"/><strong class="calibre2">echo "Now type another string and press enter:"</strong><br class="title-page-name"/><strong class="calibre2">read user_input2 </strong><br class="title-page-name"/><strong class="calibre2">if [ ${user_input1} = ${user_input2} ]</strong><br class="title-page-name"/><strong class="calibre2">then</strong><br class="title-page-name"/><strong class="calibre2">echo "Great! The string ${user_input1} is equal to ${user_input2}"</strong><br class="title-page-name"/><strong class="calibre2">else</strong><br class="title-page-name"/><strong class="calibre2">echo "The string ${user_input1} is not equal to ${user_input2}..."</strong><br class="title-page-name"/><strong class="calibre2">fi</strong>
</pre>
<p class="calibre27">And now some tests:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./equal.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">hello</strong><br class="title-page-name"/><strong class="calibre2">Now type another string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">hello</strong><br class="title-page-name"/><strong class="calibre2">Great! The string hello is equal to hello</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./equal.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">hello</strong><br class="title-page-name"/><strong class="calibre2">Now type another string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">Hello</strong><br class="title-page-name"/><strong class="calibre2">The string hello is not equal to Hello...</strong>  
</pre>
<p class="calibre27">Now, look at this:</p>
<pre class="calibre21">
<strong class="calibre2">if [ ${user_input1}=${user_input2} ]</strong><br class="title-page-name"/><strong class="calibre2">then</strong><br class="title-page-name"/><strong class="calibre2">echo "Great! The string ${user_input1} is equal to ${user_input2}"</strong><br class="title-page-name"/><strong class="calibre2">else</strong><br class="title-page-name"/><strong class="calibre2">echo "The string ${user_input1} is not equal to ${user_input2}..."</strong><br class="title-page-name"/><strong class="calibre2">fi</strong>  
</pre>
<p class="calibre27">And now some checks:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./equal-wrong.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">hello</strong><br class="title-page-name"/><strong class="calibre2">Now type another string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">hello</strong><br class="title-page-name"/><strong class="calibre2">Great! The string hello is equal to hello</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./equal-wrong.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">hello</strong><br class="title-page-name"/><strong class="calibre2">Now type another string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">Hello</strong><br class="title-page-name"/><strong class="calibre2">Great! The string hello is equal to Hello</strong>  
</pre>
<p class="calibre27">Something weird, isn't there? We just got rid of spaces around the equal sign and now it does not work anymore:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./equal-wrong.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">hello</strong><br class="title-page-name"/><strong class="calibre2">Now type another string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">cat</strong><br class="title-page-name"/><strong class="calibre2">Great! The string hello is equal to cat</strong>  
</pre>
<p class="calibre27">Those spaces are actually more important than you could think. Our comparison became an assignment! So, be careful!</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">==</kbd>: This is true if the first string is equal to the second string, but it has a different behavior than <kbd class="calibre9">=</kbd> when it comes to double brackets:</li>
</ul>
<pre class="calibre21">
#!/bin/bash    <br class="title-page-name"/>echo "Hello user, please type a string and press enter:"<br class="title-page-name"/>read user_input1 <br class="title-page-name"/>echo "Now type another string and press enter:"<br class="title-page-name"/>read user_input2 <br class="title-page-name"/>if [[ ${user_input1} == ${user_input2}* ]]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The string ${user_input1} is equal to ${user_input2}"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The string ${user_input1} is not equal to ${user_input2}..."<br class="title-page-name"/>fi  
</pre>
<p class="calibre27">Matches as long as the first string starts with the character entered for the second string, the <kbd class="calibre9">*</kbd> will match whatever characters in the second string after what you entered:</p>
<pre class="calibre21">
zarrelli:~$ ./equalequal.sh <br class="title-page-name"/>Hello user, please type a string and press enter:<br class="title-page-name"/>match<br class="title-page-name"/>Now type another string and press enter:<br class="title-page-name"/>mi<br class="title-page-name"/>The string match is not equal to mi...  
</pre>
<p class="calibre27">And now we match with spaces:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./equalequal.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">this should match</strong><br class="title-page-name"/><strong class="calibre2">Now type another string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">this</strong><br class="title-page-name"/><strong class="calibre2">Great! The string this should match is equal to this</strong>  
</pre>
<p class="calibre27"><span>Be careful, with single brackets, the behavior of this operator changes due to file globbing and word split being in action.</span></p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">!=</kbd>: This is true if the first string is not equal to the second, but keep in mind that there is a pattern matching in place; so we are going to change the previous script a bit:</li>
</ul>
<pre class="calibre21">
if [[ ${user_input1} != ${user_input2}* ]]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The string ${user_input1} is not equal <br class="title-page-name"/>to ${user_input2}"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The string ${user_input1} is equal <br class="title-page-name"/>to ${user_input2}..."<br class="title-page-name"/>fi  
</pre>
<p class="calibre27">And now the tests are:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~/Documents/My books/Mastering bash/Chapter 3/Scripts$ ./equalnot.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">this should match</strong><br class="title-page-name"/><strong class="calibre2">Now type another string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">this</strong><br class="title-page-name"/><strong class="calibre2">The string this should match is equal to this...</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./equalnot.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">this should match</strong><br class="title-page-name"/><strong class="calibre2">Now type another string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">not this</strong><br class="title-page-name"/><strong class="calibre2">Great! The string this should match is not equal to not this</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">&lt;</kbd>: This is true if the first string is less than the second in ASCII alphabetical order. So, let's modify the script:</li>
</ul>
<pre class="calibre21">
if [[ ${user_input1} &lt; ${user_input2} ]]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The string ${user_input1} is less than ${user_input2}"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The string ${user_input1} is not less than ${user_input2}..."<br class="title-page-name"/>fi  
</pre>
<p class="calibre27">Now, here are some tests:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./less.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">abcd</strong><br class="title-page-name"/><strong class="calibre2">Now type another string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">bcde</strong><br class="title-page-name"/><strong class="calibre2">Great! The string abcd is less than bcde</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./less.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">zcf</strong><br class="title-page-name"/><strong class="calibre2">Now type another string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">rst</strong><br class="title-page-name"/><strong class="calibre2">The string zcf is not less than rst...</strong>  
</pre>
<div class="packt_tip"><span class="calibre30">Be careful, with single brackets, the</span> <span class="calibre30">&lt;</span> <span class="calibre30">sign must be escaped, so the condition becomes:</span><br class="calibre29"/>
<kbd class="calibre28">if [ ${user_input1} \&lt; ${user_input2} ]</kbd></div>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">&gt;</kbd>: This is true if the first string is greater than the second in ASCII alphabetical order. So, let's modify the script:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">if [[ ${user_input1} &gt; ${user_input2} ]]</strong><br class="title-page-name"/><strong class="calibre2">then</strong><br class="title-page-name"/><strong class="calibre2">echo "Great! The string ${user_input1} is greater <br class="title-page-name"/>than ${user_input2}"</strong><br class="title-page-name"/><strong class="calibre2">else</strong><br class="title-page-name"/><strong class="calibre2">echo "The string ${user_input1} is not greater <br class="title-page-name"/>than ${user_input2}..."</strong><br class="title-page-name"/><strong class="calibre2">fi</strong>  
</pre>
<p class="calibre27">And now some tests:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./greater.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">@</strong><br class="title-page-name"/><strong class="calibre2">Now type another string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">A</strong><br class="title-page-name"/><strong class="calibre2">The string @ is not greater than A...</strong>  
</pre>
<p class="calibre27">Well, actually the <kbd class="calibre9">@</kbd> sign has a value of <kbd class="calibre9">40</kbd> in the ASCII table and <kbd class="calibre9">A</kbd> has a value of <kbd class="calibre9">41</kbd>, so <kbd class="calibre9">A</kbd> is greater than <kbd class="calibre9">@</kbd>.</p>
<div class="packt_tip"><span class="calibre30">Be careful, with single brackets, the &gt; sign must be escaped so the condition becomes:<br class="calibre29"/></span><kbd class="calibre28">if [ ${user_input1} \&gt; ${user_input2} ]</kbd></div>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-z</kbd>: This is true if the string is null. Here are a bunch of lines to verify this condition:</li>
</ul>
<pre class="calibre21">
#!/bin/bash  <br class="title-page-name"/>echo "Hello user, please type a string and press enter:" <br class="title-page-name"/>read user_input1  <br class="title-page-name"/>if [[ -z ${user_input1} ]] <br class="title-page-name"/>then <br class="title-page-name"/>echo "Great! The string ${user_input1} is null" <br class="title-page-name"/>else <br class="title-page-name"/>echo "The string ${user_input1} is not null..." <br class="title-page-name"/>fi 
</pre>
<p class="calibre27">And now a couple of checks:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./null.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong>    <br class="title-page-name"/><strong class="calibre2">Great! The string  is null</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./null.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">Hello</strong><br class="title-page-name"/><strong class="calibre2">The string Hello is not null...</strong>  
</pre>
<p class="calibre27">As you can see, in case of a <kbd class="calibre9">null</kbd> value, nothing is printed on the screen when we <kbd class="calibre9">echo</kbd> the variable value.</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-n</kbd>: This is true if the string is not null. Just a minor change to the previous code:</li>
</ul>
<pre class="calibre21">
if [[ -n ${user_input1} ]]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The string ${user_input1} is not null"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The string ${user_input1} is null..."<br class="title-page-name"/>fi
</pre>
<p class="calibre27">And now some tests</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./notnull.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong>    <br class="title-page-name"/><strong class="calibre2">The string  is null...</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./notnull.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong><br class="title-page-name"/><strong class="calibre2">Hello</strong><br class="title-page-name"/><strong class="calibre2">Great! The string Hello is not null</strong>  
</pre>
<div class="packt_tip"><span class="calibre30">Whenever you test a variable, quote it! Unquoted variables can lead to weird results, especially when dealing with null values.</span></div>
<p class="calibre27">Have a look at how the results change with a test with single brackets and unquoted variables. Keep in mind that <kbd class="calibre9">user_input2</kbd> is not instanced, so its value is <kbd class="calibre9">null</kbd>:</p>
<pre class="calibre21">
#!/bin/bash<br class="title-page-name"/>echo "Hello user, please type a string and press enter:"<br class="title-page-name"/>read user_input1 <br class="title-page-name"/>if [ -n ${user_input1} ]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The string ${user_input1} is not null"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The string ${user_input1} is null..."<br class="title-page-name"/>fi<br class="title-page-name"/>echo "But look at this..."    <br class="title-page-name"/>if [ -n ${user_input2} ]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The string ${user_input2} is not null"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The string ${user_input2} is null..."<br class="title-page-name"/>fi    <br class="title-page-name"/>echo "And now at this..."    <br class="title-page-name"/>if [ -n "${user_input2}" ]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The string ${user_input2} is not null"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The string ${user_input2} is null..."<br class="title-page-name"/>fi  
</pre>
<p class="calibre27">And now, let's run it:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./nullornot.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please type a string and press enter:</strong>    <br class="title-page-name"/><strong class="calibre2">Great! The string  is not null</strong><br class="title-page-name"/><strong class="calibre2">But look at this...</strong><br class="title-page-name"/><strong class="calibre2">Great! The string  is not null</strong><br class="title-page-name"/><strong class="calibre2">And now at this...</strong><br class="title-page-name"/><strong class="calibre2">The string  is null...</strong>  
</pre>
<p class="calibre27">Well, as you can see, quoting matters!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">More on tests</h1>
                
            
            <article>
                
<p class="calibre1">We just saw some tests with one condition checked at a time, but we also have the equivalent of <kbd class="calibre9">&amp;&amp;</kbd> and <kbd class="calibre9">||</kbd>, so we can have compound checks and test more conditions at once, as follows:</p>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-a</kbd>: It is a logical AND, so it is true when both conditions checked are true. We use this operator with the test command or in single brackets. Let's rewrite one of the previous scripts:</li>
</ul>
<pre class="calibre21">
#!/bin/bash    <br class="title-page-name"/>echo "Hello user, please give me a number between 10 and 20, <br class="title-page-name"/>it must be even: "<br class="title-page-name"/>read user_input<br class="title-page-name"/>if [ ${user_input} -ge 10 -a ${user_input} -le 20 -a <br class="title-page-name"/>$(( $user_input % 2 )) -eq 0 ]<br class="title-page-name"/>then<br class="title-page-name"/>echo "Great! The number ${user_input} is what we were looking for!"<br class="title-page-name"/>else<br class="title-page-name"/>echo "The number ${user_input} is not what we are looking for..."<br class="title-page-name"/>fi  
</pre>
<p class="calibre27">And now some tests are:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli@moveaway:~/Documents/My books/Mastering bash<br class="title-page-name"/>/Chapter 3/Scripts$ ./userinput-a.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20, <br class="title-page-name"/>it must be even: </strong><br class="title-page-name"/><strong class="calibre2">10</strong><br class="title-page-name"/><strong class="calibre2">Great! The number 10 is what we were looking for!</strong><br class="title-page-name"/><strong class="calibre2">zarrelli@moveaway:~/Documents/My books/Mastering bash<br class="title-page-name"/>/Chapter 3/Scripts$ ./userinput-a.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20, <br class="title-page-name"/>it must be even: </strong><br class="title-page-name"/><strong class="calibre2">13</strong><br class="title-page-name"/><strong class="calibre2">The number 13 is not what we are looking for...</strong>  
</pre>
<ul class="calibre12">
<li class="calibre13"><kbd class="calibre9">-o</kbd>: It is a logical OR and true if either conditions are true. We use this operator with the test command or in single brackets. Let's rewrite some lines from the previous example:</li>
</ul>
<pre class="calibre21">
<strong class="calibre2">if [ ${user_input} -ge 10 -a ${user_input} -le 20 -o <br class="title-page-name"/>$(( $user_input % 2 )) -eq 0 ]</strong>  
</pre>
<p class="calibre27">And now some checks:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./userinput-o.sh </strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20 OR even: </strong><br class="title-page-name"/><strong class="calibre2">15</strong><br class="title-page-name"/><strong class="calibre2">Great! The number 15 is what we were looking for!</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./userinput-o.sh</strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20 OR even: </strong><br class="title-page-name"/><strong class="calibre2">70</strong><br class="title-page-name"/><strong class="calibre2">Great! The number 70 is what we were looking for!</strong>  
</pre>
<p class="calibre27">So, now a number is acceptable if it is between <kbd class="calibre9">10</kbd> and <kbd class="calibre9">20</kbd> or it is even:</p>
<pre class="calibre21">
<strong class="calibre2">zarrelli:~$ ./userinput-o.sh</strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20 OR even: </strong><br class="title-page-name"/><strong class="calibre2">23</strong><br class="title-page-name"/><strong class="calibre2">The number 23 is not what we are looking for...</strong><br class="title-page-name"/><strong class="calibre2">zarrelli:~$ ./userinput-o.sh</strong><br class="title-page-name"/><strong class="calibre2">Hello user, please give me a number between 10 and 20 OR even: </strong><br class="title-page-name"/><strong class="calibre2">24</strong><br class="title-page-name"/><strong class="calibre2">Great! The number 24 is what we were looking for!</strong>  

</pre>


            </article>

            
        </section>
    

        <section>

                            <header>
                    </header><h1 class="header-title" id="calibre_pb_0">Summary</h1>
                
            
            <article>
                
<p class="calibre1">We finally got into something interesting. Not that the previous chapters were less important, but with the tests, we just saw that we are now able to create some conditional statements and let our script react to different situations. It is not just an echo of a variable, but we get to its value, work on it, decide what to do, and act accordingly. In this chapter, we had a quick bite of what flexibility means in a script: it must be a tool and that makes one of the main goals of writing a script: it must be a tool that makes decisions on our behalf and react as we want it to do based on the conditions that we crafted in advance.</p>


            </article>

            
        </section>
    </body></html>