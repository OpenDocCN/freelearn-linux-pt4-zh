<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Installing and Configuring Horizon 7 - Part 1</h1>
                </header>
            
            <article>
                
<p>In the previous chapters, we discussed how things work and what role they play within Horizon View. Those were the theory chapters, if you like. But now, it's time to turn to the practical side of this book, instill what we have learned so far, and install Horizon <span>View</span>.</p>
<p>In this chapter, we will cover the installation process for the core Horizon View Connection Server.</p>
<p>Once the installation is complete, we will then move on to configuration tasks, so that the Horizon View environment is up and running, ready to deliver to end users. To help with the installation, we are going to use an example lab, which will guide you through the whole process step by step, using real-life screenshots. With that in mind, let's get started and introduce you to the example lab environment.</p>
<p>In this chapter, we will cover the following topics:</p>
<ul>
<li>Preparing AD</li>
<li>Installing the Horizon View Composer Server</li>
<li>Installing the Horizon View Connection Server</li>
<li><span>Configuring</span> the Horizon View Connection Server</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Welcome to the lab environment</h1>
                </header>
            
            <article>
                
<p>In the practical parts of this book, you can follow the tasks and steps that are described using the example lab environment. If you prefer, you can use these guides to set up your own environment, whether that's for a proof of concept, a pilot, or a production deployment.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">What you need for the example lab</h1>
                </header>
            
            <article>
                
<p>The example lab will be used across the entire book, and so this section will get you started with the infrastructure ready so you can build your own lab as you work through the chapters. If you are not planning on installing some of the features, such as JMP, then there is no need to install the required infrastructure to support this.</p>
<p>We are going to start with the management block infrastructure. The example lab management block consists of the following infrastructure components (although, feel free to use different versions of the infrastructure components):</p>
<ul>
<li>2 x ESXi host servers running vSphere 6.7</li>
<li>14 x Windows Server 2012 R2 Enterprise Edition virtual machines for the following roles, which we will configure in this chapter:
<ul>
<li>Domain controller (<kbd>hostname: dc.pvolab.com</kbd>)</li>
<li>Connection Server (<kbd>hostname: hzn7-cs1.pvolab.com</kbd>)</li>
<li>Security Server (<kbd>hostname: hzn7-ss1.pvolab.com</kbd>)</li>
<li>Replica Server (<kbd>hostname: hzn7-cs2.pvolab.com</kbd>)</li>
<li>Connection Server for second site CPA (<kbd>hzn7-cs1b</kbd>)</li>
<li>View Composer (<kbd>hostname: hzn7-cmp.pvolab.com</kbd>)</li>
<li>Enrolment Server (<kbd>hostname: hzn7-enroll.pvolab.com</kbd>)</li>
<li>Certificate of authority server (<kbd>hzn7-certs.pvolab.com</kbd>)</li>
<li>RDSH Server for hosting desktop sessions (<kbd>rdsh-desktops.pvolab.com</kbd>)</li>
<li>RDSH Server for hosting applications (<kbd>rdsh-apps.pvolab.com</kbd>)</li>
<li>JMP Server (<kbd>hzn7-jmp.pvolab.com</kbd>)</li>
<li>SQL Express 2012 instance with 3 x databases (one for View Composer, one for the events database installed on the Composer Server, and one for the JMP server)</li>
<li>2 x vCenter Servers (one for the management block (<kbd>vcs1.pvolab.com</kbd>), and one for the desktop block (<kbd>vcs2.pvolab.com</kbd>))</li>
</ul>
</li>
</ul>
<p>All machines should be domain-joined, except for the Security Server. The lab should look something like the following diagram:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/1f8a688a-26ad-42b5-b136-91f3ce76d1a8.png" style=""/></div>
<p>Before we get started and install anything, there are a few prerequisites that need to be in place, regardless of whether you are following the example lab or not. For this example, we will assume that you already have the virtual infrastructure components, such as the ESXi host servers, the vCenter Servers, <strong>Active Directory</strong> (<strong>AD</strong>)/domain controller, and SQL Server, in place and have created the virtual servers, ready to have their Horizon View roles installed on them.</p>
<p>It's probably also worth building the infrastructure for the desktop block and having the ESXi host server and vCenter Server already built.</p>
<p>There's no need to build virtual desktops yet, as we will cover that in <a href="d42ce468-eec2-4d43-ba82-25b90b59f936.xhtml" target="_blank">Chapter 7</a>, <em>Building and Optimizing the Virtual Desktop OS</em>.</p>
<p class="mce-root"/>
<p>The following diagram shows the desktop block configuration for the example lab:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f593bc92-54ba-41eb-8133-b46ed845c5b9.png" style=""/></div>
<p>One final thing is to download the Horizon 7 software. For the example lab, all the software components and installation files were saved on a shared folder on the domain controller. You can download Horizon 7 (version 7.8) by clicking on the following link:</p>
<p><a href="https://my.vmware.com/web/vmware/info/slug/desktop_end_user_computing/vmware_horizon/7_8">https://my.vmware.com/web/vmware/info/slug/desktop_end_user_computing/vmware_horizon/7_8</a></p>
<p>With the lab infrastructure now in place, you can start the installation and configuration.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Preparing AD</h1>
                </header>
            
            <article>
                
<p>Horizon View requires AD for the authentication of users and desktops, as well as to make use of group policy to control and tune many aspects of your end users' desktops. This will be covered in later chapters.</p>
<p>As a reminder, Horizon View is compatible with the following AD functional domain levels:</p>
<ul>
<li>Windows 2008 and Windows 2008 R2</li>
<li>Windows 2012 and Windows 2012 R2</li>
</ul>
<p class="mce-root"/>
<p>When deploying your View Connection Servers, they either need to be in the same domain as the desktops that you are going to deploy, or in a domain with a two-way transitive trust of the domain where your desktops will be located.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">AD user accounts</h1>
                </header>
            
            <article>
                
<p><span>We recommend that you also take this opportunity to create several user accounts, which will be needed across your installation.</span></p>
<p>These accounts will include service accounts for your View Connection Server Services and Composer Services. You need an AD account for View to use to log in and manage components within your vCenter, and a user account for View Composer to manage the creation of computer accounts in AD.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">vCenter user accounts</h1>
                </header>
            
            <article>
                
<p>You will need an AD user account to allow View to connect to your vCenter Server. This account should also be added as a local admin on the vCenter Server, as we will be using View Composer to create linked clone desktops. Once you have created your user account within AD, you will need to give it user permission in your vCenter Server.</p>
<p>The following table lists the permissions required by this user:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/146ed5e7-f00e-464b-8f0b-622e8019d1d2.png" style=""/></div>
<p>Let's now add the user to the vCenter Server, by first creating a new role specifically for the View vCenter user, as follows:</p>
<ol>
<li>Log in to the vCenter Server using the VMware vSphere client. Once logged in, from the <span class="packt_screen">Home</span> screen, click on <span class="packt_screen">Administration</span> (<strong>1</strong>), as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b3ced797-941c-4d4e-9934-183578653384.png" style=""/></div>
<ol start="2">
<li>You will now see the <span class="packt_screen">Roles</span> screen, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/74874fd4-a3ae-4cf6-89e6-326add674e29.png" style=""/></div>
<ol start="3">
<li>Next, create a new role by clicking on <span class="packt_screen">Roles</span> (<strong>2</strong>) and then the <span class="packt_screen">+</span> symbol (<strong>3</strong>). You will now see the <span class="packt_screen">New Role</span> screen, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5542ac48-d745-4305-b844-0646dc3c10c4.png" style=""/></div>
<p class="mce-root"/>
<ol start="4">
<li>From the list of options on the left-hand side, select each category you want to configure, and then, in the right-hand section of the screen, select each individual privilege. These should match those described earlier so that you configure the correct roles and privileges for the Horizon View vCenter user account. Once you have completed adding privileges to the role, click the <span class="packt_screen">NEXT</span> button to continue. You will now see the screen in which you can give the new role a name, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/07198210-0de9-4b96-98e4-f064b39ba618.png" style=""/></div>
<p>Next, we need to add permissions to the user account using the following steps:</p>
<ol>
<li>From the VMware vSphere Client home screen, under the <span class="packt_screen">Administration</span> section, click on the option for <span class="packt_screen">Global Permissions</span> (<strong>6</strong>).</li>
</ol>
<ol start="2">
<li>Now click the <span class="packt_screen">+</span> button (<strong>7</strong>), as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/1500ae22-a236-4a5b-b23c-b00f665fbfe9.png" style=""/></div>
<ol start="3">
<li>You will now see the <span class="packt_screen">Add Permission</span> screen, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/bf9457bb-b7aa-496d-93b3-f88bd9d4aa12.png" style=""/></div>
<ol start="4">
<li>In the <span class="packt_screen">User</span> section, click the drop-down arrow (<strong>8</strong>) and select the domain in which the user resides from the list. In the example lab, this is <span class="packt_screen">pvolab.com</span>.</li>
</ol>
<ol start="5">
<li>Next, we are going to search for the user, <kbd>view-vc-user</kbd>, that we created in AD. Start to type the username into the box (<strong>9</strong>), next to the magnifying glass icon. This will automatically start the search. Once the username has been found, you can click on it to select it (<strong>10</strong>).</li>
</ol>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="assets/b23b581e-8e4e-4c85-88fe-1f407ebba6ba.png" style=""/></div>
<ol start="6">
<li>You then need to select the <span class="packt_screen">Role</span> for the user, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ff1a02c7-994a-469c-aebe-998284a98d10.png" style=""/></div>
<ol start="7">
<li>In the <span class="packt_screen">Role</span> section, click the drop-down arrow (<strong>11</strong>), and then, from the options list that is displayed, click on <span class="packt_screen">View VC User</span> (<strong>12</strong>).</li>
<li>Click <span class="packt_screen">OK</span> to complete the configuration.</li>
</ol>
<p>You have now successfully set up a user account for Horizon View and vCenter Server.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">View Composer user account</h1>
                </header>
            
            <article>
                
<p>You will also require an AD user for your View Composer account, as this account will be responsible for the addition and deletion of computer accounts for your <span>clones that are linked</span> to the domain. The following are the required AD permissions this user should have:</p>
<ul>
<li>List contents</li>
<li>Read all properties</li>
<li>Write all properties</li>
<li>Read permissions</li>
<li>Reset passwords</li>
<li>Create computer objects</li>
<li>Delete computer objects</li>
</ul>
<p>The permissions for this account need to apply at the root domain level for the AD container and all child objects of the container. You will also need to ensure that you have advanced features selected when creating this user. This account will be used later to configure the View Administrator for the View Composer connection.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">View desktop Organizational Units (OUs)</h1>
                </header>
            
            <article>
                
<p>Although you will have OUs already in place to support your current desktop environment, now is the time that you should start considering what that looks like and whether it will work for your new virtual environment. You should think about having dedicated OUs that easily allow you to configure specific group policies based on the requirements of the desktop pool being created.</p>
<p>If you are planning on still having an element of physical desktops in your environment, then you will need to create new OUs for the new virtual desktops. It's not a good idea to mix and match, in case you add policies that would not suit one of the environments. For example, you wouldn't want to apply a physical desktop policy to a virtual desktop.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">IP addressing and DNS requirements</h1>
                </header>
            
            <article>
                
<p>For your Horizon View installation, there are several requirements for IP addresses and DNS names used by the different View components.</p>
<p>The typical requirements for IP addresses and DNS names are summarized for each of the components in the following table:</p>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="assets/f623ddff-b23f-48f3-9254-e230aad1de52.png"/></div>
<p>As you can see from the table, the suggestion is that load balancers are utilized to load balance connections between internal View Connection Servers as well as between external View Security Servers. In a smaller environment, you might decide to go with only one View Security Server, in which case, you would require the external DNS name rather than the load balancer.</p>
<p>In the next section, we are going to start installing the Horizon View components.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installing Horizon View Composer Server</h1>
                </header>
            
            <article>
                
<p>View Composer is slightly different from Connection Server roles, in that it is not installed as a Connection Server role, and so uses a separate installer. It can either be installed on the same server that vCenter Server is running on, or as a standalone server. You would typically install it as a standalone server for performance or if you are using the vCenter Server Appliance. The configuration recommendations for View Composer are detailed in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e382b11a-fa9e-45b0-b98d-8fca88c73d91.png" style=""/></div>
<p>In the example lab, View Composer is going to be installed on a standalone server; however, you could install it directly onto the vCenter Server if the vCenter Server is Windows-based. A standalone Composer is used for scalability when you have deployed the vCenter Server Appliance. As the vCenter Server Appliance is Linux-based and the Composer software is Windows-based, obviously it cannot be installed on the vCenter Server Appliance.</p>
<div class="packt_infobox">It may seem a little odd to install View Composer before the first Connection Server is installed, but the reason it's done in this order is because, during the initial configuration of the first Connection Server, when you configure a vCenter Server, you will need to enter the details of the View Composer Server, if used, so that the View Connection Server can connect to it.</div>
<p>You now have what you need for View Composer, but before we go ahead and start the installation, there is one other component that needs to be configured, and that's a database.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuring SQL Server for a View Composer database</h1>
                </header>
            
            <article>
                
<p>To create a SQL database for View Composer, follow these steps:</p>
<ol start="1">
<li>Open a console to the virtual machine running SQL Server and launch the <strong>Microsoft SQL Server Management Studio</strong> application. In the example lab, the SQL Server is installed on the same server that we are going to install View Composer on, so the server name is <kbd>hzn7-cmp.pvolab.com</kbd>. You will see the login box, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/4445947a-40f3-47d0-89d9-8d17ddf0b738.png" style=""/></div>
<ol start="2">
<li>Log in using an account with the appropriate permissions. In this example, we are using the SA account. Click the <span class="packt_screen">Connect</span> button.</li>
<li>You will now see the <span class="packt_screen">SQL Server Management Studio</span> screen. From the <span class="packt_screen">Object Explorer</span>, expand the <kbd>Security</kbd> folder and select <kbd>Logins</kbd> (<strong>1</strong>). Right-click and select the <span class="packt_screen">New Login…</span> option (<strong>2</strong>), as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e4aa1ba3-0e64-4da1-8f9b-825508b4cd18.png" style=""/></div>
<ol start="4">
<li>You will then see the <span class="packt_screen">Login – New</span> screen, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/a22cab85-4748-440a-b3d8-e5f7e5d93226.png" style=""/></div>
<ol start="5">
<li>In the <span class="packt_screen">Login name</span> box (<strong>3</strong>), enter the new login name. In the example lab, the new login is going to be called <kbd>viewcomposer</kbd>. Click the radio button for <span class="packt_screen">SQL Server authentication</span> (<strong>4</strong>), and then, in the <span class="packt_screen">Password</span> box (<strong>5</strong>), enter a new password. Type the new password again in the <span class="packt_screen">Confirm password</span> box (<strong>6</strong>).</li>
<li>Next, uncheck the <span class="packt_screen">Enforce password policy</span> box (<strong>7</strong>). Finally, in the <span class="packt_screen">Default database</span> drop-down box (<strong>8</strong>), select the <span class="packt_screen">master</span> option. We will update this to reflect the correct database for View Composer once we create it in the next step.</li>
<li>Click <span class="packt_screen">OK</span> once you have configured this screen. You will return to the <span class="packt_screen">Object Explorer</span>.</li>
<li>Now that you have created the login account, you need to create a new database for View Composer. From the <span class="packt_screen">Object Explorer</span>, select the <kbd>Databases</kbd> folder (<strong>9</strong>), right-click, and select <span class="packt_screen">New Database…</span> (<strong>10</strong>), as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e5b0c083-263a-4058-a004-b5818171b653.png" style=""/></div>
<ol start="9">
<li>You will see the <span class="packt_screen">New Database</span> screen, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ded86cf0-edbd-4b47-a188-0d49438ed127.png" style=""/></div>
<ol start="10">
<li>In the <span class="packt_screen">Database name</span> box (<strong>11</strong>), type in a name for this database. In the example lab, the database is called <kbd>viewcomposer</kbd>.</li>
<li>In the <span class="packt_screen">Owner</span> box, click the <span class="packt_screen">…</span> box (<strong>12</strong>). You will now see the <span class="packt_screen">Select Database Owner</span> screen, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f982ea76-e429-4ede-b8df-73aeb7b3b652.png" style=""/></div>
<ol start="12">
<li>Type <kbd>view</kbd> into the <span class="packt_screen">Enter the object names to select</span> box (<strong>13</strong>), and then click the <span class="packt_screen">Check Names</span> box (<strong>14</strong>). This will search for any entries that contain the word <kbd>view</kbd>.</li>
<li>You will now see the <span class="packt_screen">Multiple Objects Found</span> box, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/56f15c02-592e-4a24-aba3-e4e11d88355b.png" style=""/></div>
<ol start="14">
<li>Check the <span class="packt_screen">viewcomposer</span> box (<strong>15</strong>). This is the login we created previously.</li>
</ol>
<ol start="15">
<li>Now click the <span class="packt_screen">OK</span> button, and you will return to the <span class="packt_screen">Select Database Owner</span> box, which will now show the <kbd>viewcomposer</kbd> user entered, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/4263b931-7225-417b-b918-9b5a8efbaeaa.png" style=""/></div>
<ol start="16">
<li>In the <span class="packt_screen">Select Database Owner</span> box, click <span class="packt_screen">OK</span> to accept the database owner.</li>
<li>You will now return to the <span class="packt_screen">New Database</span> screen, which will show both the <span class="packt_screen">Database name</span> and the database <span class="packt_screen">Owner</span>, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/0aa1fc5b-1fb9-4cd3-8b69-e4a96bfdb221.png"/></div>
<ol start="18">
<li>Click <span class="packt_screen">OK</span> to complete the process and close the <span class="packt_screen">New Database</span> screen.<br/>
The final configuration task is to go back and edit the <kbd>viewcomposer</kbd> <span>user login and enter the</span> <kbd>viewcomposer</kbd> <span>database details.</span></li>
<li>From the <span class="packt_screen">Object Explorer</span>, expand <span class="packt_screen"><kbd>Logins</kbd></span> (<strong>16</strong>) and then select the <kbd>viewcomposer</kbd> option (<strong>17</strong>). Right-click and then, from the contextual menu, select <span class="packt_screen">Properties</span> (<strong>18</strong>). In the <span class="packt_screen"><strong>Default database</strong></span> box, click the drop-down menu (<strong>19</strong>) and select the <span class="packt_screen">viewcomposer</span> option, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/a56b6d35-2677-4203-969e-16d3fa1a5b9c.png"/></div>
<ol start="20">
<li>Click the <span class="packt_screen">OK</span> button to complete the configuration changes.</li>
</ol>
<p>Before you close SQL Server Management Studio, there is one other database to create; so, repeat the entire process, as previously described, and create a database and database owner for the View events database. In the example lab, both the owner and database have been called <kbd>viewevents</kbd>. We will use this later in the chapter.</p>
<p>With the database configuration now complete, we can go ahead and install the View Composer software.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">View Composer installation</h1>
                </header>
            
            <article>
                
<p>In the example lab environment, we are going to install View Composer on the vCenter Server. Before you start the installation, ensure that you have SQL Server Native Client 11.0 installed, as this will be required to configure the connection between the View Composer Server and the SQL database. To install View Composer, follow these steps:</p>
<ol>
<li>Open a console to the <strong>VCS2</strong> vCenter Server virtual machine, and then locate the Horizon <span>View</span> installation software, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7ec8a85c-4ecc-43e0-9fa5-4ec45a1078c2.png" style=""/></div>
<ol start="2">
<li>Launch the <kbd>VMware-viewcomposer-7.6.0-9491669</kbd> file to start the installation.</li>
<li>If you see the <span class="packt_screen">Open File - Security Warning</span> message shown here, click the <span class="packt_screen">Run</span> button to continue:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/e367e27b-383d-4af1-aa09-c4b49c985cac.png" style=""/></div>
<ol start="4">
<li>You will now see the <span class="packt_screen">Welcome to the Installation Wizard for VMware Horizon 7 Composer</span> screen, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/8703c4a8-968a-409b-863b-21f7688c0b0f.png" style=""/></div>
<ol start="5">
<li>Click the <span class="packt_screen">Next &gt;</span> button to start the installation. You will now see the <span class="packt_screen">License Agreeme</span><span class="packt_screen">nt</span> screen, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/acb29adc-bd84-41b5-a2db-5ff7d7cd9b7b.png" style=""/></div>
<ol start="6">
<li>Click the radio button for <span class="packt_screen">I accept the terms in the license agreement</span> (<strong>1</strong>), and then click the <span class="packt_screen">Next &gt;</span> button. You will then see the <span class="packt_screen">Destination Folder</span> screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f34b66c4-75d8-4522-bc19-2eb031b39c62.png" style=""/></div>
<ol start="7">
<li>Leave the folder as the default and then click the <span class="packt_screen">Next &gt;</span> button to continue. You will now see the <span class="packt_screen">Database Information</span> screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ece83efd-054c-4d19-bf43-2806ec7eb6a9.png" style=""/></div>
<ol start="8">
<li>The first thing you need to do is to create an ODBC DSN to connect to the View Composer database.</li>
</ol>
<ol start="9">
<li>Click the <span class="packt_screen">ODBC DSN Setup…</span> button (<strong>2</strong>). You will now see the <span class="packt_screen">ODBC Data Source Administrator (64-bit)</span> box shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/574385fc-1339-49b3-ba46-8eb91a5fc5c1.png" style=""/></div>
<ol start="10">
<li>Click the <span class="packt_screen">System DSN</span> tab (<strong>3</strong>), and then click the <span class="packt_screen">Add…</span> button (<strong>4</strong>).</li>
<li>In the <span class="packt_screen">Create New Data Source</span> box that you now see, click the <span class="packt_screen"><strong>SQL Server Native Client</strong> <strong>11.0</strong></span> option (<strong>5</strong>), and then click the <span class="packt_screen">Finish</span> button, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/cb7d9acb-74e2-4857-8f7a-d1708c42ac15.png" style=""/></div>
<ol start="12">
<li>You will now see the <span class="packt_screen">Create a New Data Source to SQL Server</span> <span>box shown in the following screenshot:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/513bc6f7-e25a-440a-b176-193be3189ba2.png" style=""/></div>
<ol start="13">
<li>In the <span class="packt_screen">Name</span> box (<strong>6</strong>), type in a name for this data source. In the example lab, this is <kbd>viewcomposer</kbd>.</li>
<li>In the <span class="packt_screen">Server</span> box (<strong>7</strong>), click the drop-down arrow and select the SQL Server that you want to connect to. In the example lab, this is <span class="packt_screen">vcs2\sqlexpress</span> as we are installing the View Composer in the vCenter Server.</li>
<li>Click the <span class="packt_screen">Next &gt;</span> button to continue.</li>
<li>Next, you need to enter the authentication details.</li>
</ol>
<ol start="17">
<li>Click the <span class="packt_screen">With SQL Server authentication using a login ID and password entered by the user</span> radio button (<strong>8</strong>), and then, in the <span class="packt_screen">Login ID</span> box (<strong>9</strong>), enter the user login details. In the example lab, we are going to use the SA account. Finally, in the <span class="packt_screen">Password</span> box (<strong>10</strong>), type in the password for the SA account, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/a1251b0c-e4ed-4c50-aa11-a23f97d464ba.png" style=""/></div>
<ol start="18">
<li>Click the <span class="packt_screen">Next &gt;</span> button to continue.</li>
<li>In the next configuration box, you need to change the default database details to reflect the database for View Composer.</li>
</ol>
<ol start="20">
<li>Check the <span class="packt_screen">Change the default database to</span> box (<strong>11</strong>), and then, in the box below it, click the drop-down arrow (<strong>12</strong>) and select the <span class="packt_screen">viewcomposer</span> option. This should automatically populate when you click the dropdown, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/c2cc80de-35a0-41d0-8fb4-79fdcaab14a8.png" style=""/></div>
<ol start="21">
<li>Click the <span class="packt_screen">Next &gt;</span> button to continue. You will see the final configuration box shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/f3ba169d-ee2d-412c-9fe9-93ebbadcb20d.png"/></div>
<ol start="22">
<li>Leave the settings on this screen as the defaults and then click the <span class="packt_screen">Finish</span> button to complete the configuration.</li>
</ol>
<ol start="23">
<li>You will now see the configuration summary shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ad450e4e-3859-43db-b87d-bc7fff71b76e.png" style=""/></div>
<ol start="24">
<li>The final thing to do is to test the newly created connection. To do this, click the <span class="packt_screen">Test Data Source…</span> button (<strong>13</strong>).</li>
</ol>
<ol start="25">
<li>You should see the <span class="packt_screen">Test Results</span> box showing the <kbd>TESTS COMPLETED SUCCESSFULLY!</kbd> message, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/8dc5ff44-66c5-4f58-bb02-a19bd50da6d0.png" style=""/></div>
<ol start="26">
<li>Click the <span class="packt_screen">OK</span> button to complete the tests and close the <span class="packt_screen">Test Results</span> box.</li>
<li>Next, click <span class="packt_screen">OK</span> to close the <strong><span class="packt_screen">ODBC Microsoft SQL Server Setup</span></strong> box.</li>
<li>You will now return to the <span class="packt_screen">ODBC Data Source Administrator</span> screen, which will now show you the newly created system DSN connection to the View Composer database.</li>
</ol>
<ol start="29">
<li>Click the <span class="packt_screen">OK</span> button to close the <span class="packt_screen">ODBC Data Source Administrator</span> screen and return to the View Composer installation screen and the <span class="packt_screen">Database Information</span> configuration screen, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/57fd88db-7d99-4015-8465-98cfa81b1501.png" style=""/></div>
<ol start="30">
<li>You can now enter <kbd>viewcomposer</kbd> in the DSN box (<strong>14</strong>) and in the <span class="packt_screen">Enter the username that you entered in the ODBC Data Source Administrator</span> box (<strong>15</strong>), type <kbd>sa</kbd>, followed by the password for the SA account in the <span class="packt_screen">Enter the password for this database connection</span> box (<strong>16</strong>).</li>
<li>Click the <span class="packt_screen">Next &gt;</span> button to continue.</li>
</ol>
<ol start="32">
<li>On the <span class="packt_screen">VMware Horizon 7 Composer Port Settings</span> screen, leave the <span class="packt_screen">SOAP Port</span> setting as the default, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/0e1ac058-8316-4409-a619-fb8c0605ef15.png" style=""/></div>
<div class="packt_infobox">The <strong>Simple Object Access Protocol</strong> (<strong>SOAP</strong>) port is used by View to communicate with Composer in XML format. The recommendation would be to leave this setting as is, unless there is a specific reason for changing it.</div>
<ol start="33">
<li>Click the <span class="packt_screen">Next &gt;</span> button to continue.</li>
<li>You will now see the <span class="packt_screen">Ready to Install the Program</span> screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/32e35893-74ed-44a3-9c17-1275ad3a9853.png" style=""/></div>
<ol start="35">
<li>Click the <span class="packt_screen">Install</span> button to start the installation.</li>
<li>Once the installation has completed, you will see the <span class="packt_screen">Installer Completed</span> screen:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b12d2b4f-9eec-44e2-8bee-d5398fac8ca9.png" style=""/></div>
<ol start="37">
<li>Click the <span class="packt_screen">Finish</span> <span>button to close the installer.</span> If, for any reason, the installation of View Composer fails, installation logs are held on View Composer in the <kbd>%TEMP%\vminst.log_date_timestamp</kbd> folder. Additionally, MSI logs are also created and can be found in the <kbd>%TEMP%\vmmsi.log_date_timestamp</kbd> folder.</li>
<li>You will now be prompted to restart the virtual machine:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ed6e72b8-2e01-41b4-8d93-f6f6705e1f88.png" style=""/></div>
<ol start="39">
<li>Click the <span class="packt_screen">Yes</span> button to reboot the View Composer virtual machine.</li>
<li>When the View Composer virtual machine has restarted, log in, and then check that the View Composer Service is running. To do this, press the Windows key and <em>R</em> to open a <span class="packt_screen">Run</span> dialog box. In the box, type <kbd>services.msc</kbd>. You will now see the <span class="packt_screen">Services (Local)</span> screen. Scroll down and check that <span class="packt_screen">VMware Horizon 7 Composer</span> (<strong>17</strong>) is running, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/87e64a38-7296-435f-b906-fcd6405b4eab.png"/></div>
<ol start="41">
<li>When you are happy that the VMware Horizon 7 Composer Service is running, close the <span class="packt_screen">Services</span> screen.</li>
</ol>
<p>You have now successfully installed VMware Horizon View Composer.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Installing the Horizon View Connection Server</h1>
                </header>
            
            <article>
                
<p>The View Connection Server and its other roles (Security Server, Replica Server, and so on) are installed on a dedicated Windows Server. The following table lists the recommended configuration for the Connection Server:</p>
<div class="mce-root CDPAlignCenter CDPAlign"><img src="assets/40543854-84d5-4437-8b90-074edee2075d.png" style=""/></div>
<p>The next step in setting up the example lab is to deploy the first Connection Server. This first instance of the Connection Server is going to be installed on a Windows Server 2016 virtual machine with the <kbd>HZN7-CS1</kbd> hostname that was built at the start of this book as part of the example lab environment. It was configured with a static IP address assigned to it, and then joined to the domain.</p>
<p>To install the Connection Server software, follow these steps:</p>
<ol>
<li>Open a console to the <kbd>HZN7-CS1</kbd> virtual machine, and then locate the Horizon View installation software. In the example lab, this was saved to a shared folder on the Domain Controller.</li>
<li>Launch the<kbd>VMware-Horizon-Connection-Server-x86_64-7.6.0-9823717</kbd> file to start the installation.</li>
<li>If you see the <span class="packt_screen">Open File - Security Warning</span> message, click the <span class="packt_screen">Run</span> button, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/a15ab995-7f49-4603-b156-beb4578a2a3a.png" style=""/></div>
<ol start="4">
<li>You will now see the <span class="packt_screen">Welcome to the Installation Wizard for VMware Horizon 7 Connection Server</span> screen.</li>
<li>Click the <span class="packt_screen">Next &gt;</span> button to start the installation. You will now see the <span class="packt_screen">License Agreement</span> screen.</li>
<li>Click the <span class="packt_screen">I accept the terms in the license agreement</span> radio button, and then click the <span class="packt_screen">Next &gt;</span> button. You will then see the <span class="packt_screen">Destination Folder</span> screen.</li>
</ol>
<ol start="7">
<li>Leave the folder as the default and then click the <span class="packt_screen">Next &gt;</span> button to continue. You will now see the <span class="packt_screen">Installation Options</span> screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/492fa786-4043-4758-bace-3f07a4f00a40.png" style=""/></div>
<ol start="8">
<li>As this is the first View Connection Server, from the list of Horizon 7 Connection Server instances, select the <span class="packt_screen">Horizon 7 Standard Server</span> option from the list (<strong>1</strong>).</li>
<li>We are also going to install HTML access, so check the <span class="packt_screen">Install HTML Access</span> box (<strong>2</strong>). This will allow users to access their desktops using the Blast Protocol from an HTML 5 web browser. The final option on this screen is to select which IP protocol version to use, either <kbd>IPv4</kbd> or <kbd>IPv6</kbd>. For the example lab, select the <kbd>IPv4</kbd> option (<strong>3</strong>).</li>
</ol>
<div class="packt_infobox"><span>Remember that you cannot mix and match IPv4 and IPv6 in the same environment, so for the example lab, IPv4 is going to be used for all components.</span></div>
<ol start="10">
<li>Once you have selected the instance, click the <span class="packt_screen">Next &gt;</span> button to continue.</li>
<li>You will now see the <span class="packt_screen">Data Recovery</span> screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/0cddef16-f958-486f-bd8a-b8b8f68166a7.png" style=""/></div>
<ol start="12">
<li>On the <span class="packt_screen">Data Recovery</span> screen, you need to enter a password that will be used for the backups of the Connection Server. In the <span class="packt_screen">Enter data recovery password</span> box (<strong>4</strong>), type in the password you want to use, and then type it again in the <span class="packt_screen">Re-enter password</span> box (<strong>5</strong>). Finally, enter a password prompt in the <span class="packt_screen">Enter password reminder (optional)</span> box (<strong>6</strong>).</li>
</ol>
<ol start="13">
<li>Click the <span class="packt_screen">Next &gt;</span> button to continue. You will now see the <span class="packt_screen">Firewall Configuration</span> <span>screen shown in the following screenshot:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6a5707bc-77aa-41f1-b497-ed9a741e6b3a.png" style=""/></div>
<ol start="14">
<li>Click the <span class="packt_screen">Configure Windows Firewall automatically</span> radio button, and then click the <span class="packt_screen">Next &gt;</span> button to continue.</li>
</ol>
<div class="packt_infobox">Windows Firewall is a requirement for Horizon View, specifically for Security Server-to-Connection Server communications. Under no circumstances should you disable the Windows Firewall service on your Connection Servers. The recommendation is to allow Windows Firewall to be configured automatically and then note down the required ports where needed.</div>
<ol start="15">
<li>You will now see the <span class="packt_screen">Initial Horizon 7 Administrators</span> <span>screen</span> <span>shown in the following screenshot:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/41a92388-032b-4c9a-825c-2465d665aa7a.png" style=""/></div>
<ol start="16">
<li>On this screen, you need to configure which users on your domain, or on the local server, are going to be configured as your first View Administrators. In the example lab, we are just going to use the standard Administrator account; however, it is recommended that you create a specific user and/or group of users who will have admin access to the Horizon View admin console.</li>
<li>Click the <span class="packt_screen">Authorize a specific domain user or group</span> radio button (<strong>8</strong>), and then, in the box below, enter the user or group name. You need to enter this in the format domain name\username. In the example lab, you would type in <kbd>PVOLAB\Administrator</kbd>.</li>
</ol>
<ol start="18">
<li>Click the <span class="packt_screen">Next &gt;</span> button to continue. You will now see the <span class="packt_screen">User Experience Improvement Program</span> screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/a69c9f75-fede-4d7f-a23a-e969f930ffac.png"/></div>
<ol start="19">
<li>The <span class="packt_screen">User Experience Improvement Program</span> is an optional program that anonymously sends product stats to VMware. It's not a licensing check! In the example lab, ensure that the box is unchecked (<strong>10</strong>).</li>
<li>Click the <span class="packt_screen">Next &gt;</span> button to continue.</li>
<li>You will now see the <span class="packt_screen">Ready to Install the Program</span> screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/9b695514-c926-4e2a-ac77-708136ef8430.png" style=""/></div>
<ol start="22">
<li>Click the <span class="packt_screen">Install</span> button to start the installation process.</li>
<li>Once the Connection Server has been installed, you will see the <span class="packt_screen">Installer Completed</span> screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6a8cf675-e729-4bdf-b0f3-6e02ac3cd9a3.png" style=""/></div>
<ol start="24">
<li>You have the option to check the <span class="packt_screen">Show the documentation</span> box on this screen before you close it. It's recommended that you review this document, as it discusses the importance of valid SSL certificates in the Horizon View installation, which we will cover in more detail in <a href="8b824015-c1b0-4107-9c9d-dd5cdb4b3221.xhtml" target="_blank">Chapter 6</a>, <em>Securing Horizon View with SSL Certificates</em><em>.</em></li>
<li>If the installation fails for any reason, the installation logs are held in the Connection Server at <kbd>%TEMP%\vminst.log_date_timestamp</kbd><span>. Additionally, there are MSI logs created, which can be found at</span> <kbd>%TEMP%\ vmmsi.log_date_timestamp</kbd><span>.</span></li>
</ol>
<p><span>Finally, click the</span> <span class="packt_screen">Finish</span> <span>button to complete the installation and close the installer.</span> <span>You will now see an icon for the</span> <span class="packt_screen">Horizon 7 Administrator Console</span> <span>has been placed on the desktop, as shown:</span></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/d2977314-3143-4082-bf93-7e72d17b8681.png" style=""/></div>
<p>In the next section, we are going to log in to View Administrator and complete the initial configuration tasks.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Initial configuration of the Horizon View Connection Server</h1>
                </header>
            
            <article>
                
<p>With the Connection Server now installed, you can now connect to the management console, called the <strong>View Administrator</strong>, and complete the initial configuration tasks.</p>
<p>From a workstation with Adobe Flash 10.1 or higher installed, open a browser and enter the address details of the View Connection Server. In the example lab, the address to enter would be <kbd>https://hzn7-cs1.pvolab.com/admin</kbd>.</p>
<div class="packt_infobox"><span>As SSL certificates have yet to be configured, you need to create a security exception to allow you to browse to the HTTPS page with an unsecured certificate. We will cover SSL certificates in <a href="8b824015-c1b0-4107-9c9d-dd5cdb4b3221.xhtml">Chapter 6</a>, <em>Securing Horizon View with SSL Certificates</em>.</span></div>
<p>You will now see the View Administrator login screen shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/117dae65-b653-4408-8415-8832fa4b7fd7.png" style=""/></div>
<p class="NormalPACKT"><span>Log in to View Administrator using the Administrator account and password, ensuring that the domain is set to match your domain in the drop-down menu box. Now click the</span> <span class="packt_screen">Log In</span> <span>button.</span></p>
<p class="NormalPACKT"><span>You should now be logged on to View Administrator for the first time.</span> <span>The first component to be configured is the product licensing.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adding a license to the Connection Server</h1>
                </header>
            
            <article>
                
<p>In the first of the configuration tasks to complete, once the Connection Server has been installed, you need to add the product license to enable the relevant features. To do this, follow the steps described here:</p>
<ol start="1">
<li>When you first log in, as there is no license yet installed, the admin screen will default to the <span class="packt_screen">Product Licensing and Usage</span> section of the <span class="packt_screen">Inventory</span> pane. At the top of the page, you will see the <span class="packt_screen"><strong>Licensing</strong></span> box. Click the <span class="packt_screen">Edit License…</span> button (<strong>1</strong>), as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/72bf78b6-bb42-4641-a08a-7d15d3bb7274.png"/></div>
<ol start="2">
<li>You will now see the <span class="packt_screen">Edit License</span> box shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/beece9b7-5f9a-412e-9e2d-6a5afc55ad98.png" style=""/></div>
<ol start="3">
<li>In the <span class="packt_screen">License serial number</span> box, enter your license key and then click the <span class="packt_screen">OK</span> button. In the preceding example, the license key has been partly obscured using <kbd>xxxxx</kbd> to hide the actual license key. When you enter the license key, it will appear letter for letter, on screen.</li>
<li>Once you have entered your license key, you will see detailed information relating to it <span>in the</span> <span class="packt_screen">Licensing</span> <span>box</span>. It will provide a license expiry date, along with all the features that are enabled with the license. In the example lab, you can see all the features and also the usage model, <span class="packt_screen">Concurrent User</span>, in this example:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/83129693-ff8e-470f-9c17-5bf0d5ad126b.png" style=""/></div>
<p>The <span class="packt_screen">Licensing</span> page also shows you your current usage, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/1c30ff72-ecac-4a90-838f-3f55ca975dd1.png" style=""/></div>
<p class="NormalPACKT"><span>This allows you to ensure you are within the remit of your purchased licenses and also allows you to monitor your usage, so that you can preempt an upgrade before reaching your limits.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Adding vCenter Server to View Administrator</h1>
                </header>
            
            <article>
                
<p class="NormalPACKT"><span>The next task is to configure the connection between View Administrator and vCenter Server:</span></p>
<ol>
<li>From the View Administrator main screen, expand the <span class="packt_screen">View Configuration</span> option (<strong>1</strong>), and then select <span class="packt_screen">Servers</span> (<strong>2</strong>). Next, from the <span class="packt_screen">Servers</span> screen, ensure that the <span class="packt_screen">vCenter Servers</span> tab is selected (<strong>3</strong>), and then click the <span class="packt_screen">Add…</span> button (<strong>4</strong>), as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/9789d5b4-7efb-42e6-b2f2-a6ed52a7556f.png"/></div>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="2">
<li>You will now see the <span class="packt_screen">vCenter Server Information</span> screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/245c3418-c3b5-4385-931f-decb461d7e00.png"/></div>
<ol start="3">
<li>In the <span class="packt_screen">Server address</span> box (<strong>5</strong>), type in the address of the vCenter Server you want to connect to the Connection Server. In the example lab, this is <kbd>vcs2.pvolab.com</kbd>, the address of the vCenter managing the virtual desktops.</li>
<li>Next, in the <span class="packt_screen">User name</span> box (<strong>6</strong>), type in the vCenter username followed by the password for this account in the <span class="packt_screen">Password</span> box (<strong>7</strong>). In this example, the administrator account has been used; however, you will probably want to use the specific user account for this that we created earlier in this chapter.</li>
</ol>
<ol start="5">
<li>You will now see the following <span class="packt_screen">Invalid Certificate Detected</span> warning box:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/aca24e7f-9a3d-4acc-9fa1-14564cfdf16e.png" style=""/></div>
<ol start="6">
<li>Click the <span class="packt_screen">View Certificate…</span> button (<strong>8</strong>). You will now see the <span class="packt_screen">Certificate Information</span> box.</li>
<li>Click the <span class="packt_screen">Accept</span> button.</li>
<li>The next screen is the <span class="packt_screen">View Composer Settings</span> screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/6be21741-e73c-4186-84d4-5a386b66c1a4.png"/></div>
<p class="mce-root"/>
<ol start="9">
<li>You have three options to configure View Composer: <span class="packt_screen">Do not use View Composer</span>, <span class="packt_screen">View Composer co-installed with vCenter Server</span>, and <span class="packt_screen">Standalone View Composer Server</span>.</li>
<li>For the example lab, View Composer is going to be installed on a standalone server, so click the <span class="packt_screen">Standalone View Composer Server</span> radio button (<strong>10</strong>).</li>
<li>Next, you need to enter the details of the View Composer Server. In the <span class="packt_screen">Server address</span> box (<strong>11</strong>), type in the server address. In the example lab, this is <kbd>vcs2.pvolab.com</kbd>. Then, type in the username for this server in the <span class="packt_screen">User name</span> box (<strong>12</strong>). Remember to add this in the format domain\username, so in the example lab, type <kbd>pvolab\administrator</kbd> followed by the password for this user account in the <span class="packt_screen">Password</span> box (<strong>13</strong>). Leave the <span class="packt_screen">Port</span> box (<strong>14</strong>) at the default setting of <kbd>18443</kbd>.</li>
<li>When you have completed the details, click the <span class="packt_screen">Next &gt;</span> button.</li>
<li>As with adding the vCenter Server, you will again see the following <span class="packt_screen">Invalid Certificate Detected</span> warning box:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/1fb5be19-f833-4300-b19d-39d499e70b03.png" style=""/></div>
<ol start="14">
<li>Click the <span class="packt_screen">View Certificate...</span> button (<strong>15</strong>). You will now see the <span class="packt_screen">Certificate Information</span> box</li>
<li>Click the <span class="packt_screen">Accept</span> button. You will now see the <span class="packt_screen">View Composer Domains</span> configuration screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/fbabc87a-9c3d-4c91-8f04-ac5feeed631c.png"/></div>
<ol start="16">
<li>On this screen, we are going to configure View Composer with access to a domain account to allow it to add, create, and delete computer accounts in AD. Click the <span class="packt_screen">Add…</span> button (<strong>17</strong>). You will now see the <span class="packt_screen">Add Domain</span> configuration box shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5f10a442-1891-4f12-a565-c2825b3346da.png" style=""/></div>
<ol start="17">
<li>In the <span class="packt_screen">Full domain name</span> box (<strong>18</strong>), type in the domain name. In the example lab, this is <kbd>pvolab.com</kbd>. Then, in the <span class="packt_screen">User name</span> box (<strong>19</strong>), enter the username that has the ability to create and delete computer objects in AD. In the example lab, we will use the <kbd>administrator</kbd> account.</li>
</ol>
<ol start="18">
<li>Finally, in the <span class="packt_screen">Password</span> box, type in the password for the administrator account. Click the <span class="packt_screen">OK</span> button when you have entered the information. You will now return to the <span class="packt_screen">View Composer Domains</span> configuration screen, which now shows the configured domain details, entered as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/5043bc56-b557-48ba-9439-ab450d93684f.png"/></div>
<ol start="19">
<li>Click the <span class="packt_screen">Next &gt;</span> button to continue.</li>
<li>You will now see the <span class="packt_screen">Storage Settings</span> configuration screen. There are two main elements to configure here. The first option is to configure whether or not you want to <span class="packt_screen">Reclaim VM disk space</span> for your virtual desktops. If this is selected, the virtual machines will be configured with space-efficient disks, which will allow the reclamation of unused space.</li>
<li>The second option is to configure <span class="packt_screen">Enable</span> <span class="packt_screen">View Storage Accelerator</span>. This allows a specific amount of memory to be utilized as a read cache to reduce the storage overheads on the shared or local storage used to run the VMs. By default, this will be set to <kbd>1024</kbd> MB of memory per server and can be increased to up to 2GB per server. Alternatively, if you check the box for <span class="packt_screen">Show all hosts</span>, you can then select individual host servers and configure the cache size differently on each host server.</li>
<li>In the example lab, we are going to enable the options for <span class="packt_screen">Reclaim VM disk space</span> and <span class="packt_screen">Enable View Storage Accelerator</span>, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/4f3ab74e-e284-43fb-93d2-aae473668588.png"/></div>
<ol start="23">
<li>Click the <span class="packt_screen">Next &gt;</span> button to continue. <span>You will now see the</span> <span class="packt_screen">Ready to Complete</span> <span>screen shown in the following screenshot:</span></li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/c08071fa-5d57-4d90-ac3f-0f266d22b86c.png"/></div>
<ol start="24">
<li>Finally, check the configuration details and then click the <span class="packt_screen">Finish</span> button to complete the configuration. You will return to the View Administrator screen, which now shows the vCenter Server that was just added, as shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/007a6199-c8d6-4565-84c7-19e0b1f79e3c.png"/></div>
<div class="packt_figref CDPAlignCenter CDPAlign"><span>View Administrator screen</span></div>
<p class="NormalPACKT"><span>You have now added a vCenter Server to Horizon View. In the next section, we are going to configure the View events database.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Configuring the View events database</h1>
                </header>
            
            <article>
                
<p>The final part of the initial configuration tasks is to configure the events database. This is where Horizon View stores all the events that take place on the Connection Server.</p>
<p>A database called <strong>view-events</strong> was created at the start of this chapter, and now we are going to use it in the configuration:</p>
<ol>
<li>From the View Administrator main screen and the <span class="packt_screen">Inventory</span> section, expand the <span class="packt_screen">View Configuration</span> option, and then select <span class="packt_screen">Event Configuration</span> (<strong>1</strong>). You will now see the <span class="packt_screen">Event Configuration</span> screen shown in the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/ae33f66b-eeb5-4137-b476-f014f9352788.png"/></div>
<ol start="2">
<li>In the <span class="packt_screen">Event Database</span> section, click the <span class="packt_screen">Edit…</span> button (<strong>2</strong>). You will now see the <span class="packt_screen">Edit Event Database</span> dialog box pop up, as shown in the preceding screenshot.</li>
<li>In the <span class="packt_screen">Database server</span> box (<strong>3</strong>), enter the name of the SQL server that is hosting the events database. In the example lab, it's on the same server as vCenter, so enter <kbd>vcs2.pvolab.com</kbd> as the server name.</li>
<li>Ensure that <span class="packt_screen">Microsoft SQL Server</span> is selected from the drop-down menu for the <span class="packt_screen">Database type</span> (<strong>4</strong>). The other option here is to set up an Oracle database.</li>
<li>Leave the <span class="packt_screen">Port</span> setting as the default port of <kbd>1443</kbd>.</li>
<li>In the <span class="packt_screen">Database name</span> box (<strong>5</strong>), type in the name of the database. In the example lab, the database is called <kbd>view-events</kbd>.</li>
<li>In the <span class="packt_screen">User name</span> box (<strong>6</strong>), type in the username for this database, and in the <span class="packt_screen">Password</span> box (<strong>7</strong>), type in the password for this user, and then type it in again in the <span class="packt_screen">Confirm password</span> box (<strong>8</strong>).</li>
</ol>
<ol start="8">
<li>Finally, in the <span class="packt_screen">Table prefix</span> box, you can enter a prefix name. This allows you to use the same events database for multiple installations. Once you have entered the configuration information, click <span class="packt_screen">OK</span>.</li>
<li>Once completed, you should see the following screenshot:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7c5c8a12-c215-4c62-aede-8b622c3e0bab.png" style=""/></div>
<p>You have now successfully completed the initial Connection Server configuration tasks. In the next part of this chapter, we will move on to installing the other Connection Server roles, starting with the Replica Server.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this first part of the chapter, we have walked you through installing and configuring the first components of the Horizon <span>View</span> solution, namely the View Composer and the Horizon View Connection Server.</p>
<p>In the second part of this chapter, <a href="89619cdf-5fc7-4dd1-a431-76cef6cbb67c.xhtml" target="_blank">Chapter 5</a>, <span><em>Installing and Configuring Horizon 7 – Part 2</em>,</span> we will continue the installation and install the Replica Server, the Security Server, and the Enrollment Server.</p>


            </article>

            
        </section>
    </body></html>