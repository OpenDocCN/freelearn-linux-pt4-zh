- en: Chapter 6. Compliance Management
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第6章 合规性管理
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将介绍以下内容：
- en: Importing compliance packs
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 导入合规包
- en: Creating compliance rule groups
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建合规规则组
- en: Creating custom compliance rules for Windows
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Windows创建自定义合规规则
- en: Creating custom compliance rules for Linux
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Linux创建自定义合规规则
- en: Creating custom compliance rules for virtualization
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为虚拟化创建自定义合规规则
- en: Modifying the default filter set
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修改默认过滤器集
- en: Creating compliance templates
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建合规模板
- en: Checking the compliance of the infrastructure
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查基础设施的合规性
- en: Exporting compliance rules
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 导出合规规则
- en: Compliance reports
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合规报告
- en: Creating compliance exceptions
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建合规例外
- en: Introduction
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: Compliance means meeting requirements. It is also used to refer to industry-wide
    or government rules and regulations that mention how data should be managed, and
    the need for organizations to be compliant with those regulations.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 合规性意味着满足要求。它也用于指代行业或政府的规定，说明如何管理数据，以及组织必须遵守这些规定。
- en: Consider a rule for password complexity, such as the length of the password
    not being fewer than 12 characters. Now, you need to check whether this is true
    for all the machines in your infrastructure. Let's assume you have a few thousand
    machines to check and, if they aren't in compliance, reconfigure.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一个关于密码复杂度的规则，比如密码长度不得少于12个字符。现在，您需要检查您的基础设施中的所有机器是否符合此要求。假设您需要检查几千台机器，如果它们不符合要求，还需要重新配置。
- en: You can understand how much time it would take to go through each machine, check
    the setting, and correct it if it's to be found noncompliant. Now, multiply those
    efforts for a few hundred rules–how do you document all the statuses to show the
    auditor? This becomes more complex when you want to be compliant for various government
    and industry standards such as ISO, HIPPA, and Suburban Oxley. They have a few
    hundred rules per standard and changes per operating system. Also, you may have
    your own compliance rules, which may be different from the various standards;
    you need to check them as well. With some rules, there is the possibility that
    you need a deviation approved by your security team, and hence, being noncompliant
    with the rule should not affect your compliance score, so you need to add these
    as exceptions.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以想象，逐一检查每台机器、查看设置并在发现不合规时进行修正需要多长时间。现在，如果需要针对几百条规则进行类似操作，您如何记录所有状态以供审计员查看？当您需要遵守多个政府和行业标准，如ISO、HIPAA和萨班斯-奥克斯利法案时，情况会变得更加复杂。每个标准可能有几百条规则，并且每个操作系统可能会有不同的变更。此外，您可能还有自己独特的合规规则，这些规则可能与其他标准不同，您也需要检查这些规则。对于某些规则，可能需要您的安全团队批准偏差，因此，违反该规则不应影响您的合规性评分，您需要将这些作为例外情况处理。
- en: 'Now that the complexity of compliance is clearer, we need something that can
    do all this for us easily. There are other tools in the market, such as System
    Center Configuration Manager, BMC BSA, and Puppet, that are capable of doing this,
    but VCM is much better than these, for the following reasons:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，合规性的复杂性更加清晰，我们需要一种可以轻松处理这一切的工具。市场上也有其他工具，如System Center Configuration Manager、BMC
    BSA和Puppet，它们都可以完成此任务，但VCM在以下几个方面优于这些工具：
- en: There are more than 50 ready-to-use industry and government standard compliance
    packs available
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有超过50个现成可用的行业和政府标准合规包
- en: Creating your own compliance pack is a very easy process
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建您自己的合规包是一个非常简单的过程
- en: The rules are processed on the data captured and stored on the VCM server, so
    that we get the setting configured on the server
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 规则是在VCM服务器上捕获并存储的数据上处理的，以便我们获得在服务器上配置的设置
- en: It is much more cost effective, as it is part of the vRealize Operations suite
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它更加具有成本效益，因为它是vRealize Operations套件的一部分
- en: We can check the compliance of the VMware virtual infrastructure, as well as
    supported managed machines, in one console
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以在一个控制台中检查VMware虚拟基础设施以及受支持的管理机器的合规性
- en: We can enforce compliance for noncompliant rules (although not all rules and
    OSes are supported)
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以强制执行不合规规则的合规性（尽管并非所有规则和操作系统都受支持）
- en: In my opinion, this list is enough to understand why we should use VCM instead
    of any other tool to manage the compliance of the infrastructure.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在我看来，这个列表已经足够让我们理解为什么我们应该使用VCM而不是其他工具来管理基础设施的合规性。
- en: The constructs of VCM compliance
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: VCM合规的构成
- en: To measure compliance, we need to create various elements in VCM. Let's get
    introduced to them.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 为了衡量合规性，我们需要在VCM中创建各种元素。让我们来了解一下它们。
- en: Rules
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 规则
- en: We have learned that compliance means meeting the requirements put forth by
    a standard, so to check compliance, we need to create a rule. Basically, a rule
    is the interpretation of the requirement put forth by the standard, which can
    then be understood by VCM. To continue with our previous example, our requirement
    was to have a password length of at least 12 characters. When we convert this
    requirement, what we get in VCM is a rule.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经了解到，合规性意味着满足标准所提出的要求，因此要检查合规性，我们需要创建一个规则。基本上，规则是对标准所提出的要求的解释，然后VCM可以理解它。继续我们之前的示例，我们的要求是密码长度至少为12个字符。当我们将这一要求转化时，在VCM中得到的就是一个规则。
- en: Rules can be basic or complex. A basic rule just checks the contents of data
    properties while with a complex rule, we can use logic to check for conditions.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 规则可以是简单的也可以是复杂的。一个简单的规则仅检查数据属性的内容，而一个复杂的规则可以利用逻辑检查条件。
- en: Filters
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 过滤器
- en: Filters are used to filter machines for conditions. For example, we create some
    rules and we want those rules to only be checked against a certain OS. So, we
    create a filter for that OS.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 过滤器用于根据条件筛选机器。例如，我们创建了一些规则，想让这些规则仅对某一操作系统进行检查。那么，我们就为该操作系统创建一个过滤器。
- en: Rule groups
  id: totrans-32
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 规则组
- en: Rules are grouped together under rule groups; for example, we can group all
    the rules that are applicable to Windows Server 2012 R2 under one rule group.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 规则被归类在规则组下；例如，我们可以将适用于Windows Server 2012 R2的所有规则放在一个规则组下。
- en: Templates
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 模板
- en: Templates are used to group multiple rule groups together. They are used to
    check the compliance of machine groups.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 模板用于将多个规则组组合在一起。它们用于检查机器组的合规性。
- en: 'Here''s an example: in our company, we have rules, and they might be different
    for different versions of Windows. We can create the required rules groups for
    each OS that will be filtered on the basis of the filters created in each rule
    group. Then, all the rule groups will be grouped in a single template and that
    template can be used to check the compliance of the infrastructure.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 例如：在我们公司，我们有一些规则，这些规则可能因不同版本的Windows而有所不同。我们可以为每个操作系统创建所需的规则组，并根据每个规则组中创建的过滤器进行过滤。然后，所有规则组将被组合在一个单一的模板中，该模板可以用来检查基础设施的合规性。
- en: Importing compliance packs
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导入合规包
- en: There are more than 50 compliance packs available for download, and the list
    keeps on growing as VMware keeps on adding new compliance packs.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 提供超过50个合规包可供下载，且随着VMware不断添加新的合规包，列表还在不断增长。
- en: Getting ready
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We will need an Internet connection for the VCM server in order to download
    the compliance packs from VMware. The **C**ontent Wizard tool will use a proxy
    configured at the system level; have a look at the *There's More...* section of
    this recipe for proxy details.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要VCM服务器的互联网连接才能从VMware下载合规包。**内容向导**工具将使用系统级别配置的代理；有关代理详细信息，请参阅本食谱中的*更多内容...*部分。
- en: How to do it...
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will now download a compliance pack from the Internet:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将从互联网下载一个合规包：
- en: Log in to the VCM server's OS.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到VCM服务器的操作系统。
- en: Launch the **Content Wizard** tool from the desktop (**Start** | **VMware vRealize
    Configuration Manager **| **Content Wizard Tool**).
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从桌面启动**内容向导**工具（**开始** | **VMware vRealize Configuration Manager** | **内容向导工具**）。
- en: On the next page of the wizard, select **Get Updates from Internet**.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导的下一页，选择**从互联网获取更新**。
- en: The other option is **Get Updates from Local File System**; for this, all files
    must be available in the `C:\ProgramData\CM\Content` folder. You must obtain updated
    files from VMware and manually copy them to the directory. Download the files
    from [https://vcmupdates.vmware.com/CPC/VCM/5_7/](https://vcmupdates.vmware.com/CPC/VCM/5_7/).
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 另一个选项是**从本地文件系统获取更新**；为此，所有文件必须存放在`C:\ProgramData\CM\Content`文件夹中。您必须从VMware获取更新的文件并手动将它们复制到该目录。可从[https://vcmupdates.vmware.com/CPC/VCM/5_7/](https://vcmupdates.vmware.com/CPC/VCM/5_7/)下载文件。
- en: The wizard will check for an Internet connection and will start downloading
    the `Updates.xml` file from VMware.
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向导将检查互联网连接，并开始从VMware下载`Updates.xml`文件。
- en: Next, it will present the list of packs that are available for download. Select
    the packs required for your infrastructure; in this example, we are selecting
    **ISO 27001-27002 for Windows**:![How to do it...](img/image_06_001.jpg)
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，它将显示可供下载的包列表。选择适用于您基础设施的包；在此示例中，我们选择了**Windows的ISO 27001-27002**：[如何操作...](img/image_06_001.jpg)
- en: The selected pack will be downloaded and ready for import.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选中的包将被下载并准备导入。
- en: Once downloaded, it will start the import as a part of the wizard.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载完成后，它将作为向导的一部分开始导入。
- en: Once the import is complete, it will present the **Log Result** page and you
    have an option to save the logs. Click on **Close**.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦导入完成，它将呈现**日志结果**页面，并提供保存日志的选项。点击**关闭**。
- en: On the next page, click on **Finish** to complete the importing of the compliance
    pack.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，点击**完成**以完成合规包的导入。
- en: 'You can check the imported compliance packs by logging in to the VCM console
    and going to **Compliance **| **Machine Group Compliance **| **Templates**:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以通过登录VCM控制台并进入**合规性**|**机器组合规性**|**模板**来检查已导入的合规包：
- en: '![How to do it...](img/image_06_002.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![如何操作……](img/image_06_002.jpg)'
- en: How it works...
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: As explained in the introduction, we can either create our own compliance rules
    or import rules by importing compliance packs created by VMware. This gives us
    all the necessary constructs required to measure compliance against standards
    such as ISO 27001, SOX, and HIPPA, to name a few.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 如介绍中所述，我们可以创建自己的合规规则，或者通过导入VMware创建的合规包来导入规则。这将为我们提供衡量合规性所需的所有必要构件，例如ISO 27001、SOX和HIPPA等标准。
- en: The tool downloads the rules in XML and they are then imported to the VCM database.
    The pack includes rules, rule groups, filters, and templates responsible for the
    selected standard; in our case, it is ISO 27001-27002 for Windows.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 该工具将规则以XML格式下载，然后导入VCM数据库。该包包括规则、规则组、过滤器和模板，这些都是为了选定的标准；在我们的例子中，是针对Windows的ISO
    27001-27002标准。
- en: Once the compliance pack is imported, we can use the newly created templates
    to check the compliance of our infrastructure against the ISO 27001-27002 industry
    standard. Refer to the *Checking the compliance of the infrastructure* recipe
    from this chapter.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦合规包导入完成，我们可以使用新创建的模板来检查我们的基础设施是否符合ISO 27001-27002行业标准。请参阅本章中的*检查基础设施的合规性*食谱。
- en: There's more...
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多……
- en: If your Internet access requires you to use a proxy, you can do that by changing
    some registry settings. Go to `HKEY_Current_User\Software\Microsoft\Windows\CurrentVersion\Internet
    Settings Proxy Server` to check proxy details; if there is a proxy configured
    and you are in an environment that does not need a proxy or the proxy has been
    changed, you need to check this before you start troubleshooting why the content
    wizard is failing to connect to [http://www.vmware.com/](http://www.vmware.com/).
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的互联网访问需要使用代理，可以通过更改一些注册表设置来实现。进入`HKEY_Current_User\Software\Microsoft\Windows\CurrentVersion\Internet
    Settings Proxy Server`检查代理详细信息；如果配置了代理且你所在的环境不需要代理，或者代理已被更改，你需要在开始排查为什么内容向导无法连接到[http://www.vmware.com/](http://www.vmware.com/)之前检查这一点。
- en: Creating compliance rule groups
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建合规规则组
- en: In the previous recipe, we imported a compliance pack, which created the required
    rules, rule groups, filters, and templates. When we want to check compliance against
    our own standards, we need to create each of them. In this recipe, we will create
    a compliance rule group.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在前一个食谱中，我们导入了一个合规包，创建了所需的规则、规则组、过滤器和模板。当我们想要检查与自己标准的合规性时，我们需要创建它们。在本食谱中，我们将创建一个合规规则组。
- en: Getting ready
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We need a working VCM server and credentials to log in as administrator on it.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要一个正常工作的VCM服务器以及管理员登录凭据。
- en: How to do it...
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作……
- en: This is a two-part recipe; first, we will create a rule group and then will
    create the required filters.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个分为两部分的过程；首先，我们将创建一个规则组，然后创建所需的过滤器。
- en: Creating a rule group
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建规则组
- en: 'Here are the steps to create a rule group:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是创建规则组的步骤：
- en: Log in to VCM using an admin account.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用管理员账户登录VCM。
- en: Go to **Compliance** | **Machine Group Compliance** | **Rule Group**.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入**合规性**|**机器组合规性**|**规则组**。
- en: Click on the green plus sign to create a new rule group.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击绿色加号创建一个新的规则组。
- en: 'It will launch a wizard; fill in an appropriate name and provide a description.
    It is best practice to have some naming conventions while creating such things.
    We will look at naming conventions in detail in [Appendix A](ch10.html "Chapter 10. Defining
    Naming Conventions") – *Defining Naming Conventions*. In this case, we are creating
    a rule group for Windows Server 2012 for our company rules, so the following names
    will be used:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它将启动一个向导；填写适当的名称并提供描述。创建此类内容时，最好遵循一些命名约定。我们将在[附录A](ch10.html "第10章. 定义命名约定")中详细介绍命名约定——*定义命名约定*。在这种情况下，我们为公司的规则创建了一个Windows
    Server 2012的规则组，因此将使用以下名称：
- en: '**Rule Group Name**: `01_MyCompany_Win2k12`'
  id: totrans-73
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**规则组名称**：`01_MyCompany_Win2k12`'
- en: '**Description**: Provide an appropriate description'
  id: totrans-74
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**描述**：提供合适的描述。'
- en: '**Filter Set**: Use the **Default** filter set'
  id: totrans-75
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**过滤器集**：使用**默认**过滤器集。'
- en: '![Creating a rule group](img/image_06_003.jpg)'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![创建规则组](img/image_06_003.jpg)'
- en: Note
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that the selected collection filter set is used when calculating the data
    age for the rules in the compliance templates. The filter set must collect the
    same data types that are included in the rules in the rule group. If the filter
    set does not collect the same data types, no data age is calculated.
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，所选的收集过滤器集用于计算合规性模板中规则的数据年龄。过滤器集必须收集规则组中规则所包含的相同数据类型。如果过滤器集没有收集相同的数据类型，则不会计算数据年龄。
- en: Accept the rule group creation confirmation box by clicking on **OK**.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击**确定**，接受规则组创建确认框。
- en: Once the rule group has been created, we need to create the necessary filters
    so that only expected machines will be checked for the rules in this rule group.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦规则组创建完成，我们需要创建必要的过滤器，以便仅检查该规则组中预期的机器。
- en: Creating a filter
  id: totrans-81
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建过滤器
- en: 'This is the second part of this recipe; here, we will create the necessary
    filters for the rule group. Here are the steps:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 这是该配方的第二部分；在这里，我们将为规则组创建必要的过滤器。步骤如下：
- en: Click on the newly created rule group, that is, `01_MyCompany_Win2k12`, and
    then click on **Filters**.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击新创建的规则组，也就是`01_MyCompany_Win2k12`，然后点击**过滤器**。
- en: Click on the green **+** button to add a new filter.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击绿色的**+**按钮以添加新过滤器。
- en: Provide a proper **Name** and **Description**.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供合适的**名称**和**描述**。
- en: Select a data type.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择数据类型。
- en: 'Our imagination is the limit for selecting the correct data type; all the attributes
    captured by the VCM agent are available in the VCM database, and all of those
    can be used to create filters. In our case, we will be using the operating system
    name as the filter criteria; hence, we have selected **Machines**. You can browse
    and check the other available options:'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们选择正确数据类型的想象力是唯一的限制；VCM代理捕获的所有属性都可以在VCM数据库中找到，所有这些属性都可以用来创建过滤器。在我们的例子中，我们将使用操作系统名称作为过滤标准；因此，我们选择了**机器**。你可以浏览并查看其他可用选项：
- en: '![Creating a filter](img/image_06_004.jpg)'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![创建过滤器](img/image_06_004.jpg)'
- en: Now, the selected **Data Type** will be used to create the rules. As we just
    need to check the OS name, we are going with **Basic**:![Creating a filter](img/image_06_005.jpg)
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，所选的**数据类型**将用于创建规则。因为我们只需要检查操作系统名称，所以我们选择了**基本**：![创建过滤器](img/image_06_005.jpg)
- en: Here too we have multiple choices to filter, and we will select OS Name Full,
    then we have conditional operators, and then the value.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，我们也有多个选择来进行过滤，我们将选择操作系统名称全称，然后选择条件运算符，再输入值。
- en: 'As we are creating a filter for Microsoft Windows Server 2012, we are choosing
    **OS Name Full** **=** **Microsoft Windows Server 2012 %** (**%** is a wildcard):'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 由于我们正在为Microsoft Windows Server 2012创建过滤器，我们选择了**操作系统名称全称** **=** **Microsoft
    Windows Server 2012 %**（**%**是通配符）：
- en: '![Creating a filter](img/image_06_006.jpg)'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![创建过滤器](img/image_06_006.jpg)'
- en: Note
  id: totrans-93
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Wildcards in VCM:**'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**VCM中的通配符：**'
- en: '| **Wildcard** | **Meaning** |'
  id: totrans-95
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **通配符** | **含义** |'
- en: '| **%** | Match all characters |'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **%** | 匹配所有字符 |'
- en: '| **_** (underscore) | Match a single character |'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **_**（下划线） | 匹配一个字符 |'
- en: '| ***** | Equivalent to **%** |'
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| ***** | 相当于**%** |'
- en: '| ? | Equivalent to **_** |'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| ? | 相当于**_** |'
- en: Click on **Finish** to complete the filter creation.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**完成**以完成过滤器创建。
- en: To validate our filter, click on **Preview**, and it should display all the
    machines with Windows Server 2012 in the infrastructure, as our rule is only looking
    for such machines:![Creating a filter](img/image_06_007.jpg)
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要验证我们的过滤器，点击**预览**，它应该显示基础架构中所有带有Windows Server 2012的机器，因为我们的规则只查找这样的机器：![创建过滤器](img/image_06_007.jpg)
- en: Note
  id: totrans-102
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that if you have created multiple filters in a single rule group, they
    work as logical **AND**, that is, if all the conditions are **True**, only then
    will it display the machines, so be careful when creating multiple filters.
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，如果在一个规则组中创建了多个过滤器，它们作为逻辑**AND**一起工作，也就是说，只有当所有条件**为真**时，才会显示机器，因此在创建多个过滤器时需要小心。
- en: How it works...
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: In this recipe, we just created a rule group that will include our company security
    rules to be measured via VCM and selected the default filter set as the information
    will be collected as a part of the default filter set.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个配方中，我们只创建了一个规则组，该规则组将包括我们公司要通过VCM测量的安全规则，并选择了默认过滤器集，因为信息将作为默认过滤器集的一部分进行收集。
- en: After that, we created a filter that will filter only Windows Server 2012 machines
    in the VCM.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 之后，我们创建了一个筛选器，能够在 VCM 中仅筛选出 Windows Server 2012 机器。
- en: Creating custom compliance rules for Windows
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为 Windows 创建自定义合规规则
- en: 'VCM divides compliance into two broad categories:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: VCM 将合规性分为两大类：
- en: '*Machine group compliance*'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*机器组合规性*'
- en: '*Virtual environment compliance*'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*虚拟环境合规性*'
- en: Machine group compliance
  id: totrans-111
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 机器组合规性
- en: In this category, compliance is checked at the operating system level, such
    as for all the supported versions of Windows or Linux.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 在此类别中，合规性在操作系统级别进行检查，例如所有受支持的 Windows 或 Linux 版本。
- en: Virtual environment compliance
  id: totrans-113
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 虚拟环境合规性
- en: In this category, the compliance of the ESXi hosts, vCenter, and virtual machines
    present in vCenter is checked.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在此类别中，将检查 vCenter 中存在的 ESXi 主机、vCenter 和虚拟机的合规性。
- en: 'Now, as we are ready with the rule group, let''s start populating it with the
    rules for our organization. There are two ways we can create the rules: either
    copy what is created in the standard compliance packs we downloaded in the first
    recipe and modify it as per our requirement or create the rules from scratch.'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，既然我们已经准备好规则组，让我们开始为组织填充规则。我们可以通过两种方式创建规则：要么复制我们在第一步中下载的标准合规性包中已创建的规则并根据需求进行修改，要么从头开始创建规则。
- en: In this recipe, we will create a custom compliance rule based on machine group
    compliance.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在本步骤中，我们将基于机器组合规性创建一个自定义合规规则。
- en: Getting ready
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We will need a fully ready VCM server, and to copy the rule from another rule
    group, we should finish the *Importing compliance packs* recipe. We will need
    our own rule group created so that we can create our rules there.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要一台完全准备好的 VCM 服务器，并且为了从另一个规则组复制规则，我们应该完成 *导入合规性包* 的步骤。我们还需要创建自己的规则组，以便可以在其中创建规则。
- en: How to do it...
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: We will continue our example of our requirement of having a complex password
    and a minimum password length of 12 characters; first, we will try to find the
    rule in the imported compliance pack and then, we will create our own rule.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将继续以要求密码复杂性和最小密码长度为 12 个字符为例；首先，我们会尝试在导入的合规性包中查找规则，然后我们将创建自己的规则。
- en: Copying a rule from another rule group
  id: totrans-121
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 从另一个规则组复制规则
- en: We can copy a rule from the compliance packs we have downloaded and added to
    VCM and then modify them as per our requirement or club rules from various compliance
    packs or standards as required to support our internal company standards.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以从已下载并添加到 VCM 的合规性包中复制规则，然后根据我们的需求修改它们，或根据需要将不同合规包或标准中的规则组合起来，以支持我们的内部公司标准。
- en: 'Follow the next steps to copy a rule from another rule group:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤从另一个规则组复制规则：
- en: Log in to VCM with admin privileges and go to **Compliance** | **Machine Group
    Compliance** | **Rule Groups**.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用管理员权限登录 VCM，进入 **合规性** | **机器组合规性** | **规则组**。
- en: As we want to copy a rule, we must know where the original rule is; in our case,
    the rule is in the **Best Practises - ISO 27001-27002 Windows 2008 R2 Mbr** rule
    group, so we will go there and select the required rule:![Copying a rule from
    another rule group](img/image_06_008.jpg)
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于我们想复制规则，我们必须知道原始规则的位置；在我们的例子中，规则位于 **最佳实践 - ISO 27001-27002 Windows 2008 R2
    Mbr** 规则组中，因此我们将前往该组并选择所需的规则：![从另一个规则组复制规则](img/image_06_008.jpg)
- en: Click on **Copy**, and as the wizard starts, select the rule group that you
    want to copy the rule to:![Copying a rule from another rule group](img/image_06_009.jpg)
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **复制**，在向导启动时，选择您想要复制规则的规则组：![从另一个规则组复制规则](img/image_06_009.jpg)
- en: In next step, confirm the rule/rules you want to copy and click on **Finish**.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一步中，确认您想要复制的规则，并点击 **完成**。
- en: The rule will be copied in our rule group now.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，规则已被复制到我们的规则组中。
- en: It should look like the following screenshot:![Copying a rule from another rule
    group](img/image_06_010.jpg)
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它应如下所示：![从另一个规则组复制规则](img/image_06_010.jpg)
- en: Creating a new rule
  id: totrans-130
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建新规则
- en: Now, as you have seen how to copy a rule, we will continue considering that
    we are not able to find a rule we want and thus need to create it.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，既然你已经看到如何复制规则，我们将继续考虑如果找不到我们需要的规则，则需要创建规则的情况。
- en: 'Follow these steps to create the required rule:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤创建所需的规则：
- en: Once again, log in to VCM and go to **Compliance** | **Machine****Group****Compliance**
    | **Rule****Groups**.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次登录 VCM，进入 **合规性** | **机器组** **合规性** | **规则** **组**。
- en: Select the machine group created for storing our rules and go to **Rules**,
    click on **Add**, and follow the wizard.![Creating a new rule](img/image_06_011.jpg)
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择为存储我们规则而创建的机器组，进入**规则**，点击**添加**，并按照向导进行操作。![创建新规则](img/image_06_011.jpg)
- en: Provide a **Name** and **Description** for the rule.![Creating a new rule](img/image_06_012.jpg)
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供规则的**名称**和**描述**。![创建新规则](img/image_06_012.jpg)
- en: Select the correct **Data Type**; in our case, it is **Account Policy**.![Creating
    a new rule](img/image_06_013.jpg)
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择正确的**数据类型**；在我们的例子中，它是**帐户策略**。![创建新规则](img/image_06_013.jpg)
- en: Select **Basic Rule**.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**基本规则**。
- en: (For more details about the types of rules, refer to the *Rules* subsection
    of the *The constructs of VCM compliance* recipe).
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: （有关规则类型的更多详细信息，请参见*VCM 合规性的构建*食谱中的*规则*子部分）。
- en: Select a **Min Length** value greater than (**>**) `12` as a condition so that
    if the condition fails, it will flag as noncompliant.![Creating a new rule](img/image_06_014.jpg)
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个**最小长度**值大于（**>**）`12`，作为条件，以便如果条件未满足，它将标记为不合规。![创建新规则](img/image_06_014.jpg)
- en: Select **Moderate Severity**, confirm the rule creation and click on **Finish**.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**中等严重性**，确认规则创建并点击**完成**。
- en: We just created our first rule for our internal standards for Windows.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们刚刚为 Windows 创建了我们的第一个内部标准规则。
- en: How it works...
  id: totrans-142
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: To measure compliance, we need to create rules for each stated requirement;
    in this recipe, we first copied a rule from a standard that we imported, and then,
    to understand the process, we created the same rule. The rule will be stored in
    the rule group and will check the compliance of the Windows machine for password
    length.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 为了衡量合规性，我们需要为每个已声明的要求创建规则；在本示例中，我们首先复制了一个从导入的标准中获得的规则，然后为了理解流程，我们创建了相同的规则。该规则将存储在规则组中，并将检查
    Windows 机器的密码长度合规性。
- en: Creating custom compliance rules for Linux
  id: totrans-144
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为 Linux 创建自定义合规规则
- en: In the previous recipe, we looked at a rule created for Windows for checking
    minimum the password length; we will continue with the same requirement here,
    except for Linux. The process will be similar; only the data types will change.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的示例中，我们查看了一个为 Windows 创建的检查最小密码长度的规则；我们将在这里继续相同的要求，只不过是针对 Linux。过程将类似，只是数据类型会发生变化。
- en: Getting ready
  id: totrans-146
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: We need a fully functional VCM and a rule group created to store our Linux rule.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要一个功能完全的 VCM 和一个用于存储 Linux 规则的规则组。
- en: How to do it...
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作步骤...
- en: Like in the earlier recipe, here too we have two ways to create such rules,
    that is, copy them from another imported compliance pack rule group or create
    our own. The copying process is the same as for Windows; hence, we will not repeat
    it again.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 就像在之前的示例中一样，这里我们也有两种方法来创建这样的规则，即从另一个导入的合规包规则组中复制，或者创建我们自己的。复制过程与 Windows 相同，因此我们不会再重复它。
- en: 'We will create a new rule for Linux to check the minimum password length by
    completing these steps:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将通过完成以下步骤为 Linux 创建一个新规则，以检查最小密码长度：
- en: Once again, we need to log in to VCM with admin privileges and go to **Compliance
    | ****Machine ****Group ****Compliance** | **Rule****Groups**.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次，我们需要以管理员权限登录 VCM，并转到**合规性 | 机器组合规性 | 规则组**。
- en: Go to the machine group created for Linux rules, click on the arrow in front
    of the rule group name, and select **Rules**.
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 转到为 Linux 规则创建的机器组，点击规则组名称前的箭头，并选择**规则**。
- en: Click on **Add**, and it will launch a wizard to create a new rule.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**，它将启动一个向导来创建一个新规则。
- en: On the first page of the wizard, provide a name and description.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导的第一页，提供名称和描述。
- en: On the next page for data types, go to **Unix** | **Custom Information**.![How
    to do it...](img/image_06_015.jpg)
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在数据类型的下一页，选择**Unix** | **自定义信息**。![操作步骤...](img/image_06_015.jpg)
- en: If you are a Linux admin, you already know where to find the required details;
    if not, consult your Linux admin.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你是 Linux 管理员，你已经知道在哪里找到所需的详细信息；如果不是，请咨询你的 Linux 管理员。
- en: In our case, I filled in the details after consulting my Linux admin.
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在我们的例子中，我在咨询了我的 Linux 管理员后填写了相关信息。
- en: 'Here is what we filled in:'
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这是我们填写的内容：
- en: '**Information Type: `builtin:login.defs`**'
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**信息类型：`builtin:login.defs`**'
- en: '**File Path : `/etc/login.defs`**'
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文件路径：`/etc/login.defs`**'
- en: '**Internal Path: `/builtin:login.defs`**'
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**内部路径：`/builtin:login.defs`**'
- en: '![How to do it...](img/image_06_016.jpg)'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![操作步骤...](img/image_06_016.jpg)'
- en: Select the `PASS_MIN_LEN` condition to be greater than (**>**) `12`, so if the
    value found is less than `12`, then we are noncompliant and VCM will let us know.![How
    to do it...](img/image_06_017.jpg)
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择`PASS_MIN_LEN`条件大于（**>**）`12`，也就是说，如果找到的值小于 `12`，那么我们就不合规，VCM 会通知我们。![How
    to do it...](img/image_06_017.jpg)
- en: Set the **Severity** to **Moderate**, follow the wizard, and accept the creation
    of the rule and finish it by clicking on **Finish**.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将**严重性**设置为**中等**，按照向导步骤进行，并接受规则创建，最后点击**完成**来完成设置。
- en: How it works...
  id: totrans-165
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Just like Windows compliance rules, this rule will be stored and will process
    the stored data collected from Linux machines and give us their compliance status.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 就像 Windows 合规规则一样，该规则将被存储，并处理从 Linux 机器收集的存储数据，给出它们的合规状态。
- en: Creating custom compliance rules for virtualization
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为虚拟化创建自定义合规规则
- en: So far, we created compliance rules for machine group compliance, that is, for
    Windows and Linux. Now, we will create a rule for virtual environment compliance.
    We can't continue with our example of minimum password length in this virtual
    world, so we will change it to another requirement we have, that is, the snapshot
    for a VM should not be retained for more than 10 days.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们为机器组合规性创建了规则，即为 Windows 和 Linux 创建了规则。现在，我们将为虚拟环境合规性创建规则。在虚拟环境中，我们无法继续使用最小密码长度的示例，因此我们将其更改为我们另一个要求，即虚拟机的快照不应保存超过
    10 天。
- en: So, let's start and see how many VMs are noncompliant with our rule by first
    creating one.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，让我们开始，首先创建一个规则，看看有多少虚拟机不符合我们的规则。
- en: Getting ready
  id: totrans-170
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备开始
- en: We need a rule group created to store the virtualization compliance rules in
    a fully deployed and functional VCM server.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要创建一个规则组，用于在已完全部署且功能正常的 VCM 服务器中存储虚拟化合规规则。
- en: How to do it...
  id: totrans-172
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: Like our previous experience with rules, this one can also be copied from another
    standard pack if you know where to copy from; the process is similar to that for
    Windows rules, so we will not repeat it here.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 像我们之前处理规则的经验一样，如果你知道从哪里复制，它也可以从另一个标准包中复制；这个过程与 Windows 规则类似，所以我们在这里不再重复。
- en: 'We will start creating a new rule using the following steps:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将通过以下步骤开始创建一个新规则：
- en: Once again, we need to log in to VCM with admin privileges and reach **Compliance
    |** **Virtual Environment Compliance** |** Rule Groups**.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要再次以管理员身份登录 VCM，并进入**合规性 |** **虚拟环境合规性** |** 规则组**。
- en: Select the rule group created for storing virtual environment compliance rules.
    Click on the arrow to the side of it and go to **Rules**.
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择为存储虚拟环境合规规则而创建的规则组。点击它旁边的箭头，进入**规则**。
- en: Click on **Add** to start the wizard. Fill in the name and description for the
    rule to be created, and click on **Next**.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**以启动向导。填写规则名称和描述，然后点击**下一步**。
- en: Check the screenshots in the previous recipes where we created rules for Windows
    and Linux, and make appropriate changes for virtualization as described in those
    steps.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看之前我们为 Windows 和 Linux 创建规则的截图，并根据这些步骤为虚拟化进行相应的修改。
- en: On the next page of the wizard, **Data Type**, select **vCenter - Guests - Snapshots**,
    as we want to check the snapshot age.![How to do it...](img/image_06_018.jpg)
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导的下一页中，选择**数据类型**，选择**vCenter - 客户机 - 快照**，因为我们要检查快照的年龄。![How to do it...](img/image_06_018.jpg)
- en: Select **Basic** as the rule type and click on **Next**.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**基本**作为规则类型，然后点击**下一步**。
- en: To form a condition, select **Snapshot Age** less than or equal to (**<=**)
    `10`, that is, if the snapshot age is less than `10`, then we are compliant, but
    if it is more than `10`, then we are noncompliant and that needs to be flagged.
    Click on **Next**.![How to do it...](img/image_06_019.jpg)
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要形成一个条件，选择**快照年龄**小于或等于（**<=**）`10`，也就是说，如果快照年龄小于 `10`，那么我们是合规的，但如果超过 `10`，我们就不合规，需要标记出来。点击**下一步**。![How
    to do it...](img/image_06_019.jpg)
- en: Select **Moderate Severity**, confirm the rule creation, and click on **Finish**
    to close the wizard.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**中等严重性**，确认规则创建，并点击**完成**以关闭向导。
- en: This completes the creation of all types of rules for compliance.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了所有类型的合规规则的创建。
- en: How it works...
  id: totrans-184
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The process is the same as machine group compliance and rules for Windows and
    Linux; in a virtual environment situation, the data to be used will be collected
    from vCenter servers, and the compliance score of the vCenter server will change
    instead of individual virtual machines'.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 该过程与 Windows 和 Linux 的机器组合规性和规则相同；在虚拟环境中，所需的数据将从 vCenter 服务器收集，并且 vCenter 服务器的合规得分会发生变化，而不是单独虚拟机的合规得分。
- en: Modifying the default filter set
  id: totrans-186
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 修改默认过滤器集
- en: 'Now you know that VCM checks compliance on the data collected and available
    in the database it has and not directly on the live machine. This causes limitation:
    if a particular data type is not collected, it will not be available, and then,
    we cannot measure the compliance for the rule and VCM will tell you that the data
    has not been collected for the rule in the results.'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你知道 VCM 检查的是已收集并存储在数据库中的数据的合规性，而不是直接检查实时机器上的数据。这带来了一个限制：如果某个特定数据类型未被采集，那么它将无法使用，因此我们无法衡量该规则的合规性，VCM
    会告诉你该规则的结果中没有收集到相关数据。
- en: To overcome this situation, we can set lots of collections with different types
    of filter sets created by VCM or we can modify the default filter set and add
    required filters.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 为了克服这种情况，我们可以设置多个包含不同类型过滤器集的采集，这些过滤器集由 VCM 创建，或者我们可以修改默认过滤器集并添加所需的过滤器。
- en: Note
  id: totrans-189
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that modifying a default set is not recommended by VMware. Create your
    own filter set that includes the required filters and use that to perform the
    collection.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，VMware 不建议修改默认集。请创建你自己的过滤器集，包含所需的过滤器，并使用它来执行数据采集。
- en: So, what are filters and filter sets?
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，什么是过滤器和过滤器集？
- en: '**VCM filters**: Filters define what data a VCM agent should collect while
    performing the collection; examples are a registry setting, service status, file
    permission, and so on.'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '**VCM 过滤器**：过滤器定义了 VCM 代理在执行数据采集时应收集哪些数据；例如注册表设置、服务状态、文件权限等。'
- en: '**VCM filter sets**: These are collections of filters, which can be used to
    collect data from managed machines. Most of the time, we use the default filter
    set, but there are a few more created by default when we install VCM, and a few
    are added when we import compliance packs from the Internet. Compliance packs
    create the required filters and filter sets so that the data is collected and
    can be processed when we run the compliance check.'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: '**VCM 过滤器集**：这些是过滤器的集合，可以用来从管理的机器收集数据。大多数情况下，我们使用默认过滤器集，但在安装 VCM 时会默认创建几个过滤器集，导入合规包时也会添加一些过滤器集。合规包创建所需的过滤器和过滤器集，以便收集数据并在运行合规性检查时处理这些数据。'
- en: We need to select the correct filter set while performing a collection so that
    the required details will be added to the VCM database, modify the default filter
    set, or create a new one and use this single filter set to collect data.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要在执行数据采集时选择正确的过滤器集，以便将所需的详细信息添加到 VCM 数据库中，修改默认过滤器集，或创建一个新的过滤器集，并使用该过滤器集来收集数据。
- en: Getting ready
  id: totrans-195
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We need a fully functional VCM server, and we should know which data filter
    is required to add to the default filter set, so we should import the compliance
    packs as we did in the first recipe.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要一个完全功能的 VCM 服务器，并且我们应当知道需要添加哪些数据过滤器到默认过滤器集中，因此我们应该像在第一个食谱中那样导入合规包。
- en: How to do it...
  id: totrans-197
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: We will be adding a Linux filter to collect the required data type used in the
    *Creating custom compliance rules for Linux* recipe, where we used details from
    the `:/etc/login.defs` file, and those are not part of the default filter set.
    In this example, we are modifying the default filter set, but you can use the
    same process to first create a filter set and then add the required filters to
    it.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将添加一个 Linux 过滤器，用于收集在*为 Linux 创建自定义合规规则*食谱中使用的所需数据类型，其中我们使用了来自`:/etc/login.defs`文件的详细信息，而这些信息并不包含在默认过滤器集中。在这个示例中，我们正在修改默认过滤器集，但你也可以使用相同的过程，首先创建一个过滤器集，然后将所需的过滤器添加到其中。
- en: 'Let''s jump into the VCM console to modify the default filter set then:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们进入 VCM 控制台来修改默认过滤器集吧：
- en: To start, log in to VCM and go to **Administration **| **Collection Filters** | **Filter
    Sets**.![How to do it...](img/image_06_020.jpg)
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，登录到 VCM 并转到**管理** | **数据采集过滤器** | **过滤器集**。![如何操作...](img/image_06_020.jpg)
- en: Select the default filter set and click on **Edit Filter Set**.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择默认过滤器集并点击**编辑过滤器集**。
- en: The wizard will start; as you can see, there are 9000 filters available; we
    really can't search through them, so create a **Filter**, click on **Define**,
    and it will open a pop-up.![How to do it...](img/image_06_021.jpg)
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向导将启动；如你所见，有9000个筛选器可用；我们无法逐个搜索它们，所以创建一个**筛选器**，点击**定义**，它将弹出一个窗口。![如何操作...](img/image_06_021.jpg)
- en: As we want to look for login details in the **Filter**, create a filter like
    **Name** like **%log%** (**%** acts a wildcard).![How to do it...](img/image_06_022.jpg)
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于我们希望在**筛选器**中查找登录详情，请创建一个像**Name**类似于**%log%**的筛选器（**%**充当通配符）。![如何操作...](img/image_06_022.jpg)
- en: Now, the filters we need to check are only 169 in number. Go through them and
    select the ones that match our requirement, in this case, **CIS - RHEL 7 - Custom
    Information - /etc/login.defs**.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们需要检查的筛选器只有169个。浏览它们并选择符合我们要求的筛选器，在这种情况下是**CIS - RHEL 7 - 自定义信息 - /etc/login.defs**。
- en: Select and click on the downward arrow and then on **Next**.![How to do it...](img/image_06_023.jpg)
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并点击向下箭头，然后点击**下一步**。![如何操作...](img/image_06_023.jpg)
- en: Make sure there are no conflicts, and click on **Next**.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保没有冲突，然后点击**下一步**。
- en: On the next page, it will show you the list of filters in this filter set; accept
    them by clicking on **Finish**.![How to do it...](img/image_06_024.jpg)
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页，它将显示此筛选器集中的筛选器列表；点击**完成**接受它们。![如何操作...](img/image_06_024.jpg)
- en: How it works...
  id: totrans-208
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: 'As mentioned earlier, we need to instruct VCM what data needs to be collected;
    else, we will miss the data collection and cannot check compliance for those rules.
    We can do this in two ways: collecting data multiple times with multiple filter
    sets or as we did here, adding required filter sets and preparing a master filter
    set to collect all the details.'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，我们需要指示VCM收集哪些数据；否则，我们将错过数据收集，无法检查这些规则的合规性。我们可以通过两种方式来做：使用多个筛选器集多次收集数据，或者像这里一样，添加所需的筛选器集并准备一个主筛选器集来收集所有详细信息。
- en: We chose the second option. Now onwards, whenever we collect data with the default
    filter set, it will collect from Linux/Unix managed machines details about `/etc/login.defs`
    file, which we can use.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 我们选择了第二个选项。从现在开始，每当我们使用默认筛选器集收集数据时，它将从Linux/Unix管理的机器中收集有关`/etc/login.defs`文件的详细信息，我们可以使用这些信息。
- en: Creating compliance templates
  id: totrans-211
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建合规模板
- en: Now that we are ready with all the required rule groups with the necessary filters
    and they have been populated with all the rules to fulfill the requirements given
    by the security officer, we need to move ahead and start checking compliance.
    But wait, we can't check compliance against a rule or rule groups; we will need
    a compliance template, which can have all the required rule groups.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，所有必需的规则组和所需的筛选器都已准备好，并且它们已经填充了所有规则以满足安全官员的要求，我们需要继续并开始检查合规性。但等一下，我们不能直接检查规则或规则组的合规性；我们需要一个合规模板，它可以包含所有所需的规则组。
- en: So let's start by creating our compliance template for Windows-related rule
    groups.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 所以我们先从为与Windows相关的规则组创建合规模板开始。
- en: Getting ready
  id: totrans-214
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: We will need all the required rule groups created and they should be populated
    with the associated rules in a fully functional VCM server.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要创建所有必需的规则组，并确保它们已填充与之关联的规则，且在完全功能的VCM服务器上运行。
- en: How to do it...
  id: totrans-216
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'By now, you must already know where you should go to create your compliance
    template; if not, just follow this process and you will be learn that as well:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，你应该已经知道在哪里创建合规模板；如果不知道，只需按照这个过程，你也将学会如何操作：
- en: Go to **Compliance** | **Machine ****Group ****Compliance** | **Templates**
    and then click on **Add**.![How to do it...](img/image_06_025.jpg)
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**合规性** | **机器组合规性** | **模板**，然后点击**添加**。![如何操作...](img/image_06_025.jpg)
- en: Once the wizard for creating a new template is launched, provide a proper **Name**
    and **Description** value.![How to do it...](img/image_06_026.jpg)
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动创建新模板的向导后，提供一个合适的**名称**和**描述**值。![如何操作...](img/image_06_026.jpg)
- en: Select all the rule groups that should be part of this template.![How to do
    it...](img/image_06_027.jpg)
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择所有应该包含在此模板中的规则组。![如何操作...](img/image_06_027.jpg)
- en: Make sure it provides results on both compliant and noncompliant details and
    processes compliance exceptions (more about this is in the *Creating compliance
    exceptions* recipe at the end of this chapter).![How to do it...](img/image_06_028.jpg)
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保它能够提供合规和不合规的详细信息，并处理合规例外（更多内容请参见本章末尾的*创建合规例外*部分）。![如何操作...](img/image_06_028.jpg)
- en: Confirm the creation of the template and hit **Finish**.
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认模板的创建并点击**完成**。
- en: How it works...
  id: totrans-223
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: We can create rule groups for each version of Windows, such as Windows Server
    2003, Windows Server 2008 and one for 2008 R2, and Server 2012 and 2012 R2\. Each
    will have its own filters so that the rules in those rule groups will be applied
    to only the specific OSes they are created for. Now we can have a single template
    to run against a huge machine group that includes all the Windows machines in
    the infrastructure; VCM will pick the correct rule for them, and we can avoid
    having multiple templates and associated machine groups to check compliance against
    (checking infrastructure compliance is our next recipe).
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以为每个版本的 Windows 创建规则组，例如 Windows Server 2003、Windows Server 2008、2008 R2、Server
    2012 和 2012 R2。每个规则组会有自己特定的过滤器，使得这些规则仅应用于为其创建的操作系统。现在，我们可以有一个单一的模板，应用于包含所有 Windows
    机器的大型机器组；VCM 会为它们选择正确的规则，这样我们就可以避免需要多个模板和相关机器组来检查合规性（检查基础设施的合规性是我们的下一个教程）。
- en: When a rule that is called complaint is passed and it fails, then we are noncompliant
    for a setting. Now, there are chances that we need to make some exceptions to
    the rules, like in the last recipe of this chapter, *Creating compliance exceptions*,
    where we create such exceptions.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 当被称为“合规”的规则通过并且失败时，我们在某个设置上就是不合规的。现在，可能需要对规则做出一些例外，就像本章最后的教程《创建合规性例外》中，我们会创建这样的例外。
- en: Checking the compliance of the infrastructure
  id: totrans-226
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检查基础设施的合规性
- en: 'We did the hard work of creating all the rules, rules groups, and templates
    to reach up to this: checking the compliance of the infrastructure. Now, we are
    ready to check how compliant we are against our internal standards, or we can
    directly use the standard compliance packs we downloaded and imported in the first
    recipe.'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经完成了创建所有规则、规则组和模板的繁重工作，达到了这一步：检查基础设施的合规性。现在，我们准备好检查我们是否符合内部标准，或者我们可以直接使用我们在第一个教程中下载并导入的标准合规性包。
- en: As we have only created test rules, we will use a standard template we imported
    in the first recipe.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们只创建了测试规则，我们将使用我们在第一个教程中导入的标准模板。
- en: Getting ready
  id: totrans-229
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: All the heavy lifting should have been done on the VCM server; for instance,
    it should be ready with the templates and at least one machine group that will
    have the machines for which we need to check compliance, or we can use the default
    machine groups available. The preferred alternative is our own machine group.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 所有繁重的工作应该已经在 VCM 服务器上完成；例如，模板应该已经准备好，并且至少有一个机器组，其中包含我们需要检查合规性的机器，或者我们可以使用默认的机器组。更优的选择是我们自己的机器组。
- en: How to do it...
  id: totrans-231
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: As mentioned earlier, we will use an imported standard template called **International
    Organization for Standardization 27001-27002- Windows 2008 R2 Mbr Server Controls**,
    and we will run this against the default machine group, **All Machines**.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，我们将使用一个名为**国际标准化组织 27001-27002- Windows 2008 R2 Mbr 服务器控制**的标准模板，并将其应用于默认机器组**所有机器**。
- en: 'Follow this process to check the compliance of Windows servers:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 按照此流程检查 Windows 服务器的合规性：
- en: Once logged in to VCM, go to **Compliance **| **Templates**.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录 VCM 后，前往**合规性**|**模板**。
- en: Note
  id: totrans-235
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that you should make sure the correct machine group is selected at the
    top; this is how VCM decides which machines to apply the template to in order
    to measure compliance. If you want to change the machine group, click on the machine
    group, and in the pop-up, select the correct machine group.
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，您应该确保在顶部选择了正确的机器组；这是 VCM 决定将哪个机器应用于模板并进行合规性测量的方式。如果您想更改机器组，请点击机器组，在弹出的窗口中选择正确的机器组。
- en: Select the required template on the right-hand side and click on **Run**.![How
    to do it...](img/image_06_029.jpg)
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在右侧选择所需的模板，然后点击**运行**。![如何操作...](img/image_06_029.jpg)
- en: Depending upon the organization's policies, decide to enforce or not enforce
    compliance.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据组织的政策，决定是否执行合规性检查。
- en: Note
  id: totrans-239
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that not all rules are enforceable; also, we can create issues, such as
    breaking a working application. For example, if the print spooler service is required
    to be disabled, and when we enforce the compliance, we disable the service, this
    will create an issue in the printer farm as it will stop functioning. So it's
    better that we first learn what is noncompliant, then make necessary exceptions,
    and then enforce it from VCM or ask the respective server owners to take necessary
    action.
  id: totrans-240
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，并非所有规则都可以强制执行；此外，我们还可能会创建问题，例如破坏一个正在工作的应用程序。例如，如果要求禁用打印后台处理程序服务，而当我们强制执行合规性时，我们禁用了该服务，那么这将导致打印机组出现问题，因为它将无法正常工作。因此，最好先了解哪些是非合规的，然后做出必要的例外，再从
    VCM 强制执行，或者要求相应的服务器拥有者采取必要的措施。
- en: In a few minutes, depending on how many machines you have in the machine group
    to check, the compliance run will finish. Click on **Close**.![How to do it...](img/image_06_030.jpg)
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据你在机器组中需要检查的机器数量，合规性检查将在几分钟内完成。点击**关闭**。![如何操作...](img/image_06_030.jpg)
- en: The compliance status can be viewed by navigating to the template on the left-hand
    side and selecting the correct machine group from the top.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以通过导航到左侧的模板并从顶部选择正确的机器组来查看合规性状态。
- en: In our case, our support team needs to work a lot as we are noncompliant.
  id: totrans-243
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对我们来说，我们的支持团队需要做很多工作，因为我们是非合规的。
- en: '![How to do it...](img/image_06_031.jpg)'
  id: totrans-244
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/image_06_031.jpg)'
- en: How it works...
  id: totrans-245
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: When we ask VCM to check compliance, it first applies the filters available
    in the rule groups and then, only the machines that pass those filters are considered.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们请求 VCM 检查合规性时，它首先应用规则组中可用的过滤器，然后，只有通过这些过滤器的机器才会被考虑。
- en: The compliance checks are performed on the data collected by VCM and available
    in the database, unlike some other tools, which performs the checks at the client
    end and the client submits the data. The process followed by VCM is better as
    this can be performed on servers that are offline at that point in time, and when
    we check the result, we get the value because of which a machine is noncompliant
    for a rule.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 合规性检查是基于 VCM 收集并存储在数据库中的数据进行的，与一些其他工具不同，这些工具是在客户端端进行检查，并由客户端提交数据。VCM 所采用的流程更好，因为它可以在当时处于离线状态的服务器上执行，并且当我们检查结果时，可以得到导致机器违反规则的具体值。
- en: 'Again, this has some issues: firstly, we need to make sure our VCM is clean;
    by that, I mean that when a machine is decommissioned, it is purged from VCM;
    else, we will have the details of the machines that are not present in the infrastructure
    and that could play with our final compliance score.'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，这样也有一些问题：首先，我们需要确保我们的 VCM 是干净的；我的意思是，当一台机器被退役时，它应该从 VCM 中清除；否则，我们会保留那些在基础设施中已不存在的机器的详细信息，这可能会影响我们的最终合规性评分。
- en: The second issue is that it does not give us live details as it works on data
    that is in its database; again, this can give us some false positives.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个问题是它没有给我们实时的详细信息，因为它是基于数据库中的数据进行工作的；这可能会导致一些误报。
- en: To encounter this issue, we can schedule a compliance check after a full data
    collection for that machine group; in this way, we will not have stale data to
    process.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 为了应对这个问题，我们可以在对机器组进行全面数据收集后安排合规性检查；这样我们就不会处理过时的数据。
- en: Once the compliance has been checked and if we have selected to enforce compliance,
    it will create jobs to enforce them and will start executing on the managed machines;
    for example, if we have rules to check the status of a service and we expect certain
    services in the running state, then VCM will start those services.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦完成合规性检查，如果我们选择执行合规性，它将创建任务来强制执行这些规则，并开始在受管理的机器上执行；例如，如果我们有规则检查服务的状态，并且期望某些服务处于运行状态，那么
    VCM 将启动这些服务。
- en: Exporting compliance rules
  id: totrans-252
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 导出合规性规则
- en: I don't know about you, but I am a lazy admin–I like to do things once and use
    them as many times as I can. Creating a complete compliance configuration is a
    huge task and can take up to months; now consider you have another VCM deployed
    and you want to recreate all the rules, rule groups, and templates again. Nobody
    will approve few months of rework and you won't enjoy the repeated work either.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 我不知道你怎么样，但我可是个懒管理员——我喜欢一次性做完事情，然后尽可能多次使用它。创建完整的合规性配置是一个庞大的任务，可能需要几个月的时间；现在假设你又有另一个部署了
    VCM，你想要重新创建所有规则、规则组和模板。没人会同意几个月的重复工作，你自己也不会喜欢这种重复的工作。
- en: This is where VMware's Export Import tool bundled with VCM comes in handy. You
    can export all your settings in a single XML file and then import as many VCM
    deployments as you want, and once they have been imported, you can modify them
    if required as well.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 这时，VMware 提供的与 VCM 捆绑的导入导出工具就派上用场了。你可以将所有设置导出为一个 XML 文件，然后根据需要导入任意数量的 VCM 部署，一旦导入，你也可以根据需求进行修改。
- en: In this and the next recipe, we will have a look at those two things. First,
    we will export the configurations in an XML file and then import them again.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程和接下来的教程中，我们将探讨这两个操作。首先，我们将导出配置文件到一个 XML 文件中，然后再导入回来。
- en: Getting ready
  id: totrans-256
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: To start with the recipe, we need a completely functional VCM, and all the required
    rule groups with filters, rules, and templates should be ready before we start.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始之前，我们需要一个完全功能的 VCM，且所有所需的规则组、过滤器、规则和模板应该在开始之前准备好。
- en: How to do it...
  id: totrans-258
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To work on the recipe, you don''t need to log in to the VCM console, but you
    need to launch the **Import Export** utility from the VCM server''s desktop. Follow
    these steps:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 要进行此操作，你无需登录到 VCM 控制台，但需要从 VCM 服务器的桌面启动 **导入导出** 工具。请按照以下步骤操作：
- en: Once the **Import Export** tool has been launched, click on **Connect to source**.![How
    to do it...](img/image_06_032.jpg)
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦 **导入导出** 工具启动，点击 **连接源**。![如何操作...](img/image_06_032.jpg)
- en: Select the database server and click on connect. Select the **VCM** database
    and click on **OK**.![How to do it...](img/image_06_033.jpg)
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择数据库服务器并点击连接。选择 **VCM** 数据库并点击 **确定**。![如何操作...](img/image_06_033.jpg)
- en: As we want to export the compliance template (this will include all the rule
    groups, filters, and rules), click on **Compliance Template**; the tool will show
    the available compliance templates on the right-hand side.
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于我们想要导出合规性模板（这将包括所有规则组、过滤器和规则），点击 **合规性模板**；工具将显示右侧可用的合规性模板。
- en: Accept the dependency alert–we need proper documentation if we modify or create
    new filter sets in order to recreate them on the new environment where we will
    import this template again.![How to do it...](img/image_06_034.jpg)
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受依赖警报——如果我们修改或创建新的过滤器集，我们需要适当的文档，以便在新环境中重新创建它们，届时我们将再次导入此模板。![如何操作...](img/image_06_034.jpg)
- en: Select the compliance template you have created and want to export and then
    go to **File** | **Save Source Document**.![How to do it...](img/image_06_035.jpg)
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你创建并希望导出的合规性模板，然后前往 **文件** | **保存源文档**。![如何操作...](img/image_06_035.jpg)
- en: In the next step, use the arrow buttons to move the templates you want to export,
    and then click on **OK**.![How to do it...](img/image_06_036.jpg)
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一步中，使用箭头按钮移动你想导出的模板，然后点击 **确定**。![如何操作...](img/image_06_036.jpg)
- en: Enter a comment under **Save Options**.![How to do it...](img/image_06_037.jpg)
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **保存选项** 下输入评论。![如何操作...](img/image_06_037.jpg)
- en: Provide a descriptive name and click on OK.![How to do it...](img/image_06_038.jpg)
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供一个描述性名称并点击确定。![如何操作...](img/image_06_038.jpg)
- en: Click on **OK** to complete the save.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **确定** 完成保存。
- en: Now, we are done with the export and are ready to share our hard work with the
    world.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们已经完成了导出，并准备与大家分享我们的辛勤工作成果。
- en: How it works...
  id: totrans-270
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: The data is exported in XML format, which can be used with the same utility
    again in any other environment to recreate the compliance details, which could
    have taken a few months to recreate.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 数据以 XML 格式导出，可以在任何其他环境中使用相同的工具重新创建合规性细节，这些细节可能需要几个月才能重新创建。
- en: Compliance reports
  id: totrans-272
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 合规性报告
- en: 'It does not matter how compliant you are unless you can give a full report
    showing all the details of the infrastructure. VCM does not let you down here
    as well: there are 15 default reports available to be exported. We will look how
    we can do that in this recipe.'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 不管你有多合规，除非你能提供一份完整的报告，显示所有基础设施的详细信息，否则都无济于事。VCM 在这方面也不会让你失望：有 15 个默认报告可供导出。我们将在本教程中了解如何实现这一点。
- en: Getting ready
  id: totrans-274
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: We will need a fully deployed VCM server, and we should have finished checking
    the compliance of the infrastructure so that we can look at the options to get
    the reports.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要一个完全部署的 VCM 服务器，且应该完成基础设施的合规性检查，这样我们就能查看生成报告的选项。
- en: Note
  id: totrans-276
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that if we have not run the compliance run, we cannot see the reports-quite
    obvious, but we do miss this.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，如果我们没有运行合规性检查，就无法看到报告——这点显而易见，但我们确实偶尔会忽视它。
- en: How to do it...
  id: totrans-278
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To get the reports out of VCM, follow these steps:'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 要从 VCM 导出报告，请按照以下步骤操作：
- en: Log in to the VCM console and go to **Reports **| **Machine Group Reports** |
    **Compliance**.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到VCM控制台，进入**报告** | **机器组报告** | **合规性**。
- en: 'Select the required report; use this list to understand what can be seen in
    the report:'
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择所需报告；使用此列表了解报告中能看到的内容：
- en: '| **Sr. no.** | **Name** | **Description** |'
  id: totrans-282
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **序号** | **名称** | **描述** |'
- en: '| **1** | Compliance badge mapping result by object | Displays the compliance
    badge mapping result by object in detail |'
  id: totrans-283
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **1** | 按对象显示合规性徽章映射结果 | 显示按对象详细列出的合规性徽章映射结果 |'
- en: '| **2** | Compliance badge mapping result by template | Displays the compliance
    badge mapping result by template in detail |'
  id: totrans-284
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **2** | 按模板显示合规性徽章映射结果 | 显示按模板详细列出的合规性徽章映射结果 |'
- en: '| **3** | Compliance badge rollup detail | Displays the compliance badge rollup
    in detail |'
  id: totrans-285
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **3** | 合规性徽章汇总详情 | 显示合规性徽章的详细汇总 |'
- en: '| **4** | Compliance badge rollup summary | Displays the compliance badge rollup
    summary |'
  id: totrans-286
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **4** | 合规性徽章汇总摘要 | 显示合规性徽章汇总摘要 |'
- en: '| **5** | Compliance change history | Compliance change history for a series
    of compliance runs |'
  id: totrans-287
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **5** | 合规性变更历史 | 显示一系列合规性检查的变更历史 |'
- en: '| **6** | Compliance machine group summary | Displays compliance summary broken
    down by machine group |'
  id: totrans-288
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **6** | 合规性机器组汇总 | 显示按机器组划分的合规性汇总 |'
- en: '| **7** | Compliance results detail by machine | Displays results of compliance
    run grouped by machine and includes rule description |'
  id: totrans-289
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **7** | 按机器显示合规性结果详情 | 显示按机器分组的合规性检查结果，并包括规则描述 |'
- en: '| **8** | Compliance results detail by rule | Displays results of compliance
    run grouped by rule name and includes rule description |'
  id: totrans-290
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **8** | 按规则显示合规性结果详情 | 显示按规则名称分组的合规性检查结果，并包括规则描述 |'
- en: '| **9** | Compliance results details | Compliance results details by compliance
    template |'
  id: totrans-291
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **9** | 合规性结果详情 | 按合规性模板显示合规性结果详情 |'
- en: '| **10** | Compliance results machine group details | Displays results of compliance
    run grouped by machine groups |'
  id: totrans-292
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **10** | 按机器组显示合规性结果详情 | 显示按机器组分组的合规性检查结果 |'
- en: '| **11** | Compliance results summary | Compliance results summary by compliance
    template |'
  id: totrans-293
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **11** | 合规性结果汇总 | 按合规性模板显示合规性结果汇总 |'
- en: '| **12** | Compliance results summary for rules | Compliance results summary
    for rules by compliance template for asset classification and rule severity |'
  id: totrans-294
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **12** | 按规则显示合规性结果汇总 | 按合规性模板为资产分类和规则严重性显示合规性结果汇总 |'
- en: '| **13** | Compliance results trends | Compliance results trends for selected
    templates |'
  id: totrans-295
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **13** | 合规性结果趋势 | 显示所选模板的合规性结果趋势 |'
- en: '| **14** | Compliance rule details by rule group | Shows existing compliance
    rule details and the rule groups that contain them |'
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **14** | 按规则组显示合规性规则详情 | 显示现有的合规性规则详情以及包含这些规则的规则组 |'
- en: '| **15** | Compliance template listing | Compliance template listing by template
    with rule group details |'
  id: totrans-297
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **15** | 合规性模板列表 | 按模板显示合规性模板列表，并附带规则组详情 |'
- en: Once the report is selected, click on **Run** in the top menu. This will launch
    a wizard for you to follow.
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择报告后，点击顶部菜单中的**运行**。这将启动一个向导，供你跟随操作。
- en: Note
  id: totrans-299
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that you have to make sure you have selected the correct machine group
    from the top; if you have never run a compliance check against that machine group,
    there won't be any options in the dropdown for the next window.
  id: totrans-300
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，你必须确保从顶部选择了正确的机器组；如果你之前从未对该机器组进行过合规性检查，下一窗口的下拉选项将为空。
- en: '![How to do it...](img/image_06_039.jpg)'
  id: totrans-301
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/image_06_039.jpg)'
- en: Select the options (they will differ for each selected report); the dropdown
    options will vary depending upon which template you have used to check the compliance.
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择选项（这些选项会因所选报告不同而有所不同）；下拉选项会根据你用来检查合规性的模板而有所变化。
- en: The rest you can choose depending upon your requirement; once all the required
    options have been selected, click on **View Report**.![How to do it...](img/image_06_040.jpg)
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 剩下的选项可以根据你的需求进行选择；一旦选择了所有必需的选项，点击**查看报告**。![如何操作...](img/image_06_040.jpg)
- en: The report will be displayed, and it can be exported to various formats, such
    as XML, CSV, PDF, and MHTML.![How to do it...](img/image_06_041.jpg)
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 报告将显示，并且可以导出为多种格式，如XML、CSV、PDF和MHTML。![如何操作...](img/image_06_041.jpg)
- en: How it works...
  id: totrans-305
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作步骤...
- en: VCM uses SSRS for its reporting functionality. When we click on the Run button,
    in order to display the report, VCM launches another Internet Explorer window,
    which takes us to SSRS. Then, the report asks us for options, such as the compliance
    template, the machines, and severity (they vary per report), and then goes to
    the VCM database and fetches the data. The data is presented in a nice report
    on the screen or can be exported to the formats shown in the previous screenshot.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: VCM使用SSRS进行报表功能。当我们点击运行按钮时，为了显示报表，VCM会启动另一个Internet Explorer窗口，这会带我们到SSRS。然后，报表会询问我们一些选项，比如合规模板、机器和严重性（这些根据报表不同而变化），然后它会访问VCM数据库并提取数据。数据将以漂亮的报表形式显示在屏幕上，或者可以导出为前面截图中所示的格式。
- en: Creating compliance exceptions
  id: totrans-307
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建合规性例外
- en: As you know, every rule has an exception, and this is applicable to compliance
    as well. You create a rule for disabling the print spooler service on all servers,
    and then you have print servers that need this service running. Now, we can't
    disable this service if we know this is a known and accepted deviation, and we
    don't want our compliance score to get a hit because of this. What we can do is
    add an exception so that this will not create issues when checking compliance.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所知，每条规则都有一个例外，合规性规则也是如此。您可以为所有服务器创建一条禁用打印后台处理程序服务的规则，然后您会有需要运行此服务的打印服务器。现在，如果我们知道这是一个已知并接受的偏差，我们就不能禁用此服务，而且我们不希望由于此原因影响我们的合规性得分。我们可以做的是添加一个例外，这样在检查合规性时就不会产生问题。
- en: Getting ready
  id: totrans-309
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Our organization has a policy to disable unwanted services on servers, and the
    print spooler is considered an unwanted service, so it must be disabled on all
    the servers. Of course, the exceptions are the print servers. We will create an
    exception for the print server machine group to be excused from this mandate.
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的组织有一项政策，要求在服务器上禁用不必要的服务，而打印后台处理程序被认为是一个不必要的服务，因此必须在所有服务器上禁用。当然，打印服务器是例外。我们将为打印服务器机器组创建一个例外，允许其不受此规定约束。
- en: We will need the required rules created in VCM along with a machine group that
    includes all the print servers.
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要在VCM中创建所需的规则，并且需要一个包含所有打印服务器的机器组。
- en: How to do it...
  id: totrans-312
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Let''s create an exception for our print servers by following these steps:'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过以下步骤为打印服务器创建一个例外：
- en: Log in to VCM and go to **Compliance **| **Machine Group Compliance** | **Exceptions**.
  id: totrans-314
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到VCM并转到**合规性**|**机器组合规性**|**例外**。
- en: Click on **Add**.![How to do it...](img/image_06_042.jpg)
  id: totrans-315
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**。![如何操作...](img/image_06_042.jpg)
- en: Provide a descriptive name and description, and click on **Next**.![How to do
    it...](img/image_06_043.jpg)
  id: totrans-316
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供一个描述性的名称和描述，然后点击**下一步**。![如何操作...](img/image_06_043.jpg)
- en: Select the template for which you want this machine group to be excluded.
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择要将此机器组排除在外的模板。
- en: In this case, we are selecting the one created by our organization rules; click
    on **Next**.![How to do it...](img/image_06_044.jpg)
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这种情况下，我们选择的是由我们组织规则创建的选项；点击**下一步**。![如何操作...](img/image_06_044.jpg)
- en: Select the machine group created for this exception–in our case, it is named
    **Print Servers – **and click on **Next**.![How to do it...](img/image_06_045.jpg)
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择为此例外创建的机器组——在我们的案例中，它被命名为**打印服务器**——然后点击**下一步**。![如何操作...](img/image_06_045.jpg)
- en: Select **Override non-compliant results to compliant**.
  id: totrans-320
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**将不合规结果覆盖为合规**。
- en: I really don't know why there is another option, but there must be a use case
    that I am not aware of.![How to do it...](img/image_06_046.jpg)
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我真的不知道为什么会有另一个选项，但一定有我不知道的使用案例。![如何操作...](img/image_06_046.jpg)
- en: We want this exception only for our rule for the print spooler server, called
    **Service_Print_Spooler**, so selected that rule. Depending upon your requirement,
    you can have an exception for a complete rule group as well. But an exception
    to a single rule is sufficient in our case.
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们只想为打印后台处理程序服务器的规则创建此例外，称为**Service_Print_Spooler**，因此选择了该规则。根据您的需求，您也可以为整个规则组创建例外。但在我们的情况下，单个规则的例外就足够了。
- en: Click on **Finish**.![How to do it...](img/image_06_047.jpg)
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**完成**。![如何操作...](img/image_06_047.jpg)
- en: You can enable/disable this exception as required.![How to do it...](img/image_06_048.jpg)
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以根据需要启用/禁用此例外。![如何操作...](img/image_06_048.jpg)
- en: How it works...
  id: totrans-325
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: Exceptions are considered when we perform a compliance check, and a final score
    is calculated. By creating an exception, we make sure that we don't get a bad
    score because we need to have some things noncompliant. Also, this helps when
    we enforce compliance. Like in the earlier case, if we enforce that the service
    status should be disabled, then VCM will disable the print spooler service on
    all servers including the print servers, and that will affect productivity.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 在执行合规性检查时，会考虑到例外情况，并计算出最终得分。通过创建例外，我们确保不会因为需要让某些事项不合规而导致得分不好。此外，这在执行合规性时也很有帮助。例如，在之前的案例中，如果我们强制要求服务状态应该禁用，那么VCM将会在包括打印服务器在内的所有服务器上禁用打印后台处理程序服务，这将影响生产力。
- en: So, creating a compliance exception is a win-win situation for both the teams–the
    security team has a nice compliant environment and the printer admin team has
    a working print farm.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，创建合规性例外对于两个团队来说都是双赢的局面——安全团队拥有一个良好的合规环境，而打印管理员团队则拥有一个正常工作的打印服务。
