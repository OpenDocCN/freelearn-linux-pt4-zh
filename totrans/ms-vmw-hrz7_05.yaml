- en: Installing and Configuring Horizon 7 - Part 1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous chapters, we discussed how things work and what role they play
    within Horizon View. Those were the theory chapters, if you like. But now, it's
    time to turn to the practical side of this book, instill what we have learned
    so far, and install Horizon View.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we will cover the installation process for the core Horizon
    View Connection Server.
  prefs: []
  type: TYPE_NORMAL
- en: Once the installation is complete, we will then move on to configuration tasks,
    so that the Horizon View environment is up and running, ready to deliver to end
    users. To help with the installation, we are going to use an example lab, which
    will guide you through the whole process step by step, using real-life screenshots.
    With that in mind, let's get started and introduce you to the example lab environment.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: Preparing AD
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Installing the Horizon View Composer Server
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Installing the Horizon View Connection Server
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Configuring the Horizon View Connection Server
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Welcome to the lab environment
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the practical parts of this book, you can follow the tasks and steps that
    are described using the example lab environment. If you prefer, you can use these
    guides to set up your own environment, whether that's for a proof of concept,
    a pilot, or a production deployment.
  prefs: []
  type: TYPE_NORMAL
- en: What you need for the example lab
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The example lab will be used across the entire book, and so this section will
    get you started with the infrastructure ready so you can build your own lab as
    you work through the chapters. If you are not planning on installing some of the
    features, such as JMP, then there is no need to install the required infrastructure
    to support this.
  prefs: []
  type: TYPE_NORMAL
- en: 'We are going to start with the management block infrastructure. The example
    lab management block consists of the following infrastructure components (although,
    feel free to use different versions of the infrastructure components):'
  prefs: []
  type: TYPE_NORMAL
- en: 2 x ESXi host servers running vSphere 6.7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '14 x Windows Server 2012 R2 Enterprise Edition virtual machines for the following
    roles, which we will configure in this chapter:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Domain controller (`hostname: dc.pvolab.com`)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Connection Server (`hostname: hzn7-cs1.pvolab.com`)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Security Server (`hostname: hzn7-ss1.pvolab.com`)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Replica Server (`hostname: hzn7-cs2.pvolab.com`)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Connection Server for second site CPA (`hzn7-cs1b`)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'View Composer (`hostname: hzn7-cmp.pvolab.com`)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Enrolment Server (`hostname: hzn7-enroll.pvolab.com`)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Certificate of authority server (`hzn7-certs.pvolab.com`)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: RDSH Server for hosting desktop sessions (`rdsh-desktops.pvolab.com`)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: RDSH Server for hosting applications (`rdsh-apps.pvolab.com`)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: JMP Server (`hzn7-jmp.pvolab.com`)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: SQL Express 2012 instance with 3 x databases (one for View Composer, one for
    the events database installed on the Composer Server, and one for the JMP server)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 2 x vCenter Servers (one for the management block (`vcs1.pvolab.com`), and one
    for the desktop block (`vcs2.pvolab.com`))
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'All machines should be domain-joined, except for the Security Server. The lab
    should look something like the following diagram:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1f8a688a-26ad-42b5-b136-91f3ce76d1a8.png)'
  prefs: []
  type: TYPE_IMG
- en: Before we get started and install anything, there are a few prerequisites that
    need to be in place, regardless of whether you are following the example lab or
    not. For this example, we will assume that you already have the virtual infrastructure
    components, such as the ESXi host servers, the vCenter Servers, **Active Directory**
    (**AD**)/domain controller, and SQL Server, in place and have created the virtual
    servers, ready to have their Horizon View roles installed on them.
  prefs: []
  type: TYPE_NORMAL
- en: It's probably also worth building the infrastructure for the desktop block and
    having the ESXi host server and vCenter Server already built.
  prefs: []
  type: TYPE_NORMAL
- en: There's no need to build virtual desktops yet, as we will cover that in [Chapter
    7](d42ce468-eec2-4d43-ba82-25b90b59f936.xhtml), *Building and Optimizing the Virtual
    Desktop OS*.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following diagram shows the desktop block configuration for the example
    lab:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f593bc92-54ba-41eb-8133-b46ed845c5b9.png)'
  prefs: []
  type: TYPE_IMG
- en: 'One final thing is to download the Horizon 7 software. For the example lab,
    all the software components and installation files were saved on a shared folder
    on the domain controller. You can download Horizon 7 (version 7.8) by clicking
    on the following link:'
  prefs: []
  type: TYPE_NORMAL
- en: '[https://my.vmware.com/web/vmware/info/slug/desktop_end_user_computing/vmware_horizon/7_8](https://my.vmware.com/web/vmware/info/slug/desktop_end_user_computing/vmware_horizon/7_8)'
  prefs: []
  type: TYPE_NORMAL
- en: With the lab infrastructure now in place, you can start the installation and
    configuration.
  prefs: []
  type: TYPE_NORMAL
- en: Preparing AD
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Horizon View requires AD for the authentication of users and desktops, as well
    as to make use of group policy to control and tune many aspects of your end users'
    desktops. This will be covered in later chapters.
  prefs: []
  type: TYPE_NORMAL
- en: 'As a reminder, Horizon View is compatible with the following AD functional
    domain levels:'
  prefs: []
  type: TYPE_NORMAL
- en: Windows 2008 and Windows 2008 R2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Windows 2012 and Windows 2012 R2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: When deploying your View Connection Servers, they either need to be in the same
    domain as the desktops that you are going to deploy, or in a domain with a two-way
    transitive trust of the domain where your desktops will be located.
  prefs: []
  type: TYPE_NORMAL
- en: AD user accounts
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We recommend that you also take this opportunity to create several user accounts,
    which will be needed across your installation.
  prefs: []
  type: TYPE_NORMAL
- en: These accounts will include service accounts for your View Connection Server
    Services and Composer Services. You need an AD account for View to use to log
    in and manage components within your vCenter, and a user account for View Composer
    to manage the creation of computer accounts in AD.
  prefs: []
  type: TYPE_NORMAL
- en: vCenter user accounts
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You will need an AD user account to allow View to connect to your vCenter Server.
    This account should also be added as a local admin on the vCenter Server, as we
    will be using View Composer to create linked clone desktops. Once you have created
    your user account within AD, you will need to give it user permission in your
    vCenter Server.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following table lists the permissions required by this user:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/146ed5e7-f00e-464b-8f0b-622e8019d1d2.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Let''s now add the user to the vCenter Server, by first creating a new role
    specifically for the View vCenter user, as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Log in to the vCenter Server using the VMware vSphere client. Once logged in,
    from the Home screen, click on Administration (**1**), as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b3ced797-941c-4d4e-9934-183578653384.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will now see the Roles screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/74874fd4-a3ae-4cf6-89e6-326add674e29.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next, create a new role by clicking on Roles (**2**) and then the + symbol
    (**3**). You will now see the New Role screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5542ac48-d745-4305-b844-0646dc3c10c4.png)'
  prefs: []
  type: TYPE_IMG
- en: 'From the list of options on the left-hand side, select each category you want
    to configure, and then, in the right-hand section of the screen, select each individual
    privilege. These should match those described earlier so that you configure the
    correct roles and privileges for the Horizon View vCenter user account. Once you
    have completed adding privileges to the role, click the NEXT button to continue.
    You will now see the screen in which you can give the new role a name, as shown
    in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/07198210-0de9-4b96-98e4-f064b39ba618.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next, we need to add permissions to the user account using the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: From the VMware vSphere Client home screen, under the Administration section,
    click on the option for Global Permissions (**6**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now click the + button (**7**), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/1500ae22-a236-4a5b-b23c-b00f665fbfe9.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will now see the Add Permission screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/bf9457bb-b7aa-496d-93b3-f88bd9d4aa12.png)'
  prefs: []
  type: TYPE_IMG
- en: In the User section, click the drop-down arrow (**8**) and select the domain
    in which the user resides from the list. In the example lab, this is pvolab.com.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, we are going to search for the user, `view-vc-user`, that we created in
    AD. Start to type the username into the box (**9**), next to the magnifying glass
    icon. This will automatically start the search. Once the username has been found,
    you can click on it to select it (**10**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b23b581e-8e4e-4c85-88fe-1f407ebba6ba.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You then need to select the Role for the user, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ff1a02c7-994a-469c-aebe-998284a98d10.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Role section, click the drop-down arrow (**11**), and then, from the
    options list that is displayed, click on View VC User (**12**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK to complete the configuration.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have now successfully set up a user account for Horizon View and vCenter
    Server.
  prefs: []
  type: TYPE_NORMAL
- en: View Composer user account
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You will also require an AD user for your View Composer account, as this account
    will be responsible for the addition and deletion of computer accounts for your
    clones that are linked to the domain. The following are the required AD permissions
    this user should have:'
  prefs: []
  type: TYPE_NORMAL
- en: List contents
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Read all properties
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Write all properties
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Read permissions
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Reset passwords
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Create computer objects
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Delete computer objects
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The permissions for this account need to apply at the root domain level for
    the AD container and all child objects of the container. You will also need to
    ensure that you have advanced features selected when creating this user. This
    account will be used later to configure the View Administrator for the View Composer
    connection.
  prefs: []
  type: TYPE_NORMAL
- en: View desktop Organizational Units (OUs)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Although you will have OUs already in place to support your current desktop
    environment, now is the time that you should start considering what that looks
    like and whether it will work for your new virtual environment. You should think
    about having dedicated OUs that easily allow you to configure specific group policies
    based on the requirements of the desktop pool being created.
  prefs: []
  type: TYPE_NORMAL
- en: If you are planning on still having an element of physical desktops in your
    environment, then you will need to create new OUs for the new virtual desktops.
    It's not a good idea to mix and match, in case you add policies that would not
    suit one of the environments. For example, you wouldn't want to apply a physical
    desktop policy to a virtual desktop.
  prefs: []
  type: TYPE_NORMAL
- en: IP addressing and DNS requirements
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: For your Horizon View installation, there are several requirements for IP addresses
    and DNS names used by the different View components.
  prefs: []
  type: TYPE_NORMAL
- en: 'The typical requirements for IP addresses and DNS names are summarized for
    each of the components in the following table:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f623ddff-b23f-48f3-9254-e230aad1de52.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see from the table, the suggestion is that load balancers are utilized
    to load balance connections between internal View Connection Servers as well as
    between external View Security Servers. In a smaller environment, you might decide
    to go with only one View Security Server, in which case, you would require the
    external DNS name rather than the load balancer.
  prefs: []
  type: TYPE_NORMAL
- en: In the next section, we are going to start installing the Horizon View components.
  prefs: []
  type: TYPE_NORMAL
- en: Installing Horizon View Composer Server
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'View Composer is slightly different from Connection Server roles, in that it
    is not installed as a Connection Server role, and so uses a separate installer.
    It can either be installed on the same server that vCenter Server is running on,
    or as a standalone server. You would typically install it as a standalone server
    for performance or if you are using the vCenter Server Appliance. The configuration
    recommendations for View Composer are detailed in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e382b11a-fa9e-45b0-b98d-8fca88c73d91.png)'
  prefs: []
  type: TYPE_IMG
- en: In the example lab, View Composer is going to be installed on a standalone server;
    however, you could install it directly onto the vCenter Server if the vCenter
    Server is Windows-based. A standalone Composer is used for scalability when you
    have deployed the vCenter Server Appliance. As the vCenter Server Appliance is
    Linux-based and the Composer software is Windows-based, obviously it cannot be
    installed on the vCenter Server Appliance.
  prefs: []
  type: TYPE_NORMAL
- en: It may seem a little odd to install View Composer before the first Connection
    Server is installed, but the reason it's done in this order is because, during
    the initial configuration of the first Connection Server, when you configure a
    vCenter Server, you will need to enter the details of the View Composer Server,
    if used, so that the View Connection Server can connect to it.
  prefs: []
  type: TYPE_NORMAL
- en: You now have what you need for View Composer, but before we go ahead and start
    the installation, there is one other component that needs to be configured, and
    that's a database.
  prefs: []
  type: TYPE_NORMAL
- en: Configuring SQL Server for a View Composer database
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To create a SQL database for View Composer, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Open a console to the virtual machine running SQL Server and launch the **Microsoft
    SQL Server Management Studio** application. In the example lab, the SQL Server
    is installed on the same server that we are going to install View Composer on,
    so the server name is `hzn7-cmp.pvolab.com`. You will see the login box, as shown
    in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4445947a-40f3-47d0-89d9-8d17ddf0b738.png)'
  prefs: []
  type: TYPE_IMG
- en: Log in using an account with the appropriate permissions. In this example, we
    are using the SA account. Click the Connect button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the SQL Server Management Studio screen. From the Object Explorer,
    expand the `Security` folder and select `Logins` (**1**). Right-click and select
    the New Login… option (**2**), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e4aa1ba3-0e64-4da1-8f9b-825508b4cd18.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will then see the Login – New screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a22cab85-4748-440a-b3d8-e5f7e5d93226.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Login name box (**3**), enter the new login name. In the example lab,
    the new login is going to be called `viewcomposer`. Click the radio button for
    SQL Server authentication (**4**), and then, in the Password box (**5**), enter
    a new password. Type the new password again in the Confirm password box (**6**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, uncheck the Enforce password policy box (**7**). Finally, in the Default
    database drop-down box (**8**), select the master option. We will update this
    to reflect the correct database for View Composer once we create it in the next
    step.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK once you have configured this screen. You will return to the Object
    Explorer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now that you have created the login account, you need to create a new database
    for View Composer. From the Object Explorer, select the `Databases` folder (**9**),
    right-click, and select New Database… (**10**), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e5b0c083-263a-4058-a004-b5818171b653.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will see the New Database screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ded86cf0-edbd-4b47-a188-0d49438ed127.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Database name box (**11**), type in a name for this database. In the
    example lab, the database is called `viewcomposer`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the Owner box, click the … box (**12**). You will now see the Select Database
    Owner screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/f982ea76-e429-4ede-b8df-73aeb7b3b652.png)'
  prefs: []
  type: TYPE_IMG
- en: Type `view` into the Enter the object names to select box (**13**), and then
    click the Check Names box (**14**). This will search for any entries that contain
    the word `view`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Multiple Objects Found box, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/56f15c02-592e-4a24-aba3-e4e11d88355b.png)'
  prefs: []
  type: TYPE_IMG
- en: Check the viewcomposer box (**15**). This is the login we created previously.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now click the OK button, and you will return to the Select Database Owner box,
    which will now show the `viewcomposer` user entered, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4263b931-7225-417b-b918-9b5a8efbaeaa.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Select Database Owner box, click OK to accept the database owner.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now return to the New Database screen, which will show both the Database
    name and the database Owner, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0aa1fc5b-1fb9-4cd3-8b69-e4a96bfdb221.png)'
  prefs: []
  type: TYPE_IMG
- en: Click OK to complete the process and close the New Database screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The final configuration task is to go back and edit the `viewcomposer` user
    login and enter the `viewcomposer` database details.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'From the Object Explorer, expand `Logins` (**16**) and then select the `viewcomposer`
    option (**17**). Right-click and then, from the contextual menu, select Properties
    (**18**). In the **Default database** box, click the drop-down menu (**19**) and
    select the viewcomposer option, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a56b6d35-2677-4203-969e-16d3fa1a5b9c.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the OK button to complete the configuration changes.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Before you close SQL Server Management Studio, there is one other database to
    create; so, repeat the entire process, as previously described, and create a database
    and database owner for the View events database. In the example lab, both the
    owner and database have been called `viewevents`. We will use this later in the
    chapter.
  prefs: []
  type: TYPE_NORMAL
- en: With the database configuration now complete, we can go ahead and install the
    View Composer software.
  prefs: []
  type: TYPE_NORMAL
- en: View Composer installation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In the example lab environment, we are going to install View Composer on the
    vCenter Server. Before you start the installation, ensure that you have SQL Server
    Native Client 11.0 installed, as this will be required to configure the connection
    between the View Composer Server and the SQL database. To install View Composer,
    follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Open a console to the **VCS2** vCenter Server virtual machine, and then locate
    the Horizon View installation software, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/7ec8a85c-4ecc-43e0-9fa5-4ec45a1078c2.png)'
  prefs: []
  type: TYPE_IMG
- en: Launch the `VMware-viewcomposer-7.6.0-9491669` file to start the installation.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'If you see the Open File - Security Warning message shown here, click the Run
    button to continue:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e367e27b-383d-4af1-aa09-c4b49c985cac.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will now see the Welcome to the Installation Wizard for VMware Horizon
    7 Composer screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8703c4a8-968a-409b-863b-21f7688c0b0f.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Click the Next > button to start the installation. You will now see the License
    Agreement screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/acb29adc-bd84-41b5-a2db-5ff7d7cd9b7b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Click the radio button for I accept the terms in the license agreement (**1**),
    and then click the Next > button. You will then see the Destination Folder screen
    shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/f34b66c4-75d8-4522-bc19-2eb031b39c62.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Leave the folder as the default and then click the Next > button to continue.
    You will now see the Database Information screen shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ece83efd-054c-4d19-bf43-2806ec7eb6a9.png)'
  prefs: []
  type: TYPE_IMG
- en: The first thing you need to do is to create an ODBC DSN to connect to the View
    Composer database.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the ODBC DSN Setup… button (**2**). You will now see the ODBC Data Source
    Administrator (64-bit) box shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/574385fc-1339-49b3-ba46-8eb91a5fc5c1.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the System DSN tab (**3**), and then click the Add… button (**4**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the Create New Data Source box that you now see, click the **SQL Server
    Native Client** **11.0** option (**5**), and then click the Finish button, as
    shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/cb7d9acb-74e2-4857-8f7a-d1708c42ac15.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will now see the Create a New Data Source to SQL Server box shown in the
    following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/513bc6f7-e25a-440a-b176-193be3189ba2.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Name box (**6**), type in a name for this data source. In the example
    lab, this is `viewcomposer`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Server box (**7**), click the drop-down arrow and select the SQL Server
    that you want to connect to. In the example lab, this is vcs2\sqlexpress as we
    are installing the View Composer in the vCenter Server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you need to enter the authentication details.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the With SQL Server authentication using a login ID and password entered
    by the user radio button (**8**), and then, in the Login ID box (**9**), enter
    the user login details. In the example lab, we are going to use the SA account.
    Finally, in the Password box (**10**), type in the password for the SA account,
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a1251b0c-e4ed-4c50-aa11-a23f97d464ba.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the next configuration box, you need to change the default database details
    to reflect the database for View Composer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Check the Change the default database to box (**11**), and then, in the box
    below it, click the drop-down arrow (**12**) and select the viewcomposer option.
    This should automatically populate when you click the dropdown, as shown in the
    following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c2cc80de-35a0-41d0-8fb4-79fdcaab14a8.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Click the Next > button to continue. You will see the final configuration box
    shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/f3ba169d-ee2d-412c-9fe9-93ebbadcb20d.png)'
  prefs: []
  type: TYPE_IMG
- en: Leave the settings on this screen as the defaults and then click the Finish
    button to complete the configuration.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the configuration summary shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ad450e4e-3859-43db-b87d-bc7fff71b76e.png)'
  prefs: []
  type: TYPE_IMG
- en: The final thing to do is to test the newly created connection. To do this, click
    the Test Data Source… button (**13**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You should see the Test Results box showing the `TESTS COMPLETED SUCCESSFULLY!`
    message, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8dc5ff44-66c5-4f58-bb02-a19bd50da6d0.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the OK button to complete the tests and close the Test Results box.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, click OK to close the **ODBC Microsoft SQL Server Setup** box.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now return to the ODBC Data Source Administrator screen, which will
    now show you the newly created system DSN connection to the View Composer database.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the OK button to close the ODBC Data Source Administrator screen and
    return to the View Composer installation screen and the Database Information configuration
    screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/57fd88db-7d99-4015-8465-98cfa81b1501.png)'
  prefs: []
  type: TYPE_IMG
- en: You can now enter `viewcomposer` in the DSN box (**14**) and in the Enter the
    username that you entered in the ODBC Data Source Administrator box (**15**),
    type `sa`, followed by the password for the SA account in the Enter the password
    for this database connection box (**16**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'On the VMware Horizon 7 Composer Port Settings screen, leave the SOAP Port
    setting as the default, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0e1ac058-8316-4409-a619-fb8c0605ef15.png)'
  prefs: []
  type: TYPE_IMG
- en: The **Simple Object Access Protocol** (**SOAP**) port is used by View to communicate
    with Composer in XML format. The recommendation would be to leave this setting
    as is, unless there is a specific reason for changing it.
  prefs: []
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Ready to Install the Program screen shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/32e35893-74ed-44a3-9c17-1275ad3a9853.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Install button to start the installation.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once the installation has completed, you will see the Installer Completed screen:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b12d2b4f-9eec-44e2-8bee-d5398fac8ca9.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Finish button to close the installer. If, for any reason, the installation
    of View Composer fails, installation logs are held on View Composer in the `%TEMP%\vminst.log_date_timestamp`
    folder. Additionally, MSI logs are also created and can be found in the `%TEMP%\vmmsi.log_date_timestamp`
    folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now be prompted to restart the virtual machine:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ed6e72b8-2e01-41b4-8d93-f6f6705e1f88.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Yes button to reboot the View Composer virtual machine.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'When the View Composer virtual machine has restarted, log in, and then check
    that the View Composer Service is running. To do this, press the Windows key and
    *R* to open a Run dialog box. In the box, type `services.msc`. You will now see
    the Services (Local) screen. Scroll down and check that VMware Horizon 7 Composer
    (**17**) is running, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/87e64a38-7296-435f-b906-fcd6405b4eab.png)'
  prefs: []
  type: TYPE_IMG
- en: When you are happy that the VMware Horizon 7 Composer Service is running, close
    the Services screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have now successfully installed VMware Horizon View Composer.
  prefs: []
  type: TYPE_NORMAL
- en: Installing the Horizon View Connection Server
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The View Connection Server and its other roles (Security Server, Replica Server,
    and so on) are installed on a dedicated Windows Server. The following table lists
    the recommended configuration for the Connection Server:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/40543854-84d5-4437-8b90-074edee2075d.png)'
  prefs: []
  type: TYPE_IMG
- en: The next step in setting up the example lab is to deploy the first Connection
    Server. This first instance of the Connection Server is going to be installed
    on a Windows Server 2016 virtual machine with the `HZN7-CS1` hostname that was
    built at the start of this book as part of the example lab environment. It was
    configured with a static IP address assigned to it, and then joined to the domain.
  prefs: []
  type: TYPE_NORMAL
- en: 'To install the Connection Server software, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Open a console to the `HZN7-CS1` virtual machine, and then locate the Horizon
    View installation software. In the example lab, this was saved to a shared folder
    on the Domain Controller.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Launch the`VMware-Horizon-Connection-Server-x86_64-7.6.0-9823717` file to start
    the installation.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'If you see the Open File - Security Warning message, click the Run button,
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a15ab995-7f49-4603-b156-beb4578a2a3a.png)'
  prefs: []
  type: TYPE_IMG
- en: You will now see the Welcome to the Installation Wizard for VMware Horizon 7
    Connection Server screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to start the installation. You will now see the License
    Agreement screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the I accept the terms in the license agreement radio button, and then
    click the Next > button. You will then see the Destination Folder screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Leave the folder as the default and then click the Next > button to continue.
    You will now see the Installation Options screen shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/492fa786-4043-4758-bace-3f07a4f00a40.png)'
  prefs: []
  type: TYPE_IMG
- en: As this is the first View Connection Server, from the list of Horizon 7 Connection
    Server instances, select the Horizon 7 Standard Server option from the list (**1**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: We are also going to install HTML access, so check the Install HTML Access box
    (**2**). This will allow users to access their desktops using the Blast Protocol
    from an HTML 5 web browser. The final option on this screen is to select which
    IP protocol version to use, either `IPv4` or `IPv6`. For the example lab, select
    the `IPv4` option (**3**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Remember that you cannot mix and match IPv4 and IPv6 in the same environment,
    so for the example lab, IPv4 is going to be used for all components.
  prefs: []
  type: TYPE_NORMAL
- en: Once you have selected the instance, click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Data Recovery screen shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0cddef16-f958-486f-bd8a-b8b8f68166a7.png)'
  prefs: []
  type: TYPE_IMG
- en: On the Data Recovery screen, you need to enter a password that will be used
    for the backups of the Connection Server. In the Enter data recovery password
    box (**4**), type in the password you want to use, and then type it again in the
    Re-enter password box (**5**). Finally, enter a password prompt in the Enter password
    reminder (optional) box (**6**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next > button to continue. You will now see the Firewall Configuration
    screen shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6a5707bc-77aa-41f1-b497-ed9a741e6b3a.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Configure Windows Firewall automatically radio button, and then click
    the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Windows Firewall is a requirement for Horizon View, specifically for Security
    Server-to-Connection Server communications. Under no circumstances should you
    disable the Windows Firewall service on your Connection Servers. The recommendation
    is to allow Windows Firewall to be configured automatically and then note down
    the required ports where needed.
  prefs: []
  type: TYPE_NORMAL
- en: 'You will now see the Initial Horizon 7 Administrators screen shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/41a92388-032b-4c9a-825c-2465d665aa7a.png)'
  prefs: []
  type: TYPE_IMG
- en: On this screen, you need to configure which users on your domain, or on the
    local server, are going to be configured as your first View Administrators. In
    the example lab, we are just going to use the standard Administrator account;
    however, it is recommended that you create a specific user and/or group of users
    who will have admin access to the Horizon View admin console.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Authorize a specific domain user or group radio button (**8**), and
    then, in the box below, enter the user or group name. You need to enter this in
    the format domain name\username. In the example lab, you would type in `PVOLAB\Administrator`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next > button to continue. You will now see the User Experience Improvement
    Program screen shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a69c9f75-fede-4d7f-a23a-e969f930ffac.png)'
  prefs: []
  type: TYPE_IMG
- en: The User Experience Improvement Program is an optional program that anonymously
    sends product stats to VMware. It's not a licensing check! In the example lab,
    ensure that the box is unchecked (**10**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Ready to Install the Program screen shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9b695514-c926-4e2a-ac77-708136ef8430.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Install button to start the installation process.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once the Connection Server has been installed, you will see the Installer Completed
    screen shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6a8cf675-e729-4bdf-b0f3-6e02ac3cd9a3.png)'
  prefs: []
  type: TYPE_IMG
- en: You have the option to check the Show the documentation box on this screen before
    you close it. It's recommended that you review this document, as it discusses
    the importance of valid SSL certificates in the Horizon View installation, which
    we will cover in more detail in [Chapter 6](8b824015-c1b0-4107-9c9d-dd5cdb4b3221.xhtml),
    *Securing Horizon View with SSL Certificates**.*
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If the installation fails for any reason, the installation logs are held in
    the Connection Server at `%TEMP%\vminst.log_date_timestamp`. Additionally, there
    are MSI logs created, which can be found at `%TEMP%\ vmmsi.log_date_timestamp`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Finally, click the Finish button to complete the installation and close the
    installer. You will now see an icon for the Horizon 7 Administrator Console has
    been placed on the desktop, as shown:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d2977314-3143-4082-bf93-7e72d17b8681.png)'
  prefs: []
  type: TYPE_IMG
- en: In the next section, we are going to log in to View Administrator and complete
    the initial configuration tasks.
  prefs: []
  type: TYPE_NORMAL
- en: Initial configuration of the Horizon View Connection Server
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: With the Connection Server now installed, you can now connect to the management
    console, called the **View Administrator**, and complete the initial configuration
    tasks.
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation with Adobe Flash 10.1 or higher installed, open a browser
    and enter the address details of the View Connection Server. In the example lab,
    the address to enter would be `https://hzn7-cs1.pvolab.com/admin`.
  prefs: []
  type: TYPE_NORMAL
- en: As SSL certificates have yet to be configured, you need to create a security
    exception to allow you to browse to the HTTPS page with an unsecured certificate.
    We will cover SSL certificates in [Chapter 6](8b824015-c1b0-4107-9c9d-dd5cdb4b3221.xhtml),
    *Securing Horizon View with SSL Certificates*.
  prefs: []
  type: TYPE_NORMAL
- en: 'You will now see the View Administrator login screen shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/117dae65-b653-4408-8415-8832fa4b7fd7.png)'
  prefs: []
  type: TYPE_IMG
- en: Log in to View Administrator using the Administrator account and password, ensuring
    that the domain is set to match your domain in the drop-down menu box. Now click
    the Log In button.
  prefs: []
  type: TYPE_NORMAL
- en: You should now be logged on to View Administrator for the first time. The first
    component to be configured is the product licensing.
  prefs: []
  type: TYPE_NORMAL
- en: Adding a license to the Connection Server
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In the first of the configuration tasks to complete, once the Connection Server
    has been installed, you need to add the product license to enable the relevant
    features. To do this, follow the steps described here:'
  prefs: []
  type: TYPE_NORMAL
- en: 'When you first log in, as there is no license yet installed, the admin screen
    will default to the Product Licensing and Usage section of the Inventory pane.
    At the top of the page, you will see the **Licensing** box. Click the Edit License…
    button (**1**), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/72bf78b6-bb42-4641-a08a-7d15d3bb7274.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will now see the Edit License box shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/beece9b7-5f9a-412e-9e2d-6a5afc55ad98.png)'
  prefs: []
  type: TYPE_IMG
- en: In the License serial number box, enter your license key and then click the
    OK button. In the preceding example, the license key has been partly obscured
    using `xxxxx` to hide the actual license key. When you enter the license key,
    it will appear letter for letter, on screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once you have entered your license key, you will see detailed information relating
    to it in the Licensing box. It will provide a license expiry date, along with
    all the features that are enabled with the license. In the example lab, you can
    see all the features and also the usage model, Concurrent User, in this example:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/83129693-ff8e-470f-9c17-5bf0d5ad126b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The Licensing page also shows you your current usage, as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1c30ff72-ecac-4a90-838f-3f55ca975dd1.png)'
  prefs: []
  type: TYPE_IMG
- en: This allows you to ensure you are within the remit of your purchased licenses
    and also allows you to monitor your usage, so that you can preempt an upgrade
    before reaching your limits.
  prefs: []
  type: TYPE_NORMAL
- en: Adding vCenter Server to View Administrator
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The next task is to configure the connection between View Administrator and
    vCenter Server:'
  prefs: []
  type: TYPE_NORMAL
- en: 'From the View Administrator main screen, expand the View Configuration option
    (**1**), and then select Servers (**2**). Next, from the Servers screen, ensure
    that the vCenter Servers tab is selected (**3**), and then click the Add… button
    (**4**), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9789d5b4-7efb-42e6-b2f2-a6ed52a7556f.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will now see the vCenter Server Information screen shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/245c3418-c3b5-4385-931f-decb461d7e00.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Server address box (**5**), type in the address of the vCenter Server
    you want to connect to the Connection Server. In the example lab, this is `vcs2.pvolab.com`,
    the address of the vCenter managing the virtual desktops.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, in the User name box (**6**), type in the vCenter username followed by
    the password for this account in the Password box (**7**). In this example, the
    administrator account has been used; however, you will probably want to use the
    specific user account for this that we created earlier in this chapter.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the following Invalid Certificate Detected warning box:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/aca24e7f-9a3d-4acc-9fa1-14564cfdf16e.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the View Certificate… button (**8**). You will now see the Certificate
    Information box.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Accept button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next screen is the View Composer Settings screen shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6be21741-e73c-4186-84d4-5a386b66c1a4.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You have three options to configure View Composer: Do not use View Composer,
    View Composer co-installed with vCenter Server, and Standalone View Composer Server.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For the example lab, View Composer is going to be installed on a standalone
    server, so click the Standalone View Composer Server radio button (**10**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you need to enter the details of the View Composer Server. In the Server
    address box (**11**), type in the server address. In the example lab, this is
    `vcs2.pvolab.com`. Then, type in the username for this server in the User name
    box (**12**). Remember to add this in the format domain\username, so in the example
    lab, type `pvolab\administrator` followed by the password for this user account
    in the Password box (**13**). Leave the Port box (**14**) at the default setting
    of `18443`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When you have completed the details, click the Next > button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'As with adding the vCenter Server, you will again see the following Invalid
    Certificate Detected warning box:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/1fb5be19-f833-4300-b19d-39d499e70b03.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the View Certificate... button (**15**). You will now see the Certificate
    Information box
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Accept button. You will now see the View Composer Domains configuration
    screen shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/fbabc87a-9c3d-4c91-8f04-ac5feeed631c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'On this screen, we are going to configure View Composer with access to a domain
    account to allow it to add, create, and delete computer accounts in AD. Click
    the Add… button (**17**). You will now see the Add Domain configuration box shown
    in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5f10a442-1891-4f12-a565-c2825b3346da.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Full domain name box (**18**), type in the domain name. In the example
    lab, this is `pvolab.com`. Then, in the User name box (**19**), enter the username
    that has the ability to create and delete computer objects in AD. In the example
    lab, we will use the `administrator` account.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Finally, in the Password box, type in the password for the administrator account.
    Click the OK button when you have entered the information. You will now return
    to the View Composer Domains configuration screen, which now shows the configured
    domain details, entered as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5043bc56-b557-48ba-9439-ab450d93684f.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Storage Settings configuration screen. There are two main
    elements to configure here. The first option is to configure whether or not you
    want to Reclaim VM disk space for your virtual desktops. If this is selected,
    the virtual machines will be configured with space-efficient disks, which will
    allow the reclamation of unused space.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The second option is to configure Enable View Storage Accelerator. This allows
    a specific amount of memory to be utilized as a read cache to reduce the storage
    overheads on the shared or local storage used to run the VMs. By default, this
    will be set to `1024` MB of memory per server and can be increased to up to 2GB
    per server. Alternatively, if you check the box for Show all hosts, you can then
    select individual host servers and configure the cache size differently on each
    host server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the example lab, we are going to enable the options for Reclaim VM disk
    space and Enable View Storage Accelerator, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4f3ab74e-e284-43fb-93d2-aae473668588.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Click the Next > button to continue. You will now see the Ready to Complete
    screen shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c08071fa-5d57-4d90-ac3f-0f266d22b86c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Finally, check the configuration details and then click the Finish button to
    complete the configuration. You will return to the View Administrator screen,
    which now shows the vCenter Server that was just added, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/007a6199-c8d6-4565-84c7-19e0b1f79e3c.png)'
  prefs: []
  type: TYPE_IMG
- en: View Administrator screen
  prefs: []
  type: TYPE_NORMAL
- en: You have now added a vCenter Server to Horizon View. In the next section, we
    are going to configure the View events database.
  prefs: []
  type: TYPE_NORMAL
- en: Configuring the View events database
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The final part of the initial configuration tasks is to configure the events
    database. This is where Horizon View stores all the events that take place on
    the Connection Server.
  prefs: []
  type: TYPE_NORMAL
- en: 'A database called **view-events** was created at the start of this chapter,
    and now we are going to use it in the configuration:'
  prefs: []
  type: TYPE_NORMAL
- en: 'From the View Administrator main screen and the Inventory section, expand the
    View Configuration option, and then select Event Configuration (**1**). You will
    now see the Event Configuration screen shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ae33f66b-eeb5-4137-b476-f014f9352788.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Event Database section, click the Edit… button (**2**). You will now
    see the Edit Event Database dialog box pop up, as shown in the preceding screenshot.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Database server box (**3**), enter the name of the SQL server that is
    hosting the events database. In the example lab, it's on the same server as vCenter,
    so enter `vcs2.pvolab.com` as the server name.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure that Microsoft SQL Server is selected from the drop-down menu for the
    Database type (**4**). The other option here is to set up an Oracle database.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Leave the Port setting as the default port of `1443`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Database name box (**5**), type in the name of the database. In the example
    lab, the database is called `view-events`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the User name box (**6**), type in the username for this database, and in
    the Password box (**7**), type in the password for this user, and then type it
    in again in the Confirm password box (**8**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, in the Table prefix box, you can enter a prefix name. This allows you
    to use the same events database for multiple installations. Once you have entered
    the configuration information, click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once completed, you should see the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/7c5c8a12-c215-4c62-aede-8b622c3e0bab.png)'
  prefs: []
  type: TYPE_IMG
- en: You have now successfully completed the initial Connection Server configuration
    tasks. In the next part of this chapter, we will move on to installing the other
    Connection Server roles, starting with the Replica Server.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this first part of the chapter, we have walked you through installing and
    configuring the first components of the Horizon View solution, namely the View
    Composer and the Horizon View Connection Server.
  prefs: []
  type: TYPE_NORMAL
- en: In the second part of this chapter, [Chapter 5](89619cdf-5fc7-4dd1-a431-76cef6cbb67c.xhtml),
    *Installing and Configuring Horizon 7 – Part 2*, we will continue the installation
    and install the Replica Server, the Security Server, and the Enrollment Server.
  prefs: []
  type: TYPE_NORMAL
