- en: Installing and Configuring Horizon 7 - Part 1
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装和配置Horizon 7 - 第一部分
- en: In the previous chapters, we discussed how things work and what role they play
    within Horizon View. Those were the theory chapters, if you like. But now, it's
    time to turn to the practical side of this book, instill what we have learned
    so far, and install Horizon View.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在前几章中，我们讨论了系统如何运作以及它们在Horizon View中的角色。那些可以视为理论章节。但现在，是时候转向本书的实际部分，将我们迄今为止所学的知识付诸实践，并开始安装Horizon
    View。
- en: In this chapter, we will cover the installation process for the core Horizon
    View Connection Server.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍核心Horizon View Connection Server的安装过程。
- en: Once the installation is complete, we will then move on to configuration tasks,
    so that the Horizon View environment is up and running, ready to deliver to end
    users. To help with the installation, we are going to use an example lab, which
    will guide you through the whole process step by step, using real-life screenshots.
    With that in mind, let's get started and introduce you to the example lab environment.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装完成，我们将继续进行配置任务，使Horizon View环境能够正常运行，并为最终用户提供服务。为了帮助您完成安装，我们将使用一个示例实验室，它将通过一张张实际的截图，带领您逐步完成整个过程。有了这些，我们可以开始并为您介绍示例实验室环境。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章我们将覆盖以下主题：
- en: Preparing AD
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 准备AD
- en: Installing the Horizon View Composer Server
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装Horizon View Composer服务器
- en: Installing the Horizon View Connection Server
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装Horizon View Connection Server
- en: Configuring the Horizon View Connection Server
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置Horizon View Connection Server
- en: Welcome to the lab environment
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 欢迎来到实验室环境
- en: In the practical parts of this book, you can follow the tasks and steps that
    are described using the example lab environment. If you prefer, you can use these
    guides to set up your own environment, whether that's for a proof of concept,
    a pilot, or a production deployment.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的实际部分，您可以根据示例实验室环境中的任务和步骤进行操作。如果您愿意，您也可以使用这些指南来设置自己的环境，无论是用于概念验证、试点项目，还是生产部署。
- en: What you need for the example lab
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 示例实验室所需的资源
- en: The example lab will be used across the entire book, and so this section will
    get you started with the infrastructure ready so you can build your own lab as
    you work through the chapters. If you are not planning on installing some of the
    features, such as JMP, then there is no need to install the required infrastructure
    to support this.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本书将贯穿整个示例实验室，因此这一部分将帮助您准备好基础架构，以便在逐章学习时，您可以建立自己的实验室。如果您不打算安装某些功能，例如JMP，那么就不需要安装支持这些功能的基础架构。
- en: 'We are going to start with the management block infrastructure. The example
    lab management block consists of the following infrastructure components (although,
    feel free to use different versions of the infrastructure components):'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从管理块基础架构开始。示例实验室管理块包括以下基础架构组件（当然，您也可以使用不同版本的基础架构组件）：
- en: 2 x ESXi host servers running vSphere 6.7
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 2台运行vSphere 6.7的ESXi主机服务器
- en: '14 x Windows Server 2012 R2 Enterprise Edition virtual machines for the following
    roles, which we will configure in this chapter:'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 14台Windows Server 2012 R2企业版虚拟机，用于以下角色，这些角色将在本章中进行配置：
- en: 'Domain controller (`hostname: dc.pvolab.com`)'
  id: totrans-16
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '域控制器（`hostname: dc.pvolab.com`）'
- en: 'Connection Server (`hostname: hzn7-cs1.pvolab.com`)'
  id: totrans-17
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '连接服务器（`hostname: hzn7-cs1.pvolab.com`）'
- en: 'Security Server (`hostname: hzn7-ss1.pvolab.com`)'
  id: totrans-18
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '安全服务器（`hostname: hzn7-ss1.pvolab.com`）'
- en: 'Replica Server (`hostname: hzn7-cs2.pvolab.com`)'
  id: totrans-19
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '副本服务器（`hostname: hzn7-cs2.pvolab.com`）'
- en: Connection Server for second site CPA (`hzn7-cs1b`)
  id: totrans-20
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二站点CPA的连接服务器（`hzn7-cs1b`）
- en: 'View Composer (`hostname: hzn7-cmp.pvolab.com`)'
  id: totrans-21
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'View Composer（`hostname: hzn7-cmp.pvolab.com`）'
- en: 'Enrolment Server (`hostname: hzn7-enroll.pvolab.com`)'
  id: totrans-22
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '注册服务器（`hostname: hzn7-enroll.pvolab.com`）'
- en: Certificate of authority server (`hzn7-certs.pvolab.com`)
  id: totrans-23
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 证书授权服务器（`hzn7-certs.pvolab.com`）
- en: RDSH Server for hosting desktop sessions (`rdsh-desktops.pvolab.com`)
  id: totrans-24
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用于托管桌面会话的RDSH服务器（`rdsh-desktops.pvolab.com`）
- en: RDSH Server for hosting applications (`rdsh-apps.pvolab.com`)
  id: totrans-25
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用于托管应用程序的RDSH服务器（`rdsh-apps.pvolab.com`）
- en: JMP Server (`hzn7-jmp.pvolab.com`)
  id: totrans-26
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: JMP服务器（`hzn7-jmp.pvolab.com`）
- en: SQL Express 2012 instance with 3 x databases (one for View Composer, one for
    the events database installed on the Composer Server, and one for the JMP server)
  id: totrans-27
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: SQL Express 2012实例，包含3个数据库（一个用于View Composer，一个用于Composer Server上的事件数据库，另一个用于JMP服务器）
- en: 2 x vCenter Servers (one for the management block (`vcs1.pvolab.com`), and one
    for the desktop block (`vcs2.pvolab.com`))
  id: totrans-28
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 2个vCenter服务器（一个用于管理块（`vcs1.pvolab.com`），另一个用于桌面块（`vcs2.pvolab.com`））
- en: 'All machines should be domain-joined, except for the Security Server. The lab
    should look something like the following diagram:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 除了安全服务器外，所有机器都应加入域。实验室应类似于以下图示：
- en: '![](img/1f8a688a-26ad-42b5-b136-91f3ce76d1a8.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1f8a688a-26ad-42b5-b136-91f3ce76d1a8.png)'
- en: Before we get started and install anything, there are a few prerequisites that
    need to be in place, regardless of whether you are following the example lab or
    not. For this example, we will assume that you already have the virtual infrastructure
    components, such as the ESXi host servers, the vCenter Servers, **Active Directory**
    (**AD**)/domain controller, and SQL Server, in place and have created the virtual
    servers, ready to have their Horizon View roles installed on them.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始安装之前，无论您是否按照示例实验室进行操作，都有一些先决条件需要就位。对于本示例，我们假设您已经搭建好了虚拟基础设施组件，如 ESXi 主机服务器、vCenter
    服务器、**活动目录**（**AD**）/域控制器和 SQL 服务器，并且已经创建了虚拟服务器，准备在其上安装 Horizon View 角色。
- en: It's probably also worth building the infrastructure for the desktop block and
    having the ESXi host server and vCenter Server already built.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 可能还值得为桌面块构建基础设施，并确保 ESXi 主机服务器和 vCenter 服务器已构建完成。
- en: There's no need to build virtual desktops yet, as we will cover that in [Chapter
    7](d42ce468-eec2-4d43-ba82-25b90b59f936.xhtml), *Building and Optimizing the Virtual
    Desktop OS*.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 目前无需构建虚拟桌面，因为我们将在[第七章](d42ce468-eec2-4d43-ba82-25b90b59f936.xhtml)中讨论此内容，*构建和优化虚拟桌面操作系统*。
- en: 'The following diagram shows the desktop block configuration for the example
    lab:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图示展示了示例实验室的桌面块配置：
- en: '![](img/f593bc92-54ba-41eb-8133-b46ed845c5b9.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f593bc92-54ba-41eb-8133-b46ed845c5b9.png)'
- en: 'One final thing is to download the Horizon 7 software. For the example lab,
    all the software components and installation files were saved on a shared folder
    on the domain controller. You can download Horizon 7 (version 7.8) by clicking
    on the following link:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一步是下载 Horizon 7 软件。对于这个示例实验室，所有软件组件和安装文件都已保存在域控制器上的共享文件夹中。您可以通过点击以下链接下载 Horizon
    7（版本 7.8）：
- en: '[https://my.vmware.com/web/vmware/info/slug/desktop_end_user_computing/vmware_horizon/7_8](https://my.vmware.com/web/vmware/info/slug/desktop_end_user_computing/vmware_horizon/7_8)'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://my.vmware.com/web/vmware/info/slug/desktop_end_user_computing/vmware_horizon/7_8](https://my.vmware.com/web/vmware/info/slug/desktop_end_user_computing/vmware_horizon/7_8)'
- en: With the lab infrastructure now in place, you can start the installation and
    configuration.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在实验室基础设施搭建完成后，您可以开始安装和配置。
- en: Preparing AD
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备 AD
- en: Horizon View requires AD for the authentication of users and desktops, as well
    as to make use of group policy to control and tune many aspects of your end users'
    desktops. This will be covered in later chapters.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: Horizon View 需要 AD 来进行用户和桌面的身份验证，并利用组策略控制和调整终端用户桌面的许多方面。此内容将在后续章节中讨论。
- en: 'As a reminder, Horizon View is compatible with the following AD functional
    domain levels:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 提醒一下，Horizon View 兼容以下 AD 功能域级别：
- en: Windows 2008 and Windows 2008 R2
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows 2008 和 Windows 2008 R2
- en: Windows 2012 and Windows 2012 R2
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows 2012 和 Windows 2012 R2
- en: When deploying your View Connection Servers, they either need to be in the same
    domain as the desktops that you are going to deploy, or in a domain with a two-way
    transitive trust of the domain where your desktops will be located.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 部署 View 连接服务器时，它们需要与您要部署的桌面处于同一域中，或者处于与桌面所在域具有双向传递信任关系的域中。
- en: AD user accounts
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: AD 用户账户
- en: We recommend that you also take this opportunity to create several user accounts,
    which will be needed across your installation.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 我们建议您也利用这个机会创建几个用户账户，这些账户将在您的安装过程中使用。
- en: These accounts will include service accounts for your View Connection Server
    Services and Composer Services. You need an AD account for View to use to log
    in and manage components within your vCenter, and a user account for View Composer
    to manage the creation of computer accounts in AD.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 这些账户将包括用于您的 View 连接服务器服务和 Composer 服务的服务账户。您需要一个 AD 账户，用于 View 登录并管理您 vCenter
    中的组件，同时还需要一个用户账户，用于 View Composer 管理 AD 中计算机账户的创建。
- en: vCenter user accounts
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: vCenter 用户账户
- en: You will need an AD user account to allow View to connect to your vCenter Server.
    This account should also be added as a local admin on the vCenter Server, as we
    will be using View Composer to create linked clone desktops. Once you have created
    your user account within AD, you will need to give it user permission in your
    vCenter Server.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
- en: 'The following table lists the permissions required by this user:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/146ed5e7-f00e-464b-8f0b-622e8019d1d2.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
- en: 'Let''s now add the user to the vCenter Server, by first creating a new role
    specifically for the View vCenter user, as follows:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
- en: 'Log in to the vCenter Server using the VMware vSphere client. Once logged in,
    from the Home screen, click on Administration (**1**), as shown in the following
    screenshot:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b3ced797-941c-4d4e-9934-183578653384.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
- en: 'You will now see the Roles screen, as shown in the following screenshot:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/74874fd4-a3ae-4cf6-89e6-326add674e29.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
- en: 'Next, create a new role by clicking on Roles (**2**) and then the + symbol
    (**3**). You will now see the New Role screen, as shown in the following screenshot:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5542ac48-d745-4305-b844-0646dc3c10c4.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
- en: 'From the list of options on the left-hand side, select each category you want
    to configure, and then, in the right-hand section of the screen, select each individual
    privilege. These should match those described earlier so that you configure the
    correct roles and privileges for the Horizon View vCenter user account. Once you
    have completed adding privileges to the role, click the NEXT button to continue.
    You will now see the screen in which you can give the new role a name, as shown
    in the following screenshot:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/07198210-0de9-4b96-98e4-f064b39ba618.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
- en: 'Next, we need to add permissions to the user account using the following steps:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
- en: From the VMware vSphere Client home screen, under the Administration section,
    click on the option for Global Permissions (**6**).
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now click the + button (**7**), as shown in the following screenshot:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/1500ae22-a236-4a5b-b23c-b00f665fbfe9.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
- en: 'You will now see the Add Permission screen, as shown in the following screenshot:'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/bf9457bb-b7aa-496d-93b3-f88bd9d4aa12.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
- en: In the User section, click the drop-down arrow (**8**) and select the domain
    in which the user resides from the list. In the example lab, this is pvolab.com.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, we are going to search for the user, `view-vc-user`, that we created in
    AD. Start to type the username into the box (**9**), next to the magnifying glass
    icon. This will automatically start the search. Once the username has been found,
    you can click on it to select it (**10**).
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b23b581e-8e4e-4c85-88fe-1f407ebba6ba.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
- en: 'You then need to select the Role for the user, as shown in the following screenshot:'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ff1a02c7-994a-469c-aebe-998284a98d10.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
- en: In the Role section, click the drop-down arrow (**11**), and then, from the
    options list that is displayed, click on View VC User (**12**).
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK to complete the configuration.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have now successfully set up a user account for Horizon View and vCenter
    Server.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在已经成功为 Horizon View 和 vCenter 服务器设置了一个用户帐户。
- en: View Composer user account
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: View Composer 用户帐户
- en: 'You will also require an AD user for your View Composer account, as this account
    will be responsible for the addition and deletion of computer accounts for your
    clones that are linked to the domain. The following are the required AD permissions
    this user should have:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 你还需要为你的 View Composer 帐户提供一个 AD 用户，因为该帐户将负责为与你的域连接的克隆计算机帐户添加和删除。以下是该用户应具有的必需
    AD 权限：
- en: List contents
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列出内容
- en: Read all properties
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读所有属性
- en: Write all properties
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 写入所有属性
- en: Read permissions
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阅读权限
- en: Reset passwords
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重置密码
- en: Create computer objects
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建计算机对象
- en: Delete computer objects
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除计算机对象
- en: The permissions for this account need to apply at the root domain level for
    the AD container and all child objects of the container. You will also need to
    ensure that you have advanced features selected when creating this user. This
    account will be used later to configure the View Administrator for the View Composer
    connection.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 该帐户的权限需要应用于 AD 容器的根域级别以及该容器的所有子对象。你还需要确保在创建此用户时已选择高级功能。此帐户将在后续配置 View Composer
    连接的 View Administrator 时使用。
- en: View desktop Organizational Units (OUs)
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: View 桌面组织单位（OUs）
- en: Although you will have OUs already in place to support your current desktop
    environment, now is the time that you should start considering what that looks
    like and whether it will work for your new virtual environment. You should think
    about having dedicated OUs that easily allow you to configure specific group policies
    based on the requirements of the desktop pool being created.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管你已经有了支持当前桌面环境的 OUs，但现在是时候开始考虑这些 OUs 是否适用于你新的虚拟环境了。你应该考虑使用专用的 OUs，以便根据正在创建的桌面池的要求轻松配置特定的组策略。
- en: If you are planning on still having an element of physical desktops in your
    environment, then you will need to create new OUs for the new virtual desktops.
    It's not a good idea to mix and match, in case you add policies that would not
    suit one of the environments. For example, you wouldn't want to apply a physical
    desktop policy to a virtual desktop.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你计划在环境中仍然保留一定数量的物理桌面，那么你需要为新的虚拟桌面创建新的组织单位（OUs）。最好不要将两者混合使用，以免你应用了不适合某一环境的策略。例如，你不会希望将物理桌面策略应用到虚拟桌面上。
- en: IP addressing and DNS requirements
  id: totrans-88
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: IP 地址和 DNS 要求
- en: For your Horizon View installation, there are several requirements for IP addresses
    and DNS names used by the different View components.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 对于你的 Horizon View 安装，有几个 IP 地址和 DNS 名称要求，适用于不同的 View 组件。
- en: 'The typical requirements for IP addresses and DNS names are summarized for
    each of the components in the following table:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 各组件的 IP 地址和 DNS 名称的典型要求汇总如下表：
- en: '![](img/f623ddff-b23f-48f3-9254-e230aad1de52.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f623ddff-b23f-48f3-9254-e230aad1de52.png)'
- en: As you can see from the table, the suggestion is that load balancers are utilized
    to load balance connections between internal View Connection Servers as well as
    between external View Security Servers. In a smaller environment, you might decide
    to go with only one View Security Server, in which case, you would require the
    external DNS name rather than the load balancer.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你从表格中看到的，建议使用负载均衡器来平衡内部视图连接服务器之间的连接，以及外部视图安全服务器之间的连接。在较小的环境中，你可能会决定只使用一个视图安全服务器，这种情况下，你需要使用外部
    DNS 名称，而不是负载均衡器。
- en: In the next section, we are going to start installing the Horizon View components.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一部分，我们将开始安装 Horizon View 组件。
- en: Installing Horizon View Composer Server
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Horizon View Composer 服务器
- en: 'View Composer is slightly different from Connection Server roles, in that it
    is not installed as a Connection Server role, and so uses a separate installer.
    It can either be installed on the same server that vCenter Server is running on,
    or as a standalone server. You would typically install it as a standalone server
    for performance or if you are using the vCenter Server Appliance. The configuration
    recommendations for View Composer are detailed in the following screenshot:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: View Composer 与连接服务器角色略有不同，因为它不是作为连接服务器角色安装的，因此使用了一个单独的安装程序。它可以安装在运行 vCenter
    服务器的同一服务器上，或作为独立服务器安装。通常，你会选择将其安装为独立服务器，以提高性能，或者如果你使用的是 vCenter Server Appliance。View
    Composer 的配置建议在以下屏幕截图中详细介绍：
- en: '![](img/e382b11a-fa9e-45b0-b98d-8fca88c73d91.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e382b11a-fa9e-45b0-b98d-8fca88c73d91.png)'
- en: In the example lab, View Composer is going to be installed on a standalone server;
    however, you could install it directly onto the vCenter Server if the vCenter
    Server is Windows-based. A standalone Composer is used for scalability when you
    have deployed the vCenter Server Appliance. As the vCenter Server Appliance is
    Linux-based and the Composer software is Windows-based, obviously it cannot be
    installed on the vCenter Server Appliance.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 在示例实验室中，View Composer 将安装在独立服务器上；然而，如果 vCenter Server 是基于 Windows 的，你也可以直接将其安装到
    vCenter Server 上。独立的 Composer 用于在你部署了 vCenter Server Appliance 时提供可扩展性。由于 vCenter
    Server Appliance 是基于 Linux 的，而 Composer 软件是基于 Windows 的，因此显然无法将其安装在 vCenter Server
    Appliance 上。
- en: It may seem a little odd to install View Composer before the first Connection
    Server is installed, but the reason it's done in this order is because, during
    the initial configuration of the first Connection Server, when you configure a
    vCenter Server, you will need to enter the details of the View Composer Server,
    if used, so that the View Connection Server can connect to it.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装第一个 Connection Server 之前安装 View Composer 可能看起来有点奇怪，但这样做的原因是，在首次配置 Connection
    Server 时，当你配置 vCenter Server 时，你需要输入 View Composer Server 的详细信息（如果使用的话），以便 View
    Connection Server 可以与其连接。
- en: You now have what you need for View Composer, but before we go ahead and start
    the installation, there is one other component that needs to be configured, and
    that's a database.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经准备好 View Composer 所需的内容，但在继续安装之前，还有一个组件需要配置，那就是数据库。
- en: Configuring SQL Server for a View Composer database
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置 SQL Server 用于 View Composer 数据库
- en: 'To create a SQL database for View Composer, follow these steps:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 为了为 View Composer 创建 SQL 数据库，按照以下步骤操作：
- en: 'Open a console to the virtual machine running SQL Server and launch the **Microsoft
    SQL Server Management Studio** application. In the example lab, the SQL Server
    is installed on the same server that we are going to install View Composer on,
    so the server name is `hzn7-cmp.pvolab.com`. You will see the login box, as shown
    in the following screenshot:'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开运行 SQL Server 的虚拟机的控制台，并启动 **Microsoft SQL Server Management Studio** 应用程序。在示例实验室中，SQL
    Server 安装在我们将要安装 View Composer 的同一台服务器上，因此服务器名称为 `hzn7-cmp.pvolab.com`。你将看到登录框，如下图所示：
- en: '![](img/4445947a-40f3-47d0-89d9-8d17ddf0b738.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4445947a-40f3-47d0-89d9-8d17ddf0b738.png)'
- en: Log in using an account with the appropriate permissions. In this example, we
    are using the SA account. Click the Connect button.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用具有适当权限的账户登录。在此示例中，我们使用的是 SA 账户。点击“连接”按钮。
- en: 'You will now see the SQL Server Management Studio screen. From the Object Explorer,
    expand the `Security` folder and select `Logins` (**1**). Right-click and select
    the New Login… option (**2**), as shown in the following screenshot:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你将看到 SQL Server Management Studio 屏幕。从对象资源管理器中，展开 `Security` 文件夹并选择 `Logins`
    (**1**)。右键点击并选择“新建登录…”选项 (**2**)，如下图所示：
- en: '![](img/e4aa1ba3-0e64-4da1-8f9b-825508b4cd18.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e4aa1ba3-0e64-4da1-8f9b-825508b4cd18.png)'
- en: 'You will then see the Login – New screen, as shown in the following screenshot:'
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，你将看到登录–新建屏幕，如下图所示：
- en: '![](img/a22cab85-4748-440a-b3d8-e5f7e5d93226.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a22cab85-4748-440a-b3d8-e5f7e5d93226.png)'
- en: In the Login name box (**3**), enter the new login name. In the example lab,
    the new login is going to be called `viewcomposer`. Click the radio button for
    SQL Server authentication (**4**), and then, in the Password box (**5**), enter
    a new password. Type the new password again in the Confirm password box (**6**).
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在登录名框 (**3**) 中，输入新的登录名。在示例实验室中，新的登录名将为 `viewcomposer`。点击 SQL Server 身份验证的单选按钮
    (**4**)，然后在密码框 (**5**) 中输入新密码。再在确认密码框 (**6**) 中输入新密码。
- en: Next, uncheck the Enforce password policy box (**7**). Finally, in the Default
    database drop-down box (**8**), select the master option. We will update this
    to reflect the correct database for View Composer once we create it in the next
    step.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，取消选中“强制密码策略”框 (**7**)。最后，在默认数据库下拉框 (**8**) 中，选择“master”选项。我们将在下一步创建数据库时更新此项，以反映
    View Composer 的正确数据库。
- en: Click OK once you have configured this screen. You will return to the Object
    Explorer.
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置完成后，点击“确定”按钮，你将返回到对象资源管理器。
- en: 'Now that you have created the login account, you need to create a new database
    for View Composer. From the Object Explorer, select the `Databases` folder (**9**),
    right-click, and select New Database… (**10**), as shown in the following screenshot:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你已经创建了登录账户，接下来需要为 View Composer 创建一个新数据库。从对象资源管理器中，选择 `Databases` 文件夹 (**9**)，右键点击并选择“新建数据库…”
    (**10**)，如下图所示：
- en: '![](img/e5b0c083-263a-4058-a004-b5818171b653.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e5b0c083-263a-4058-a004-b5818171b653.png)'
- en: 'You will see the New Database screen, as shown in the following screenshot:'
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将看到“新建数据库”屏幕，如下图所示：
- en: '![](img/ded86cf0-edbd-4b47-a188-0d49438ed127.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ded86cf0-edbd-4b47-a188-0d49438ed127.png)'
- en: In the Database name box (**11**), type in a name for this database. In the
    example lab, the database is called `viewcomposer`.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“数据库名称”框（**11**）中，输入此数据库的名称。在示例实验中，数据库命名为 `viewcomposer`。
- en: 'In the Owner box, click the … box (**12**). You will now see the Select Database
    Owner screen, as shown in the following screenshot:'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“所有者”框中，点击“…”框（**12**）。现在您将看到选择数据库所有者屏幕，如下图所示：
- en: '![](img/f982ea76-e429-4ede-b8df-73aeb7b3b652.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f982ea76-e429-4ede-b8df-73aeb7b3b652.png)'
- en: Type `view` into the Enter the object names to select box (**13**), and then
    click the Check Names box (**14**). This will search for any entries that contain
    the word `view`.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“输入要选择的对象名称”框中输入 `view`（**13**），然后点击“检查名称”框（**14**）。这将搜索所有包含 `view` 字段的条目。
- en: 'You will now see the Multiple Objects Found box, as shown in the following
    screenshot:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您将看到“找到多个对象”框，如下图所示：
- en: '![](img/56f15c02-592e-4a24-aba3-e4e11d88355b.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](img/56f15c02-592e-4a24-aba3-e4e11d88355b.png)'
- en: Check the viewcomposer box (**15**). This is the login we created previously.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 勾选 viewcomposer 框（**15**）。这是我们之前创建的登录项。
- en: 'Now click the OK button, and you will return to the Select Database Owner box,
    which will now show the `viewcomposer` user entered, as shown in the following
    screenshot:'
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在点击“确定”按钮，您将返回到“选择数据库所有者”框，框中将显示输入的 `viewcomposer` 用户，如下图所示：
- en: '![](img/4263b931-7225-417b-b918-9b5a8efbaeaa.png)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4263b931-7225-417b-b918-9b5a8efbaeaa.png)'
- en: In the Select Database Owner box, click OK to accept the database owner.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“选择数据库所有者”框中，点击“确定”以接受数据库所有者。
- en: 'You will now return to the New Database screen, which will show both the Database
    name and the database Owner, as shown in the following screenshot:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您将返回到“新建数据库”屏幕，该屏幕将显示数据库名称和数据库所有者，如下图所示：
- en: '![](img/0aa1fc5b-1fb9-4cd3-8b69-e4a96bfdb221.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0aa1fc5b-1fb9-4cd3-8b69-e4a96bfdb221.png)'
- en: Click OK to complete the process and close the New Database screen.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“确定”以完成该过程并关闭“新建数据库”屏幕。
- en: The final configuration task is to go back and edit the `viewcomposer` user
    login and enter the `viewcomposer` database details.
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 最后的配置任务是返回并编辑 `viewcomposer` 用户登录，并输入 `viewcomposer` 数据库的详细信息。
- en: 'From the Object Explorer, expand `Logins` (**16**) and then select the `viewcomposer`
    option (**17**). Right-click and then, from the contextual menu, select Properties
    (**18**). In the **Default database** box, click the drop-down menu (**19**) and
    select the viewcomposer option, as shown in the following screenshot:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从对象资源管理器中，展开 `Logins`（**16**），然后选择 `viewcomposer` 选项（**17**）。右键单击并从上下文菜单中选择“属性”（**18**）。在
    **默认数据库** 框中，点击下拉菜单（**19**）并选择 viewcomposer 选项，如下图所示：
- en: '![](img/a56b6d35-2677-4203-969e-16d3fa1a5b9c.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a56b6d35-2677-4203-969e-16d3fa1a5b9c.png)'
- en: Click the OK button to complete the configuration changes.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“确定”按钮以完成配置更改。
- en: Before you close SQL Server Management Studio, there is one other database to
    create; so, repeat the entire process, as previously described, and create a database
    and database owner for the View events database. In the example lab, both the
    owner and database have been called `viewevents`. We will use this later in the
    chapter.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在关闭 SQL Server Management Studio 之前，还需要创建一个其他数据库；因此，按照之前描述的整个过程重复操作，创建一个数据库以及
    View 事件数据库的数据库所有者。在示例实验中，所有者和数据库都被命名为 `viewevents`。我们将在本章后面使用此数据库。
- en: With the database configuration now complete, we can go ahead and install the
    View Composer software.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 数据库配置完成后，我们可以继续安装 View Composer 软件。
- en: View Composer installation
  id: totrans-135
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: View Composer 安装
- en: 'In the example lab environment, we are going to install View Composer on the
    vCenter Server. Before you start the installation, ensure that you have SQL Server
    Native Client 11.0 installed, as this will be required to configure the connection
    between the View Composer Server and the SQL database. To install View Composer,
    follow these steps:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 在示例实验环境中，我们将要在 vCenter 服务器上安装 View Composer。在开始安装之前，请确保已经安装了 SQL Server Native
    Client 11.0，因为这将用于配置 View Composer 服务器与 SQL 数据库之间的连接。要安装 View Composer，请按照以下步骤操作：
- en: 'Open a console to the **VCS2** vCenter Server virtual machine, and then locate
    the Horizon View installation software, as shown in the following screenshot:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开到 **VCS2** vCenter Server 虚拟机的控制台，然后找到 Horizon View 安装软件，如下图所示：
- en: '![](img/7ec8a85c-4ecc-43e0-9fa5-4ec45a1078c2.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7ec8a85c-4ecc-43e0-9fa5-4ec45a1078c2.png)'
- en: Launch the `VMware-viewcomposer-7.6.0-9491669` file to start the installation.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动`VMware-viewcomposer-7.6.0-9491669`文件开始安装。
- en: 'If you see the Open File - Security Warning message shown here, click the Run
    button to continue:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您看到“打开文件 - 安全警告”消息，如下所示，点击“Run”按钮继续：
- en: '![](img/e367e27b-383d-4af1-aa09-c4b49c985cac.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e367e27b-383d-4af1-aa09-c4b49c985cac.png)'
- en: 'You will now see the Welcome to the Installation Wizard for VMware Horizon
    7 Composer screen, as shown in the following screenshot:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您将看到“欢迎使用 VMware Horizon 7 Composer 安装向导”屏幕，如下图所示：
- en: '![](img/8703c4a8-968a-409b-863b-21f7688c0b0f.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8703c4a8-968a-409b-863b-21f7688c0b0f.png)'
- en: 'Click the Next > button to start the installation. You will now see the License
    Agreement screen, as shown in the following screenshot:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“Next >”按钮开始安装。您将看到“许可证协议”屏幕，如下图所示：
- en: '![](img/acb29adc-bd84-41b5-a2db-5ff7d7cd9b7b.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![](img/acb29adc-bd84-41b5-a2db-5ff7d7cd9b7b.png)'
- en: 'Click the radio button for I accept the terms in the license agreement (**1**),
    and then click the Next > button. You will then see the Destination Folder screen
    shown in the following screenshot:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选中“我接受许可证协议中的条款”（**1**）单选按钮，然后点击“Next >”按钮。接下来，您将看到“目标文件夹”屏幕，如下图所示：
- en: '![](img/f34b66c4-75d8-4522-bc19-2eb031b39c62.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f34b66c4-75d8-4522-bc19-2eb031b39c62.png)'
- en: 'Leave the folder as the default and then click the Next > button to continue.
    You will now see the Database Information screen shown in the following screenshot:'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保持文件夹为默认值，然后点击“Next >”按钮继续。您将看到“数据库信息”屏幕，如下图所示：
- en: '![](img/ece83efd-054c-4d19-bf43-2806ec7eb6a9.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ece83efd-054c-4d19-bf43-2806ec7eb6a9.png)'
- en: The first thing you need to do is to create an ODBC DSN to connect to the View
    Composer database.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您首先需要创建一个 ODBC DSN 来连接到 View Composer 数据库。
- en: 'Click the ODBC DSN Setup… button (**2**). You will now see the ODBC Data Source
    Administrator (64-bit) box shown in the following screenshot:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“Odbc DSN 设置...”按钮（**2**）。您将看到“ODBC 数据源管理器（64 位）”框，如下图所示：
- en: '![](img/574385fc-1339-49b3-ba46-8eb91a5fc5c1.png)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![](img/574385fc-1339-49b3-ba46-8eb91a5fc5c1.png)'
- en: Click the System DSN tab (**3**), and then click the Add… button (**4**).
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“System DSN”标签页（**3**），然后点击“Add…”按钮（**4**）。
- en: 'In the Create New Data Source box that you now see, click the **SQL Server
    Native Client** **11.0** option (**5**), and then click the Finish button, as
    shown in the following screenshot:'
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您现在看到的“创建新数据源”框中，点击**SQL Server Native Client** **11.0** 选项（**5**），然后点击“Finish”按钮，如下图所示：
- en: '![](img/cb7d9acb-74e2-4857-8f7a-d1708c42ac15.png)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cb7d9acb-74e2-4857-8f7a-d1708c42ac15.png)'
- en: 'You will now see the Create a New Data Source to SQL Server box shown in the
    following screenshot:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您将看到“创建新的 SQL Server 数据源”框，如下图所示：
- en: '![](img/513bc6f7-e25a-440a-b176-193be3189ba2.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![](img/513bc6f7-e25a-440a-b176-193be3189ba2.png)'
- en: In the Name box (**6**), type in a name for this data source. In the example
    lab, this is `viewcomposer`.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“名称”框（**6**）中，输入该数据源的名称。在示例实验室中，这个名称是 `viewcomposer`。
- en: In the Server box (**7**), click the drop-down arrow and select the SQL Server
    that you want to connect to. In the example lab, this is vcs2\sqlexpress as we
    are installing the View Composer in the vCenter Server.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“服务器”框（**7**）中，点击下拉箭头，选择要连接的 SQL Server。在示例实验室中，这是 vcs2\sqlexpress，因为我们正在 vCenter
    Server 中安装 View Composer。
- en: Click the Next > button to continue.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“Next >”按钮继续。
- en: Next, you need to enter the authentication details.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您需要输入身份验证详细信息。
- en: 'Click the With SQL Server authentication using a login ID and password entered
    by the user radio button (**8**), and then, in the Login ID box (**9**), enter
    the user login details. In the example lab, we are going to use the SA account.
    Finally, in the Password box (**10**), type in the password for the SA account,
    as shown in the following screenshot:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“使用用户输入的登录 ID 和密码进行 SQL Server 身份验证”单选按钮（**8**），然后在“登录 ID”框（**9**）中输入用户登录详细信息。在示例实验室中，我们将使用
    SA 帐户。最后，在“密码”框（**10**）中，输入 SA 帐户的密码，如下图所示：
- en: '![](img/a1251b0c-e4ed-4c50-aa11-a23f97d464ba.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a1251b0c-e4ed-4c50-aa11-a23f97d464ba.png)'
- en: Click the Next > button to continue.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“Next >”按钮继续。
- en: In the next configuration box, you need to change the default database details
    to reflect the database for View Composer.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个配置框中，您需要更改默认的数据库详细信息，以反映 View Composer 的数据库。
- en: 'Check the Change the default database to box (**11**), and then, in the box
    below it, click the drop-down arrow (**12**) and select the viewcomposer option.
    This should automatically populate when you click the dropdown, as shown in the
    following screenshot:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 勾选“更改默认数据库为”框（**11**），然后在其下方的框中点击下拉箭头（**12**），并选择 viewcomposer 选项。点击下拉框时，这一选项应自动填充，如下图所示：
- en: '![](img/c2cc80de-35a0-41d0-8fb4-79fdcaab14a8.png)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c2cc80de-35a0-41d0-8fb4-79fdcaab14a8.png)'
- en: 'Click the Next > button to continue. You will see the final configuration box
    shown in the following screenshot:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步 >”按钮继续。你将看到如下所示的最终配置框：
- en: '![](img/f3ba169d-ee2d-412c-9fe9-93ebbadcb20d.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f3ba169d-ee2d-412c-9fe9-93ebbadcb20d.png)'
- en: Leave the settings on this screen as the defaults and then click the Finish
    button to complete the configuration.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保留此屏幕上的设置为默认值，然后点击“完成”按钮以完成配置。
- en: 'You will now see the configuration summary shown in the following screenshot:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在会看到如下所示的配置摘要：
- en: '![](img/ad450e4e-3859-43db-b87d-bc7fff71b76e.png)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ad450e4e-3859-43db-b87d-bc7fff71b76e.png)'
- en: The final thing to do is to test the newly created connection. To do this, click
    the Test Data Source… button (**13**).
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后一步是测试新创建的连接。为此，点击“测试数据源…”按钮（**13**）。
- en: 'You should see the Test Results box showing the `TESTS COMPLETED SUCCESSFULLY!`
    message, as shown in the following screenshot:'
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你应该看到测试结果框中显示`TESTS COMPLETED SUCCESSFULLY!`消息，如下截图所示：
- en: '![](img/8dc5ff44-66c5-4f58-bb02-a19bd50da6d0.png)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8dc5ff44-66c5-4f58-bb02-a19bd50da6d0.png)'
- en: Click the OK button to complete the tests and close the Test Results box.
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“确定”按钮以完成测试并关闭测试结果框。
- en: Next, click OK to close the **ODBC Microsoft SQL Server Setup** box.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，点击“确定”按钮以关闭**ODBC Microsoft SQL Server 设置**框。
- en: You will now return to the ODBC Data Source Administrator screen, which will
    now show you the newly created system DSN connection to the View Composer database.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在将返回 ODBC 数据源管理员界面，在该界面中，你可以看到新创建的系统 DSN 连接到 View Composer 数据库。
- en: 'Click the OK button to close the ODBC Data Source Administrator screen and
    return to the View Composer installation screen and the Database Information configuration
    screen, as shown in the following screenshot:'
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“确定”按钮以关闭 ODBC 数据源管理员界面，返回 View Composer 安装界面及数据库信息配置界面，如下所示：
- en: '![](img/57fd88db-7d99-4015-8465-98cfa81b1501.png)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![](img/57fd88db-7d99-4015-8465-98cfa81b1501.png)'
- en: You can now enter `viewcomposer` in the DSN box (**14**) and in the Enter the
    username that you entered in the ODBC Data Source Administrator box (**15**),
    type `sa`, followed by the password for the SA account in the Enter the password
    for this database connection box (**16**).
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你可以在数据源名称（DSN）框中输入`viewcomposer`（**14**），并在“请输入在 ODBC 数据源管理员框中输入的用户名”框（**15**）中输入`sa`，接着在“请输入该数据库连接的密码”框（**16**）中输入
    SA 账户的密码。
- en: Click the Next > button to continue.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步 >”按钮继续。
- en: 'On the VMware Horizon 7 Composer Port Settings screen, leave the SOAP Port
    setting as the default, as shown in the following screenshot:'
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 VMware Horizon 7 Composer 端口设置界面，保留 SOAP 端口设置为默认值，如下所示：
- en: '![](img/0e1ac058-8316-4409-a619-fb8c0605ef15.png)'
  id: totrans-184
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0e1ac058-8316-4409-a619-fb8c0605ef15.png)'
- en: The **Simple Object Access Protocol** (**SOAP**) port is used by View to communicate
    with Composer in XML format. The recommendation would be to leave this setting
    as is, unless there is a specific reason for changing it.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '**简单对象访问协议**（**SOAP**）端口用于 View 与 Composer 之间的 XML 格式通信。建议保留默认设置，除非有特别理由需要更改它。'
- en: Click the Next > button to continue.
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步 >”按钮继续。
- en: 'You will now see the Ready to Install the Program screen shown in the following
    screenshot:'
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在会看到“准备安装程序”界面，如下所示：
- en: '![](img/32e35893-74ed-44a3-9c17-1275ad3a9853.png)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![](img/32e35893-74ed-44a3-9c17-1275ad3a9853.png)'
- en: Click the Install button to start the installation.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“安装”按钮以开始安装。
- en: 'Once the installation has completed, you will see the Installer Completed screen:'
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，你将看到“安装完成”界面：
- en: '![](img/b12d2b4f-9eec-44e2-8bee-d5398fac8ca9.png)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b12d2b4f-9eec-44e2-8bee-d5398fac8ca9.png)'
- en: Click the Finish button to close the installer. If, for any reason, the installation
    of View Composer fails, installation logs are held on View Composer in the `%TEMP%\vminst.log_date_timestamp`
    folder. Additionally, MSI logs are also created and can be found in the `%TEMP%\vmmsi.log_date_timestamp`
    folder.
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“完成”按钮以关闭安装程序。如果由于任何原因，View Composer 安装失败，安装日志将保存在 View Composer 的`%TEMP%\vminst.log_date_timestamp`文件夹中。此外，MSI日志也会创建，并可以在`%TEMP%\vmmsi.log_date_timestamp`文件夹中找到。
- en: 'You will now be prompted to restart the virtual machine:'
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ed6e72b8-2e01-41b4-8d93-f6f6705e1f88.png)'
  id: totrans-194
  prefs: []
  type: TYPE_IMG
- en: Click the Yes button to reboot the View Composer virtual machine.
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'When the View Composer virtual machine has restarted, log in, and then check
    that the View Composer Service is running. To do this, press the Windows key and
    *R* to open a Run dialog box. In the box, type `services.msc`. You will now see
    the Services (Local) screen. Scroll down and check that VMware Horizon 7 Composer
    (**17**) is running, as shown in the following screenshot:'
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/87e64a38-7296-435f-b906-fcd6405b4eab.png)'
  id: totrans-197
  prefs: []
  type: TYPE_IMG
- en: When you are happy that the VMware Horizon 7 Composer Service is running, close
    the Services screen.
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have now successfully installed VMware Horizon View Composer.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
- en: Installing the Horizon View Connection Server
  id: totrans-200
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The View Connection Server and its other roles (Security Server, Replica Server,
    and so on) are installed on a dedicated Windows Server. The following table lists
    the recommended configuration for the Connection Server:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/40543854-84d5-4437-8b90-074edee2075d.png)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
- en: The next step in setting up the example lab is to deploy the first Connection
    Server. This first instance of the Connection Server is going to be installed
    on a Windows Server 2016 virtual machine with the `HZN7-CS1` hostname that was
    built at the start of this book as part of the example lab environment. It was
    configured with a static IP address assigned to it, and then joined to the domain.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
- en: 'To install the Connection Server software, follow these steps:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
- en: Open a console to the `HZN7-CS1` virtual machine, and then locate the Horizon
    View installation software. In the example lab, this was saved to a shared folder
    on the Domain Controller.
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Launch the`VMware-Horizon-Connection-Server-x86_64-7.6.0-9823717` file to start
    the installation.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'If you see the Open File - Security Warning message, click the Run button,
    as shown in the following screenshot:'
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a15ab995-7f49-4603-b156-beb4578a2a3a.png)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
- en: You will now see the Welcome to the Installation Wizard for VMware Horizon 7
    Connection Server screen.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to start the installation. You will now see the License
    Agreement screen.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the I accept the terms in the license agreement radio button, and then
    click the Next > button. You will then see the Destination Folder screen.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Leave the folder as the default and then click the Next > button to continue.
    You will now see the Installation Options screen shown in the following screenshot:'
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/492fa786-4043-4758-bace-3f07a4f00a40.png)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
- en: As this is the first View Connection Server, from the list of Horizon 7 Connection
    Server instances, select the Horizon 7 Standard Server option from the list (**1**).
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: We are also going to install HTML access, so check the Install HTML Access box
    (**2**). This will allow users to access their desktops using the Blast Protocol
    from an HTML 5 web browser. The final option on this screen is to select which
    IP protocol version to use, either `IPv4` or `IPv6`. For the example lab, select
    the `IPv4` option (**3**).
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Remember that you cannot mix and match IPv4 and IPv6 in the same environment,
    so for the example lab, IPv4 is going to be used for all components.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
- en: Once you have selected the instance, click the Next > button to continue.
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Data Recovery screen shown in the following screenshot:'
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0cddef16-f958-486f-bd8a-b8b8f68166a7.png)'
  id: totrans-219
  prefs: []
  type: TYPE_IMG
- en: On the Data Recovery screen, you need to enter a password that will be used
    for the backups of the Connection Server. In the Enter data recovery password
    box (**4**), type in the password you want to use, and then type it again in the
    Re-enter password box (**5**). Finally, enter a password prompt in the Enter password
    reminder (optional) box (**6**).
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next > button to continue. You will now see the Firewall Configuration
    screen shown in the following screenshot:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6a5707bc-77aa-41f1-b497-ed9a741e6b3a.png)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
- en: Click the Configure Windows Firewall automatically radio button, and then click
    the Next > button to continue.
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Windows Firewall is a requirement for Horizon View, specifically for Security
    Server-to-Connection Server communications. Under no circumstances should you
    disable the Windows Firewall service on your Connection Servers. The recommendation
    is to allow Windows Firewall to be configured automatically and then note down
    the required ports where needed.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
- en: 'You will now see the Initial Horizon 7 Administrators screen shown in the following
    screenshot:'
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/41a92388-032b-4c9a-825c-2465d665aa7a.png)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
- en: On this screen, you need to configure which users on your domain, or on the
    local server, are going to be configured as your first View Administrators. In
    the example lab, we are just going to use the standard Administrator account;
    however, it is recommended that you create a specific user and/or group of users
    who will have admin access to the Horizon View admin console.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Authorize a specific domain user or group radio button (**8**), and
    then, in the box below, enter the user or group name. You need to enter this in
    the format domain name\username. In the example lab, you would type in `PVOLAB\Administrator`.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next > button to continue. You will now see the User Experience Improvement
    Program screen shown in the following screenshot:'
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/a69c9f75-fede-4d7f-a23a-e969f930ffac.png)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
- en: The User Experience Improvement Program is an optional program that anonymously
    sends product stats to VMware. It's not a licensing check! In the example lab,
    ensure that the box is unchecked (**10**).
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Ready to Install the Program screen shown in the following
    screenshot:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9b695514-c926-4e2a-ac77-708136ef8430.png)'
  id: totrans-234
  prefs: []
  type: TYPE_IMG
- en: Click the Install button to start the installation process.
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once the Connection Server has been installed, you will see the Installer Completed
    screen shown in the following screenshot:'
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6a8cf675-e729-4bdf-b0f3-6e02ac3cd9a3.png)'
  id: totrans-237
  prefs: []
  type: TYPE_IMG
- en: You have the option to check the Show the documentation box on this screen before
    you close it. It's recommended that you review this document, as it discusses
    the importance of valid SSL certificates in the Horizon View installation, which
    we will cover in more detail in [Chapter 6](8b824015-c1b0-4107-9c9d-dd5cdb4b3221.xhtml),
    *Securing Horizon View with SSL Certificates**.*
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If the installation fails for any reason, the installation logs are held in
    the Connection Server at `%TEMP%\vminst.log_date_timestamp`. Additionally, there
    are MSI logs created, which can be found at `%TEMP%\ vmmsi.log_date_timestamp`.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Finally, click the Finish button to complete the installation and close the
    installer. You will now see an icon for the Horizon 7 Administrator Console has
    been placed on the desktop, as shown:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d2977314-3143-4082-bf93-7e72d17b8681.png)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
- en: In the next section, we are going to log in to View Administrator and complete
    the initial configuration tasks.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
- en: Initial configuration of the Horizon View Connection Server
  id: totrans-243
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: With the Connection Server now installed, you can now connect to the management
    console, called the **View Administrator**, and complete the initial configuration
    tasks.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation with Adobe Flash 10.1 or higher installed, open a browser
    and enter the address details of the View Connection Server. In the example lab,
    the address to enter would be `https://hzn7-cs1.pvolab.com/admin`.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
- en: As SSL certificates have yet to be configured, you need to create a security
    exception to allow you to browse to the HTTPS page with an unsecured certificate.
    We will cover SSL certificates in [Chapter 6](8b824015-c1b0-4107-9c9d-dd5cdb4b3221.xhtml),
    *Securing Horizon View with SSL Certificates*.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
- en: 'You will now see the View Administrator login screen shown in the following
    screenshot:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/117dae65-b653-4408-8415-8832fa4b7fd7.png)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
- en: Log in to View Administrator using the Administrator account and password, ensuring
    that the domain is set to match your domain in the drop-down menu box. Now click
    the Log In button.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
- en: You should now be logged on to View Administrator for the first time. The first
    component to be configured is the product licensing.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
- en: Adding a license to the Connection Server
  id: totrans-251
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In the first of the configuration tasks to complete, once the Connection Server
    has been installed, you need to add the product license to enable the relevant
    features. To do this, follow the steps described here:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
- en: 'When you first log in, as there is no license yet installed, the admin screen
    will default to the Product Licensing and Usage section of the Inventory pane.
    At the top of the page, you will see the **Licensing** box. Click the Edit License…
    button (**1**), as shown in the following screenshot:'
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/72bf78b6-bb42-4641-a08a-7d15d3bb7274.png)'
  id: totrans-254
  prefs: []
  type: TYPE_IMG
- en: 'You will now see the Edit License box shown in the following screenshot:'
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/beece9b7-5f9a-412e-9e2d-6a5afc55ad98.png)'
  id: totrans-256
  prefs: []
  type: TYPE_IMG
- en: In the License serial number box, enter your license key and then click the
    OK button. In the preceding example, the license key has been partly obscured
    using `xxxxx` to hide the actual license key. When you enter the license key,
    it will appear letter for letter, on screen.
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once you have entered your license key, you will see detailed information relating
    to it in the Licensing box. It will provide a license expiry date, along with
    all the features that are enabled with the license. In the example lab, you can
    see all the features and also the usage model, Concurrent User, in this example:'
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/83129693-ff8e-470f-9c17-5bf0d5ad126b.png)'
  id: totrans-259
  prefs: []
  type: TYPE_IMG
- en: 'The Licensing page also shows you your current usage, as shown in the following
    screenshot:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1c30ff72-ecac-4a90-838f-3f55ca975dd1.png)'
  id: totrans-261
  prefs: []
  type: TYPE_IMG
- en: This allows you to ensure you are within the remit of your purchased licenses
    and also allows you to monitor your usage, so that you can preempt an upgrade
    before reaching your limits.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
- en: Adding vCenter Server to View Administrator
  id: totrans-263
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The next task is to configure the connection between View Administrator and
    vCenter Server:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
- en: 'From the View Administrator main screen, expand the View Configuration option
    (**1**), and then select Servers (**2**). Next, from the Servers screen, ensure
    that the vCenter Servers tab is selected (**3**), and then click the Add… button
    (**4**), as shown in the following screenshot:'
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9789d5b4-7efb-42e6-b2f2-a6ed52a7556f.png)'
  id: totrans-266
  prefs: []
  type: TYPE_IMG
- en: 'You will now see the vCenter Server Information screen shown in the following
    screenshot:'
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/245c3418-c3b5-4385-931f-decb461d7e00.png)'
  id: totrans-268
  prefs: []
  type: TYPE_IMG
- en: In the Server address box (**5**), type in the address of the vCenter Server
    you want to connect to the Connection Server. In the example lab, this is `vcs2.pvolab.com`,
    the address of the vCenter managing the virtual desktops.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, in the User name box (**6**), type in the vCenter username followed by
    the password for this account in the Password box (**7**). In this example, the
    administrator account has been used; however, you will probably want to use the
    specific user account for this that we created earlier in this chapter.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the following Invalid Certificate Detected warning box:'
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/aca24e7f-9a3d-4acc-9fa1-14564cfdf16e.png)'
  id: totrans-272
  prefs: []
  type: TYPE_IMG
- en: Click the View Certificate… button (**8**). You will now see the Certificate
    Information box.
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Accept button.
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next screen is the View Composer Settings screen shown in the following
    screenshot:'
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6be21741-e73c-4186-84d4-5a386b66c1a4.png)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
- en: 'You have three options to configure View Composer: Do not use View Composer,
    View Composer co-installed with vCenter Server, and Standalone View Composer Server.'
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For the example lab, View Composer is going to be installed on a standalone
    server, so click the Standalone View Composer Server radio button (**10**).
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you need to enter the details of the View Composer Server. In the Server
    address box (**11**), type in the server address. In the example lab, this is
    `vcs2.pvolab.com`. Then, type in the username for this server in the User name
    box (**12**). Remember to add this in the format domain\username, so in the example
    lab, type `pvolab\administrator` followed by the password for this user account
    in the Password box (**13**). Leave the Port box (**14**) at the default setting
    of `18443`.
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When you have completed the details, click the Next > button.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'As with adding the vCenter Server, you will again see the following Invalid
    Certificate Detected warning box:'
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/1fb5be19-f833-4300-b19d-39d499e70b03.png)'
  id: totrans-282
  prefs: []
  type: TYPE_IMG
- en: Click the View Certificate... button (**15**). You will now see the Certificate
    Information box
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Accept button. You will now see the View Composer Domains configuration
    screen shown in the following screenshot:'
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/fbabc87a-9c3d-4c91-8f04-ac5feeed631c.png)'
  id: totrans-285
  prefs: []
  type: TYPE_IMG
- en: 'On this screen, we are going to configure View Composer with access to a domain
    account to allow it to add, create, and delete computer accounts in AD. Click
    the Add… button (**17**). You will now see the Add Domain configuration box shown
    in the following screenshot:'
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5f10a442-1891-4f12-a565-c2825b3346da.png)'
  id: totrans-287
  prefs: []
  type: TYPE_IMG
- en: In the Full domain name box (**18**), type in the domain name. In the example
    lab, this is `pvolab.com`. Then, in the User name box (**19**), enter the username
    that has the ability to create and delete computer objects in AD. In the example
    lab, we will use the `administrator` account.
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Finally, in the Password box, type in the password for the administrator account.
    Click the OK button when you have entered the information. You will now return
    to the View Composer Domains configuration screen, which now shows the configured
    domain details, entered as shown in the following screenshot:'
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5043bc56-b557-48ba-9439-ab450d93684f.png)'
  id: totrans-290
  prefs: []
  type: TYPE_IMG
- en: Click the Next > button to continue.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Storage Settings configuration screen. There are two main
    elements to configure here. The first option is to configure whether or not you
    want to Reclaim VM disk space for your virtual desktops. If this is selected,
    the virtual machines will be configured with space-efficient disks, which will
    allow the reclamation of unused space.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The second option is to configure Enable View Storage Accelerator. This allows
    a specific amount of memory to be utilized as a read cache to reduce the storage
    overheads on the shared or local storage used to run the VMs. By default, this
    will be set to `1024` MB of memory per server and can be increased to up to 2GB
    per server. Alternatively, if you check the box for Show all hosts, you can then
    select individual host servers and configure the cache size differently on each
    host server.
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the example lab, we are going to enable the options for Reclaim VM disk
    space and Enable View Storage Accelerator, as shown in the following screenshot:'
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4f3ab74e-e284-43fb-93d2-aae473668588.png)'
  id: totrans-295
  prefs: []
  type: TYPE_IMG
- en: 'Click the Next > button to continue. You will now see the Ready to Complete
    screen shown in the following screenshot:'
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c08071fa-5d57-4d90-ac3f-0f266d22b86c.png)'
  id: totrans-297
  prefs: []
  type: TYPE_IMG
- en: 'Finally, check the configuration details and then click the Finish button to
    complete the configuration. You will return to the View Administrator screen,
    which now shows the vCenter Server that was just added, as shown in the following
    screenshot:'
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/007a6199-c8d6-4565-84c7-19e0b1f79e3c.png)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
- en: View Administrator screen
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
- en: You have now added a vCenter Server to Horizon View. In the next section, we
    are going to configure the View events database.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
- en: Configuring the View events database
  id: totrans-302
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The final part of the initial configuration tasks is to configure the events
    database. This is where Horizon View stores all the events that take place on
    the Connection Server.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
- en: 'A database called **view-events** was created at the start of this chapter,
    and now we are going to use it in the configuration:'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
- en: 'From the View Administrator main screen and the Inventory section, expand the
    View Configuration option, and then select Event Configuration (**1**). You will
    now see the Event Configuration screen shown in the following screenshot:'
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ae33f66b-eeb5-4137-b476-f014f9352788.png)'
  id: totrans-306
  prefs: []
  type: TYPE_IMG
- en: In the Event Database section, click the Edit… button (**2**). You will now
    see the Edit Event Database dialog box pop up, as shown in the preceding screenshot.
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Database server box (**3**), enter the name of the SQL server that is
    hosting the events database. In the example lab, it's on the same server as vCenter,
    so enter `vcs2.pvolab.com` as the server name.
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Ensure that Microsoft SQL Server is selected from the drop-down menu for the
    Database type (**4**). The other option here is to set up an Oracle database.
  id: totrans-309
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Leave the Port setting as the default port of `1443`.
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Database name box (**5**), type in the name of the database. In the example
    lab, the database is called `view-events`.
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the User name box (**6**), type in the username for this database, and in
    the Password box (**7**), type in the password for this user, and then type it
    in again in the Confirm password box (**8**).
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, in the Table prefix box, you can enter a prefix name. This allows you
    to use the same events database for multiple installations. Once you have entered
    the configuration information, click OK.
  id: totrans-313
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once completed, you should see the following screenshot:'
  id: totrans-314
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/7c5c8a12-c215-4c62-aede-8b622c3e0bab.png)'
  id: totrans-315
  prefs: []
  type: TYPE_IMG
- en: You have now successfully completed the initial Connection Server configuration
    tasks. In the next part of this chapter, we will move on to installing the other
    Connection Server roles, starting with the Replica Server.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-317
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this first part of the chapter, we have walked you through installing and
    configuring the first components of the Horizon View solution, namely the View
    Composer and the Horizon View Connection Server.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
- en: In the second part of this chapter, [Chapter 5](89619cdf-5fc7-4dd1-a431-76cef6cbb67c.xhtml),
    *Installing and Configuring Horizon 7 – Part 2*, we will continue the installation
    and install the Replica Server, the Security Server, and the Enrollment Server.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
