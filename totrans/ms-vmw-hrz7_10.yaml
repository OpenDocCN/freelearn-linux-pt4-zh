- en: Configuring and Managing Desktop Pools - Part 1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now that you have prepared a number of desktop images in the previous chapter,
    the next step is to configure desktop pools that will deliver these desktops to
    the end users, and so, in this chapter, we will look at how to create and manage
    desktop pools within Horizon View.
  prefs: []
  type: TYPE_NORMAL
- en: To recap, desktop pools are collections of one or more virtual desktop machines
    that have similar attributes. By this, we mean that they have the same operating
    system versions, applications, memory, CPU, or other configuration.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: Automated desktop pools
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating a manual desktop pool
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Managing Linked Clone desktop pools
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Reviewing the infrastructure post-deployment
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Types of desktop pools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Different desktop pools can also be built and assigned differently. For example,
    one pool may be built using Linked Clones, and another could have a dedicated
    user assignment. The types of desktop pools available are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: Automated desktop pool
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Manual desktop pool
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: RDS desktop pool
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: So, let's take a minute to describe what each of these types of desktop pools
    is used for.
  prefs: []
  type: TYPE_NORMAL
- en: An **automated desktop pool** is a collection of desktops that are automatically
    created from a snapshot or a virtual machine template by Horizon View. Desktops
    within an automated pool may be created on demand or built in advance. They can
    also be deleted or refreshed on logoff. Automated pools are generally the most
    widely used pools within Horizon View deployments, as they allow great flexibility
    for administration.
  prefs: []
  type: TYPE_NORMAL
- en: A **manual desktop pool** provides access to an existing desktop, whether it
    is virtual or physical, just so long as it has the View Agent installed on it.
    A manual pool is used for niche use cases due to the administrative overhead.
    Also, you would generally use an image management tool, such as VMware Mirage
    or SCCM, with these machines to simplify the management as far as possible.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, an **RDS desktop pool** is a great way of offering high levels of consolidation
    for task workers within your Horizon View environment. An example of where an
    RDS desktop might be suitable would be for call center users, where the user is
    using one or two simple applications and doesn't require a full-blown desktop.
    We will cover RDS desktops in [Chapter 18](https://www.packtpub.com/sites/default/files/downloads/Delivering_Published_Desktops_with_Horizon_7.pdf),
    *Delivering Published Desktops with Horizon 7*.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the next sections, we are going to configure the different pool options
    using the example lab and the parent desktop images created in the previous chapter.
    We are going to build the following desktop pools:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Automated desktop pools for the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Windows 7 dedicated, Linked Clone desktop pool
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Windows 7 dedicated, Full Clone desktop pool
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Windows 7 floating, Linked Clone desktop pool
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Windows 7 floating, Full Clone desktop pool
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Windows 10 floating, Instant Clone desktop pool
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Manual desktop pool
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We are also going to show you how to build the desktop pools using the Horizon
    View administrator classic console, as well as the new web-client style Horizon
    Console.
  prefs: []
  type: TYPE_NORMAL
- en: Automated desktop pools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Automated desktop pools will be the largest use case within our Horizon View
    environment, and so we will start by looking at how to create and manage those
    first.
  prefs: []
  type: TYPE_NORMAL
- en: As you start running through the configuration wizards to create the automated
    desktop pools, you will be asked a number of questions that will further define
    how the users will use the desktop pool. The first of these questions is how is
    the desktop going to be assigned to the end users?
  prefs: []
  type: TYPE_NORMAL
- en: The first option is for creating dedicated desktop assignments. Along with this
    option, you will get the choice of having an automatic assignment. Dedicated desktops
    are generally used due to something being stored or configured within the user's
    desktop that is important for that user, or due to application-specific nuances
    (for example, a licensing restriction that requires a specific MAC address to
    be used). This means that every time the user wants to connect to a desktop, they
    will always be given the same desktop.
  prefs: []
  type: TYPE_NORMAL
- en: Dedicated desktops can be built using either Full Clones, Linked Clones, or
    Instant Clones.
  prefs: []
  type: TYPE_NORMAL
- en: With a dedicated virtual desktop machine that is built using Linked Clones,
    you can also add a persistent disk to the virtual desktop to save all the changes
    that happen to the desktop while the user is using it. If you then need to refresh
    or recompose the desktop operating system, then the user won't lose the customizations
    or their personal data stored on their desktop as they are stored on a separate
    disk. However, you need to keep in mind that there is no easy way to back up the
    persistent disks and, as such, you might decide to use another tool to protect
    and update these desktops.
  prefs: []
  type: TYPE_NORMAL
- en: Creating dedicated, Linked Clone desktop pools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we will work through the configuration wizard to create the
    first desktop pool to build a dedicated Windows 7 desktop, built using Linked
    Clones and taking the Windows 7 Gold Image snapshot created in the previous chapter
    as the parent image from which to create the virtual desktop.
  prefs: []
  type: TYPE_NORMAL
- en: To create the desktop pool, we are going to work through the following steps
    using the Horizon View Administrator console first, and then the new Horizon Console.
  prefs: []
  type: TYPE_NORMAL
- en: Using the Horizon View Administrator Console
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To set up the desktop pool using the Horizon View Administrator, perform the
    following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation, open a browser and enter the address details of the View
    Connection Server. In the example lab, the address of the Connection Server is
    `https://hzn7-cs1.pvolab.com/admin`. Don't forget the `/admin` at the end; otherwise,
    you will end up on the Horizon Client page.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the View Administrator login screen, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/2093339c-eafe-4a14-9660-7631c30b81d0.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Log in using the administrator account that was set up for the View Administrator.
    You will now see the Horizon View Administrator Dashboard screen, as shown in
    the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5a3ea4a5-d3c7-45d9-b595-4e452337a467.png)'
  prefs: []
  type: TYPE_IMG
- en: From the Horizon View Administrator, click to expand the Catalog option (**1**),
    and then click on Desktop Pools (**2**). Then from the Desktop Pools pane that
    is now displayed, click the Add... button (3).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Add Desktop Pool screen, starting with the Type section
    where we select the type of desktop pool you want to create:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/119715bd-67a3-4bcc-8349-c89d04f75be3.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the radio button for Automated Desktop Pool (**4**). When selecting the
    various types of desktop pools that are available, the description on the right-hand
    side will change, reminding you of the differences between the pool types, as
    well as the features that are supported within each desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the User Assignment screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8fe03bd0-62a0-45a4-b874-22824b0b9805.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the radio button for Dedicated (**5**). The Enable automatic assignment
    option (**6**) will already be selected by default. This means the desktops will
    be assigned to the users on a first come, first served, as they log in. If, for
    some reason, you need to ensure a user is assigned a specific desktop, then you
    will need to uncheck this box, and manually assign them a virtual desktop machine.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next> button to continue the configuration. You will now configure
    how the virtual desktop machines will be built, using the vCenter Server linked
    with this Connection Server, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4ede4b78-2000-41e1-82c1-cb1df155afb0.png)'
  prefs: []
  type: TYPE_IMG
- en: On this configuration screen, you have the option to build either Instant clones,
    View Composer linked clones, or Full virtual machines.
  prefs: []
  type: TYPE_NORMAL
- en: For this first desktop pool, we are going to use Linked Clones, so click the
    radio button for View Composer linked clones (**7**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you need to select the relevant vCenter Server from the list. In the example
    lab, the vCenter `192.168.1.178` is shown, along with the vCenter user account
    we set up for the View (**8**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next> button to continue the configuration. The next configuration
    screen is for the Desktop Pool Identification**,** as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/2affd716-9d00-4d3c-933e-c2533c59dd0d.png)'
  prefs: []
  type: TYPE_IMG
- en: In the ID box (**9**), type in an ID for this desktop pool. In the example lab,
    we have entered the ID of `Win7-dedicated-lc`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You can only use the characters *a*-*z*, *A*-*Z*, *0*-*9*, *-*, and *_* in the
    pool ID.
  prefs: []
  type: TYPE_NORMAL
- en: In the Display name box (**10**), type in a name for this pool. Bear in mind
    that the display name is what is displayed to the end users, so make sure you
    give it a non-technical name that the users will understand.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, in the Description box (**13**), type in a detailed description that
    describes the desktop pool and what it is used for.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next> button to continue the configuration. You will now see the
    Desktop Pool Settings configuration screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/05b74d84-e71a-4501-b4c0-28dbcc7c8f89.png)'
  prefs: []
  type: TYPE_IMG
- en: This configuration page is where we start to configure the settings that will
    define the way the virtual desktop machines behave within the desktop pool. It
    provides configuration options for before users connect, while they are using
    their virtual desktop machine, and finally, once they disconnect from it.
  prefs: []
  type: TYPE_NORMAL
- en: There a number of options to configure on this screen so we are going to break
    them down into individual sections.
  prefs: []
  type: TYPE_NORMAL
- en: General settings
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We are going to start by configuring the General settings first, by performing
    the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'First, in the General section, you can configure the State of the desktop pool.
    From the drop-down menu, select the Enabled option (**12**) to enable this pool,
    meaning that it will be available to users who are entitled to use it and, therefore,
    any virtual desktop machines will be provisioned within the pool and made available
    for end users to use. If you set the **State** to Disabled, virtual desktop machines
    will not be provisioned and will not be made available to end users. You might
    want to set the **State** to **Disabled** if you are pre-configuring a new pool
    for users and then go back and enable it once you are happy it is configured correctly:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c9a34eff-1bc3-4961-a659-cfa813001349.png)'
  prefs: []
  type: TYPE_IMG
- en: The second option under the General section is for Connection Server restrictions,
    where you are able to select tags associated with the Connection Server to restrict
    where the users can connect from. Click the Browse… button to configure the restrictions.
    If you want to allow this desktop pool to be accessed from any Connection Server,
    then you would click the radio button for No Restrictions (**13**). If you click
    the radio button for Restricted to these tags (**14**) then you would see a list
    of the configured tags. Simply highlight the tag from the list and then click
    OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The final setting under the General section is for Category Folder. This setting
    allows you to create a shortcut directly onto the client device, with the details
    of this desktop pool so the end users can easily access their resources. To configure
    this option, click the Browse... button. The first radio button option is for
    Disabled (**15**) to turn this feature off. To enable the feature, click the radio
    button for Select a category folder from the folder list (**16**). You then have
    the option to select the Category Folder from the list, or you can create a new
    one by starting to type in the name of the folder you want to create in the New
    Folder box (**17**). Once you have typed in the name, you can click the Add button.
    Finally, you can select the Shortcut Locations (**18**). You can choose from the
    Start Menu/Launcher or the Desktop of the client device onto which to place the
    shortcut.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the OK button once you have completed configuring your options.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next section to configure is for the Remote Settings.
  prefs: []
  type: TYPE_NORMAL
- en: Remote Settings
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'These settings define the power state of the virtual desktop machines and what
    happens when end users connect and disconnect. The settings options are shown
    in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ef7856d0-1367-4c6a-86d8-4d91323b4b58.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You then have the following options for configuring the Remote Settings:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The first option is for the Remote Machine Power Policy option, which defines
    the power state of the virtual desktop machine when users connect and disconnect.
    Click on the drop-down menu (**19**) and you will see the following options:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Take no power action: The virtual desktop machine will remain in the last state
    it was left in. For example, if the desktop was left powered on, then it will
    remain powered on.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Ensure machines are always powered on: The virtual desktop machines will always
    be restored to a powered on status after being shut down by an end user or an
    administrative task.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Suspend: Virtual desktop machines will be suspended when a user logs off. Note,
    **Suspend** is not available when using NVIDIA GRID vGPU desktops.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Power Off: Virtual desktop machines will be powered off when a user logs off.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: When configuring power policies, the most important thing to do is to understand
    your use case and choose the correct options as appropriate. For example, if you
    have 200 users, all planning on logging in within a 10-minute window at 9:00 A.M.,
    and the desktops are powered off or suspended, then this could cause some delay
    and a large performance spike while the desktops are resumed or powered on. Alternatively,
    if you are using a dedicated desktop model with a shift-based work pattern and
    choose to leave the desktops always powered on, this could cause your environment
    to be over-allocated in terms of desktop resources, as well as you potentially
    having more OS and software application licenses than you actually need or use.
  prefs: []
  type: TYPE_NORMAL
- en: 'The next setting is for Automatically logoff after disconnect (**20**). This
    option allows you to define what happens when a user simply disconnects from their
    desktop and doesn''t choose to log off. Click the drop-down menu to see the following
    available options:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Immediately: When the user disconnects from the virtual desktop machine, it
    is immediately logged off.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Never: When the user disconnects from the virtual desktop machine, it is never
    logged off.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'After...: When the user disconnects from the virtual desktop machine, it is
    logged off after a set period of time. You can choose how many minutes before
    the desktop will be logged off.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Again, how you configure this setting will very much depend on how your users
    will use the desktop. Very rarely would you choose to log off the desktop immediately
    in case the user has only temporarily disconnected from their desktop or has been
    disconnected due to a network connection glitch. You should give them at least
    a 5- to 10-minute window to allow them to reconnect rather than just logging them
    out straight away.
  prefs: []
  type: TYPE_NORMAL
- en: The next setting to configure is the Allow users to reset/restart their machines
    (**21**) option. If this option is set to Yes, it means that the users are able
    to effectively use a reset button to hard reset their virtual desktop machine.
    This can be a useful feature to allow end users to perform troubleshooting steps
    without the assistance of IT. However, it can also cause some confusion when the
    end user believes they are simply resetting the endpoint device but instead they
    are resetting their virtual desktop machine. If this is a Linked Clone desktop,
    then they could end up with a completely new virtual desktop machine being provisioned
    resulting in them potentially losing any current work.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The final setting in this section is for Refresh OS disk after logoff (**22**).
    As this pool is going to be created using Linked Clone images, this option defines
    how the operating system disk of the Linked Clone behaves when a user logs off.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To configure this option, click the drop-down menu for the following available
    options:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Never: The operating system disk will never be refreshed automatically; this
    will result in the Linked Clone growing over time, especially if a persistent
    disk and/or a disposable disk isn''t configured in the later stages of this wizard.
    By refreshing the OS disk, the disk is refreshed to a snapshot that is taken when
    the desktop is originally created. Without a persistent disk, redirected profiles,
    and so on, all user settings/data will be lost.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Always: The desktop will be refreshed every time the user logs off.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Every...: Allows you to define the number of days after which the desktop will
    be refreshed.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'At...: Allows you to set at what percentage of OS disk utilization should the
    desktop be refreshed.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Again, as with the other configuration settings, how you configure these settings
    will depend greatly on your use cases and how your users work.
  prefs: []
  type: TYPE_NORMAL
- en: The next section in this configuration screen is to configure the **Remote Desktop
    Protocol**.
  prefs: []
  type: TYPE_NORMAL
- en: Remote Desktop Protocol settings
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'These settings define the behavior of the delivery protocol for the virtual
    desktop machines and any user configurable options. The settings options are shown
    in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/e0874499-7b8d-4c8e-90c6-8b172c5376d4.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You then have the following options for configuring the Remote Display Protocol:'
  prefs: []
  type: TYPE_NORMAL
- en: The first option in the Remote Display Protocol section is to select the Default
    display protocol. From the drop-down menu (**23**), you have the options of Microsoft
    RDP, PCoIP, or VMware Blast. Note that some of the display-based features are
    dependent on which protocol you choose. For example, session collaboration is
    only available when you use the Blast protocol.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you have the option to Allow users to choose protocol (**24**). If you
    set this to Yes, then the end user can choose the protocol. Typically, you would
    use PCoIP or VMware Blast as the default protocol, and not let the end user change
    this unless there is a specific use case that determines where another protocol
    is required. For example, if more than four screens are required, then you would
    use RDP, as this is the protocol that supports this, or maybe the end user could
    be connected behind a very strict outbound firewall that blocked the PCoIP port,
    `4172`, and therefore would not be able to see their virtual desktop machine.
    In these use cases, allowing the end user to change the default protocol means
    that they can continue to work.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You can then choose the 3D Renderer model you want the desktop pool to use
    **(25)**. Click the drop-down arrow to select the required 3D renderer. You have
    the following options:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Manage using vSphere Client: The **Configure VRAM for 3D Guests**, **Max number
    of monitors**, and **Max resolution of any one monitor** configuration settings
    are not available in the Horizon Administrator when you select this setting. Settings
    are instead managed using the vSphere Web Client.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Automatic: 3D rendering is enabled and is managed by the host server, which
    automatically selects the best model to use is. For example, the host server will
    reserve GPU resources on a, first served basis as a virtual desktop machine is
    powered on. If there are no GPU resources available when a virtual desktop machine
    is powered on, then the host server will revert to using software-based rendering.
    This setting comes in useful in a DR scenario where the host server at the DR
    site has not been configured with any hardware-based GPU resources. This allows
    users to revert to software rendering, meaning they can continue to work.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Software: The host server will always use software 3D graphics rendering.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Hardware: The host server will reserve GPU hardware resources on a first come,
    first served basis as virtual desktop machines are powered on. In the scenario
    where there are hardware resources available from the host server, then the virtual
    desktop machine will not power on.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'NVIDIA GRID VGPU: The host server will again reserve GPU hardware resources
    on a first come, first served basis as virtual desktop machines are powered on.
    If a user logs on and connects to a virtual desktop machine, and GPU hardware
    resources are already allocated to another virtual desktop machine on the same
    host server, then the Connection Server will attempt to move the virtual desktop
    machine to a different host server in the same cluster and then power it on once
    it has the resources. By selecting the **NVIDIA GRID VGPU** option, you will lose
    the Configure **VRAM for 3D Guests**, **Max number of monitors**, and **Max resolution
    of any one monitor** settings. You will also need to ensure that you configure
    the parent virtual desktop machine or virtual desktop machine template to reserve
    all the memory.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Disabled: 3D rendering is switched off.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'When you choose one of the valid 3D Renderer options (does not work with **NVIDIA
    GRID VGPU** or **Manage using vSphere Client**), you will also now see that the
    Configure... button next to the chosen model is now active. If you click on this,
    then you will see the Configure VRAM for 3D guests box, which allows you to specify
    an amount of video memory to use, up to a maximum of 512 MB**,** as shown in the
    following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/f316fa59-76d9-4d33-8d24-98f113568daf.png)'
  prefs: []
  type: TYPE_IMG
- en: The next option is to select the Max number of monitors. If you click the drop-down
    arrow, you can choose from 1, 2, or 4 monitors. Note that this setting only applies
    to the PCoIP and Blast protocols. When 3D is disabled, the Max number of monitors
    and Max resolution of any one monitor settings determine the amount of VRAM assigned
    to the virtual desktop machines in the desktop pool. The greater these values
    are, the more memory will be consumed on the associated ESXi host servers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If 3D is disabled, up to three monitors are supported running at a resolution
    of 3,840 x 2,160 on a Windows 7 guest operating system, with Aero disabled. For
    other operating systems, or for Windows 7 with Aero enabled, only one monitor
    is supported at this resolution. When 3D is enabled, one monitor is supported
    at 3,840 x 2,160 resolution. Multiple monitors are best supported at a lower resolution.
  prefs: []
  type: TYPE_NORMAL
- en: The next option is for Max resolution of any one monitor (**26**). Click the
    drop-down arrow to select the required resolution, noting the previous discussion
    in point 3.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you have the option to enable HTML Access (**27**). To enable HTML, check
    the box. Note that the Connection Server will need to have HTML Access installed
    on it for this to work.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, you have the option to Allow Session Collaboration (**28**). To enable
    this feature, check the box. Session collaboration allows users of this desktop
    pool to invite other users to join their session. Note that this feature only
    works with the VMware Blast protocol.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next section in this configuration screen is to configure the Adobe Flash
    Settings for Sessions.
  prefs: []
  type: TYPE_NORMAL
- en: Adobe Flash Settings
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'These settings define the behavior of Adobe Flash within the virtual desktop
    machine sessions. The settings options are shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/116cd2eb-422e-4a41-828a-63f8c7303a08.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The configuration options for **Adobe Flash Settings for Sessions** are detailed
    here:'
  prefs: []
  type: TYPE_NORMAL
- en: 'On the option for Adobe Flash Quality, click the drop-down menu **(29)** for
    the available options:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Do not control**: This allows the web page to determine the best setting'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Low (default)**: Low quality means less bandwidth consumption'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Medium**: Medium quality means average bandwidth consumption'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**High**: High quality means more bandwidth consumption'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The other configurable setting is for Adobe Flash throttling. Adobe Flash updates
    the screen by default, using a timer service to determine the update interval.
    By changing this time interval setting, you can control the frame rate of the
    screen updates and therefore reduce the bandwidth requirements. Click the drop-down
    menu (**30**) for the available options:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Disabled: Throttling is turned off'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Conservative: The update interval is set to 100 ms'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Moderate: The update interval is set to 500 ms'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Aggressive: The update interval is set to 2,500 ms'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The final section in this configuration screen is to configure the Mirage Settings.
    These settings define how VMware Mirage interacts with the virtual desktop machine
    images. The settings options are shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/4679a798-4418-43ee-b68b-a81c00b1fa8d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The Mirage Settings are described here:'
  prefs: []
  type: TYPE_NORMAL
- en: The only option here is to Override global Mirage settings (31). To enable the
    override, check the box.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Then, in the Mirage Server configuration box (**32**), enter the address of
    the Mirage server you want to use. To find out more about the VMware Mirage solution,
    you can read the book titled *Learning VMware Mirage*, by Packt Publishing.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This setting only applies to those who have a current Mirage deployment, as
    Mirage is now end of life.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once you have completed the configuration settings on this screen, then click
    on Next > button to continue to the next configuration screen. This next screen
    is where you configure Provisioning Settings**,** as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/7229fabc-865f-4181-8652-8cb322fa5cb1.png)'
  prefs: []
  type: TYPE_IMG
- en: 'As done previously, we are going to break this screen down into its different
    configuration sections, starting with the Basic section, as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/5514fa7a-1e1d-4a51-aa9d-3dfa7a685f13.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The **Provisioning Settings** are described here:'
  prefs: []
  type: TYPE_NORMAL
- en: The first setting in the Basic section is to Enable provisioning. Tick the Enable
    provisioning box **(33)** to basically switch provisioning on. This setting means
    that virtual desktop machines can be provisioned as per the configuration settings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next setting is for Stop provisioning on error (**34**). By checking this
    box, it means that provisioning will stop if there is an error during the provisioning
    process. This is quite important, as rather than going ahead to continue provisioning
    hundreds of virtual desktop machines that have errors, you would want to stop
    provisioning so that you can go back in and fix the issues first.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next section to configure is for the Virtual Machine Naming**,** as shown
    in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/0442982e-1c2f-483b-8a55-2e6950670426.png)'
  prefs: []
  type: TYPE_IMG
- en: In this section, there are two options for configuring how newly built virtual
    desktop machines are named, either manually, or automatically. The name we are
    referring to here is the machine name that will also appear as the computer account
    in Active Directory. With this in mind, it's worthwhile picking a suitable naming
    convention.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the first example, we are going to take a look at the manual option, before
    configuring the naming pattern method, as this method is the recommended way to
    name your virtual desktop machines unless there is some reason your desktops need
    unique non-contiguous names. To do this, perform the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Click the radio button for Specify names manually (**35**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Enter Machine Names box. In the empty box (**36**), type
    in a name for the first virtual desktop machine. In this example, we have called
    this machine `Windows-7-001`. You could also add a username to this machine if
    it is going to be a dedicated assignment. So in the example lab, we could enter
    this machine name as `Windows-7-001,pvolab.com\peter`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Continue entering machines as required and then click Next > (**37**) when you
    have entered all the machine names you want to add.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now you will see a list of the entered names (**38**). You can now either go
    back and enter more names or, if you have completed entering names, click the
    Finish button (**39**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, you will return to the Virtual Machine Naming screen where you will
    see that it now says 1 names entered (**40**) to show how many machine names have
    been manually entered.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You also have a couple of other options under the manual section. You can Start
    machines in maintenance mode, which allows virtual desktop machines to be customized
    manually before users can log in. This mode must be exited manually. You also
    have the option to configure # Unassigned machine kept powered on. This allows
    you to keep virtual desktop machines powered on ready, even if they have not been
    assigned to an end user yet. This option would allow you to quickly assign a machine
    that had already been built and customized, thereby speeding up the process.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now we have looked at how to enter a machine name manually, we are going to
    look at the option to use a naming pattern, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/2d4fd66b-5673-4ed8-aa82-762bcec5373d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Configure the Virtual Machine Naming using the following settings:'
  prefs: []
  type: TYPE_NORMAL
- en: Click the radio button for Use a naming pattern (**41**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Naming Pattern box (**42**), type in a name for the virtual desktop machines.
    In the example lab, and for this pool, we are going to enter `Win7-VM-{n}`. This
    will result in the virtual desktop machines being named `Win7-VM-1`, `Win7-VM-2`,
    and so on, up to the number of machines you specify that you want to build. By
    using `{n}` somewhere in the machine name, Horizon View will add a single digit
    to the name in the required location. By adding `{n:fixed=2}`, you can allow for
    for two digits, and `{n:fixed=3}` for three, and so on. This will ensure the desktops
    appear in numerical order.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next section is the **Desktop Pool Sizing** section.
  prefs: []
  type: TYPE_NORMAL
- en: Desktop Pool Sizing
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this section, you can specify the number of virtual desktop machines that
    are created and provisioned, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/9de1088e-6d5a-4056-9370-05693fc8b69b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Configure the Desktop Pool Sizing using the following settings:'
  prefs: []
  type: TYPE_NORMAL
- en: In the Max number of machines box (**43**), enter the maximum number of machines
    that can be provisioned in this desktop pool. This sets the limit of the number
    of virtual desktop machines in this desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next is the setting for the Number of spare (powered on) machines. In the box
    (**44**), enter the number of machines that should be powered on and waiting for
    users to connect to them.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, in this section, is the Minimum number of ready (provisioned) machines
    during View Composer maintenance operations option. Here you can enter the number
    of virtual desktop machines (**45**) that you want to have still available during
    maintenance operations. So, for example, if you initiated a recompose operation,
    Horizon View could ensure that there was a minimum number of virtual desktop machines
    still available for end users to log in to.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How you configure these options is going to be critical to the success of the
    pool within your View Solution. You need to ensure that there are enough virtual
    desktop machines provisioned and available for the users as and when they are
    required. This also means ensuring that you are able to meet user demand even
    during maintenance operations.
  prefs: []
  type: TYPE_NORMAL
- en: 'The final section to configure is for Provisioning Timing. You have the option
    of provisioning machines on demand, as users log in and request them, or pre-provision
    them in advance, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/91697960-65bb-4b0a-b5eb-c7547b4ed398.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Let''s start with the configuration:'
  prefs: []
  type: TYPE_NORMAL
- en: To provision on demand, click the radio button for Provision all machines on
    demand (**46**). This means that the virtual desktop machines will be created
    and provisioned in advance ready for users to connect and log in to. You can select
    a number of machines to have as a minimum in the Min number of machines box (**47**).
    If you choose to provision on demand, then you need to ensure there are enough
    desktops already provisioned in order to meet user demand without causing long
    delays. This is where making sure you have enough provisioned up-front versus
    the number of spares as per what you would have configured in the desktop pool
    sizing section previously.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the example lab, we are going to provision up-front, so click on the radio
    button for Provision all machines up-front (**48**). If you are going to provision
    all the virtual desktop machines up-front, you need to ensure that you do this
    at a time when the increase in performance that will result on a large number
    of virtual desktop machines being built, is not going to have a knock-on effect
    on your end users.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once you have completed the configuration settings on this screen, then click
    the Next > button to continue to the next configuration screen. As this desktop
    pool is going to use virtual desktop machines built from Linked Clones, then the
    next configuration screen is the View Composer Disks configuration screen, as
    shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/f359ec95-a29a-4aef-b123-f609efdac436.png)'
  prefs: []
  type: TYPE_IMG
- en: On this configuration screen, there are two options. One OS to configure the
    persistent disk, and the disposable file redirection. Careful consideration needs
    to be given as to whether or not you need to utilize these settings within your
    desktop pool architecture or not, and also depending on whether you are planning
    on using any additional VMware or third-party solutions to deliver the same functionality.
  prefs: []
  type: TYPE_NORMAL
- en: 'The first section to configure is for Persistent Disk**,** as shown in the
    following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/2823ee58-01d8-49da-bfc4-8dec883e54e6.png)'
  prefs: []
  type: TYPE_IMG
- en: 'With a persistent disk, the Windows profile will be redirected to a dedicated
    disk that will be kept even if the OS disk is refreshed during a View Composer
    operation. This can be a great way to protect user configuration. However, you
    might also wish to investigate other solutions for this, such as VMware View Persona
    Management, VMware UEM, or Liquidware ProfileUnity that can offer you similar,
    if not better, functionality:'
  prefs: []
  type: TYPE_NORMAL
- en: To configure this setting, click the radio button for Redirect Windows profile
    to a persistent disk (**49**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Disk size box (**50**), enter a size for the persistent disk.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Lastly, in the Drive letter drop-down box (**51**), you can select a drive letter
    for this persistent disk.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To disable the profile redirection, or if you are using another profile management
    tool, then click the radio button for Do not redirect Windows profile (**52**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next section to configure is for Disposable File Redirection. The disposable
    disk contains all page and temporary files and is refreshed after every desktop
    reboot. This can be a great way to reduce the size of the Linked Clone between
    desktop refreshes. The Disposable File Redirection settings are shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/b7ff7741-4363-4820-b868-78d215ab2105.png)'
  prefs: []
  type: TYPE_IMG
- en: 'To configure the **Disposable File Redirection** setting, perform the following
    this steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Click the radio button for Redirect Windows profile to a persistent disk (**53**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Disk size box (**54**), enter a size for the persistent disk.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Lastly, in the Drive letter drop-down box, you can select a drive letter for
    this persistent disk. If you click the arrow (**55**), you will see the drive
    letter options (**56**). The letter assigned to a disposable disk drive is not
    necessarily visible to the end user.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To disable the Disposable File Redirection feature, click the radio button for
    Do not redirect disposable files (**57**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When configuring either of these, ensure you set the sizes appropriate for your
    use cases. This is where the POC or desktop assessment will help you understand
    how large these need to be. Items such as whether an Outlook local cache is being
    used can affect the size of the persistent disk dramatically.
  prefs: []
  type: TYPE_NORMAL
- en: Once you have completed the configuration settings on this screen, then click
    the Next > button to continue to the next configuration screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next configuration screen is for Storage Optimization. On this screen, you
    are able to configure advanced options with regard to storage management and the
    placement of the OS, persistent, and replica disks. You have the option to select
    the location of the various different disks that get created for the virtual desktops
    in this desktop pool. Horizon View effectively allows you to tier your storage
    and so, depending on your storage design, you might want to place the replica
    images on faster, local SSD-based storage, and the OS disks on a different tier
    of storage, such as spinning hard drives.
  prefs: []
  type: TYPE_NORMAL
- en: 'These configuration options are shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/902dacf7-b4e1-4593-ac8f-05148c1b082b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'To configure the **Storage Policy Management** setting, perform the following
    steps:'
  prefs: []
  type: TYPE_NORMAL
- en: The only option on this screen is to configure the Storage Policy Management,
    starting with VMware Virtual SAN. To enable VSAN, click the radio button for Use
    VMware Virtual SAN (**58**). As we don't have this configured in the example lab,
    then we will click the radio button for Do not use VMware Virtual SAN (**59**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You can then configure the locations for where the different disk types are
    stored. Here you have two options. The first is for Select separate datastores
    for persistent and OS disks (**60**). This allows the persistent disks and OS
    disks to be stored on different datastores. The second option is for Select separate
    datastores for replica and OS disks (**61**). It is recommended that a high-performance
    datastore be chosen for these images, such as a flash-based array. Depending on
    your hardware configuration, storing replica disks on a separate datastore might
    create a single point of failure.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check the relevant box to configure where you want to store the different disks
    or leave the boxes unchecked to use a single datastore for all disks. As the example
    lab only has a single datastore, we will leave them unchecked.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next configuration screen is the **vCenter Settings** configuration screen.
  prefs: []
  type: TYPE_NORMAL
- en: vCenter Settings
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'On the **vCenter Settings** screen, we are going to select the parent VM from
    which to build the virtual desktop machines, and then the location and resources
    that are going to run them. As such, the configuration options fall into three
    categories. Default Image, Virtual Machine Location, and Resource Settings**,**
    as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/eae20409-2fe3-407d-bda3-2e003ab53e56.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The first thing to configure is the details of the Default Image to be used
    as the parent image from which to create the virtual desktop machines for this
    desktop pool. This section is shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/8945d81c-0bb4-49d1-a2c5-db4caca46117.png)'
  prefs: []
  type: TYPE_IMG
- en: 'So, let''s start with the configuration:'
  prefs: []
  type: TYPE_NORMAL
- en: 'On the first box, Parent VM, click the Browse... button (**62**). You will
    now see the **Select Parent VM** box, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/3a9d58ae-1ac3-4668-bf71-5dbfdc4baa25.png)'
  prefs: []
  type: TYPE_IMG
- en: You will now see a list of the available **valid** parent VMs. By valid, this
    means that these will be VMs that contain snapshots and have the Horizon View
    Agent installed within them. The VMs that will be filtered by default are virtual
    machines running on ESX/ESXi hosts older than 4.0, VMs that don't have a snapshot,
    VMs with an unsupported guest OS, VMs already used by another desktop pool, and
    View Composer Replicas. It is possible to add these VMs to the configuration by
    clicking on the Show all parent VMs button. However, if they are not compatible,
    you will not be able to select them.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The images displayed using the example lab are the gold images that we created
    previously. As we are building the Windows 7 desktop pool, we are going to use
    the Windows 7 parent machine, so select the entry for Windows 7 Gold Image **(63)**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once you have selected the parent VM you want to use, click OK to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now return to the vCenter Settings screen, where we can configure
    the second of the options on the Default Image section. You will also see that
    the Parent VM box (**64**) has now been populated with the details of the Windows
    7 gold image, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6e351b77-5695-45c7-85f2-9eab304cd278.png)'
  prefs: []
  type: TYPE_IMG
- en: As this is a Linked Clone virtual desktop machine, the next configuration task
    is to configure the details of the snapshot that was created from the parent image.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'On the Snapshot box, click the Browse... button (**65**). You will now see
    the **Select default image**, box as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/08be8f2a-dd25-45b0-aa48-6b592cdaacfb.png)'
  prefs: []
  type: TYPE_IMG
- en: The first thing you can see is the details of the parent image (**66**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Below that, you will see the list of snapshots created from this parent VM.
    In this case, we have just one, the snapshot for Windows 7 Gold Image, which we
    will click to select (**67**). If you had more than one snapshot for this image,
    then they will all be listed, allowing you to select the correct one.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When you click the snapshot, you will see the Snapshot Details button (**68**)
    is now available to click. If you click this, then you will see the full details
    of the snapshot, as shown. Click OK to close the Snapshot Details box.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK on the Select default image box to complete the configuration.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see that the snapshot has been added, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c26b727f-5041-4de4-b3a7-d306893941a6.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The next part of the **vCenter Settings** is the Virtual Machine Location setting,
    as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/0cd2be8e-ca66-462d-990f-d3b9abdc6074.png)'
  prefs: []
  type: TYPE_IMG
- en: 'To proceed further, perform the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: On the VM folder location box, click the Browse... button (**69**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Select the folder to store the VM box, as shown in the
    following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/902d1516-33fb-4fc8-b7c4-17847c7c1b67.png)'
  prefs: []
  type: TYPE_IMG
- en: Expand PVO's Datacenter by clicking the arrow (**70**) and then select the folder
    in which you want to create the virtual desktop machine. In the example lab, this
    folder has been called Horizon Desktops (**71**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You might want to consider a folder structure for the virtual machines to help
    with management; otherwise, you could end up creating hundreds of different virtual
    desktop machines that reside in different pools, all in the same folder.
  prefs: []
  type: TYPE_NORMAL
- en: Click OK to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will return to the vCenter Settings screen where you will see that the
    VM folder location has now been added, as you can see in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/d7d2c1a0-b66e-42a7-a8a8-d04010205a21.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The next configuration section is for the resources that are going to host
    and run the virtual desktop machines in the pool:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/ec08a96b-72e7-40c4-82a5-1efe06ed6c87.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The options shown are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: First, in the Host or cluster box, click the Browse... button (**72**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will then see the Host or Cluster box appear, listing the available host
    resources. The host resources are the ESXi servers available. In this example,
    we can see the IP address of the example lab ESXi server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In a production environment, the hosting infrastructure used in this part of
    the configuration would be part of the desktop block hosting infrastructure.
  prefs: []
  type: TYPE_NORMAL
- en: Click on the IP address `192.168.1.131` (**73**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now return to the vCenter Settings screen, where you will see that
    the Host or cluster has now been added, as you can see in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/62a9ebd2-1a9b-493e-a7c2-a4ea06a06312.png)'
  prefs: []
  type: TYPE_IMG
- en: Next, we are going to configure the resource pool for this desktop pool to use.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the Resource pool box, click the Browse... button (**74**). You will now
    see the Select a resource pool to use for this desktop pool box, from where you
    can select the resource pool, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4b2af10b-19e1-4cdc-87f0-8158a312893f.png)'
  prefs: []
  type: TYPE_IMG
- en: The resource pool for the example lab is the ESXi host server again, so click
    the IP address `192.168.1.131` to select this from the list (**75**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now return to the vCenter Settings screen, where you will see that
    the Resource pool has now been added, as you can see in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/7276919c-71ca-4e54-86f4-4938c3c77544.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The final configuration option in this section is for **Datastores**. In the
    example lab, we are using a single datastore, which was selected from the **Storage
    Optimization** settings screen. If you had opted to place the different disks
    on different datastores, then you would now see options to configure the location
    for the OS disk datastore, persistent disk datastore, and replica disk datastore:'
  prefs: []
  type: TYPE_NORMAL
- en: In the Datastores box, click the Browse... button (**76**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the **Select Linked Clone Datastores** configuration screen,
    which shows all available datastores, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/7a3d42df-53af-4895-938f-8abea150bbb0.png)'
  prefs: []
  type: TYPE_IMG
- en: Check the box for VM Datastore (**77**). You then have the option to configure
    Storage Overcommit. The overcommit level represents the multiplier that, when
    applied to the capacity of the full desktop, gives you the amount you wish to
    allow in the datastore.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To configure an overcommit, click the drop-down menu (**78**), from where you
    can select from the following options:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'None: No overcommit allowed'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Conservative: Allows four-time overcommit'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Moderate: Allows seven-time overcommit'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Aggressive: Allows 14-time overcommit'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Unbounded: Has no restriction'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: For example, if the size of your full desktop was 10 GB and you had a 100 GB
    datastore, then selecting None would allow you to provision 10 desktops, Conservative
    would allow you 40 desktops, Moderate would allow 70 desktops, Aggressive would
    allow 150 desktops, and Unbounded would have no restriction.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You need to be careful with choosing how you are going to configure the overcommit
    setting, and the only real way to judge this is to monitor Linked Clone growth
    during the POC.
  prefs: []
  type: TYPE_NORMAL
- en: 'Once configured, click the OK button. You will return to the **vCenter Settings**
    configuration screen, where you will see that the details of the Linked Clone
    datastores have now been entered by displaying the text 1 selected (79)**,** as
    shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/dbb25cc4-ac15-4910-9e38-4fc768ab089a.png)'
  prefs: []
  type: TYPE_IMG
- en: With the **vCenter Settings** configuration now complete, click the Next > button
    to continue to the next configuration screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next configuration screen is for **Advanced Storage Options.**
  prefs: []
  type: TYPE_NORMAL
- en: Advanced Storage Options
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In the next screen, we are going to configure the **Advanced Storage Options**,
    as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/82b29ddd-57f0-4b15-b78d-9037960f7b66.png)'
  prefs: []
  type: TYPE_IMG
- en: In the first section of this configuration screen, you can configure the View
    Storage Accelerator and how to manage disk space. View Storage Accelerator allows
    you to configure desktop pools to enable ESXi hosts (vSphere 5.x or later) to
    cache virtual machine disk data. This feature uses the **Content Based Read Cache**
    (**CBRC**) feature of the ESXi host server. The View Storage Accelerator, or VSA,
    reduces the disk IOPS and therefore improves the performance during boot storms.
  prefs: []
  type: TYPE_NORMAL
- en: 'A boot storm occurs when a large number of virtual desktop machines all start
    up and boot at the same time, and they all run an anti-virus scan at the same
    time. The feature is also beneficial when administrators or users load applications
    or data frequently:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To enable the View Storage Accelerator, check the box for Use View Storage
    Accelerator (**80**), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/2f30cc3a-12c2-4610-9fbf-f00c212ac808.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Disk Types section, you then have the option of which particular disks
    you want the View Storage Accelerator to apply to. From the drop-down menu (**81**),
    you can choose from OS disks or OS and persistent disks. In the example lab, we
    are going to choose the OS disks option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The Regenerate storage accelerator after option, then allows you to specify
    a time limit on when you want to regenerate the data that has been cached. This
    basically clears the cache and rebuilds it. By default, this is set to `7` days.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you check the Other Options box (**82**), you have two options here. The
    first, which is grayed out in the example lab, is for **Use native NFS snapshots**
    (**VAAI**). VAAI, or vStorage API for Array Integration, is a hardware feature
    integrated into specific hardware-based arrays. It uses native snapshotting technology
    to provide Linked Clone functionality. You would only choose this option if you
    have appropriate hardware devices that support VAAI. This is grayed out in the
    example lab, as we don't have any supported devices.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next option in this section is for Reclaim VM disk space. Virtual desktop
    machines hosted on vSphere 5.x and later can be configured to use a space-efficient
    disk format that supports reclamation of unused disk space (such as deleted files).
    Enabling this option, by clicking the radio button, reclaims unused disk space
    on each virtual machine and is initiated when an estimate of used disk space exceeds
    the disk size specified in this setting. By default, this threshold is set to
    `1` GB.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next setting under Advanced Storage Options is to configure blackout times
    for cache regeneration and space reclamation. This should be set to ensure that
    these operations won''t be scheduled during working hours and ensure users are
    not affected. The Blackout Times configuration box is shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/f6a17b5e-a22c-47bd-a85a-7fcb4df8ea43.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Add... button (**83**) to add a blackout time.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will then see the Set Blackout Days configuration box. Here, you can select
    the days by checking the box to configure the days you **DO NOT** want to run
    regeneration or space reclamation tasks. You can also select specific times not
    to run the tasks.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click OK once you have configured your blackout days and times. You will return
    to the Blackout Times configuration box, which will detail your configured times,
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/2f662637-39da-476b-bf76-be781581a266.png)'
  prefs: []
  type: TYPE_IMG
- en: In this example, we have configured the blackout for weekdays between `08:00`
    and `19:00`. You can add additional blackout times as well as delete or edit existing
    configurations.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The final setting under Advanced Storage Options is to configure a Transparent
    Page Sharing Scope**,** as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/d57f8ffb-6561-480b-9e2c-d8d9549ac620.png)'
  prefs: []
  type: TYPE_IMG
- en: What is transparent page sharing, or TPS? TPS is a memory management technology
    that is used in virtualization solutions. In desktop virtualization, you are running
    potentially thousands of copies of exactly the same operating system, all consuming
    memory, and using exactly the same memory pages. TPS reduces the number of redundant
    memory pages on a host server down to a single page. The ESXi hypervisor looks
    for these duplicate pages and if it identifies identical memory pages on multiple
    virtual machines (VMs) on the same host server, then it shares the single page
    across the virtual desktop machines, putting in place memory pointers to refer
    back to the page. This is a much more efficient use of memory, and frees up space
    to allow more virtual desktops to run.
  prefs: []
  type: TYPE_NORMAL
- en: From the drop-down menu (**84**), select the scope for TPS. You have the option
    of sharing memory across a Virtual Machine, the virtual desktop machines in a
    Desktop Pool, the virtual desktop machines in a Pod, or at a Global level.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button once you have completed configuring the **Advanced Storage
    Options**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next configuration screen is for Guest Customization**,** as shown in the
    following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/1c2c37db-d2e3-412f-8e60-4ff9c6a18bc6.png)'
  prefs: []
  type: TYPE_IMG
- en: 'On this configuration screen, you can configure where in Active Directory virtual
    desktop machines reside, as well as how to customize the guest OS:'
  prefs: []
  type: TYPE_NORMAL
- en: In the Domain section, on the drop-down menu (**85**), select the domain where
    you want the machine accounts to reside. In the example lab, this is our `pvolab.com`
    domain.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you can choose the AD container where you want the machine accounts to
    reside. The default setting for this is the computers container, so you will see
    `CN=Computers`. To change this, click the Browse... button (**86**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the AD container box. If you expand out the domain, you will
    see all your containers, so select the appropriate container where you want to
    store the virtual desktops created with this desktop pool. For example, this desktop
    pool could be for the technical department, and so you may have a container in
    AD that reflects this. It's worth creating a folder/container structure that reflects
    your organization and makes it easier to manage your virtual desktop machines
    rather than have them all in the standard computers container.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click to highlight the container you want to use and then click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now return to the Guest Customization screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check the box for Allow reuse of pre-existing computer accounts. This allows
    you to reuse existing AD computer accounts if the virtual desktop machine names
    of newly created Linked Clones match the existing computer account names. This
    is particularly useful when creating non-persistent desktops.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, click the radio button for Use QuickPrep (**87**). QuickPrep will allow
    you to prepare your desktops in a quicker fashion than Sysprep. However, no unique
    SID will be created. Sysprep will create a new SID but will take longer for each
    desktop to prepare. Which one you choose to use will depend on your use cases.
    It is recommended that you test your configuration during the POC. As part of
    QuickPrep, you can also specify additional scripts along with any parameters you
    want to use for those scripts.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The final option is to use SysPrep instead of QuickPrep. To use this feature,
    click the radio button for Use a customization specification (SysPrep). This will
    utilize an existing script from the vCenter Server. In the following example,
    we have used a pre-built script called **Virtual Desktop Customization:**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5a6f295a-62d9-4122-8730-5f22b40ee1a9.png)'
  prefs: []
  type: TYPE_IMG
- en: To use this script, click to highlight it. In the example lab, we are going
    to use QuickPrep, so ensure this option is selected.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button when you have completed the configuration.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the final screen, the Ready to Complete screen, as shown in
    the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c0b008f8-561c-45ce-be62-52c3ade24ee0.png)'
  prefs: []
  type: TYPE_IMG
- en: Review your configuration settings, and then click the Finish button to create
    the desktop pool.
  prefs: []
  type: TYPE_NORMAL
- en: You also have the option of ticking the Entitle users after this wizard finishes
    box (**88**) at the top of the screen, which will automatically launch the entitlement
    configuration screen so you can give end users access to the virtual desktop machines
    in this pool. However, in the example lab, we will do this later, after we have
    created some additional desktop pools.
  prefs: []
  type: TYPE_NORMAL
- en: 'You will now see that the pool has been created, as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/9a06bb6b-ce85-46a5-9a46-c990639c9c52.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will also see on the vCenter Server, that the folder structure for Linked
    Clones has been set up. You will see, under the `Horizon Desktops` folder, a new
    folder called `Win7-dedicated-lc`, the name reflecting the ID you entered for
    the pool. The virtual desktop machines to be built will reside in this folder.
    This is shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/0098ad44-5aa6-483f-a200-d1b3005183e7.png)'
  prefs: []
  type: TYPE_IMG
- en: In the next section, we are going to show you how to create another desktop
    pool, but this time we will use the Horizon Console instead of the View Administrator.
  prefs: []
  type: TYPE_NORMAL
- en: Horizon Console method
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'As well as the current Horizon View Administrator management console, there
    is a new web-based console. This is called the **Horizon Console**. However, at
    the time of writing this book, there are several features that are **not** supported
    by the Horizon Console, including the following:'
  prefs: []
  type: TYPE_NORMAL
- en: Automated, floating-assignment pools of full virtual machines
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Automated Linked Clone desktop pools
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Automated Linked Clone farms
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Cloning an automated desktop pool
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Cloud pod architecture configuration
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Manual desktop pools
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: ThinApp applications
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In this section, we are going to create the same desktop pool that we created
    previously, but this time using the Horizon Console. We will run through the screenshots
    and configuration options, but for more details on each configuration option,
    please refer back to the previous section.
  prefs: []
  type: TYPE_NORMAL
- en: 'The first thing to do is to launch the Horizon Console. There are two ways
    of doing this. The first way is to log in to the classic View Administrator and
    click on the link for Horizon Console (**1**), as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/7c93d62d-f8e8-426c-8dc3-23c6441be72b.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The other way is to use your browser to navigate directly to the URL of the
    Connection Server, but this time add `/newadmin` to the end of the URL. So, for
    the example lab, you would type `https://hzn7-cs1/newadmin`. You will then see
    the login screen, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/133c2a5b-fbd8-4bb3-91c7-b9e6de6c9cbf.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Enter the username and password, ensuring you select the correct domain from
    the drop-down menu, and then click on the green Sign in button. Now you are logged
    in, you will now see the **Horizon Console** main screen, as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/820e6aba-5683-4f5c-a9b2-320b74af3399.png)'
  prefs: []
  type: TYPE_IMG
- en: 'We are now going to configure a desktop pool by performing the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Unlike with the classic View Administrator console, desktop pools in the Horizon
    Console come under the general heading of desktops, so, from the menu options
    on the left-hand side, expand Inventory and then click on Desktops (**2**). You
    will now see the **Desktop Pools** configuration screen, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/83a7a0a5-0489-4d22-be2e-56462ef34b69.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Click the Add button (**3**). You will now see the Add Pool screen with the
    first section highlighted for Type**,** as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b8f705be-d55e-41ce-93e7-96d29e093772.png)'
  prefs: []
  type: TYPE_IMG
- en: Click on Automated desktop pool (**4**). Remember, currently, there is no option
    to configure a manual desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now move onto the next item on the list, vCenter Server**,** as shown
    in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e2268634-5270-410c-9381-932bdf3e1da4.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the radio button for Instant Clone (**5**). Remember, the version of the
    Horizon Console used in the example lab currently does not support Linked Clone
    configuration.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Next, from the list, select the vCenter Server you want to use for creating
    the Instant Clones from. In the example lab, the vCenter Server is listed by its
    IP address, so click on `192.168.1.178` **(6)** and then click Next to continue.
    You will now see the User Assignment configuration, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0dd3ce8b-72b7-4891-acab-2eb5b2e16bcf.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the radio button for Dedicated (**7**) and also ensure that you check
    the box for Enable automatic assignment.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click Next to continue. You will now see the Storage Optimization option, as
    shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/d0d1e1bf-aa0a-4063-b5ed-16b56c733974.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the radio button to select whether you want to use VMware Virtual SAN
    or not. In the example lab, this has not been configured. Also on this configuration
    screen, you can choose whether or not to use separate datastores for replica and
    OS disks.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click Next to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Desktop Pool Identification**,** screen as shown in the
    following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0ac63c5f-b7b0-47d8-b109-e8c1cb2f8dcb.png)'
  prefs: []
  type: TYPE_IMG
- en: In the ID box **(8)**, enter a name to use to identify this desktop pool. In
    this example, we have called it `Win-7-Desktop-IC`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, in the Display name box **(9)**, enter a name that end users will see
    to identify this particular desktop pool. In this example, we have called it `Windows
    7 Desktop`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you have configured an Access group**,** then select it from here by clicking
    on the drop-down menu.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, in the Description box (**10**), enter a description to describe this
    desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click Next to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Provisioning Settings screen, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/aff74318-918d-4cd4-a3a5-aabbb9916566.png)'
  prefs: []
  type: TYPE_IMG
- en: Under the Basic section, check the box for Enable provisioning **(11)** and
    the box for Stop provisioning on error (**12**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Then, in the Virtual Machine Naming box (13), type in a name that you want to
    call the virtual desktop machines that get built. In the example lab, we have
    entered the name `Win7-IC`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Provisioning Timing section, click the radio button for Provision all
    machines up-front (**14**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: And finally, in the Desktop Pool Sizing section, in the Max number of machines
    box (**15**), type in the number of machines you want as a maximum in this desktop
    pool, and then type in the number of spare virtual desktop machines you want in
    the Number of spare (powered on) machines box (**16**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click Next to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the vCenter Settings screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c721d639-2050-4dbe-b910-37a3bc5bd08f.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The first task is to select the Default image from the gold images we have
    already created. To do this, click the Browse... button (**17**) next to the Parent
    VM box. You will now see the Select a Parent VM screen, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/aa5b48a1-1db2-499d-8199-ddf7a7adc2b6.png)'
  prefs: []
  type: TYPE_IMG
- en: In this example, we are going to create a desktop pool using Windows 7 as the
    operating system, so click to select the option for Windows 7 Gold Image from
    the list of available images, and then click the Submit button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now return to the vCenter Settings screen, where we can configure
    the next option for Snapshot. You will also see that the Parent VM box (**19**)
    has now been populated, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8203a231-3844-49b3-8d8a-905d80bfc1bc.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The next Default image setting is to configure which snapshot to use. Click
    the Browse... button next to the **Snapshot** box (**20**). You will now see the
    Parent VM in vCenter screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/46678e82-6cee-46ff-9d50-d8024943a240.png)'
  prefs: []
  type: TYPE_IMG
- en: From the list of snapshots for this image, select the one you want to use. In
    the example lab, we only have the one snapshot that we have created, so click
    the Windows 7 Gold Image option from the list (**21**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Submit button to continue. You will now return to the vCenter Settings
    screen, where you will see that the snapshot has been added to the configuration
    (**22**), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b88f404f-d23b-46f0-8f00-c45f85e2dd22.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next, we are going to configure the next set of options for Virtual Machine
    Location. Click the Browse... button next to the VM Folder Location box (**23**).
    You will now see the Select the folder to store the VM screen, as shown in the
    following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ecbfcc5a-7b5b-43ce-a286-6b51b401bf24.png)'
  prefs: []
  type: TYPE_IMG
- en: Select the folder where you want to store the virtual desktop machines that
    will be created as part of this desktop pool. In the example lab, expand out the
    entry for PVO's Datacenter and then click on the Horizon Desktops folder (**24**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Submit button to continue. You will now return to the vCenter Settings
    screen, where you will see that the VM folder location has been added to the configuration,
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/d1941cd2-b1d7-4f60-ac55-11048ae71245.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The next set of configuration options are for Resource Settings**,** as shown
    in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/426ac3f2-bc84-46a5-924a-cece201d9f60.png)'
  prefs: []
  type: TYPE_IMG
- en: 'First, we are going to configure which cluster is going to host the virtual
    desktop machines in this desktop pool. Click the Browse... button next to the
    Cluster box (**25**). You will now see the Select Cluster screen, as shown in
    the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/89057587-8d8f-4102-b8df-b813d7fea3af.png)'
  prefs: []
  type: TYPE_IMG
- en: 'In the example lab, expand out the entry for PVO''s Datacenter and then click
    on the PVO Desktop Cluster option (**26**). Now click the Submit button. You will
    now return to the vCenter Settings screen, where you will see that the details
    of the **Cluster** (**27**) have been added to the configuration, as shown in
    the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6987e061-6fc2-4784-b403-5d5c6ad08514.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next, we are going to select the Resource Pool. Click the Browse... button
    next to the **Resource Pool** box (**28**). You will now see the Select a resource
    pool to use for this Desktop Pool screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b2a83409-4928-43de-80f8-ab058904fed3.png)'
  prefs: []
  type: TYPE_IMG
- en: From the list, click on the resource pool you want to use. In the example lab,
    click on the entry for PVO Desktop Cluster (**29**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Submit button to continue. You will now return to the vCenter Settings
    screen, where you will see that the **Resource pool** details have been added
    to the configuration (**30**), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/64f9c7ca-a9aa-4baa-9d33-6976de8f9c2d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next to configure is the datastore where the virtual desktop machines in this
    desktop pool are going to be stored. Click the Browse... button next to the Datastores
    box (**31**). You will now see the Select Datastores screen, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e6bc878e-6b86-4fed-a770-557cda72e7ad.png)'
  prefs: []
  type: TYPE_IMG
- en: From the list, check the box for the datastore that you want to use. In the
    example lab, this is the VM Datastore (**32**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Submit button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the example lab, as we are using a local datastore, you will see the following
    warning message:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/17d37315-6b6f-4cf6-a408-3a14dc4ac48c.png)'
  prefs: []
  type: TYPE_IMG
- en: Click OK to acknowledge the warning message and to close the box.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now return to the vCenter Settings screen, where you will see that
    the Datastore section now shows that a datastore has been selected (**33**), as
    shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/42832a19-0d69-4681-876f-29a46e1b8876.png)'
  prefs: []
  type: TYPE_IMG
- en: The final thing to configure is the Network section, which allows you to configure
    which virtual network the virtual desktop machines in this desktop pool are going
    to connect to.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: By default, this is configured as the same virtual network that the parent VM
    was set to. To change the network configuration, click the Browse... button (**34**)
    and then select the relevant network. In the example lab, we are going to leave
    this as the default configuration setting.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click Next to continue to the next configuration option. You will now see the
    Desktop Pools configuration screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/3c47f9d7-cf4f-4c3d-8cdd-524316bd5696.png)'
  prefs: []
  type: TYPE_IMG
- en: The first thing to configure is to enable the desktop pool so that users can
    access the virtual desktop machines within the desktop pool. In the State box
    (**35**), from the drop-down menu, ensure that Enabled is selected.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You can then configure the Connection Server restrictions and the Category Folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, in the Automatically logoff after disconnect box (**36**), from the drop-down
    menu, choose the appropriate action to take. In this example, we have chosen Never
    so that the user never logs off when they disconnect from their virtual desktop
    machine.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Then, in the Allow users to restart/reset machines box (**37**), from the drop-down
    menu, choose the appropriate action to take. In this example, we have chosen No,
    so users cannot restart or reset their virtual desktop machines.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click Next to continue. You will now see the Remote Display Settings configuration
    screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/799402e9-6081-4001-928b-0b6e0a1daf8d.png)'
  prefs: []
  type: TYPE_IMG
- en: First, on the Default display protocol box (**38**), from the drop-down menu,
    choose the display protocol that you want this desktop pool to use. In the example
    lab, we have chosen PCoIP.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, on the **Allow users to choose protocol** box (**39**), from the drop-down
    menu, choose the whether you want to allow users to change from the default protocol.
    In the example lab, we have chosen Yes.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the 3D Renderer box (**40**), choose the relevant 3D rendering model for
    this desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, check the Enabled boxes for HTML Access (**41**) and also Allow Session
    Collaboration (**42**). Note that session collaboration requires the VMware Blast
    protocol.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click Next to continue to the next configuration option. You will now see the
    Guest Customization screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c808001a-6f87-4673-b762-7af1e95a07a2.png)'
  prefs: []
  type: TYPE_IMG
- en: On this configuration screen, you can select where the virtual desktop machines
    are going to reside in Active Directory. In the Domain box (**43**), from the
    drop-down menu, select the domain name of where they will live. In the example
    lab, this is the domain called `pvolab.com`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, in the AD Container box, click the Browse... button and then choose the
    relevant container into which the virtual desktop machines in the desktop pool
    are going to reside. In the example lab, this is the default setting of `CN=Computers`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click Next to continue to the Ready to Complete screen, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/24217737-09a4-4039-85d5-d6d47485a9b0.png)'
  prefs: []
  type: TYPE_IMG
- en: The only option on this screen is to check the box (**45**) to choose whether
    or not you Entitle users after this wizard finishes. We will cover the configuring
    of entitlements later in this chapter, using both the classic View Administrator
    console and the new Horizon Console.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have now successfully configured a desktop pool using the Horizon Console.
    In the next section, we are going to create additional desktop pools to reflect
    the different types of pools.
  prefs: []
  type: TYPE_NORMAL
- en: Creating dedicated, Full Clone desktop pools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The process for creating a dedicated, Full Clone desktop pool is pretty much
    the same as we covered in the previous section, where we configured a dedicate
    Linked Clone desktop pool. There are a few changes, however, as we configuring
    a Full Clone virtual machine, which will use a template to create the virtual
    machines from, rather than a snapshot. As we work through this section, we will
    just highlight the different configuration options in more detail using screenshots,
    and for the tasks that we have covered previously, we will just describe these
    using text. You can refer back to the previous section for the screenshots.
  prefs: []
  type: TYPE_NORMAL
- en: 'To set up the desktop pool using the Horizon View Administrator, perform the
    following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation, open a browser and enter the address details of the View
    Connection Server. In the example lab, the address of the Connection Server is
    `https://hzn7-cs1.pvolab.com/admin`. Don't forget the `/admin` at the end; otherwise,
    you will end up on the Horizon Client page.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the View Administrator login screen. Log in using the administrator
    account.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Horizon View Administrator dashboard screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: From the Horizon View Administrator, click to expand the Catalog option, and
    then click on Desktop Pools. Then from the Desktop Pools pane that is now displayed,
    click the Add... button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Add Desktop Pool screen, starting with the Type section
    where we select which type of desktop pool you want to create.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the radio button for Automated Desktop Pool. When selecting the various
    types of desktop pools that are available, the description on the right-hand side
    will change, reminding you of the differences between types.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the User Assignment screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the radio button for Dedicated. The Enable automatic assignment option
    will already be selected by default. This means the desktops will be assigned
    to the users on a first come, first served basis, as they log in. If, for some
    reason, you need to ensure a user is assigned a specific desktop, then you will
    need to uncheck this box, and manually assign them a virtual desktop machine.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next> button to continue the configuration. On the vCenter Server
    screen, you will now configure how the virtual desktops machines will be built,
    using the vCenter Server linked with this Connection Server, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/04b349e3-bfa5-4b1b-9978-43e06a0718e5.png)'
  prefs: []
  type: TYPE_IMG
- en: On this configuration screen, you again have the option to build either Instant
    Clones, View Composer Linked Clone virtual desktop machines, or Full Clone virtual
    desktop machines.
  prefs: []
  type: TYPE_NORMAL
- en: For this second pool, we are going to use full virtual machines, so click the
    radio button for Full virtual machines (**1**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you need to select the relevant vCenter Server from the list. In the example
    lab, the vCenter `192.168.1.178` is shown, along with the vCenter user account
    we set up for the View. Click to highlight and select this vCenter Server (**2**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next> button to continue the configuration. The next configuration
    screen is for the Desktop Pool Identification**,** as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/3bafcdb9-477e-4094-93cb-bf236ba20524.png)'
  prefs: []
  type: TYPE_IMG
- en: In the ID box (**3**), type in an ID for this desktop pool. In the example lab,
    we have entered the ID of `Win7-dedicated-full`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Remember, you can only use the characters *a*-*z*, *A*-*Z*, *0*-*9*, *-*, and
    *_* in the pool ID.
  prefs: []
  type: TYPE_NORMAL
- en: In the Display name box (**4**), type in a name for this pool. Bear in mind
    that the display name is what is displayed to the end users, so make sure you
    give it a non-technical name that the users will understand.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, in the Description box (**5**), type in a more detailed description
    which describes the desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next> button to continue the configuration. You will now see the Desktop
    Pool Settings configuration screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This configuration page is where we start to configure the settings that will
    define the way the desktop behaves within the desktop pool for the end users.
    Configure the setting you want to apply to this pool and then click the Next >
    button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Provisioning Settings screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The first setting in the Basic section is to Enable provisioning. Tick the Enable
    provisioning box to switch provisioning on. This setting means that virtual desktop
    machines can be provisioned as per the configuration settings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next setting is for Stop provisioning on error. By checking this box, it
    means that provisioning will stop if there is an error during the provisioning
    process.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next section to configure is for the Virtual Machine Naming**,** as shown
    in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4adffc26-19d1-4e31-8c6f-474354eadf61.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the radio button for Use a naming pattern and then, in the Naming Pattern
    box (**6**), enter the name pattern you want to use. In the example lab, we have
    called this `Win7-VM-Full-{n}`. This will result in the virtual desktop machines
    being named `Win7-VM-Full-1`, `Win7-VM-Full-2`, and so on, up to the number of
    machines you specify that you want to build.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, in the Max number of machines box, enter the maximum number of machines
    that can be provisioned in this desktop pool. This sets the limit of the number
    of virtual desktop machines in this desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next is the setting for the Number of spare (powered on) machines. In the box,
    enter the number of machines that should be powered on and waiting for users to
    connect to them.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provisioning Timing is the next option to configure. Either click the radio
    button for Provision machines on demand and then enter the minimum number of machines
    or click the radio button for Provision all machines up-front.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next option, as we are configuring Full Clone virtual desktop machines,
    is for a **Virtual Device**. The option in question is for **A**dd a Trusted Platform
    Module (vTPM) device to the VMs**,** as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/c83de015-1960-4d82-9f92-21e6c3725e0d.png)'
  prefs: []
  type: TYPE_IMG
- en: TPM is recognized for securing cryptoprocessors. It is basically designed for
    securing hardware with the help of integrated cryptographic keys. It is located
    on the motherboard of a physical machine in the form of dedicated microcontroller
    or microchip. A virtual TPM relies on the hypervisor (available with vCenter version
    6.7) to provide virtual desktop machines with an isolated execution environment
    hidden from the software that is running within the virtual desktop machines.
    This feature secures their code from the software in the virtual desktop machines,
    providing a security level that is comparable to a firmware-based TPM.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue to the next configuration screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next configuration screen is for Storage Optimization:'
  prefs: []
  type: TYPE_NORMAL
- en: The only option on this screen is to configure the Storage Policy Management,
    starting with VMware Virtual SAN. To enable VSAN, click the radio button for Use
    VMware Virtual SAN. As we don't have this configured in the example lab, we will
    click the radio button for Do not use VMware Virtual SAN.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue to the next configuration screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next configuration screen is the vCenter Setting**s** configuration screen.
    On this screen, we are going to select the parent VM from which to build the virtual
    desktop machines, and then the location and resources that are going to run them.
    As such, the configuration options fall into three categories. **Virtual Machine
    Template**, Virtual Machine Location, and Resource Settings**,** as shown in the
    following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/447aba0d-9d04-443a-a544-f86cd1df2387.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Let''s look at all the configuration options:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The first thing to configure are the details of the Virtual Machine Template
    to be used as the parent image from which to create the virtual desktop machines
    for this desktop pool. This section is shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6e354893-ed4e-4017-86a1-5df8ad168164.png)'
  prefs: []
  type: TYPE_IMG
- en: On the Template box, click the Browse... button (**7**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Select template screen, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ba3b1636-48f1-4b18-96e1-7d455fe4c78d.png)'
  prefs: []
  type: TYPE_IMG
- en: On this screen, you will see a list of all the templates that have been created
    in vCenter. As we are going to build a Windows 7 virtual desktop machine for this
    pool, select the option for Windows 7 Gold Image Template (**8**) by clicking
    and highlighting it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK to accept and close the Select template screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now return to the vCenter Settings screen, where we can now configure
    the second of the options. This is for Virtual Machine Location. You will also
    see that the Template box (**9**) has now been populated with the details of the
    Windows 7 Gold Image Template, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/75195027-22ff-449e-b6b9-9fde59ea682a.png)'
  prefs: []
  type: TYPE_IMG
- en: Under the Virtual Machine Location section, on the VM folder location box, click
    the Browse... button (**10**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Select the folder to store the VM screen, as shown in
    the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/deda31bd-d5db-4fa6-810d-3f579593e8ab.png)'
  prefs: []
  type: TYPE_IMG
- en: Expand PVO's Datacenter by clicking the down arrow and then select the folder
    in which you want to create the virtual desktop machines. In the example lab,
    this folder has been called `Horizon Desktops` (**11**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Don't forget to consider a folder structure for the virtual machines to help
    with management; otherwise, you could end up creating hundreds of different virtual
    desktop machines that reside in different pools, all in the same folder.
  prefs: []
  type: TYPE_NORMAL
- en: Click OK to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will return to the vCenter Settings screen, where you will see that the
    VM Folder Location has now been added:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/686926b8-cbd6-4f88-973d-8af96de575c6.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The next configuration section is for the resources that are going to host
    and run the virtual desktop machines in the pool:'
  prefs: []
  type: TYPE_NORMAL
- en: First, in the Host or cluster box, click the Browse... button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will then see the Host or Cluster box appear, listing the available host
    resources. The host resources are the ESXi servers available. In this example,
    we can see the IP address of the example lab ESXi server. Click on the IP address
    `192.168.1.131`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now return to the vCenter Settings screen, where you will see that
    the Host or cluster has now been added.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, we are going to configure the resource pool for this desktop pool to use.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Resource pool box, click the Browse... button. You will now see the Select
    a resource pool to use for this desktop pool box, from where you can select the
    resource pool. The resource pool for the example lab is the ESXi host server again,
    so click the IP address `192.168.1.131` to select this from the list.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now return to the vCenter Settings screen, where you will see that
    the Resource pool has now been added.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The final configuration option in this section is for **Datastores**. In the
    example lab, we are using a single datastore, which was selected from the Storage
    Optimization settings screen:'
  prefs: []
  type: TYPE_NORMAL
- en: In the Datastores box, click the Browse... button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Select Datastores configuration screen, which shows all
    available datastores, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/46d37346-c94a-4014-ba56-f2e8bbc31e8d.png)'
  prefs: []
  type: TYPE_IMG
- en: The first option on this configuration screen is for Select the Datastore type
    (**12**). Here, you can choose between an Individual Datastore or Storage DRS.
    DRS (Distributed Resource Scheduler) load balances storage resources and moves
    storage workloads to other available datastores rather than using the same one.
    In the example lab, select the option for Individual Datastore.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check the box for VM Datastore (**13**), as this is the datastore we are going
    to use to store virtual desktop machines from this desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once configured, click the OK button. You will return to the **vCenter Settings**
    configuration screen, where you will see that the details of the Linked Clone
    datastores have now been entered by displaying the text 1 selected.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: With the **vCenter Settings** configuration complete, click the **Next >** button
    to continue to the next configuration screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next configuration screen is for Advanced Storage Options:'
  prefs: []
  type: TYPE_NORMAL
- en: To enable the View Storage Accelerator, check the box for Use View Storage Accelerator.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Leave the Regenerate storage accelerator after option set to the default option
    of `7` days.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If you want to configure a blackout time, then under Blackout Times, Click the
    Add... button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The final setting under Advanced Storage Options is to configure a Transparent
    Page Sharing Scope. Leave this as the default setting of Virtual Machine.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button once you have completed configuring the Advanced Storage
    Options.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next configuration screen is for Guest Customization, as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/21d2d643-a188-48e0-96d0-76aa68c3c616.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The screen shows following the options:'
  prefs: []
  type: TYPE_NORMAL
- en: The first configuration option on this screen is for None - Customization will
    be done manually (**14**). Click the radio button to select this option if you
    want to manually configure each virtual desktop machine.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Under the previous option, you have the option for Do not power on virtual machines
    after creation. Check this box to prevent the virtual desktop machines from powering
    on when they have been created. If you are going to manually configure the machines,
    then it's worth selecting this option, as there is no point powering on machines
    that have not been configured.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you have the option for Use this customization specification (**15**).
    This option allows you to select a pre-built SysPrep script from vCenter. In the
    example lab, we have a script created called Virtual Desktop Customization (**16**).
    Click this option to highlight and select it. Under this option, you can also
    configure the ability to use pre-existing computer accounts. To enable this option,
    simply check the box for Allow reuse of pre-existing computer accounts.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button once you have completed configuring the Guest Customization.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the final screen, the Ready to Complete screen, as shown in
    the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5001773e-6908-431a-8aeb-52ffd8bbd61a.png)'
  prefs: []
  type: TYPE_IMG
- en: Review your configuration settings, and then click the Finish button to create
    the desktop pool.
  prefs: []
  type: TYPE_NORMAL
- en: You also have the option of ticking the Entitle users after this wizard finishes
    box at the top of the screen, which will automatically launch the entitlement
    configuration screen, so you can give end users access to the virtual desktop
    machines in this pool. However, in the example lab, we will do this later, after
    we have created some additional desktop pools.
  prefs: []
  type: TYPE_NORMAL
- en: 'You will now see that the pool has been created, as shown in the following
    screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/25e1e731-24fb-4123-ad53-4ede1f60481d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will also see on the vCenter Server, that the various folder structure
    for the desktop pool has been set up, and that the first virtual desktop machine,
    `Win7-VM-Full-1`, has been created and is powered on ready, for end users to log
    in to, as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/9a47c64d-8a0f-4374-b5da-526bd54d29cd.png)'
  prefs: []
  type: TYPE_IMG
- en: You have now successfully created a dedicated, Full Clone desktop pool.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we have configured the Horizon View Administrator to deliver
    our virtual desktop machines by means of creating desktop pools. We have built
    and configured a dedicated Full Clone desktop pool and a dedicated Linked Clone
    desktop pool. As part of the configuration of the desktop pools, we looked at
    how to create these using the classic Horizon View Administrator console, as well
    as the new web-client style Horizon Console.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we will look at how to build a number of floating desktop
    pools, using Linked Clones and Instant Clones. We will also configure a manual
    desktop pool before going on to look at some of the key management tasks you will
    need to perform when using Linked Clone desktop pools, and then entitling end
    users to the newly created desktop pools.
  prefs: []
  type: TYPE_NORMAL
