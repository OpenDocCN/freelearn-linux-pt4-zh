- en: Chapter 8. Integration with vROps and Scheduling
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following recipes:'
  prefs: []
  type: TYPE_NORMAL
- en: Installing and configuration of vROps Management Pack for VCM
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Configuring vROps – VCM compliance mapping and scheduling
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Scheduling OS and compliance data collection
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Scheduling compliance
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Scheduling reports
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Scheduling vCenter collections
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Scheduling vCenter discovery
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We will be discussing two different topics in the chapter. First, we will install
    the VCM adapter in vROps and integrate them so that we can send compliance data
    from VCM to vROps.
  prefs: []
  type: TYPE_NORMAL
- en: Nobody likes to be in front of any console to do the work, and automation is
    the key to everything. In this chapter, we will take a look at the scheduler feature
    of VCM, such as scheduling jobs to collect the data from managed machines, pushing
    the compliance details to vROps, or exporting a report and saving it on a share
    or sending to someone on e-mail.
  prefs: []
  type: TYPE_NORMAL
- en: So, let's begin with vROps and VCM integration.
  prefs: []
  type: TYPE_NORMAL
- en: Installing and configuration of vROps Management Pack for VCM
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Integrating VCM with vROps provides compliance and event details from VCM to
    the vROps console. This means that you can have an idea about what's going on
    with a particular server when you are troubleshooting. An event can give information,
    such as when the server was rebooted, when the pathing was done, or when the software
    was installed from VCM. Apart from this, VCM can push compliance details about
    the managed machine with the mappings that have been created.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We will need a configured VCM that has compliance configuration completed, and
    a working vROps server where we have admin access. We will also need user credentials
    that can log in to VCM and have admin access in the VCM application. We need to
    download the latest VCM solution from [https://solutionexchange.vmware.com/](https://solutionexchange.vmware.com/)
    .
  prefs: []
  type: TYPE_NORMAL
- en: vROps must be monitoring the same vCenter server that is managed by VCM.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In this recipe, we are going to install the VCM adapter for vROps. We will
    be logging into vROps and following the given steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in to vROps with an admin account, or another account that has admin privileges,
    and go to **Solutions**. Click on the green plus symbol under **Solutions**, as
    shown in the following screenshot:![How to do it...](img/image_08_001.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on **Browse** and go to the location where you have downloaded the VCM
    solution from the Internet and click on **Upload**. You will then get a screen
    similar to the following screenshot:![How to do it...](img/image_08_002.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Accept the unsigned solution warning if displayed by vROps.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Accept the EULA.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Let vROps complete the installation, and once done, click on **Finish** to complete
    it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This completes the installation of the adapter. Now we need to configure the
    adapter instance.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This time, under **Solutions**, select **Management Pack for** **VCM** **for
    vSphere** and click on the **Configure** button at the top with two gears:![How
    to do it...](img/image_08_003.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Provide the following details:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Display Name**: This will be the name displayed for the adapter'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Description**: Provide a good description so someone can understand what
    it is, when you are not around'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Database Host:** This is the IP or name of the VCM database server (for single-tier,
    it''s the VCM Collector server)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Database Port:** This is the SQL port on the VCM server'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Database Name:** This is the VCM database name; the default is `VCM`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Database Instance:** If you have installed SQL as **Instance**, provide the
    name that can be kept blank for default![How to do it...](img/image_08_004.jpg)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Provide the following details for the **Manage Credential** window:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Credential Name**: This is a descriptive name for the credential'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Database Username**: This is the database user account for the VCM database'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Note** that you have to create a dedicated service account in the Active
    Directory for this, and give this account an admin role in VCM.'
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
- en: '**Database Password**: This is the password for the user account'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Database Authentication**: This will be either SQL or Windows authentication
    (recommended)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Windows Domain**: In case of Windows authentication, provide the domain name,
    as shown in the following screenshot:'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '![How to do it...](img/image_08_005.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: After the information is provided, click on **Test Connection**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once the test is successful, click on **Save Settings**. Don't worry about the
    advanced settings, you can keep the default settings for time being.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Wait 2 minutes and check **Admin** | **Cluster Management** whether objects
    and metrics are collected:![How to do it...](img/image_08_006.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now we are ready to connect to the VCM database and fetch the required information
    to be displayed on the VCM console. vROps goes to the VCM database and starts
    collecting the required details, such as compliance score or events; these are
    posted on the vROps console:'
  prefs: []
  type: TYPE_NORMAL
- en: '![How it works](img/image_08_007.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Image Source**: [www.vmware.com](http://www.vmware.com)'
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The account used for adapter configuration must not be the account that is used
    for an interactive user login. The adapter account frequently logs in and out
    of VCM. If you use it as an interactive account, you must regularly refresh the
    connection, which affects your VCM experience.
  prefs: []
  type: TYPE_NORMAL
- en: Configuring vROps – VCM compliance mapping and scheduling
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once VCM is integrated with vROps, we need to move ahead so that it can run
    the compliance and send the compliance score to be displayed on the vROps console.
    We will create a mapping in the VCM that will run the compliance check and update
    it with the details in vROps.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To perform this task, you should have completed the earlier recipe to install
    the management pack and configure it.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We need to log in to the VCM console with admin privileges in order to perform
    this recipe. Once logged in, follow the steps to complete the mapping:'
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Compliance** | **Machine Group Compliance** | **vCenter Operations
    Manager Badge**| **Mapping** and then click on **Add**:![How to do it...](img/image_08_008.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Give the proper name and description when the wizard starts:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Select Badge**: **Risk Compliance**'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Roll up Type**: **Simple Percentage**'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Select Group Context**: As per the requirement'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Select **Correct Machine Group**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When the mapping runs, it will run against all the machines that are part of
    this machine group.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Select **Corresponding Compliance Template**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the template that is required to check compliance against the earlier
    selected machine group. You can select either a compliance template created for
    your organization or any standard template downloaded from the Internet.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Click on **Finish**. This will save the mapping.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once the mapping is created, we need to run this so that the compliance score
    is calculated for the machines that are part of the machine group and then informed
    to vROps in order to be displayed on the vROps console.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Select the mapping and then click on the **Run** button at the top.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It will first run the compliance check on the **Machine Group**, and then when
    vROps updates the details via the management pack imported and configured as described
    in the *Installing and configuration of vROps Management Pack for VCM* recipe,
    the status will be updated.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Depending upon how many machines you have in the machine group and the number
    of rules in the compliance template, it will take some time.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: To check the compliance tab on vROps, log in to the vROps console and navigate
    to **Environment** | **vCenter Adapter** | **Virtual Machines** and then select
    **Machine Go to Analysis** | **Compliance**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will see the compliance status of the machine.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'It will show the number of rules passed and failed and the compliance template
    used for checking the compliance along with the overall compliance status reported
    by VCM:'
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![How to do it...](img/image_08_009.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: 'Once the mapping is done, we can schedule this mapping so that it will update
    vROps on schedule. Continue from where we left off:'
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Administration** | **Job Manager** | **Scheduled** and click on
    **Add**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **vCenter Operations Manager Compliance Badge Mapping Run** on the **Job
    Type** page of the wizard.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide **Name** and **description**. You can be creative as there is a limit
    of characters for **Name**, you can use any naming convention as all the scheduled
    job are going to land at the same place in VCM.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the mapping that you want to schedule:![How to do it...](img/image_08_010.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the schedule and click on **Finish**. As this is related to compliance,
    make sure that this is scheduled after the OS and compliance data collection,
    as then we will have the latest data to run the compliance checks.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To get the details, the vCenter server must be monitored by vROps and managed
    by VCM.
  prefs: []
  type: TYPE_NORMAL
- en: When we add and configure the VCM Management Pack, it fetches compliance details
    from the VCM and then displays it on the vROps console.
  prefs: []
  type: TYPE_NORMAL
- en: The VCM compliance data is based on compliance templates that are run against
    the data collected from the same vCenter Server objects that are monitored in
    vRealize Operations Manager. The templates are the configuration settings that
    must be present on a target object for it to be considered compliant with the
    template standards. The standards might be the VMware vSphere Hardening Guide,
    Payment Card Industry standards, Health Insurance Portability and Accountability
    Act, or other VMware or industry standards.
  prefs: []
  type: TYPE_NORMAL
- en: When we select the mapping, it will first run the compliance check with the
    selected template(s) and then update the compliance score on the vROps console.
    The score is visible on the **Analysis **| **Compliance** tab of the managed VM.
    The tab will display the compliance status against various templates (if configured),
    the percentage, the number of rules, and so on. Once we schedule it, the job will
    make sure that the compliance score is updated on the vROps console.
  prefs: []
  type: TYPE_NORMAL
- en: Scheduling OS and compliance data collection
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Collections** are fetching the data as requested in the **Filter Set** from
    the managed machines. As you know, VCM does not go to the managed machine each
    time it needs to process something against the managed machine such as **Patch**
    or **Compliance** status, it uses the data that is available in the database,
    and after processing the data, it gives a result, for example, whether a patch
    is required or not or what is the compliance level we are at.'
  prefs: []
  type: TYPE_NORMAL
- en: If the data about the managed machine is not frequently updated, VCM processes
    stale data and we can have false positives or a very bad compliance score even
    though we are compliant.
  prefs: []
  type: TYPE_NORMAL
- en: To overcome this situation, we can go to the VCM console and start collecting
    the details on our own or schedule the job in the VCM and ask it to do it.
  prefs: []
  type: TYPE_NORMAL
- en: Continuous server management is based on the latest data that you collected
    from the target servers. Windows and Linux data appears in VCM and is available
    for several management actions, including **Console** dashboards and reports,
    **Compliance Views**, and **VCM Patching**.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We need a configured VCM where we have created all the required machine groups
    as described in the  *Creating a machine group *recipe in [Chapter 2](ch02.html
    "Chapter 2. Configuring VCM to Manage Your Infrastructure"), *Configuring VCM
    to Manage Y our Infrastructure*.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To perform this recipe, login to VCM with the admin account and follow the
    steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Administration **| **Job Manager **| **Scheduled** and click on
    **Add**:![How to do it...](img/image_08_011.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Collection** on the **Job Type** page of the wizard.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide **Name** and **Description**. You can be creative as there is a limit
    of characters for the **Name**, it will be better if you use a naming convention.
    Some examples are given in [Chapter 2](ch02.html "Chapter 2. Configuring VCM to
    Manage Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure* as
    all the scheduled job are going to land at the same place in VCM:![How to do it...](img/image_08_012.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the filter set as per the requirement. Also select if you want every
    scheduled collection to collect all the data or just the delta from the last collection.
    You can decide this based on how frequent you are collecting the data. If the
    frequency is too high and you have huge infrastructure to manage, you can opt
    for **Delta** as that will be faster:![How to do it...](img/image_08_013.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the machine group that you planned in the *Getting ready* section:![How
    to do it...](img/image_08_014.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide the schedule, this will vary as per your requirement and what exactly
    you are collecting, use your imagination to schedule this job **Daily**, **Weekly**,
    **Monthly**, or **Once**:![How to do it...](img/image_08_015.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Confirm that there are no conflicts and click on **Finish**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Basically, we are creating a scheduled task in SQL that will be triggered as
    per the schedule we have created. Then this will ask all the managed machines
    to provide the details as defined in the selected filter set. The data is stored
    in the VCM database and will be further used for various purposes, such as checking
    C**ompliance**, P**atch Status**, or G**et Reports**.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Note that the displayed data is only as recent as the last time you collected
    it.
  prefs: []
  type: TYPE_NORMAL
- en: There's more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Collection filters control the data that is collected from managed entity by
    VCM. Typically, collection filters are twinned with a compliance template and
    collect only the data that the compliance template requires. For example, the
    ISO baseline filters-Windows collection set defines the extra information that
    is required to be imported to measure ISO 27001 compliance.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Note that collections should be scheduled with additional collection filters
    for the compliance templates used. This process is the same as for Windows and
    Linux OS collections.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Before you start creating this scheduled task, make sure that you have created
    the required machine groups by following the recipe in the *Creating a machine
    group *recipe in [Chapter 2](ch02.html "Chapter 2. Configuring VCM to Manage Your
    Infrastructure"), *Configuring VCM to Manage Your Infrastructure*.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Scheduling compliance
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Compliance is an ongoing process and we need to check it at regular intervals
    to know exactly where we are and whether we need any remediation to be in good
    state. In the earlier recipe, we scheduled the data collection. Now is the time
    to consume the data.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We need to have the latest data available in our VCM database to be processed,
    so schedule the compliance check after few hours of data collection to give it
    some time to update the database.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To perform the following recipe, log in to VCM with the admin account and follow
    the steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Administration** | **Job Manager**| **Scheduled** and click on
    **Add**:![How to do it...](img/image_08_016.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Compliance** on the **Job Type** page of the wizard.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide **Name** and **Description**. You can be creative as there is a limit
    of characters for the **Name**, you can use any naming convention as all the scheduled
    job are going to land at the same place in VCM:![How to do it...](img/image_08_017.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the template that you want to check compliance for.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: There are some rules that can enforce the compliance, such as starting or stopping
    a service, that you can select here if you want to auto enforce the compliance.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: Note that only complex rules can be used to enforce compliance. When you enforce
    compliance, there are chances that it can break working configuration, for example,
    your security policy wants the Print Spooler service disabled, if you enforce
    the compliance, VCM will disable the service. However, if you have **Print Servers**
    managed by VCM and not created exceptions in VCM, this may create issues.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![How to do it...](img/image_08_018.jpg)'
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: Select the appropriate **Machine Group**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide the schedule, schedule this after the collection job and make sure that
    you give some time for VCM to collect the data and insert it in the database.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on **Finish** to close the wizard:![How to do it...](img/image_08_019.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Every scheduled job is a scheduled job in VCM database, compliance job uses
    data from the VCM database for processing. Once the job is finished, it will update
    the compliance stats on the VCM console and then these can be exported in the
    form of a report, which can also be scheduled.
  prefs: []
  type: TYPE_NORMAL
- en: Scheduling reports
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We don't want to sit in front of the VCM console to get the reports exported.
    We can schedule them and they can be in our inbox when we login. The patching
    and compliance reports can also be scheduled to be sent to the security officer
    to take a look at the infra. As they will be sent automatically, our admins can
    use this time to fix the actual issues than exporting and sending the reports.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Get a proper name ready for the scheduled report and create machine group against
    the report that should run. For compliance reports, make sure that a compliance
    check is already performed so that it can have some data in the report.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To perform this recipe, log in to VCM with admin account and follow the steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Navigate to **Administration** | **Job Manager** | **Scheduled** and click on
    **Add.**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check the screenshot from the earlier recipes
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Run Report(s)** on the **Job Type** page of the wizard.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide **Name** and **description** You can be creative, as there is a limit
    of characters for the **Name**, you can use any naming convention as all the scheduled
    job are going to land at the same place in VCM:![How to do it...](img/image_08_020.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the **Report Folder** page of the wizard, select the report you want to schedule.
    In this case, we are going to choose patching-related reports.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide a location to save the exported reports that can be a shared location
    where all the reports are saved.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Select only certain s to run**:![How to do it...](img/image_08_021.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Select the reportreports to run: Select the reports you want to schedule, hover
    over the name of the eporreport to see full name on the top:![How to do it...](img/image_08_022.jpg)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the arrows in front of the report names to provide the input details,
    the details will change depending on the report you have selected in the earlier
    step:![How to do it...](img/image_08_023.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide the format of the file you want, you can e-mail the report as well if
    you have SMTP configured and keep few copies of the report on SSRS:![How to do
    it...](img/image_08_024.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the machine group against which you want to run the report.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the schedule and click on **Finish** to close the wizard.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: VCM goes to the database and prepares the requested report, then depending upon
    the option selected, it will either dump the report at a shared location in the
    requested format and/or mail to the configured e-mail IDs.
  prefs: []
  type: TYPE_NORMAL
- en: Make sure that you have scheduled the dependency task earlier and finished before
    starting this report, like in this case, you should configure the compliance check
    first, and once it is complete, you should schedule this report or configure patching
    report once the scheduled patching is finished.
  prefs: []
  type: TYPE_NORMAL
- en: Scheduling vCenter collections
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: To manage virtual machines, VCM must collect the virtual infrastructure data
    from the registered vCenters. We can directly add, license, and install agents
    on the machines added by vCenter collections.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Make sure that vCenter is added in VCM by following the *Adding a vCenter server
    instance* recipe in  [Chapter 2](ch02.html "Chapter 2. Configuring VCM to Manage
    Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure*. You have
    imported the compliance pack for vSphere 5.5 Hardening by following the *Importing
    Compliance Packs* recipe from [Chapter 6](ch06.html "Chapter 6. Compliance Management"),
    *Compliance Management* . Create a machine group that will include only vCenter
    Servers by following the *Creating a machine group *recipe from [Chapter 2](ch02.html
    "Chapter 2. Configuring VCM to Manage Your Infrastructure"), *Configuring VCM
    to Manage Your Infrastructure*.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Navigate to **Administration** | **Job Manager**| **Scheduled** and click on
    **Add**. Check the screenshot from the earlier recipes.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Collection** on the **Job Type** page of the wizard.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide **Name** and **Description.** You can be creative as there is a limit
    of characters for the **Name**, you can use any naming convention as all the scheduled
    job are going to land at the same place in VCM.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **VMware vSphere 5.5 Hardening Guide Filters**. This collection filter
    set was downloaded when you prepared yourself in the getting ready section:![How
    to do it...](img/image_08_025.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **vCenter Servers Machine Group**. This machine group was configured
    when you prepared yourself in the getting ready section.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Schedule the vCenter collection for a daily collection.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: Note that this means that any newly provisioned servers will be discovered daily.
    If you know the machines will be deployed frequently, and you want them to be
    discovered early, you can change the schedule according to your needs.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this recipe, VCM collects data from the VCM servers that are added in VCM
    for management and then it makes new VMs available for agent installation by performing
    a discovery and management such as checking compliance and patching.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The *Adding a vCenter server instance* recipe in  [Chapter 2](ch02.html "Chapter 2. Configuring
    VCM to Manage Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure*:
    To make sure that vCenter is added in VCM'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The *Importing Compliance Packs* recipe from [Chapter 6](ch06.html "Chapter 6. Compliance
    Management"), *Compliance Management*: To import compliance pack for vSphere 5.5
    Hardening'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The *Creating a machine group*recipe in [Chapter 2](ch02.html "Chapter 2. Configuring
    VCM to Manage Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure*:
    To create a machine group this will include only vCenter Servers'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Scheduling vCenter discovery
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Discovery** is used to identify if there are any new machines available that
    can be added to VCM for management. If we don''t do it, then we need to manually
    add and license the machines to be managed.'
  prefs: []
  type: TYPE_NORMAL
- en: VCM must discover machines in your environment before you can collect data from
    them. You can create a discovery rule to discover all machines or you can apply
    a filter to limit the machines that VCM discovers.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Note that the vCenter discovery must occur after the vCenter Collection. This
    is counter-intuitive, but simply put, the vCenter discovery is finding new VMs
    that have come under the vCenter management through the vCenter collection.
  prefs: []
  type: TYPE_NORMAL
- en: Note that for servers and workstations, exceeding the limit on your license
    key produces warnings but does not restrict the VCM operation.
  prefs: []
  type: TYPE_NORMAL
- en: In this recipe, we are scheduling a vCenter discovery so that all the newly
    created VMs can be added, and agent can be installed and licensed in VCM.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Check whether you have enough licenses available to accommodate the newly added
    VMs, make sure that vCenter is added in VCM by following the recipe in the *Adding
    a vCenter server instance* recipe in  [Chapter 2](ch02.html "Chapter 2. Configuring
    VCM to Manage Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure*.
    You must have created a discovery rule by following the recipe in *Adding a discovery
    rule* recipe in  [Chapter 2](ch02.html "Chapter 2. Configuring VCM to Manage Your
    Infrastructure"), *Configuring VCM to Manage Your Infrastructure*. You must have
    scheduled a vCenter collection before running this discovery. If you are exceeding
    the limit of your license key, add one by following the *Applying a new license
    key* recipe in [Chapter](ch07.html "Chapter 7. Maintenance of VCM") [7](ch07.html
    "Chapter 7. Maintenance of VCM"), *Maintenance of  VCM* *.*
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Navigate to **Administration** | **Job Manager** | **Scheduled** and click on
    **Add.**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check the screenshot from the earlier recipes
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select **Discovery** on the **Job Type** page of the wizard.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provide **Name** and **description.** You can be creative as there is a limit
    of characters for the **Name**, you can use any naming convention as all the scheduled
    job are going to land at the same place in VCM.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the vCenter discovery rule created in the *Adding a discovery rule* recipe
    in  [Chapter 2](ch02.html "Chapter 2. Configuring VCM to Manage Your Infrastructure"), *Configuring
    VCM to Manage Your Infrastructure*:![How to do it...](img/image_08_026.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on **Next** and select a daily schedule.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
- en: Note that it is best to schedule the Discovery after the Collection. A two to
    three hour gap should be sufficient for most environments, but double-check the
    vCenter Collection job status for large environments.
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A discovery rule is created; we are just asking VCM to run it on a schedule.
    If there are too many VM installations on daily basis, we can increase the frequency
    by selecting **Occurs Every XX hours** and schedule accordingly. This will go
    in the database and check the details fetched by vCenter collections and add the
    newly created VMs in the licensed machines. If in the discovery rule we have selected
    to install the agent, then it will just follow the discovery and install the agent.
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The *Adding a vCenter server instance* recipe in [Chapter 2](ch02.html "Chapter 2. Configuring
    VCM to Manage Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure*:
    To add a vCenter in VCM'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The  **Adding a discovery rule**  recipe in [Chapter 2](ch02.html "Chapter 2. Configuring
    VCM to Manage Your Infrastructure")*, *Configuring VCM to Manage Your Infrastructure*:*
    To create a vCenter discovery rule to be used for this schedule
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The *Applying a new license key* recipe in [Chapter 7](ch07.html "Chapter 7. Maintenance
    of VCM"), *Maintenance of  VCM:* To add license key if you are exceeding the limit
    of your license key.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
