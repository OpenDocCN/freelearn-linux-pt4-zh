- en: Chapter 8. Integration with vROps and Scheduling
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第 8 章。与 vROps 和调度集成
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下步骤：
- en: Installing and configuration of vROps Management Pack for VCM
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装和配置 vROps 管理包以支持 VCM
- en: Configuring vROps – VCM compliance mapping and scheduling
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置 vROps – VCM 合规性映射和调度
- en: Scheduling OS and compliance data collection
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调度操作系统和合规性数据收集
- en: Scheduling compliance
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调度合规性
- en: Scheduling reports
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调度报告
- en: Scheduling vCenter collections
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调度 vCenter 收集
- en: Scheduling vCenter discovery
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调度 vCenter 发现
- en: Introduction
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: We will be discussing two different topics in the chapter. First, we will install
    the VCM adapter in vROps and integrate them so that we can send compliance data
    from VCM to vROps.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论两个不同的主题。首先，我们将在 vROps 中安装 VCM 适配器并集成它们，以便可以从 VCM 发送合规性数据到 vROps。
- en: Nobody likes to be in front of any console to do the work, and automation is
    the key to everything. In this chapter, we will take a look at the scheduler feature
    of VCM, such as scheduling jobs to collect the data from managed machines, pushing
    the compliance details to vROps, or exporting a report and saving it on a share
    or sending to someone on e-mail.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 没有人喜欢坐在控制台前面做工作，自动化是一切的关键。在本章中，我们将介绍 VCM 的调度器功能，例如调度作业以收集来自托管机器的数据，推送合规性详细信息到
    vROps，或者导出报告并保存在共享位置或通过电子邮件发送给某人。
- en: So, let's begin with vROps and VCM integration.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，让我们从 vROps 和 VCM 的集成开始。
- en: Installing and configuration of vROps Management Pack for VCM
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装和配置 vROps 管理包以支持 VCM
- en: Integrating VCM with vROps provides compliance and event details from VCM to
    the vROps console. This means that you can have an idea about what's going on
    with a particular server when you are troubleshooting. An event can give information,
    such as when the server was rebooted, when the pathing was done, or when the software
    was installed from VCM. Apart from this, VCM can push compliance details about
    the managed machine with the mappings that have been created.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 将 VCM 与 vROps 集成，可以从 VCM 向 vROps 控制台提供合规性和事件详细信息。这意味着在故障排除时，您可以了解特定服务器的情况。事件可以提供信息，例如服务器何时重新启动，路径何时完成，或者从
    VCM 安装软件的时间。除此之外，VCM 还可以推送关于托管机器的合规性详细信息及其已创建的映射。
- en: Getting ready
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: We will need a configured VCM that has compliance configuration completed, and
    a working vROps server where we have admin access. We will also need user credentials
    that can log in to VCM and have admin access in the VCM application. We need to
    download the latest VCM solution from [https://solutionexchange.vmware.com/](https://solutionexchange.vmware.com/)
    .
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要一个已配置的 VCM，其中包含完成的合规性配置，并且有管理员访问权限的工作中的 vROps 服务器。我们还需要可以登录 VCM 并在 VCM 应用程序中具有管理员访问权限的用户凭据。我们需要从
    [https://solutionexchange.vmware.com/](https://solutionexchange.vmware.com/) 下载最新的
    VCM 解决方案。
- en: vROps must be monitoring the same vCenter server that is managed by VCM.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: vROps 必须监控由 VCM 管理的相同 vCenter 服务器。
- en: How to do it...
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'In this recipe, we are going to install the VCM adapter for vROps. We will
    be logging into vROps and following the given steps:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个步骤中，我们将安装 vROps 的 VCM 适配器。我们将登录 vROps 并按照给定步骤操作：
- en: Log in to vROps with an admin account, or another account that has admin privileges,
    and go to **Solutions**. Click on the green plus symbol under **Solutions**, as
    shown in the following screenshot:![How to do it...](img/image_08_001.jpg)
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用管理员帐户登录 vROps，或其他具有管理员权限的帐户，并转到**解决方案**。单击**解决方案**下方的绿色加号符号，如下图所示：![如何操作...](img/image_08_001.jpg)
- en: Click on **Browse** and go to the location where you have downloaded the VCM
    solution from the Internet and click on **Upload**. You will then get a screen
    similar to the following screenshot:![How to do it...](img/image_08_002.jpg)
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**浏览**，转到从互联网下载 VCM 解决方案的位置，然后点击**上传**。然后，您将看到类似以下截图的屏幕：![如何操作...](img/image_08_002.jpg)
- en: Accept the unsigned solution warning if displayed by vROps.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果 vROps 显示未签名解决方案警告，请接受它。
- en: Accept the EULA.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受 EULA。
- en: Let vROps complete the installation, and once done, click on **Finish** to complete
    it.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让 vROps 完成安装，完成后点击**完成**。
- en: This completes the installation of the adapter. Now we need to configure the
    adapter instance.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这完成了适配器的安装。现在我们需要配置适配器实例。
- en: This time, under **Solutions**, select **Management Pack for** **VCM** **for
    vSphere** and click on the **Configure** button at the top with two gears:![How
    to do it...](img/image_08_003.jpg)
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这次，在 **解决方案** 下，选择 **vSphere 的 VCM 管理包**，然后点击顶部带有两个齿轮的 **配置** 按钮：![如何操作...](img/image_08_003.jpg)
- en: 'Provide the following details:'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供以下信息：
- en: '**Display Name**: This will be the name displayed for the adapter'
  id: totrans-28
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**显示名称**：这是适配器的显示名称'
- en: '**Description**: Provide a good description so someone can understand what
    it is, when you are not around'
  id: totrans-29
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**描述**：提供一个好的描述，以便其他人在你不在时能够理解它是什么。'
- en: '**Database Host:** This is the IP or name of the VCM database server (for single-tier,
    it''s the VCM Collector server)'
  id: totrans-30
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库主机**：这是 VCM 数据库服务器的 IP 或名称（对于单层架构，这是 VCM 收集器服务器）'
- en: '**Database Port:** This is the SQL port on the VCM server'
  id: totrans-31
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库端口**：这是 VCM 服务器上的 SQL 端口'
- en: '**Database Name:** This is the VCM database name; the default is `VCM`'
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库名称**：这是 VCM 数据库的名称；默认值是 `VCM`'
- en: '**Database Instance:** If you have installed SQL as **Instance**, provide the
    name that can be kept blank for default![How to do it...](img/image_08_004.jpg)'
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库实例**：如果你安装了 SQL 作为 **实例**，提供名称，如果是默认的，可以留空！[如何操作...](img/image_08_004.jpg)'
- en: 'Provide the following details for the **Manage Credential** window:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供以下信息以完成 **管理凭证** 窗口：
- en: '**Credential Name**: This is a descriptive name for the credential'
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**凭证名称**：这是凭证的描述性名称'
- en: '**Database Username**: This is the database user account for the VCM database'
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库用户名**：这是 VCM 数据库的数据库用户账户'
- en: Note
  id: totrans-37
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Note** that you have to create a dedicated service account in the Active
    Directory for this, and give this account an admin role in VCM.'
  id: totrans-38
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**注意**，你需要在 Active Directory 中创建一个专用服务账户，并赋予该账户在 VCM 中的管理员角色。'
- en: '**Database Password**: This is the password for the user account'
  id: totrans-39
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库密码**：这是用户账户的密码'
- en: '**Database Authentication**: This will be either SQL or Windows authentication
    (recommended)'
  id: totrans-40
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据库认证**：这将是 SQL 或 Windows 认证（推荐）'
- en: '**Windows Domain**: In case of Windows authentication, provide the domain name,
    as shown in the following screenshot:'
  id: totrans-41
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows 域**：在使用 Windows 认证时，提供域名，如下图所示：'
- en: '![How to do it...](img/image_08_005.jpg)'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/image_08_005.jpg)'
- en: After the information is provided, click on **Test Connection**.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供完信息后，点击 **测试连接**。
- en: Once the test is successful, click on **Save Settings**. Don't worry about the
    advanced settings, you can keep the default settings for time being.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 测试成功后，点击 **保存设置**。不用担心高级设置，暂时可以保留默认设置。
- en: Wait 2 minutes and check **Admin** | **Cluster Management** whether objects
    and metrics are collected:![How to do it...](img/image_08_006.jpg)
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 等待 2 分钟，并检查 **管理员** | **集群管理** 是否已收集对象和指标：![如何操作...](img/image_08_006.jpg)
- en: How it works
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理
- en: 'Now we are ready to connect to the VCM database and fetch the required information
    to be displayed on the VCM console. vROps goes to the VCM database and starts
    collecting the required details, such as compliance score or events; these are
    posted on the vROps console:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们准备连接到 VCM 数据库并获取所需的信息，以便在 VCM 控制台上显示。vROps 会连接到 VCM 数据库并开始收集所需的详细信息，如合规分数或事件；这些会显示在
    vROps 控制台上：
- en: '![How it works](img/image_08_007.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![工作原理](img/image_08_007.jpg)'
- en: Note
  id: totrans-49
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Image Source**: [www.vmware.com](http://www.vmware.com)'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '**图片来源**：[www.vmware.com](http://www.vmware.com)'
- en: There's more...
  id: totrans-51
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: The account used for adapter configuration must not be the account that is used
    for an interactive user login. The adapter account frequently logs in and out
    of VCM. If you use it as an interactive account, you must regularly refresh the
    connection, which affects your VCM experience.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 用于适配器配置的账户不能是用于交互式用户登录的账户。适配器账户会频繁地登录和退出 VCM。如果你将其作为交互式账户使用，必须定期刷新连接，这会影响你的
    VCM 体验。
- en: Configuring vROps – VCM compliance mapping and scheduling
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置 vROps – VCM 合规映射和调度
- en: Once VCM is integrated with vROps, we need to move ahead so that it can run
    the compliance and send the compliance score to be displayed on the vROps console.
    We will create a mapping in the VCM that will run the compliance check and update
    it with the details in vROps.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦 VCM 与 vROps 集成，我们需要继续操作，使其能够运行合规性检查并将合规分数显示在 vROps 控制台上。我们将在 VCM 中创建一个映射，它将运行合规性检查并将结果更新到
    vROps 中。
- en: Getting ready
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: To perform this task, you should have completed the earlier recipe to install
    the management pack and configure it.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行此任务，你应该已经完成了之前的操作步骤，安装了管理包并进行了配置。
- en: How to do it...
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We need to log in to the VCM console with admin privileges in order to perform
    this recipe. Once logged in, follow the steps to complete the mapping:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要以管理员权限登录 VCM 控制台以执行此操作。登录后，请按照步骤完成映射：
- en: Navigate to **Compliance** | **Machine Group Compliance** | **vCenter Operations
    Manager Badge**| **Mapping** and then click on **Add**:![How to do it...](img/image_08_008.jpg)
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航至 **合规性** | **机器组合规性** | **vCenter 操作经理徽章** | **映射**，然后点击 **添加**：![如何操作...](img/image_08_008.jpg)
- en: 'Give the proper name and description when the wizard starts:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动向导时，提供适当的名称和描述：
- en: '**Select Badge**: **Risk Compliance**'
  id: totrans-61
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**选择徽章**：**风险合规性**'
- en: '**Roll up Type**: **Simple Percentage**'
  id: totrans-62
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**汇总类型**：**简单百分比**'
- en: '**Select Group Context**: As per the requirement'
  id: totrans-63
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**选择组上下文**：根据需求'
- en: Select **Correct Machine Group**.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **正确的机器组**。
- en: When the mapping runs, it will run against all the machines that are part of
    this machine group.
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 当映射运行时，它将针对所有属于此机器组的机器进行运行。
- en: Select **Corresponding Compliance Template**.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **对应的合规性模板**。
- en: Select the template that is required to check compliance against the earlier
    selected machine group. You can select either a compliance template created for
    your organization or any standard template downloaded from the Internet.
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 选择需要与之前选定的机器组进行合规性检查的模板。您可以选择为您的组织创建的合规性模板，或者选择从互联网下载的任何标准模板。
- en: Click on **Finish**. This will save the mapping.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **完成**。这将保存映射。
- en: Once the mapping is created, we need to run this so that the compliance score
    is calculated for the machines that are part of the machine group and then informed
    to vROps in order to be displayed on the vROps console.
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一旦映射创建完成，我们需要运行此映射，以便计算属于机器组的机器的合规性分数，然后将结果告知 vROps 以便在 vROps 控制台显示。
- en: Select the mapping and then click on the **Run** button at the top.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择映射，然后点击顶部的 **运行** 按钮。
- en: It will first run the compliance check on the **Machine Group**, and then when
    vROps updates the details via the management pack imported and configured as described
    in the *Installing and configuration of vROps Management Pack for VCM* recipe,
    the status will be updated.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它将首先对 **机器组** 运行合规性检查，然后当 vROps 通过管理包更新详细信息（如 *vROps 管理包的安装和配置* 食谱中所述）时，状态将更新。
- en: Depending upon how many machines you have in the machine group and the number
    of rules in the compliance template, it will take some time.
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 根据机器组中机器的数量和合规性模板中的规则数量，可能需要一些时间。
- en: To check the compliance tab on vROps, log in to the vROps console and navigate
    to **Environment** | **vCenter Adapter** | **Virtual Machines** and then select
    **Machine Go to Analysis** | **Compliance**.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要检查 vROps 中的合规性选项卡，请登录 vROps 控制台并导航至 **环境** | **vCenter 适配器** | **虚拟机**，然后选择
    **机器转到分析** | **合规性**。
- en: You will see the compliance status of the machine.
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您将看到机器的合规性状态。
- en: 'It will show the number of rules passed and failed and the compliance template
    used for checking the compliance along with the overall compliance status reported
    by VCM:'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 它将显示通过和失败的规则数量，并显示用于检查合规性的合规性模板以及 VCM 报告的整体合规性状态：
- en: '![How to do it...](img/image_08_009.jpg)'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/image_08_009.jpg)'
- en: 'Once the mapping is done, we can schedule this mapping so that it will update
    vROps on schedule. Continue from where we left off:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦映射完成，我们可以安排此映射，以便它按照计划更新 vROps。从我们上次停下的地方继续：
- en: Navigate to **Administration** | **Job Manager** | **Scheduled** and click on
    **Add**.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航至 **管理** | **作业管理器** | **已计划**，然后点击 **添加**。
- en: Select **vCenter Operations Manager Compliance Badge Mapping Run** on the **Job
    Type** page of the wizard.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导的 **作业类型** 页面上选择 **vCenter 操作经理合规徽章映射运行**。
- en: Provide **Name** and **description**. You can be creative as there is a limit
    of characters for **Name**, you can use any naming convention as all the scheduled
    job are going to land at the same place in VCM.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供 **名称** 和 **描述**。由于 **名称** 有字符限制，您可以自由创意，所有计划任务都将集中在 VCM 中的同一位置。
- en: Select the mapping that you want to schedule:![How to do it...](img/image_08_010.jpg)
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择您要安排的映射：![如何操作...](img/image_08_010.jpg)
- en: Select the schedule and click on **Finish**. As this is related to compliance,
    make sure that this is scheduled after the OS and compliance data collection,
    as then we will have the latest data to run the compliance checks.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择计划并点击 **完成**。由于这与合规性相关，请确保在操作系统和合规性数据收集之后安排此任务，因为那时我们将拥有最新的数据来进行合规性检查。
- en: How it works...
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: To get the details, the vCenter server must be monitored by vROps and managed
    by VCM.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取详细信息，vCenter服务器必须由vROps监控并由VCM管理。
- en: When we add and configure the VCM Management Pack, it fetches compliance details
    from the VCM and then displays it on the vROps console.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们添加并配置VCM管理包时，它会从VCM中提取合规性详细信息，并将其显示在vROps控制台上。
- en: The VCM compliance data is based on compliance templates that are run against
    the data collected from the same vCenter Server objects that are monitored in
    vRealize Operations Manager. The templates are the configuration settings that
    must be present on a target object for it to be considered compliant with the
    template standards. The standards might be the VMware vSphere Hardening Guide,
    Payment Card Industry standards, Health Insurance Portability and Accountability
    Act, or other VMware or industry standards.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: VCM合规性数据基于合规性模板，这些模板是针对从与vRealize Operations Manager中监控的相同vCenter Server对象收集的数据执行的。模板是必须在目标对象上存在的配置设置，以便该对象被视为符合模板标准。标准可能是VMware
    vSphere硬化指南、支付卡行业标准、健康保险携带与责任法案（HIPAA）或其他VMware或行业标准。
- en: When we select the mapping, it will first run the compliance check with the
    selected template(s) and then update the compliance score on the vROps console.
    The score is visible on the **Analysis **| **Compliance** tab of the managed VM.
    The tab will display the compliance status against various templates (if configured),
    the percentage, the number of rules, and so on. Once we schedule it, the job will
    make sure that the compliance score is updated on the vROps console.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们选择映射时，它将首先使用所选模板进行合规性检查，然后更新vROps控制台上的合规性得分。得分会在受管虚拟机的**分析**|**合规性**标签中显示。该标签将显示与各种模板（如果已配置）相关的合规性状态、百分比、规则数量等。一旦我们安排了任务，该作业将确保合规性得分在vROps控制台上得到更新。
- en: Scheduling OS and compliance data collection
  id: totrans-88
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安排操作系统和合规性数据采集
- en: '**Collections** are fetching the data as requested in the **Filter Set** from
    the managed machines. As you know, VCM does not go to the managed machine each
    time it needs to process something against the managed machine such as **Patch**
    or **Compliance** status, it uses the data that is available in the database,
    and after processing the data, it gives a result, for example, whether a patch
    is required or not or what is the compliance level we are at.'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '**集合**是根据**筛选集**从受管机器中提取数据。如你所知，VCM并不会在每次需要处理与受管机器相关的内容时（如**补丁**或**合规性**状态）都去访问受管机器，而是使用数据库中已有的数据，处理完数据后给出结果，例如是否需要补丁，或当前的合规性水平。'
- en: If the data about the managed machine is not frequently updated, VCM processes
    stale data and we can have false positives or a very bad compliance score even
    though we are compliant.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 如果关于受管机器的数据没有频繁更新，VCM会处理过时数据，这可能导致误报或合规性得分非常差，即使我们是符合要求的。
- en: To overcome this situation, we can go to the VCM console and start collecting
    the details on our own or schedule the job in the VCM and ask it to do it.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 为了克服这种情况，我们可以进入VCM控制台，自己开始收集详细信息，或者在VCM中安排任务并要求它去执行。
- en: Continuous server management is based on the latest data that you collected
    from the target servers. Windows and Linux data appears in VCM and is available
    for several management actions, including **Console** dashboards and reports,
    **Compliance Views**, and **VCM Patching**.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 持续的服务器管理基于从目标服务器收集的最新数据。Windows和Linux数据会出现在VCM中，并可用于多个管理操作，包括**控制台**仪表盘和报告、**合规性视图**以及**VCM补丁管理**。
- en: Getting ready
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: We need a configured VCM where we have created all the required machine groups
    as described in the  *Creating a machine group *recipe in [Chapter 2](ch02.html
    "Chapter 2. Configuring VCM to Manage Your Infrastructure"), *Configuring VCM
    to Manage Y our Infrastructure*.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要配置好的VCM，其中已经创建了所有必要的机器组，如在[第2章](ch02.html "第2章：配置VCM以管理您的基础设施")中的*创建机器组*配方和*配置VCM以管理您的基础设施*所述。
- en: How to do it...
  id: totrans-95
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To perform this recipe, login to VCM with the admin account and follow the
    steps:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行此操作，请使用管理员帐户登录VCM，并按照以下步骤进行操作：
- en: Navigate to **Administration **| **Job Manager **| **Scheduled** and click on
    **Add**:![How to do it...](img/image_08_011.jpg)
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**管理**|**作业管理器**|**已安排**，然后点击**添加**：![如何操作...](img/image_08_011.jpg)
- en: Select **Collection** on the **Job Type** page of the wizard.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导的**作业类型**页面中选择**集合**。
- en: Provide **Name** and **Description**. You can be creative as there is a limit
    of characters for the **Name**, it will be better if you use a naming convention.
    Some examples are given in [Chapter 2](ch02.html "Chapter 2. Configuring VCM to
    Manage Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure* as
    all the scheduled job are going to land at the same place in VCM:![How to do it...](img/image_08_012.jpg)
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供**名称**和**描述**。你可以发挥创意，虽然**名称**有字符限制，但如果使用命名规范会更好。可以参考[第2章](ch02.html "第2章
    配置VCM以管理您的基础设施")，*配置VCM以管理您的基础设施*，因为所有调度的任务都会集中在VCM的同一位置：![如何操作...](img/image_08_012.jpg)
- en: Select the filter set as per the requirement. Also select if you want every
    scheduled collection to collect all the data or just the delta from the last collection.
    You can decide this based on how frequent you are collecting the data. If the
    frequency is too high and you have huge infrastructure to manage, you can opt
    for **Delta** as that will be faster:![How to do it...](img/image_08_013.jpg)
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据需求选择过滤器集。如果你希望每次调度的收集任务收集所有数据，还是仅收集自上次收集以来的增量数据，请进行选择。你可以根据数据收集的频率来决定这一点。如果频率过高，并且你需要管理庞大的基础设施，可以选择**增量**，因为增量会更快：![如何操作...](img/image_08_013.jpg)
- en: Select the machine group that you planned in the *Getting ready* section:![How
    to do it...](img/image_08_014.jpg)
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你在*准备就绪*部分计划的机器组：![如何操作...](img/image_08_014.jpg)
- en: Provide the schedule, this will vary as per your requirement and what exactly
    you are collecting, use your imagination to schedule this job **Daily**, **Weekly**,
    **Monthly**, or **Once**:![How to do it...](img/image_08_015.jpg)
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供调度信息，这将根据你的需求和你实际收集的内容而有所不同，使用你的想象力来安排此任务为**每日**、**每周**、**每月**或**一次性**：![如何操作...](img/image_08_015.jpg)
- en: Confirm that there are no conflicts and click on **Finish**.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认没有冲突后，点击**完成**。
- en: How it works...
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Basically, we are creating a scheduled task in SQL that will be triggered as
    per the schedule we have created. Then this will ask all the managed machines
    to provide the details as defined in the selected filter set. The data is stored
    in the VCM database and will be further used for various purposes, such as checking
    C**ompliance**, P**atch Status**, or G**et Reports**.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 基本上，我们是在 SQL 中创建一个调度任务，该任务将根据我们创建的调度触发。然后，它将要求所有受管机器提供在选定过滤器集中定义的详细信息。数据将存储在
    VCM 数据库中，进一步用于各种目的，例如检查合规性、**补丁状态**或**获取报告**。
- en: Note
  id: totrans-106
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that the displayed data is only as recent as the last time you collected
    it.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，显示的数据仅限于上次收集时的数据。
- en: There's more...
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更多内容...
- en: Collection filters control the data that is collected from managed entity by
    VCM. Typically, collection filters are twinned with a compliance template and
    collect only the data that the compliance template requires. For example, the
    ISO baseline filters-Windows collection set defines the extra information that
    is required to be imported to measure ISO 27001 compliance.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 收集过滤器控制 VCM 从受管实体收集的数据。通常，收集过滤器与合规性模板配对，只收集合规性模板要求的数据。例如，ISO 基准过滤器- Windows
    收集集定义了需要导入的额外信息，用于衡量 ISO 27001 合规性。
- en: Note
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that collections should be scheduled with additional collection filters
    for the compliance templates used. This process is the same as for Windows and
    Linux OS collections.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，收集任务应与所使用的合规性模板一起安排额外的收集过滤器。此过程与 Windows 和 Linux 操作系统的收集过程相同。
- en: See also
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: Before you start creating this scheduled task, make sure that you have created
    the required machine groups by following the recipe in the *Creating a machine
    group *recipe in [Chapter 2](ch02.html "Chapter 2. Configuring VCM to Manage Your
    Infrastructure"), *Configuring VCM to Manage Your Infrastructure*.
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在开始创建此调度任务之前，请确保按照[第2章](ch02.html "第2章 配置VCM以管理您的基础设施")中的*创建机器组*食谱，已创建所需的机器组，*配置VCM以管理您的基础设施*。
- en: Scheduling compliance
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 调度合规性
- en: Compliance is an ongoing process and we need to check it at regular intervals
    to know exactly where we are and whether we need any remediation to be in good
    state. In the earlier recipe, we scheduled the data collection. Now is the time
    to consume the data.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 合规性是一个持续的过程，我们需要定期检查它，以准确了解我们所在的位置，并判断是否需要采取修复措施来保持良好的状态。在之前的步骤中，我们安排了数据收集，现在是时候利用这些数据了。
- en: Getting ready
  id: totrans-116
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: We need to have the latest data available in our VCM database to be processed,
    so schedule the compliance check after few hours of data collection to give it
    some time to update the database.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要确保VCM数据库中的最新数据可供处理，因此请在数据收集后几个小时安排合规性检查，以便它有足够的时间更新数据库。
- en: How to do it...
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To perform the following recipe, log in to VCM with the admin account and follow
    the steps:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行以下操作，使用管理员账户登录VCM并按照步骤操作：
- en: Navigate to **Administration** | **Job Manager**| **Scheduled** and click on
    **Add**:![How to do it...](img/image_08_016.jpg)
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**管理** | **作业管理** | **已调度**，然后点击**添加**：![如何操作...](img/image_08_016.jpg)
- en: Select **Compliance** on the **Job Type** page of the wizard.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导的**作业类型**页面选择**合规性**。
- en: Provide **Name** and **Description**. You can be creative as there is a limit
    of characters for the **Name**, you can use any naming convention as all the scheduled
    job are going to land at the same place in VCM:![How to do it...](img/image_08_017.jpg)
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供**名称**和**描述**。你可以发挥创意，因为**名称**有字符限制，你可以使用任何命名约定，因为所有调度作业最终都会出现在VCM中的同一个位置：![如何操作...](img/image_08_017.jpg)
- en: Select the template that you want to check compliance for.
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你想要检查合规性的模板。
- en: There are some rules that can enforce the compliance, such as starting or stopping
    a service, that you can select here if you want to auto enforce the compliance.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 有一些规则可以强制执行合规性，比如启动或停止服务，如果你希望自动执行合规性，可以在这里选择。
- en: Note
  id: totrans-125
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that only complex rules can be used to enforce compliance. When you enforce
    compliance, there are chances that it can break working configuration, for example,
    your security policy wants the Print Spooler service disabled, if you enforce
    the compliance, VCM will disable the service. However, if you have **Print Servers**
    managed by VCM and not created exceptions in VCM, this may create issues.
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，只有复杂规则可以用于强制执行合规性。当你执行合规性时，可能会破坏现有的配置，例如，如果你的安全策略要求禁用打印后台处理程序服务，那么强制执行合规性时，VCM将禁用该服务。然而，如果你有由VCM管理的**打印服务器**且在VCM中没有创建例外，这可能会导致问题。
- en: '![How to do it...](img/image_08_018.jpg)'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![如何操作...](img/image_08_018.jpg)'
- en: Select the appropriate **Machine Group**.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择适当的**机器组**。
- en: Provide the schedule, schedule this after the collection job and make sure that
    you give some time for VCM to collect the data and insert it in the database.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供调度，确保将其安排在收集作业之后，并确保给VCM一些时间来收集数据并将其插入数据库。
- en: Click on **Finish** to close the wizard:![How to do it...](img/image_08_019.jpg)
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**完成**以关闭向导：![如何操作...](img/image_08_019.jpg)
- en: How it works...
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Every scheduled job is a scheduled job in VCM database, compliance job uses
    data from the VCM database for processing. Once the job is finished, it will update
    the compliance stats on the VCM console and then these can be exported in the
    form of a report, which can also be scheduled.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 每个调度作业都是VCM数据库中的调度作业，合规性作业使用VCM数据库中的数据进行处理。一旦作业完成，它将更新VCM控制台上的合规性统计信息，然后可以将其导出为报告，报告也可以调度。
- en: Scheduling reports
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 调度报告
- en: We don't want to sit in front of the VCM console to get the reports exported.
    We can schedule them and they can be in our inbox when we login. The patching
    and compliance reports can also be scheduled to be sent to the security officer
    to take a look at the infra. As they will be sent automatically, our admins can
    use this time to fix the actual issues than exporting and sending the reports.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不希望一直坐在VCM控制台前导出报告。我们可以调度这些报告，并且当我们登录时它们会出现在我们的收件箱中。修补和合规性报告也可以安排自动发送给安全官员查看基础设施。由于报告是自动发送的，管理员可以利用这个时间来修复实际问题，而不是导出和发送报告。
- en: Getting ready
  id: totrans-135
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: Get a proper name ready for the scheduled report and create machine group against
    the report that should run. For compliance reports, make sure that a compliance
    check is already performed so that it can have some data in the report.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 为调度报告准备合适的名称，并创建与应运行的报告相关的机器组。对于合规性报告，确保已执行合规性检查，以便报告中有一些数据。
- en: How to do it...
  id: totrans-137
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To perform this recipe, log in to VCM with admin account and follow the steps:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行此操作，使用管理员账户登录VCM并按照步骤操作：
- en: Navigate to **Administration** | **Job Manager** | **Scheduled** and click on
    **Add.**
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**管理** | **作业管理** | **已调度**，然后点击**添加**。
- en: Check the screenshot from the earlier recipes
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看之前配方中的截图
- en: Select **Run Report(s)** on the **Job Type** page of the wizard.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导的**作业类型**页面选择**运行报告(s)**。
- en: Provide **Name** and **description** You can be creative, as there is a limit
    of characters for the **Name**, you can use any naming convention as all the scheduled
    job are going to land at the same place in VCM:![How to do it...](img/image_08_020.jpg)
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供**名称**和**描述**，你可以发挥创造力，因为**名称**有字符限制，你可以使用任何命名约定，所有安排的任务都会出现在VCM的同一位置：![如何操作...](img/image_08_020.jpg)
- en: On the **Report Folder** page of the wizard, select the report you want to schedule.
    In this case, we are going to choose patching-related reports.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导的**报告文件夹**页面上，选择你要安排的报告。在这种情况下，我们将选择与修补相关的报告。
- en: Provide a location to save the exported reports that can be a shared location
    where all the reports are saved.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供一个位置来保存导出的报告，该位置可以是一个共享位置，所有报告都会保存在该位置。
- en: Select **Select only certain s to run**:![How to do it...](img/image_08_021.jpg)
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**仅选择某些要运行的内容**：![如何操作...](img/image_08_021.jpg)
- en: 'Select the reportreports to run: Select the reports you want to schedule, hover
    over the name of the eporreport to see full name on the top:![How to do it...](img/image_08_022.jpg)'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择要运行的报告：选择你要安排的报告，悬停在报告名称上以查看完整名称：![如何操作...](img/image_08_022.jpg)
- en: Click on the arrows in front of the report names to provide the input details,
    the details will change depending on the report you have selected in the earlier
    step:![How to do it...](img/image_08_023.jpg)
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击报告名称前面的箭头以提供输入详情，详情会根据你在前面步骤中选择的报告而变化：![如何操作...](img/image_08_023.jpg)
- en: Provide the format of the file you want, you can e-mail the report as well if
    you have SMTP configured and keep few copies of the report on SSRS:![How to do
    it...](img/image_08_024.jpg)
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供你需要的文件格式，如果你已经配置了SMTP，也可以通过电子邮件发送报告，并在SSRS上保存一些报告副本：![如何操作...](img/image_08_024.jpg)
- en: Select the machine group against which you want to run the report.
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你希望运行报告的机器组。
- en: Select the schedule and click on **Finish** to close the wizard.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择安排并点击**完成**以关闭向导。
- en: How it works...
  id: totrans-151
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: VCM goes to the database and prepares the requested report, then depending upon
    the option selected, it will either dump the report at a shared location in the
    requested format and/or mail to the configured e-mail IDs.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: VCM会访问数据库并准备所请求的报告，然后根据选择的选项，它将以请求的格式将报告转储到共享位置并/或发送到配置的电子邮件地址。
- en: Make sure that you have scheduled the dependency task earlier and finished before
    starting this report, like in this case, you should configure the compliance check
    first, and once it is complete, you should schedule this report or configure patching
    report once the scheduled patching is finished.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 确保你已经提前安排了依赖任务，并在开始此报告之前完成，比如在此情况下，你应先配置合规性检查，一旦完成后，你可以安排此报告，或者在已安排的修补程序完成后配置修补报告。
- en: Scheduling vCenter collections
  id: totrans-154
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安排vCenter集合
- en: To manage virtual machines, VCM must collect the virtual infrastructure data
    from the registered vCenters. We can directly add, license, and install agents
    on the machines added by vCenter collections.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 要管理虚拟机，VCM必须从注册的vCenter收集虚拟基础架构数据。我们可以直接在vCenter集合添加的机器上添加、授权并安装代理。
- en: Getting ready
  id: totrans-156
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Make sure that vCenter is added in VCM by following the *Adding a vCenter server
    instance* recipe in  [Chapter 2](ch02.html "Chapter 2. Configuring VCM to Manage
    Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure*. You have
    imported the compliance pack for vSphere 5.5 Hardening by following the *Importing
    Compliance Packs* recipe from [Chapter 6](ch06.html "Chapter 6. Compliance Management"),
    *Compliance Management* . Create a machine group that will include only vCenter
    Servers by following the *Creating a machine group *recipe from [Chapter 2](ch02.html
    "Chapter 2. Configuring VCM to Manage Your Infrastructure"), *Configuring VCM
    to Manage Your Infrastructure*.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 确保通过遵循[第2章](ch02.html "第2章. 配置VCM以管理基础设施")中的*添加vCenter服务器实例*食谱，已将vCenter添加到VCM中，*配置VCM以管理你的基础设施*。你已按照[第6章](ch06.html
    "第6章. 合规管理")中的*导入合规性包*食谱导入了vSphere 5.5硬化的合规性包，*合规管理*。通过遵循[第2章](ch02.html "第2章.
    配置VCM以管理基础设施")中的*创建机器组*食谱，创建一个仅包含vCenter服务器的机器组，*配置VCM以管理你的基础设施*。
- en: How to do it...
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Navigate to **Administration** | **Job Manager**| **Scheduled** and click on
    **Add**. Check the screenshot from the earlier recipes.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到**管理** | **任务管理器**| **已安排**，然后点击**添加**。查看早期食谱中的截图。
- en: Select **Collection** on the **Job Type** page of the wizard.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导的**任务类型**页面上选择**收集**。
- en: Provide **Name** and **Description.** You can be creative as there is a limit
    of characters for the **Name**, you can use any naming convention as all the scheduled
    job are going to land at the same place in VCM.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供 **名称** 和 **描述**。你可以发挥创意，因为 **名称** 有字符限制，你可以使用任何命名约定，因为所有调度的任务都会在 VCM 中到达同一个地方。
- en: Select **VMware vSphere 5.5 Hardening Guide Filters**. This collection filter
    set was downloaded when you prepared yourself in the getting ready section:![How
    to do it...](img/image_08_025.jpg)
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **VMware vSphere 5.5 加固指南过滤器**。该收集过滤器集是在你准备工作部分时下载的：![如何操作...](img/image_08_025.jpg)
- en: Select **vCenter Servers Machine Group**. This machine group was configured
    when you prepared yourself in the getting ready section.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **vCenter 服务器机器组**。该机器组是在你准备工作部分时配置的。
- en: Schedule the vCenter collection for a daily collection.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安排 vCenter 收集任务为每日收集。
- en: Note
  id: totrans-165
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that this means that any newly provisioned servers will be discovered daily.
    If you know the machines will be deployed frequently, and you want them to be
    discovered early, you can change the schedule according to your needs.
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，这意味着任何新部署的服务器将每天被发现。如果你知道这些机器会频繁部署，并且希望它们尽早被发现，你可以根据需要更改调度。
- en: How it works...
  id: totrans-167
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: In this recipe, VCM collects data from the VCM servers that are added in VCM
    for management and then it makes new VMs available for agent installation by performing
    a discovery and management such as checking compliance and patching.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在本配方中，VCM 从已经添加到 VCM 中进行管理的 VCM 服务器收集数据，然后通过执行发现和管理（如检查合规性和打补丁）使新的虚拟机可以安装代理。
- en: See also
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: 'The *Adding a vCenter server instance* recipe in  [Chapter 2](ch02.html "Chapter 2. Configuring
    VCM to Manage Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure*:
    To make sure that vCenter is added in VCM'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第 2 章](ch02.html "第 2 章 配置 VCM 来管理你的基础设施")中的 *添加 vCenter 服务器实例* 配方，*配置 VCM
    来管理你的基础设施*：确保 vCenter 已经在 VCM 中添加
- en: 'The *Importing Compliance Packs* recipe from [Chapter 6](ch06.html "Chapter 6. Compliance
    Management"), *Compliance Management*: To import compliance pack for vSphere 5.5
    Hardening'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自 [第 6 章](ch06.html "第 6 章 合规性管理")的 *导入合规性包* 配方，*合规性管理*：导入 vSphere 5.5 加固的合规性包
- en: 'The *Creating a machine group*recipe in [Chapter 2](ch02.html "Chapter 2. Configuring
    VCM to Manage Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure*:
    To create a machine group this will include only vCenter Servers'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第 2 章](ch02.html "第 2 章 配置 VCM 来管理你的基础设施")中的 *创建机器组* 配方，*配置 VCM 来管理你的基础设施*：创建一个仅包含
    vCenter 服务器的机器组
- en: Scheduling vCenter discovery
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安排 vCenter 发现
- en: '**Discovery** is used to identify if there are any new machines available that
    can be added to VCM for management. If we don''t do it, then we need to manually
    add and license the machines to be managed.'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: '**发现**用于确定是否有任何新的机器可以添加到 VCM 进行管理。如果不进行此操作，则需要手动添加和授权需要管理的机器。'
- en: VCM must discover machines in your environment before you can collect data from
    them. You can create a discovery rule to discover all machines or you can apply
    a filter to limit the machines that VCM discovers.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在你可以从机器中收集数据之前，VCM 必须先发现环境中的机器。你可以创建一个发现规则以发现所有机器，或者你可以应用过滤器来限制 VCM 发现的机器。
- en: Note
  id: totrans-176
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that the vCenter discovery must occur after the vCenter Collection. This
    is counter-intuitive, but simply put, the vCenter discovery is finding new VMs
    that have come under the vCenter management through the vCenter collection.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，vCenter 发现必须在 vCenter 收集之后进行。这看起来有些反直觉，但简单来说，vCenter 发现是通过 vCenter 收集来发现那些已经通过
    vCenter 管理的新虚拟机。
- en: Note that for servers and workstations, exceeding the limit on your license
    key produces warnings but does not restrict the VCM operation.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，对于服务器和工作站，超出许可证密钥的限制会产生警告，但不会限制 VCM 操作。
- en: In this recipe, we are scheduling a vCenter discovery so that all the newly
    created VMs can be added, and agent can be installed and licensed in VCM.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 在本配方中，我们计划执行一个 vCenter 发现，以便所有新创建的虚拟机可以被添加，并且代理可以在 VCM 中安装并授权。
- en: Getting ready
  id: totrans-180
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Check whether you have enough licenses available to accommodate the newly added
    VMs, make sure that vCenter is added in VCM by following the recipe in the *Adding
    a vCenter server instance* recipe in  [Chapter 2](ch02.html "Chapter 2. Configuring
    VCM to Manage Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure*.
    You must have created a discovery rule by following the recipe in *Adding a discovery
    rule* recipe in  [Chapter 2](ch02.html "Chapter 2. Configuring VCM to Manage Your
    Infrastructure"), *Configuring VCM to Manage Your Infrastructure*. You must have
    scheduled a vCenter collection before running this discovery. If you are exceeding
    the limit of your license key, add one by following the *Applying a new license
    key* recipe in [Chapter](ch07.html "Chapter 7. Maintenance of VCM") [7](ch07.html
    "Chapter 7. Maintenance of VCM"), *Maintenance of  VCM* *.*
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 检查是否有足够的许可证可容纳新添加的虚拟机，确保vCenter已通过遵循[第2章](ch02.html "第2章 配置VCM以管理您的基础设施")中的*添加vCenter服务器实例*的食谱添加到VCM中。你必须通过遵循[第2章](ch02.html
    "第2章 配置VCM以管理您的基础设施")中的*添加发现规则*的食谱创建发现规则。在运行此发现之前，必须已安排vCenter收集。如果超过了许可证密钥的限制，请通过遵循[第7章](ch07.html
    "第7章 VCM的维护")中的*应用新许可证密钥*的食谱来添加一个许可证密钥。
- en: How to do it...
  id: totrans-182
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Navigate to **Administration** | **Job Manager** | **Scheduled** and click on
    **Add.**
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**管理** | **任务管理器** | **已安排**并点击**添加**。
- en: Check the screenshot from the earlier recipes
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看之前食谱中的截图。
- en: Select **Discovery** on the **Job Type** page of the wizard.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导的**作业类型**页面上选择**发现**。
- en: Provide **Name** and **description.** You can be creative as there is a limit
    of characters for the **Name**, you can use any naming convention as all the scheduled
    job are going to land at the same place in VCM.
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供**名称**和**描述**。由于**名称**有字符限制，你可以自由发挥，使用任何命名规范，因为所有已安排的任务都将统一进入VCM的同一位置。
- en: Select the vCenter discovery rule created in the *Adding a discovery rule* recipe
    in  [Chapter 2](ch02.html "Chapter 2. Configuring VCM to Manage Your Infrastructure"), *Configuring
    VCM to Manage Your Infrastructure*:![How to do it...](img/image_08_026.jpg)
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择在[第2章](ch02.html "第2章 配置VCM以管理您的基础设施")中创建的vCenter发现规则，*配置VCM以管理您的基础设施*：![如何操作...](img/image_08_026.jpg)
- en: Click on **Next** and select a daily schedule.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**并选择一个日程安排。
- en: Note
  id: totrans-189
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that it is best to schedule the Discovery after the Collection. A two to
    three hour gap should be sufficient for most environments, but double-check the
    vCenter Collection job status for large environments.
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，最好在收集之后安排发现。对于大多数环境，间隔两到三小时应该足够，但对于大环境，请再次检查vCenter收集任务的状态。
- en: How it works...
  id: totrans-191
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: A discovery rule is created; we are just asking VCM to run it on a schedule.
    If there are too many VM installations on daily basis, we can increase the frequency
    by selecting **Occurs Every XX hours** and schedule accordingly. This will go
    in the database and check the details fetched by vCenter collections and add the
    newly created VMs in the licensed machines. If in the discovery rule we have selected
    to install the agent, then it will just follow the discovery and install the agent.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 创建了发现规则；我们只是要求VCM按照计划运行它。如果每天有太多虚拟机安装，我们可以通过选择**每XX小时发生一次**来增加频率，并按此安排。这将进入数据库，检查vCenter收集获取的详细信息，并将新创建的虚拟机添加到已授权的机器中。如果在发现规则中选择了安装代理，则它会在发现后跟随并安装代理。
- en: See also
  id: totrans-193
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: 'The *Adding a vCenter server instance* recipe in [Chapter 2](ch02.html "Chapter 2. Configuring
    VCM to Manage Your Infrastructure"), *Configuring VCM to Manage Your Infrastructure*:
    To add a vCenter in VCM'
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第2章](ch02.html "第2章 配置VCM以管理您的基础设施")中，*添加vCenter服务器实例*的食谱，*配置VCM以管理您的基础设施*：将vCenter添加到VCM。
- en: The  **Adding a discovery rule**  recipe in [Chapter 2](ch02.html "Chapter 2. Configuring
    VCM to Manage Your Infrastructure")*, *Configuring VCM to Manage Your Infrastructure*:*
    To create a vCenter discovery rule to be used for this schedule
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第2章](ch02.html "第2章 配置VCM以管理您的基础设施")中，**添加发现规则**的食谱，*配置VCM以管理您的基础设施*：创建一个用于该日程安排的vCenter发现规则。
- en: The *Applying a new license key* recipe in [Chapter 7](ch07.html "Chapter 7. Maintenance
    of VCM"), *Maintenance of  VCM:* To add license key if you are exceeding the limit
    of your license key.
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第7章](ch07.html "第7章 VCM的维护")中，*应用新许可证密钥*的食谱，*VCM的维护*：如果超过了许可证密钥的限制，添加许可证密钥。
