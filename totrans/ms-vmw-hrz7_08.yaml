- en: Securing Horizon View with SSL Certificates
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用SSL证书保护Horizon View
- en: n this chapter, we will discuss the security aspect of VMware Horizon View 7,
    and in particular, how we deliver secure communication not only with the end user
    client but also between the different View infrastructure components in the data
    center. We are going to look at two ways to deliver this secure communication.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论VMware Horizon View 7的安全性方面，特别是如何实现与最终用户客户端以及数据中心中不同View基础架构组件之间的安全通信。我们将研究两种实现这种安全通信的方法。
- en: We will start with **Secure Sockets Layer** (**SSL**) certificates and get an
    overview of SSL, before learning how to create/issue a certificate and configure
    Horizon View to use it. The second option that will be covered in this chapter
    is **True SSO**. True SSO provides users with a way to authenticate to their virtual
    desktops that keeps all of their usual domain privileges but doesn't require them
    to provide their Active Directory credentials. You will more than likely have
    SSL certificates already set up in your environment, but for this chapter, we're
    going to set up a test environment using a server in the example lab.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从**安全套接字层**（**SSL**）证书开始，概述一下SSL，然后学习如何创建/颁发证书并配置Horizon View以使用它。 本章将涵盖的第二个选项是**True
    SSO**。True SSO为用户提供了一种身份验证虚拟桌面的方式，能够保持他们的所有常规域权限，但不需要他们提供Active Directory凭据。你很可能已经在你的环境中设置了SSL证书，但在本章中，我们将使用示例实验室中的服务器设置一个测试环境。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Horizon View and SSL certificates
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Horizon View和SSL证书
- en: Installing SSL cerificates for Horizon View
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为Horizon View安装SSL证书
- en: Horizon View True SSO
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Horizon View True SSO
- en: Horizon View and SSL certificates
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Horizon View和SSL证书
- en: Let's start by defining SSL. SSL is an encryption technology developed by Netscape.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先来定义SSL。SSL是由Netscape开发的一种加密技术。
- en: It is used to create an encrypted connection between a web server and the web
    browser in which you will view web pages. By using SSL, you can securely view
    the information sent to your browser, knowing that nobody else can access it.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 它用于在Web服务器和浏览器之间创建加密连接，您将在其中查看网页。通过使用SSL，您可以安全地查看发送到浏览器的信息，知道没有其他人可以访问它。
- en: SSL works by means of an SSL certificate that is installed on a server and is
    used to identify you. So the question is, how do you know whether you are using
    a secure connection to connect to the server? If you have a secure connection,
    you will see a padlock icon in your browser or the address bar will be colored
    green.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: SSL通过安装在服务器上的SSL证书来工作，并用于识别您。那么问题是，您如何知道自己是否正在使用安全连接连接到服务器呢？如果您有安全连接，您将在浏览器中看到一个挂锁图标，或者地址栏会变为绿色。
- en: To ensure you have a secure connection, you can also access the site using `https://`
    in your browser rather than the usual `http://`.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 为了确保您拥有安全连接，您也可以在浏览器中使用`https://`而不是通常的`http://`访问该站点。
- en: SSL certificates are provided by **Certificate Authorities** (**CAs**).
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: SSL证书由**证书颁发机构**（**CAs**）提供。
- en: What is a CA?
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是CA？
- en: A **CA** is a service that issues digital certificates to organizations or people
    after validating them. CAs keep detailed records of the certificates that have
    been issued and any other information that was used when the certificate was issued.
    These are regularly audited to ensure compliance.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '**CA**（证书颁发机构）是一项在验证组织或个人后，向其颁发数字证书的服务。CA保持已颁发证书的详细记录以及在证书颁发时使用的其他信息。这些记录会定期审计，以确保符合规定。'
- en: You can obtain a CA from different organizations, or you can create your own
    from a root CA.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从不同的组织获取CA，或者可以从根CA创建自己的CA。
- en: Why do I need SSL certificates for Horizon View?
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为什么我需要为Horizon View提供SSL证书？
- en: If you are transmitting sensitive information from a website to an endpoint
    device, you need to secure the information with encryption; otherwise, data could
    be compromised.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您从网站向终端设备传输敏感信息，您需要通过加密来保护信息，否则数据可能会被泄露。
- en: As Horizon View is essentially like a web service to which end users connect
    from their endpoint device to the View Connection Server, you need to ensure that
    this connection is secured. In this case, SSL is used to establish a secured link
    between the client device and the virtual desktop machine. Although, with Horizon
    View, no actual data is transmitted, the pixels from your virtual desktop machine
    are transmitted, and if a third party intercepts this transmission, they could
    potentially see your screen by redrawing these pixels. SSL is also used for communication
    between Horizon View components, such as Connection Servers and Replica Servers.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 Horizon View 本质上类似于一个 web 服务，终端用户通过其终端设备连接到 View 连接服务器，您需要确保该连接是安全的。在这种情况下，SSL
    被用于在客户端设备和虚拟桌面机器之间建立安全链接。尽管使用 Horizon View 时不会实际传输数据，但虚拟桌面机器的像素会被传输，如果第三方截获了这一传输，他们可能会通过重绘这些像素看到您的屏幕。SSL
    还用于 Horizon View 组件之间的通信，如连接服务器和副本服务器。
- en: Having an SSL certificate installed is a requirement for Horizon View.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 SSL 证书是 Horizon View 的要求。
- en: By default, Horizon View comes with self-signed certificates that are fine for
    a proof of concept or a small-scale pilot, but for a production environment, you
    will need to have enterprise-class certificates.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Horizon View 配备了自签名证书，这对于概念验证或小规模试点是可以的，但在生产环境中，您需要企业级证书。
- en: The use of certificates became a requirement with View 5.1, where they were
    used for the Horizon View components to communicate, such as the Connection Server,
    Replica Server, and View Composer, as well as the underlying infrastructure of
    the ESXi hosts and Virtual Center Servers. Each of these components needs to have
    a certificate installed, along with the client device that is connecting to it.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 使用证书成为 View 5.1 版本的要求，当时它们用于 Horizon View 组件之间的通信，如连接服务器、副本服务器和 View Composer，以及
    ESXi 主机和虚拟中心服务器的基础设施。每个组件都需要安装证书，包括连接到它的客户端设备。
- en: Installing SSL certificates for Horizon View
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Horizon View 的 SSL 证书
- en: In the next sections of this chapter, we will briefly cover how to set up certificates
    by installing a root CA in our example test environment to get you started with
    Horizon View. However, we strongly recommend that you engage with your security
    team to deploy the correct type of certificate for your organization and environment.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的后续部分，我们将简要介绍如何通过在我们的示例测试环境中安装根 CA 来设置证书，帮助您开始使用 Horizon View。然而，我们强烈建议您与安全团队合作，为您的组织和环境部署正确类型的证书。
- en: Installing a root CA
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装根 CA
- en: In this section, we are going to walk through the process of setting up a server
    that will act as our root CA in the example lab. A server has already been built
    called **HZN7-CERTS**, which we will use for this role.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将介绍设置一个作为根 CA 的服务器的过程，该服务器将在示例实验室中使用。已经建好了一个名为 **HZN7-CERTS** 的服务器，我们将使用该服务器来担任此角色。
- en: 'To configure the root CA, follow these steps:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 配置根 CA，请按以下步骤操作：
- en: Open a console to the **HZN7-CERTS** server, and launch the Server Manager.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开到 **HZN7-CERTS** 服务器的控制台，并启动服务器管理器。
- en: 'Click on Add roles and features (**1**), as shown in the following screenshot:'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“添加角色和功能” (**1**)，如下图所示：
- en: '![](img/5918da65-7cbc-44a2-b9dd-5873b987ea99.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5918da65-7cbc-44a2-b9dd-5873b987ea99.png)'
- en: You will now see the Add Roles and Features Wizard and the Before You Begin
    screen. Click on the Next > button to continue.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在将看到“添加角色和功能向导”和“开始前”屏幕。点击“下一步 >”按钮继续。
- en: 'Next, you will see the Installation Type screen. Click the radio button for
    Role-based or feature-based installation (**2**), as shown in the following screenshot:'
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您将看到安装类型界面。点击“基于角色或功能的安装”单选按钮 (**2**)，如以下截图所示：
- en: '![](img/15cb8bc9-390d-4fc8-93a3-40f2f1f59931.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](img/15cb8bc9-390d-4fc8-93a3-40f2f1f59931.png)'
- en: Click on the Next > button to continue.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步 >”按钮继续。
- en: 'You will now see the Server Selection screen, as shown in the following screenshot:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在将看到服务器选择界面，如下图所示：
- en: '![](img/cd1d156f-e385-4f1e-9c93-ea9e3678362d.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cd1d156f-e385-4f1e-9c93-ea9e3678362d.png)'
- en: Click on the radio button for Select a server from the server pool (**3**),
    and then highlight the `hzn7-certs.pvolab.com` server from the list (**4**).
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“从服务器池中选择服务器”单选按钮 (**3**)，然后从列表中高亮显示 `hzn7-certs.pvolab.com` 服务器 (**4**)。
- en: 'Click the Next > button to continue. You will now see the Server Roles screen,
    as shown in the following screenshot:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步 >”按钮继续。您现在将看到服务器角色界面，如下图所示：
- en: '![](img/460d7895-48e3-4de5-8020-a43e13c66178.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![](img/460d7895-48e3-4de5-8020-a43e13c66178.png)'
- en: Check the box for Active Directory Certificate Services (**5**) and then, in
    the pop-up box for Add features that are required for Active Directory Certificate
    Services, click on the Add Features button (**6**).
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 勾选“Active Directory证书服务”框（**5**），然后在弹出框中点击“添加Active Directory证书服务所需的功能”按钮，点击“添加功能”按钮（**6**）。
- en: You will now return to the Server Roles screen, which will show that Active
    Directory Certificate Services is now checked. Click on the Next > button to continue.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您将返回到服务器角色屏幕，屏幕上会显示“Active Directory证书服务”已被选中。单击“下一步 >”按钮继续。
- en: Next, you will see the Features configuration screen. Click on the Next > button
    to continue.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您将看到功能配置屏幕。单击“下一步 >”按钮继续。
- en: 'The next part of the Add Roles and Features Wizard screen is the Active Directory
    Certificate Services screen, as shown in the following screenshot:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加角色和功能向导的下一个屏幕是“Active Directory证书服务”屏幕，如下图所示：
- en: '![](img/0113abaf-24a6-409f-a2a4-112ddd3674e6.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0113abaf-24a6-409f-a2a4-112ddd3674e6.png)'
- en: 'Click the Next > button to continue. You will now see the Select role services
    screen, as shown in the following screenshot:'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击“下一步 >”按钮继续。现在，您将看到选择角色服务屏幕，如下图所示：
- en: '![](img/ee033b07-ca4c-4d86-b64a-41c62ed0e026.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ee033b07-ca4c-4d86-b64a-41c62ed0e026.png)'
- en: Under Role services, check the box for Certification Authority (**7**), and
    then click on the Next > button to continue.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在角色服务下，勾选证书颁发机构框（**7**），然后单击“下一步 >”按钮继续。
- en: On the Confirm installation selections screen, check the box for Restart the
    destination server automatically (**8**), and then click on the Install button.
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在确认安装选择屏幕上，勾选“自动重启目标服务器”框（**8**），然后单击“安装”按钮。
- en: The certificate services feature has now been installed. There are now some
    post-deployment configuration to be completed.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 证书服务功能现在已经安装。接下来，需要完成一些部署后的配置。
- en: Root CA post-deployment configuration tasks
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 根CA部署后配置任务
- en: 'With the core root CA components installed, you can now complete the post-deployment
    configuration tasks:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 安装了核心根CA组件后，您现在可以完成部署后的配置任务：
- en: 'From the menu bar along the top of the Server Manager Dashboard, click the
    warning yellow triangle warning box, and from the options that pop up, click the
    Configure Active Directory Certificate Services entry (**1**), as shown in the
    following screenshot:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在服务器管理器仪表板顶部的菜单栏中，单击黄色警告三角形警告框，然后在弹出的选项中，单击“配置Active Directory证书服务”条目（**1**），如下图所示：
- en: '![](img/27c3f26a-1c6b-4813-a0b0-199c05d0b3f1.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](img/27c3f26a-1c6b-4813-a0b0-199c05d0b3f1.png)'
- en: 'You will now see the AD CS Configuration screen and the Credentials configuration
    section:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在将看到AD CS配置屏幕和凭据配置部分：
- en: '![](img/100e2472-a764-487b-a90d-ac5446030365.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](img/100e2472-a764-487b-a90d-ac5446030365.png)'
- en: 'Click on the Next > button to continue. You will now see the Role Services
    configuration screen, as shown in the following screenshot:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击“下一步 >”按钮继续。现在，您将看到角色服务配置屏幕，如下图所示：
- en: '![](img/e8a6419c-f4d6-4c9d-94c9-fdbaeeada507.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e8a6419c-f4d6-4c9d-94c9-fdbaeeada507.png)'
- en: Check the Certification Authority box (**2**), and then click on the Next >
    button to continue.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 勾选证书颁发机构框（**2**），然后单击“下一步 >”按钮继续。
- en: 'You will now see the Setup Type configuration screen, as shown in the following
    screenshot:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您将看到设置类型配置屏幕，如下图所示：
- en: '![](img/3aff0e51-1213-42be-8a97-0d3adb5417b2.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3aff0e51-1213-42be-8a97-0d3adb5417b2.png)'
- en: 'Click on the radio button to select the Enterprise CA option (**3**), and then
    click on the Next > button to continue. You will now see the CA Type configuration
    screen:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击单选按钮选择“企业CA”选项（**3**），然后单击“下一步 >”按钮继续。现在，您将看到证书颁发机构类型配置屏幕：
- en: '![](img/33ddf5a9-b9d1-4c7f-a473-373b9737e750.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](img/33ddf5a9-b9d1-4c7f-a473-373b9737e750.png)'
- en: Next, click on the radio button to select the Root CA option (**4**), and then
    click on the Next > button to continue.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，单击单选按钮选择“根CA”选项（**4**），然后单击“下一步 >”按钮继续。
- en: 'You will now see the Private Key configuration screen, as shown in the following
    screenshot:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您将看到私钥配置屏幕，如下图所示：
- en: '![](img/8f27f9e1-b2d7-463f-b5b0-2269950e042d.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8f27f9e1-b2d7-463f-b5b0-2269950e042d.png)'
- en: 'Click on the radio button to select the Create a new private key option (**5**),
    and then click on the Next > button to continue. You will now see the Cryptography
    for CA configuration screen:'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击单选按钮选择“创建一个新的私钥”选项（**5**），然后单击“下一步 >”按钮继续。现在，您将看到CA加密配置屏幕：
- en: '![](img/abd08213-0167-43be-a711-3d8c0572c0b1.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](img/abd08213-0167-43be-a711-3d8c0572c0b1.png)'
- en: Accept the default settings and click the Next > button to continue.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受默认设置并点击“下一步 >”按钮以继续。
- en: 'You will now see the CA Name configuration screen, where you can specify the
    name of the CA, as shown in the following screenshot:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您将看到 CA 名称配置屏幕，在这里您可以指定 CA 的名称，如下图所示：
- en: '![](img/a6890240-3100-4ff1-87f7-533f6c6a0378.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a6890240-3100-4ff1-87f7-533f6c6a0378.png)'
- en: Accept the default settings and click on the Next > button to continue.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受默认设置并点击“下一步 >”按钮以继续。
- en: 'You will now see the Validity Period configuration screen, as shown in the
    following screenshot:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您将看到有效期配置屏幕，如下图所示：
- en: '![](img/71556989-b263-450a-aadf-8b98d0ea86fe.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](img/71556989-b263-450a-aadf-8b98d0ea86fe.png)'
- en: Accept the default settings and click on the Next > button to continue.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受默认设置并点击“下一步 >”按钮以继续。
- en: 'You will now see the CA Database configuration screen, as shown in the following
    screenshot:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您将看到 CA 数据库配置屏幕，如下图所示：
- en: '![](img/d4c8d40d-dd60-413c-9030-93105d75e04e.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d4c8d40d-dd60-413c-9030-93105d75e04e.png)'
- en: 'Accept the default settings and click on the Next > button to continue. You
    will now see the Confirmation screen, as shown in the following screenshot:'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接受默认设置并点击“下一步 >”按钮继续。您现在将看到确认屏幕，如下图所示：
- en: '![](img/dec50905-4ba3-4904-b95c-f7fbee170783.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dec50905-4ba3-4904-b95c-f7fbee170783.png)'
- en: 'Click on the Configure button at the bottom of the screen to complete the configuration.
    Once the configuration has successfully completed, you will see the following
    message pop up:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击屏幕底部的“配置”按钮以完成配置。一旦配置成功完成，您将看到以下消息弹出：
- en: '![](img/fccc4f60-d819-44f8-b399-51b75859ae4f.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fccc4f60-d819-44f8-b399-51b75859ae4f.png)'
- en: Click on the Close button to close the Server Manager.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“关闭”按钮以关闭服务器管理器。
- en: Now that we have our certificate server set up and running, we can start configuring
    the Horizon View software infrastructure components and clients to use it.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们的证书服务器已经设置并运行，我们可以开始配置 Horizon View 软件基础设施组件和客户端以使用它。
- en: We will start by installing the certificate on the Horizon View Connection Server
    first.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将首先在 Horizon View 连接服务器上安装证书。
- en: Installing an SSL certificate on the View Connection Server
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 View 连接服务器上安装 SSL 证书
- en: 'With the certificate server installed and configured, we are now going to install
    the newly created certificate on the View Connection Server:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在证书服务器安装并配置完成后，我们现在要将新创建的证书安装到 View 连接服务器上：
- en: 'Open a remote console session to the View Connection Server named **HZN7-CS1**,
    and then open a Run command box. In the Run box, type `mmc`, and then click on
    OK to launch the **Microsoft Management Console** (**MMC**), as shown in the following
    screenshot:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个远程控制台会话，连接到名为 **HZN7-CS1** 的 View 连接服务器，然后打开运行命令框。在运行框中，输入 `mmc`，然后点击确定以启动
    **Microsoft 管理控制台** (**MMC**)，如下图所示：
- en: '![](img/e4396ff0-10b3-4773-b849-c805a50bdc5c.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e4396ff0-10b3-4773-b849-c805a50bdc5c.png)'
- en: 'You will now see the MMC console screen, as shown in the following screenshot:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您将看到 MMC 控制台屏幕，如下图所示：
- en: '![](img/86cfc8f9-b21b-4d6a-acde-85afdf4a9d05.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](img/86cfc8f9-b21b-4d6a-acde-85afdf4a9d05.png)'
- en: On the MMC console screen, click on File (**1**), and then click on the option
    for Add/Remove Snap-in… (**2**).
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 MMC 控制台屏幕上，点击文件 (**1**)，然后点击“添加/删除管理单元…”选项 (**2**)。
- en: 'You will now see the Add or Remove Snap-ins screen:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在将看到添加或删除管理单元屏幕：
- en: '![](img/b0923fe7-1c32-4eee-a77b-aa88ccd9d4b8.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b0923fe7-1c32-4eee-a77b-aa88ccd9d4b8.png)'
- en: From the Available snap-ins section on the left, click to highlight the Certificates
    entry (**3**), and then click, the Add > button (**4**), as shown in the previous
    screenshot.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧的可用管理单元部分，点击并突出显示“证书”条目 (**3**)，然后点击“添加 >”按钮 (**4**)，如前图所示。
- en: 'You will now see the Certificates snap-in box appear, as shown in the following
    screenshot:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在您将看到证书管理单元框，如下图所示：
- en: '![](img/0fc615c9-bb30-4f41-9cd9-0f91a65e1e44.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0fc615c9-bb30-4f41-9cd9-0f91a65e1e44.png)'
- en: 'Click on the radio button for Computer account (**5**), and then click the
    Next > button to continue. You will now see the Select Computer configuration
    box:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击计算机帐户的单选按钮 (**5**)，然后点击“下一步 >”按钮继续。您现在将看到选择计算机配置框：
- en: '![](img/41e387a5-f645-49f8-a5f0-a916a1931733.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](img/41e387a5-f645-49f8-a5f0-a916a1931733.png)'
- en: Click on the radio button for Local computer (6), and then click on the Finish
    button. You will return to the Add or Remove Snap-ins screen, which now shows
    the certificates snap-in as being selected.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“本地计算机”单选按钮 (**6**)，然后点击“完成”按钮。您将返回到“添加或删除管理单元”界面，现在显示已选择证书管理单元。
- en: Click on OK to close the Add or Remove Snap-ins screen.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“确定”以关闭“添加或删除管理单元”界面。
- en: 'You have now successfully added Certificates to the management console as an
    option for configuration, as shown in the following screenshot:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在已成功将证书添加到管理控制台作为配置选项，如下图所示：
- en: '![](img/1a3de15f-d203-4ceb-90e6-e1f66b8a97aa.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1a3de15f-d203-4ceb-90e6-e1f66b8a97aa.png)'
- en: 'Now you have the certificates available to manage and configure from the management
    console, the next task is to request a certificate from the root CA:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您已经可以从管理控制台管理和配置证书，接下来的任务是向根CA请求证书：
- en: 'From the `Console Root`, expand the `Certificates (Local Computer)` folder,
    and then right-click on the `Personal` folder (**1**). From the contextual menu,
    navigate to All Tasks (2) and then select Request New Certificate... (**3**):'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '从 `控制台根目录` 中展开 `证书（本地计算机）` 文件夹，然后右键点击 `个人` 文件夹 (**1**)。从上下文菜单中，依次选择“所有任务”（**2**）并选择“请求新证书...”
    (**3**):'
- en: '![](img/b1492f38-7064-4e77-9c0e-40e4576166c8.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b1492f38-7064-4e77-9c0e-40e4576166c8.png)'
- en: You will now see the Before You Begin section on Certificate Enrollment screen.
    Click on the Next button to continue.
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您将看到证书注册界面上的“开始之前”部分。点击“下一步”按钮继续。
- en: 'Now the Select Certificate Enrollment Policy screen is displayed, as shown
    in the following screenshot:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在显示“选择证书注册策略”界面，如下图所示：
- en: '![](img/9a6a1aab-0404-4751-b142-68e92eaf5f02.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9a6a1aab-0404-4751-b142-68e92eaf5f02.png)'
- en: 'Click on the Next button to continue. You will now see the Certificate Enrollment
    Request Certificates screen:'
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步”按钮继续。您现在将看到“证书注册请求证书”界面：
- en: '![](img/c8d5c7b9-8b81-4d36-96dc-fb8eeeccf407.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c8d5c7b9-8b81-4d36-96dc-fb8eeeccf407.png)'
- en: In the Active Directory Enrollment Policy box, check the box for Computer (**4**).
    We will use this policy template for our certificate; however, you can create
    your own template on the root CA server.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“Active Directory 注册策略”框中，勾选计算机 (**4**) 选项。我们将使用此策略模板来申请证书；但是，您也可以在根CA服务器上创建自己的模板。
- en: 'Now click on the arrow next to Details (**5**), and then click on the Properties
    box (**6**) so that we can configure the properties of the certificate. You will
    now see the Certificate Properties configuration box, as shown in the following
    screenshot:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在点击“详细信息”旁边的箭头 (**5**)，然后点击“属性”框 (**6**) 以便配置证书的属性。您现在将看到证书属性配置框，如下图所示：
- en: '![](img/c1ce95e0-92b2-4161-a793-84ab6fc41741.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c1ce95e0-92b2-4161-a793-84ab6fc41741.png)'
- en: 'Click on the General tab (**7**), and then in the Friendly name: box (**8**),
    type in a friendly name for this certificate. In the example lab, we will call
    this `vdm`. Optionally, you can enter a Description as well.'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“常规”标签 (**7**)，然后在“友好名称:”框 (**8**) 中输入此证书的友好名称。在本示例实验室中，我们将其命名为 `vdm`。您还可以选择输入描述。
- en: 'Next, from the Certificate Properties box again, click on the Private Key tab,
    as shown in the following screenshot:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在“证书属性”框中，点击“私钥”标签，如下图所示：
- en: '![](img/7818e064-036e-4951-9dd3-506e730856d9.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7818e064-036e-4951-9dd3-506e730856d9.png)'
- en: Click on the down arrow for Key options (**10**) to expand the configuration
    options, and check the box for Make private key exportable (**11**).
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击下拉箭头以展开关键选项 (**10**)，并勾选使私钥可导出 (**11**) 选项。
- en: 'Finally, click on the **Certification Authority** tab (**12**), as shown in
    the following screenshot:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，点击 **证书颁发机构** 标签 (**12**)，如图所示：
- en: '![](img/8696f61c-bf02-4ebd-953d-3c4886215911.png)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8696f61c-bf02-4ebd-953d-3c4886215911.png)'
- en: 'Check the box to select the pvolab-HZN7-CERTS-CA (**13**) enrollment server.
    Now click on the OK button. You will return to the Request Certificates screen,
    as shown in the following screenshot:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 勾选框以选择 pvolab-HZN7-CERTS-CA (**13**) 注册服务器。然后点击“确定”按钮。您将返回到“请求证书”界面，如下图所示：
- en: '![](img/66c5d495-4c8c-4639-8622-c7a7d3da38f1.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![](img/66c5d495-4c8c-4639-8622-c7a7d3da38f1.png)'
- en: 'Click on the Enroll button (**14**) to continue and enroll the Connection Server.
    If the enrollment is successful, then you will see the following screenshot:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“注册”按钮 (**14**) 以继续并注册连接服务器。如果注册成功，您将看到以下截图：
- en: '![](img/981f9d4d-44fa-4ba9-860f-612edc1207ce.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](img/981f9d4d-44fa-4ba9-860f-612edc1207ce.png)'
- en: Click the Finish button to complete the certificate enrollment process.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“完成”按钮以完成证书注册过程。
- en: Don't forget that you need to complete the certificate enrollment process on
    all of the Horizon View components, so if you have additional servers such as
    Replica Servers and View Composer Servers then these will all need a certificate
    to be installed on each and every one of them.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 别忘了你需要在所有Horizon View组件上完成证书注册过程，因此，如果你有其他服务器，比如副本服务器和View Composer服务器，那么这些服务器上也需要安装证书。
- en: In the next section, we will take a look at what to do now that we have our
    root CA certificate server and the certificate is installed on our Connection
    Servers.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一部分，我们将看看现在已经有了根CA证书服务器并且证书已安装在我们的连接服务器上，我们接下来该做些什么。
- en: Post-certificate enrollment configuration tasks
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 证书注册后的配置任务
- en: Even though you have installed a certificate server and installed a valid certificate
    on the Connection Server, there are still a few things to configure.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 即使你已经安装了证书服务器并且在连接服务器上安装了有效的证书，仍然有一些事情需要配置。
- en: 'If you were to try and connect to the View Administrator using your browser,
    you will still see an error message saying there is a problem with the website''s
    security certificate. A typical message would look something like the following:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你尝试使用浏览器连接到View Administrator，你仍然会看到一条错误信息，表示网站的安全证书存在问题。典型的信息大概会是如下所示：
- en: '![](img/b92e1c76-46c8-40c5-891f-ff74777b20ed.png)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b92e1c76-46c8-40c5-891f-ff74777b20ed.png)'
- en: 'If you remember from the beginning of this chapter, we also discussed accessing
    web pages using `http://` or `https://` for secure web pages. If the address bar
    in your browser is red, as shown in the following screenshot, then the connection
    is not secure and there are no certificates installed:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你还记得本章开始时，我们还讨论了使用`http://`或`https://`来访问安全网页。如果浏览器中的地址栏是红色的，如下图所示，那么连接不安全，且没有安装证书：
- en: '![](img/0a1330cc-1bd6-454e-8b05-9cf5fccb2208.png)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0a1330cc-1bd6-454e-8b05-9cf5fccb2208.png)'
- en: You can of course ignore these errors and just click Continue to this website
    (not recommended), which allows you to continue past the warning and log on to
    View Administrator.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，你可以忽略这些错误，直接点击“继续访问此网站”（不推荐），这样你可以绕过警告并登录到View Administrator。
- en: 'However, when you log on, you will see that, in the System Health section of
    the View Administrator dashboard, there is also a red warning box. As far as View
    is concerned, if you don''t have a valid certificate installed, the health warning
    tells you that the connections will be untrusted and therefore that''s a bad thing!
    An example of this is shown in the following screenshot:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，当你登录后，你会看到在View Administrator仪表板的系统健康状态部分也有一个红色警告框。对于View来说，如果没有安装有效的证书，健康警告会告诉你连接是不受信任的，因此这是一件坏事！以下截图展示了这一点：
- en: '![](img/931bcbfb-0549-48aa-8454-601e146aeab9.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](img/931bcbfb-0549-48aa-8454-601e146aeab9.png)'
- en: If you click on the Horizon 7 Administrator dashboard, and under System Health
    on the Dashboard view, select one of the Connection Servers displaying a red warning
    box. You can see in the server details box that opens that there is a yellow warning
    sign telling you that there is an untrusted certificate on this particular server.
    In the example lab environment, we are going to continue using the Horizon View
    Manager rather than the newer Horizon Console web-based management console. The
    reason is that at the time of writing, not all of the features we are going to
    cover can be accessed using the Horizon console.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 如果点击Horizon 7管理员仪表板，在仪表板视图中的系统健康状态下，选择显示红色警告框的某个连接服务器。你可以看到在打开的服务器详细信息框中，出现了一个黄色警告标志，提示该服务器上有一个不受信任的证书。在这个示例实验环境中，我们将继续使用Horizon
    View管理器，而不是更新的Horizon Console基于Web的管理控制台。原因是在编写本书时，并不是所有我们将讨论的功能都可以通过Horizon控制台访问。
- en: 'It''s the same thing from the end user perspective. If they try to log on via
    the Horizon Client, they will see the following:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 从最终用户的角度来看，这是一回事。如果他们尝试通过Horizon客户端登录，他们会看到以下内容：
- en: '![](img/3f68f114-f74a-4469-b1c9-250c293bf26b.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3f68f114-f74a-4469-b1c9-250c293bf26b.png)'
- en: 'You can see in the Server: box highlighted in the preceding screenshot, that
    the `https://` address of the Connection Server is colored red, has been crossed
    out, and a warning symbol is displayed on the padlock, all indicating that there
    is no trusted certificate installed.'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在上图中看到“服务器”框内，连接服务器的`https://`地址是红色的，已被划掉，并且锁标志上显示警告符号，这一切都表明没有安装受信任的证书。
- en: 'Now that we have created and installed a certificate on the Connection Server,
    in order for Horizon View to pick up the installed certificate, you need to restart
    the View Connection Server service in Windows services. To do this, follow these
    steps:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经在连接服务器上创建并安装了证书，为了让Horizon View识别安装的证书，您需要重新启动Windows服务中的View连接服务器服务。按照以下步骤操作：
- en: 'Open a Run dialog box, and in the Run dialog box, type `services.msc` to open
    the Services (Local) screen. Scroll down to the entry for VMware Horizon View
    Connection Server (**1**), as shown in the following screenshot:'
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开运行对话框，在运行对话框中输入`services.msc`以打开服务（本地）屏幕。滚动到VMware Horizon View连接服务器（**1**）的条目，如下图所示：
- en: '![](img/2acd9410-c387-40ac-84ec-4c6e61374b6c.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2acd9410-c387-40ac-84ec-4c6e61374b6c.png)'
- en: Select the option for VMware Horizon View Connection Server, right-click, and
    then from the contextual menu, click on Restart (**2**). Once the VMware Horizon
    View Connection Server service has restarted, you can log in to the View Administrator
    again, and check the certificate has been applied.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择VMware Horizon View连接服务器选项，右键点击，然后在上下文菜单中点击重启（**2**）。当VMware Horizon View连接服务器服务重新启动后，您可以再次登录到View管理员，并检查证书是否已应用。
- en: 'To do this, once you have logged in, from the Dashboard, and under System Health,
    click on Connection Servers to expand this section, and then click on the Connection
    Server HZN7-CS1 (**3**), or the server onto which you have just installed the
    certificate. In the Connection Server Details box that pops up, you will now see
    that the SSL certificate is shown as Valid (**4**) and that the error boxes have
    now changed from red to green:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要做到这一点，首先登录后，在仪表盘中，点击“系统健康”下的“连接服务器”以展开此部分，然后点击连接服务器HZN7-CS1（**3**），或刚刚安装证书的服务器。在弹出的连接服务器详情框中，您现在会看到SSL证书显示为有效（**4**），并且错误框已从红色变为绿色：
- en: '![](img/787d87ad-06cb-4c2b-ab26-bad235e2916b.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![](img/787d87ad-06cb-4c2b-ab26-bad235e2916b.png)'
- en: Finally, click on OK to close the dialog box for the Connection Server Details
    and then log out of the View Administrator.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，点击确定以关闭连接服务器详情的对话框，然后从View管理员中注销。
- en: You have now successfully created and installed a certificate for Horizon View.
    Don't forget that you need to install a certificate on all of the Horizon View
    components, such as any Replica Servers or View Composer servers.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您已经成功创建并安装了Horizon View的证书。别忘了，您还需要在所有Horizon View组件上安装证书，例如任何副本服务器或View
    Composer服务器。
- en: Horizon View True SSO
  id: totrans-146
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Horizon View True SSO
- en: In [Chapter 2](5d942e5b-dda5-4e5a-8278-62a64210aeef.xhtml), *Understanding Horizon
    7 Architecture and Components*, we introduced you to the True SSO feature and
    its architecture. In this section, we are going to look at how to configure True
    SSO.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第2章](5d942e5b-dda5-4e5a-8278-62a64210aeef.xhtml)，*理解Horizon 7架构和组件*中，我们向您介绍了True
    SSO功能及其架构。在本节中，我们将讨论如何配置True SSO。
- en: To set up True SSO, you first need to configure a CA, which we have already
    configured earlier on in this chapter in the *Installing a root CA* section. There
    are then a number of configuration steps to complete in preparation for installing
    True SSO.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 要设置True SSO，您首先需要配置一个CA，这个步骤我们在本章的*安装根CA*部分已经配置过了。接下来，有一系列配置步骤需要完成，以便为安装True
    SSO做好准备。
- en: Preparing AD for True SSO
  id: totrans-149
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备AD以支持True SSO
- en: 'The first step is to create an **Active Directory** (**AD**) group for the
    Enrollment Server. To do this, follow these steps:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是为注册服务器创建一个**活动目录**（**AD**）组。按照以下步骤操作：
- en: 'Open a console to your Domain Controller. In the example lab, this is the machine
    called `dc.pvolab.com`. Launch the Active Directory Users and Computers configuration
    screen, as shown in the following screenshot:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开到您的域控制器的控制台。在示例实验室中，这台机器叫做`dc.pvolab.com`。启动活动目录用户和计算机配置屏幕，如下图所示：
- en: '![](img/c5a182cf-6fe5-462e-8561-904894c7975a.png)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c5a182cf-6fe5-462e-8561-904894c7975a.png)'
- en: 'Click on and select `Users` (**1**), and then right-click. From the contextual
    menu, click on New (**2**), and then from the expanded options, select Group (**3**).
    You will now see the New Object – Group dialog box, as shown in the following
    screenshot:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击并选择`用户`（**1**），然后右键点击。从弹出菜单中，点击“新建”（**2**），然后从展开的选项中，选择“组”（**3**）。你现在将看到“新对象
    – 组”对话框，如下图所示：
- en: '![](img/5ffe91a1-e4f8-43ad-8b0c-76a249018380.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5ffe91a1-e4f8-43ad-8b0c-76a249018380.png)'
- en: In the Group name box (**4**), type in a name for the new group. In the example
    lab, this is called `Enrollment Servers`. In the Group scope box, click on the
    radio button for Universal (**5**), and in the Group type box, click on the radio
    button for Security (**6**). Once configured, click on the OK button. Next, you
    need to add the Enrollment Server into this newly created group.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“组名”框（**4**）中，输入新组的名称。在示例实验室中，这个组叫做`Enrollment Servers`。在“组范围”框中，点击“通用”单选按钮（**5**），在“组类型”框中，点击“安全”单选按钮（**6**）。配置完成后，点击“确定”按钮。接下来，你需要将Enrollment
    Server添加到新创建的组中。
- en: 'In the Active Directory Users and Computers configuration screen, click on
    `Computers` (**7**), and then double-click on the Enrollment Server. In the example
    lab, this is the computer called HZN7-ENROL, as shown in the following screenshot:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Active Directory用户和计算机配置界面，点击`计算机`（**7**），然后双击Enrollment Server。在示例实验室中，这台计算机被称为HZN7-ENROL，如下图所示：
- en: '![](img/aac056d1-95fa-4362-b3b9-4799dfa8506c.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![](img/aac056d1-95fa-4362-b3b9-4799dfa8506c.png)'
- en: 'You will now see the HZN7-ENROL Properties dialog box, as shown in the following
    screenshot:'
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你会看到HZN7-ENROL属性对话框，如下图所示：
- en: '![](img/201b0c21-0e30-4080-bb73-82abd1432120.png)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![](img/201b0c21-0e30-4080-bb73-82abd1432120.png)'
- en: 'Click on the Member Of tab (**9**), and then click on the Add… button (**10**).
    You will now see the Select Groups dialog box:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“成员”选项卡（**9**），然后点击“添加...”按钮（**10**）。你现在将看到“选择组”对话框：
- en: '![](img/22c1dffa-781d-4f1d-a72b-236ba6e65796.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](img/22c1dffa-781d-4f1d-a72b-236ba6e65796.png)'
- en: In the Enter the object names to select box (**11**), type in the name of the
    group you created for the `Enrollment Servers`. You can just type the first part
    of the name and then click the Check Names button (**12**). This will find any
    names that match the first part of what you type in. In this example, it will
    find the Enrollment Servers group. With the correct group name selected, click
    on the OK button to continue.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“输入要选择的对象名称”框（**11**）中，键入你为`Enrollment Servers`创建的组的名称。你可以只键入名称的前部分，然后点击“检查名称”按钮（**12**）。这将找到任何与你输入的前部分匹配的名称。在此示例中，它会找到Enrollment
    Servers组。选择正确的组名后，点击“确定”按钮继续。
- en: 'You will return to the HZN7-ENROL Properties dialog box, which now shows that
    the Enrollment Server called HZN7-ENROL is a member of the Enrollment Servers
    group. This is shown in the following screenshot:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将返回到HZN7-ENROL属性对话框，现在显示Enrollment Server HZN7-ENROL是Enrollment Servers组的成员。如以下截图所示：
- en: '![](img/7d5a4ab4-811e-4743-9fb3-31716746a161.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7d5a4ab4-811e-4743-9fb3-31716746a161.png)'
- en: With the Domain Controller elements now configured, the next step is to create
    a new certificate template.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 配置好域控制器元素后，下一步是创建一个新的证书模板。
- en: Creating a certificate template for TrueSSO
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为TrueSSO创建证书模板
- en: 'The next step is to create a certificate template. To do this, we are going
    to work through the following steps:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是创建一个证书模板。为此，我们将按照以下步骤进行操作：
- en: 'Open a console to the certificate server and launch the Certificate Management
    Console. In the example lab, this is the server called HZN7-CERTS. This is shown
    in the following screenshot:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个控制台，连接到证书服务器并启动证书管理控制台。在示例实验室中，这台服务器被称为HZN7-CERTS。如下图所示：
- en: '![](img/08b65d1d-3ded-4222-ac21-eb3eedb507c2.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![](img/08b65d1d-3ded-4222-ac21-eb3eedb507c2.png)'
- en: 'Click on the `Certificate Templates` folder (**1**), and then right-click.
    From the contextual menu now displayed, click on Manage (**2**). You will now
    see the Certificate Templates Console, as shown in the following screenshot:'
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`证书模板`文件夹（**1**），然后右键点击。从当前显示的上下文菜单中，点击“管理”（**2**）。你现在将看到证书模板控制台，如下图所示：
- en: '![](img/9bec6377-b996-4ea2-a82d-2772da8644aa.png)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9bec6377-b996-4ea2-a82d-2772da8644aa.png)'
- en: 'Scroll down the Template Display Name pane until you find the template for
    Smartcard Logon (**3**), and click to highlight it. Now right-click, and then
    from the contextual menu now displayed, click on Duplicate Template. You will
    now see the Properties of New Template configuration box, as shown in the following
    screenshot:'
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向下滚动模板显示名称面板，直到找到智能卡登录（**3**）模板，并单击以高亮显示它。现在右键单击，然后从显示的上下文菜单中点击“复制模板”。您将看到新模板属性配置框，如下图所示：
- en: '![](img/dd40959e-cead-47bd-a3d2-6a2daf1f2b44.png)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dd40959e-cead-47bd-a3d2-6a2daf1f2b44.png)'
- en: Click on the Compatibility tab (**5**). In the Compatibility Settings section,
    from the drop-down menu for Certification Authority (**6**), select the appropriate
    setting for the server version that is running as the CA. In the example lab,
    the CA server is running Windows Server 2012 R2.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击兼容性选项卡（**5**）。在兼容性设置部分，从认证机构（**6**）的下拉菜单中，选择与正在运行的CA服务器版本相对应的设置。在示例实验中，CA服务器运行的是Windows
    Server 2012 R2。
- en: Next, from the drop-down menu for Certificate recipient (**7**), select the
    appropriate setting for the machines that will be in receipt of this certificate.
    In the example lab, we will set this to Windows 7 / Server 2008 R2.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，从证书接收者（**7**）的下拉菜单中，选择适用于将接收此证书的计算机的设置。在示例实验中，我们将其设置为Windows 7 / Server
    2008 R2。
- en: When changing these settings, you will see a dialog box appear warning you about
    compatibility changes, and changes to the template that you are about to make.
    Click OK to accept these messages and to continue.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 更改这些设置时，您将看到一个对话框，提醒您关于兼容性更改以及即将进行的模板更改。点击“确定”以接受这些消息并继续操作。
- en: 'Now click on the General tab (**8**) box as shown in the following screenshot:'
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在点击常规选项卡（**8**）框，如下图所示：
- en: '![](img/4011529f-b73d-4620-bf80-43443fdea4bf.png)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4011529f-b73d-4620-bf80-43443fdea4bf.png)'
- en: In the Template display name box (**9**), type in a name for the new certificate
    template. In the example lab, this is called `Horizon TrueSSO`.
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模板显示名称框（**9**）中，输入新证书模板的名称。在示例实验中，模板名称为`Horizon TrueSSO`。
- en: Next, you need to configure a validity time. From the drop-down menu under Validity
    period (**10**), select the option for hours. You will then see the Certificate
    Templates warning box (**11**).
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您需要配置有效期。在有效期（**10**）下拉菜单中，选择小时选项。然后，您将看到证书模板警告框（**11**）。
- en: Click on OK to accept. Accepting the warning will automatically set the Renewal
    period to `0` hours (**12**).
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“确定”以接受。接受警告后，续期时间将自动设置为`0`小时（**12**）。
- en: 'Now click on the Request Handling tab (**13**) box, as shown in the following
    screenshot:'
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在点击请求处理选项卡（**13**）框，如下图所示：
- en: '![](img/6ea04ebe-5216-46fd-a36d-9d789aeaac5a.png)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6ea04ebe-5216-46fd-a36d-9d789aeaac5a.png)'
- en: In the drop-down box next to Purpose (**14**), select the option for **S**ignature
    and smartcard logon. You will then see the Certificate Templates warning box (**15**),
    which warns you that you are about to change the purpose of the certificate. Click
    Yes to accept the warning message and close the dialog box.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在目的（**14**）旁边的下拉框中，选择**签名**和智能卡登录选项。然后，您将看到证书模板警告框（**15**），该框会提醒您即将更改证书的用途。点击“是”以接受警告信息并关闭对话框。
- en: Finally, on this screen, check the box for Allow private key to be exported
    (**16**), and check the box for For automatic renewal of smartcard certificates
    (**17**).
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，在此屏幕上，选中“允许导出私钥”（**16**）复选框，并选中“智能卡证书自动续期”（**17**）复选框。
- en: 'Next, click the Cryptography tab (**18**), as shown in the following screenshot:'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，点击加密选项卡（**18**），如下图所示：
- en: '![](img/a23428f7-8dd3-4e25-a372-b91b29ca3405.png)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a23428f7-8dd3-4e25-a372-b91b29ca3405.png)'
- en: In the Provider Category box, click on the drop-down arrow (**19**) and select
    the option for Key Storage Provider. Then, click on the radio button for Requests
    can use any provider available on the subject's computer (**20**), and then in
    the Request hash box, click on the drop-down arrow (**21**) and select the option
    for SHA256.
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在提供者类别框中，点击下拉箭头（**19**）并选择“密钥存储提供者”选项。然后，点击“请求可以使用受试者计算机上任何可用的提供者”（**20**）的单选按钮，并在请求哈希框中点击下拉箭头（**21**），选择SHA256选项。
- en: 'The next tab to configure is the Subject Name tab (**22**), as shown in the
    following screenshot:'
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一个需要配置的选项卡是主题名称选项卡（**22**），如下图所示：
- en: '![](img/1c140d73-e168-4de9-b17c-d552fac48231.png)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1c140d73-e168-4de9-b17c-d552fac48231.png)'
- en: Click on the radio button for Build from this Active Directory information (**23**),
    and then check the box for User principal name (UPN) (**24**).
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“从此活动目录信息构建”单选按钮（**23**），然后勾选“用户主体名称（UPN）”框（**24**）。
- en: 'The next tab to configure is the Server tab (**25**), as shown in the following
    screenshot:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一个需要配置的标签是“服务器”标签（**25**），如下图所示：
- en: '![](img/b9ece1bd-cb86-4e55-a250-0d27a7f187f2.png)'
  id: totrans-193
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b9ece1bd-cb86-4e55-a250-0d27a7f187f2.png)'
- en: 'Check the Do not store certificates and requests in the CA database box (**26**).
    Now click on the Issuance Requirements tab (**27**), as shown in the following
    screenshot:'
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 勾选“不要在CA数据库中存储证书和请求”框（**26**）。现在点击“发布要求”标签（**27**），如下图所示：
- en: '![](img/09491c1d-faed-4165-86b0-7b10c0a80240.png)'
  id: totrans-195
  prefs: []
  type: TYPE_IMG
  zh: '![](img/09491c1d-faed-4165-86b0-7b10c0a80240.png)'
- en: Check the box for This number of authorized signatures (**28**), and ensure
    the value for this option is set to `1`.
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 勾选此授权签名数量框（**28**），并确保此选项的值设置为`1`。
- en: From the Application policy box, click on the drop-down arrow (**29**) and select
    the option for Certificate Request Agent. Finally, on this tab, click on the radio
    button for Valid existing certificate (**30**).
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在应用程序策略框中，点击下拉箭头（**29**），并选择“证书请求代理”选项。最后，在此标签中，点击“有效现有证书”单选按钮（**30**）。
- en: 'For the final part of the Properties of New Template configuration, click on
    the Security tab (**31**) as shown in the following screenshot:'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“新模板属性”配置的最后一部分，点击“安全”标签（**31**），如下图所示：
- en: '![](img/0c03f06c-71d0-4795-8211-175c716b3652.png)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0c03f06c-71d0-4795-8211-175c716b3652.png)'
- en: Click to select the Enrollment Servers group (**32**), and then click on the
    Add… button (**33**).
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击选择Enrollment Servers组（**32**），然后点击“添加…”按钮（**33**）。
- en: You will now see the Select Users, Computers, Service Accounts or Groups dialog
    box pop up. In the Enter the object names to select box (**34**), type in the
    name of the `Enrollment Servers` group. You can just type the first few letters
    of the group name and then click on the Check Names button (**35**) to find any
    matches. You will now see the Enrollment Servers group (**34**).
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你将看到“选择用户、计算机、服务账户或组”对话框弹出。在“输入要选择的对象名称”框（**34**）中，输入`Enrollment Servers`组的名称。你可以只输入组名的前几个字母，然后点击“检查名称”按钮（**35**）来查找匹配项。此时你将看到Enrollment
    Servers组（**34**）。
- en: Finally, in the Permissions for Enrollment Servers section, check the box under
    the Allow heading for Read (**36**) and Enroll (**37**).
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，在“Enrollment Servers的权限”部分，勾选“允许”标题下的“读取”（**36**）和“注册”（**37**）框。
- en: This step is now complete so click on the OK button to finish the configuration
    and close the dialog box.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此步骤现已完成，请点击“确定”按钮以完成配置并关闭对话框。
- en: In the next section, we are going to issue the newly created certificate template.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一部分中，我们将发布新创建的证书模板。
- en: Issuing the TrueSSO certificate template
  id: totrans-205
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 发布TrueSSO证书模板
- en: 'Now that the certificate template has been created, the next task is to issue
    it. To do this, follow the steps as described:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 现在证书模板已经创建，下一步是发布它。为此，请按照以下步骤进行：
- en: 'From the Certificate Management Console screen, click on the `Certificate Templates`
    folder (**1**), right-click, and then from the contextual menu that is displayed
    click on New (**2**), and then select the option for Certificate Template to Issue
    (**3**). This is shown in the following screenshot:'
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在证书管理控制台界面，点击`证书模板`文件夹（**1**），右键点击，然后在显示的上下文菜单中点击“新建”（**2**），接着选择“发布证书模板”（**3**）选项。如下截图所示：
- en: '![](img/1c2f5101-dd87-4dd0-b300-3ae417ce16de.png)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1c2f5101-dd87-4dd0-b300-3ae417ce16de.png)'
- en: 'You will now see the Enable Certificate Templates dialog box, as shown in the
    following screenshot:'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你将看到“启用证书模板”对话框，如下图所示：
- en: '![](img/1af47c08-80eb-4108-b2dd-2bb506dd4435.png)'
  id: totrans-210
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1af47c08-80eb-4108-b2dd-2bb506dd4435.png)'
- en: Click on **Horizon True SSO** (**4**), and then click on the OK button.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**Horizon True SSO**（**4**），然后点击“确定”按钮。
- en: 'You will now go back to the Enable Certificate Templates dialog box, as shown
    in the following screenshot:'
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你将返回到“启用证书模板”对话框，如下图所示：
- en: '![](img/7953326e-1130-45fa-876e-146fa9d43f0a.png)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7953326e-1130-45fa-876e-146fa9d43f0a.png)'
- en: 'Next, we need to enable the Enrollment Agent. As in the previous step, from
    the Certificate Management Console screen, click on the `Certificate Templates`
    folder (**5**), right-click, and then from the contextual menu that is displayed,
    click on New (**6**), and then select the option for Certificate Template to Issue
    (**7**). You will now see the Enable Certificate Templates dialog box, as shown
    in the following screenshot:'
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们需要启用Enrollment Agent。与上一步一样，在证书管理控制台的界面上，点击`Certificate Templates`文件夹（**5**），右键点击，然后从弹出的上下文菜单中，点击“New”（**6**），然后选择“Certificate
    Template to Issue”（**7**）选项。你将看到启用证书模板的对话框，如下图所示：
- en: '![](img/0704c05e-504d-4fb8-94f3-be1cf3ef31f4.png)'
  id: totrans-215
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0704c05e-504d-4fb8-94f3-be1cf3ef31f4.png)'
- en: Click on and select the option for Enrollment Agent (Computer) (**8**). Now
    click on the OK button. You will return to the Enable Certificate Templates dialog
    box. You can now exit the Certificate Management Console.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击并选择“Enrollment Agent (Computer)”（**8**）选项。然后点击“OK”按钮。你将返回到启用证书模板的对话框。现在可以退出证书管理控制台了。
- en: You need to check that the Enrollment Agent (Computer) template has the same
    security settings as the template for `TrueSSO` template was configured with.
    This means it has been added to the Enrollment Servers Security group and has
    been granted read and enroll permissions.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要检查Enrollment Agent (Computer)模板是否与为`TrueSSO`模板配置的安全设置相同。这意味着它已被添加到注册服务器的安全组，并且已授予读取和注册权限。
- en: The final few configuration tasks are command-line-based, so from the desktop
    of the certificate server, launch a Run dialog box. In the Run dialog box, type
    `cmd` to open a Command Prompt box.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 最后的几个配置任务是基于命令行的，因此在证书服务器的桌面上，启动一个运行对话框。在运行对话框中，输入`cmd`以打开命令提示符窗口。
- en: 'The first thing you need to do is to configure the CA for non-persistent certificate
    processing. To do this, at Command Prompt, type the following command:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要做的第一件事是配置CA以进行非持久性证书处理。为此，在命令提示符下，输入以下命令：
- en: '[PRE0]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The output from running this command is shown in the following screenshot:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 运行该命令后的输出如下截图所示：
- en: '![](img/1f88729a-c579-4ded-93ee-e832ab3ef54e.png)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1f88729a-c579-4ded-93ee-e832ab3ef54e.png)'
- en: 'The second thing you need to do it to configure the CA to ignore offline **Certificate
    Revocation Lists** (**CRL**) errors. To do this, at Command Prompt, type the following
    command:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要做的第二件事是配置CA以忽略离线**证书撤销列表**（**CRL**）错误。为此，在命令提示符下，输入以下命令：
- en: '[PRE1]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The following screenshot shows the command successfully executing:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了命令成功执行的情况：
- en: '![](img/c68321ee-5231-4b07-a01b-29e9a6211372.png)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c68321ee-5231-4b07-a01b-29e9a6211372.png)'
- en: 'Finally, as it states in Command Prompt, you need to restart the certificate
    service. To do this at Command Prompt, run the following two commands, one after
    the other:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，正如在命令提示符中所述，你需要重启证书服务。为此，在命令提示符下依次运行以下两条命令：
- en: '[PRE2]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'You should see something similar to the following screenshot, which shows that
    the certification service was successfully stopped and then started again:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该看到类似于以下截图的内容，显示证书服务成功停止并重新启动：
- en: '![](img/fa2b125a-ea30-45a1-bb3b-9539499a684f.png)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fa2b125a-ea30-45a1-bb3b-9539499a684f.png)'
- en: The next step in the process is to deploy the certificates on the Enrollment
    Server and the Connection Server.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是将证书部署到注册服务器和连接服务器。
- en: Certificate deployment
  id: totrans-232
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 证书部署
- en: The next task to perform is to deploy the **Enrollment Agent (Computer)** certificate
    on to the Enrollment Server.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步任务是将**Enrollment Agent (Computer)**证书部署到注册服务器上。
- en: By deploying the Enrollment Agent (Computer) certificate onto this server, you
    are authorizing this Enrollment Server to act as an Enrollment Agent and generate
    to be able to generate certificates on behalf of the end users.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 通过将Enrollment Agent (Computer)证书部署到该服务器上，你授权该注册服务器作为Enrollment Agent并能够代表最终用户生成证书。
- en: 'If you are following the example lab, then in [Chapter 4](a85150f1-1f32-4c91-87f0-1e8c700b9b96.xhtml),
    *Installing and Configuring Horizon 7 - Part 1*, you will already have an Enrollment
    Server called **HZN7-ENROL**, onto which we will deploy the certificate. The first
    thing to do is to open a remote console to this server:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你正在跟随示例实验，那么在[第4章](a85150f1-1f32-4c91-87f0-1e8c700b9b96.xhtml)，*安装和配置Horizon
    7 - 第1部分*中，你应该已经有了一个名为**HZN7-ENROL**的注册服务器，我们将在该服务器上部署证书。首先需要做的是打开该服务器的远程控制台：
- en: 'Launch a Run command box and type `mmc` into the Open box (**1**) to launch
    the Microsoft Management Console, as shown in the following screenshot:'
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动“运行”命令框并在打开框中输入`mmc`（**1**），以启动 Microsoft 管理控制台，如下图所示：
- en: '![](img/567be70e-8201-4d85-aaf6-18c5202b5398.png)'
  id: totrans-237
  prefs: []
  type: TYPE_IMG
  zh: '![](img/567be70e-8201-4d85-aaf6-18c5202b5398.png)'
- en: On the MMC console screen, click on File (**2**) and then Add/Remove Snap-in…
    (**3**).
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 MMC 控制台屏幕上，点击“文件” (**2**) 然后点击“添加/删除管理单元…” (**3**)。
- en: 'You will now see the Add or Remove Snap-ins screen, as shown in the following
    screenshot:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您将看到添加或删除管理单元屏幕，如下图所示：
- en: '![](img/e137c61c-4409-46d4-af86-772a0f5504de.png)'
  id: totrans-240
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e137c61c-4409-46d4-af86-772a0f5504de.png)'
- en: 'From the Available snap-ins section on the left, click to highlight and select
    the Certificates entry (**4**), and then click on the Add > button (**5**). You
    will now see the Certificates snap-in box appear, as shown in the following screenshot:'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧的可用管理单元部分，点击以高亮显示并选择“证书”条目（**4**），然后点击“添加 >”按钮（**5**）。现在，您将看到证书管理单元框出现，如下图所示：
- en: '![](img/a402e774-84bb-402e-863f-1192df399f0d.png)'
  id: totrans-242
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a402e774-84bb-402e-863f-1192df399f0d.png)'
- en: 'Click on the radio button for the Computer account (**6**), and then click
    on the Next > button to continue. You will now see the Select Computer configuration
    box:'
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择计算机账户单选按钮（**6**），然后点击“下一步 >”按钮继续。现在，您将看到选择计算机配置框：
- en: '![](img/57b642ca-e24f-4a69-ac87-b599b7dd4534.png)'
  id: totrans-244
  prefs: []
  type: TYPE_IMG
  zh: '![](img/57b642ca-e24f-4a69-ac87-b599b7dd4534.png)'
- en: Click on the radio button for Local computer (**7**), and then click on the
    Finish button. You will now return to the Add or Remove Snap-ins screen, which
    now shows the certificates snap-in as being selected.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击本地计算机单选按钮（**7**），然后点击“完成”按钮。现在，您将返回到添加或删除管理单元屏幕，并且此时显示的证书管理单元已被选中。
- en: Click on OK to close the Add or Remove Snap-ins screen.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“确定”以关闭添加或删除管理单元屏幕。
- en: 'Now you have the certificates option available in the management console, as
    shown in the following screenshot:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您可以在管理控制台中看到证书选项，如下图所示：
- en: '![](img/b1a2d5a2-555f-4dd3-a8cc-289a3216defb.png)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b1a2d5a2-555f-4dd3-a8cc-289a3216defb.png)'
- en: 'The next task is to request the Enrollment Agent (Computer) certificate:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的任务是请求注册代理（计算机）证书：
- en: 'From the Console Root, expand the `Certificates (Local Computer)` folder, and
    then select and right-click on the `Personal` folder (**1**). From the contextual
    menu, navigate to All Tasks (**2**) and then select Request New Certificate...
    (**3**), as shown in the following screenshot:'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从控制台根目录，展开`证书（本地计算机）`文件夹，然后选择并右键点击`个人`文件夹（**1**）。在上下文菜单中，导航到“所有任务” (**2**) 然后选择“请求新证书...”
    (**3**)，如下图所示：
- en: '![](img/a8e5d327-3632-4fc3-b56c-2f2ac64887e6.png)'
  id: totrans-251
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a8e5d327-3632-4fc3-b56c-2f2ac64887e6.png)'
- en: You will now see the Before You Begin section on Certificate Enrollment screen.
    Click on the Next button to continue.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您现在将看到证书注册屏幕上的“开始之前”部分。点击“下一步”按钮继续。
- en: 'Next, you will see the Select Certificate Enrollment Policy screen. Click on
    the Next button to continue. The next screen you will see is the **C**ertificate
    Enrollment Request Certificates screen, as shown in the following screenshot:'
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您将看到选择证书注册策略屏幕。点击“下一步”按钮继续。接下来的屏幕是**证书**注册请求证书屏幕，如下图所示：
- en: '![](img/53f98673-bb9e-40b3-8893-3273781fed3b.png)'
  id: totrans-254
  prefs: []
  type: TYPE_IMG
  zh: '![](img/53f98673-bb9e-40b3-8893-3273781fed3b.png)'
- en: 'Check the box to select the Enrollment Agent (Computer) option (**4**), and
    then click on the Enroll button to request the certificate. You should then see
    that the certificate has successfully been enrolled:'
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 勾选框以选择注册代理（计算机）选项（**4**），然后点击“注册”按钮请求证书。您应该看到证书已成功注册：
- en: '![](img/ec26afb1-473b-41d0-a9f9-d67f85ee31ed.png)'
  id: totrans-256
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ec26afb1-473b-41d0-a9f9-d67f85ee31ed.png)'
- en: Finally, click on the Finish button to complete the configuration, close the
    Certificate Enrollment dialog box, and then close the Certificate Management console.
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，点击“完成”按钮以完成配置，关闭证书注册对话框，然后关闭证书管理控制台。
- en: The next task is to import the Enrollment Service Client Certificate, which
    you need to first export from the Connection Server before importing it onto the
    Enrollment Server.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的任务是导入注册服务客户端证书，您需要先从连接服务器导出它，然后再将其导入到注册服务器。
- en: Deploying the Enrollment Service Client Certificate from the Connection Server
    pairs the Connection Server with the Enrollment Server. If you don't do this,
    then any connection request that is made to the Enrollment Server will be rejected
    and the result is that no certificate will be generated. The Enrollment Service
    Client Certificate is automatically generated on the Connection Server when the
    Connection Server service starts up.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 从连接服务器部署注册服务客户端证书，将连接服务器与注册服务器配对。如果不这样做，任何发往注册服务器的连接请求都会被拒绝，结果是无法生成证书。连接服务器启动时会自动生成注册服务客户端证书。
- en: 'Let''s start by exporting the certificate from the Connection Server:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从连接服务器开始导出证书：
- en: 'Open a console to the Connection Server. In the example lab, this is the server
    called **HZN7-CS1**. Launch the MMC console and add the Certificates snap-in as
    we have covered in previous sections, and then launch the Certificates Management
    Console, as shown in the following screenshot:'
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开连接服务器的控制台。在示例实验室中，这是名为**HZN7-CS1**的服务器。启动MMC控制台并添加我们在前面章节中提到的证书管理插件，然后启动证书管理控制台，如下图所示：
- en: '![](img/5660b24d-37c2-4001-a69a-f14f486adbd9.png)'
  id: totrans-262
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5660b24d-37c2-4001-a69a-f14f486adbd9.png)'
- en: From the Console Root section in the left-hand pane, navigate to the `VMware
    Horizon View Certificates` folder, expand it by clicking the arrow, and then click
    on the `Certificates` folder (**1**).
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧窗格的控制台根目录部分，导航到`VMware Horizon View Certificates`文件夹，通过点击箭头展开它，然后点击`Certificates`文件夹
    (**1**)。
- en: Click on and select the certificate that contains the friendly name `vdm.ec`
    (**2**), right-click, and then from the contextual menu click on All Tasks (**3**),
    and then select the option for Export… (**4**). You will now see the Welcome to
    the Certificate Export Wizard screen. Click on the Next button to continue.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击并选择包含友好名称`vdm.ec`的证书 (**2**)，右键单击，然后从上下文菜单中选择“所有任务” (**3**)，接着选择“导出…” (**4**)
    选项。你将看到证书导出向导的欢迎界面。点击“下一步”按钮继续。
- en: 'You will now see the Export Private Key dialog box, as shown in the following
    screenshot:'
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你将看到导出私钥对话框，如下图所示：
- en: '![](img/7b17fc2d-b948-44dc-9c4c-3a92f889a175.png)'
  id: totrans-266
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7b17fc2d-b948-44dc-9c4c-3a92f889a175.png)'
- en: Click on the radio button for the No, do not export the private key (**5**),
    and then click on the Next button.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“不， 不导出私钥”单选按钮 (**5**)，然后点击“下一步”按钮。
- en: In the Export File Format dialog box, accept the default selected format option
    and then click on the Next button to continue.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在导出文件格式对话框中，接受默认选择的格式选项，然后点击“下一步”按钮继续。
- en: 'You will now see the File to Export dialog box, as shown in the following screenshot:'
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你将看到导出文件对话框，如下图所示：
- en: '![](img/26d69c9a-bcbc-4f4d-b363-07a5c736abd1.png)'
  id: totrans-270
  prefs: []
  type: TYPE_IMG
  zh: '![](img/26d69c9a-bcbc-4f4d-b363-07a5c736abd1.png)'
- en: In the File name box (**6**), type in a filename for the certificate. In the
    example lab, this has been called `cs-cert` and for easy access has been saved
    in a shared folder called `cert` on the Domain Controller because it needs to
    be accessible from the Enrollment Server when we come to import it.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件名框 (**6**) 中，输入证书的文件名。在示例实验室中，证书被命名为`cs-cert`，并且为了方便访问，保存在名为`cert`的共享文件夹中，这个文件夹位于域控制器上，因为在导入时，注册服务器需要能够访问该证书。
- en: Click on the Next button to continue.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步”按钮继续。
- en: 'You will now see the Completing the Certificate Export Wizard dialog box, as
    shown in the following screenshot:'
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你将看到完成证书导出向导的对话框，如下图所示：
- en: '![](img/08ba3df7-5ebd-4a04-b8a9-c51456833314.png)'
  id: totrans-274
  prefs: []
  type: TYPE_IMG
  zh: '![](img/08ba3df7-5ebd-4a04-b8a9-c51456833314.png)'
- en: Finally, click on the Finish button to complete the certificate export process.
    You will see a message saying the export was successful.
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，点击“完成”按钮以完成证书导出过程。你将看到一条消息，表示导出成功。
- en: 'The next task is to import the certificate into the Enrollment Server:'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的任务是将证书导入注册服务器：
- en: 'Open a remote console to the Enrollment Server. In the example lab, this is
    the server called **HZN7-ENROL**. Launch the MMC console and add the Certificates
    snap-in as we covered previously, and then launch the Certificates Management
    Console, as shown in the following screenshot:'
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开远程控制台连接到注册服务器。在示例实验室中，这是名为**HZN7-ENROL**的服务器。启动MMC控制台并添加我们之前提到的证书管理插件，然后启动证书管理控制台，如下图所示：
- en: '![](img/0e529363-6833-43e1-9345-df99cea1f7bd.png)'
  id: totrans-278
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0e529363-6833-43e1-9345-df99cea1f7bd.png)'
- en: From the Console Root section in the left-hand pane, navigate to the `VMware
    Horizon View Enrollment Server Trusted Roots` folder (**1**), click and select
    to highlight it and then right-click. From the contextual menu that is now displayed,
    click on All Tasks (**2**), and select the option for Import… (**3**).
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧面板的控制台根部分，导航到 `VMware Horizon View Enrollment Server Trusted Roots` 文件夹（**1**），点击并选择高亮显示它，然后右键单击。从现在显示的上下文菜单中，点击“所有任务”（**2**），并选择导入...（**3**）选项。
- en: 'You will now see the Welcome to the Certificate Import Wizard screen. Click
    on the Next button to continue. You will now see the File to Import dialog box,
    as shown in the following screenshot:'
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在将看到“欢迎使用证书导入向导”屏幕。点击“下一步”按钮以继续。你将看到“文件导入”对话框，如下图所示：
- en: '![](img/9055c446-de8d-4d22-97df-df1d815d9fe9.png)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9055c446-de8d-4d22-97df-df1d815d9fe9.png)'
- en: Type in the filename for the certificate that you are going to import in the
    File name box (**4**). In the example lab, this was the file called `cs-cert`
    that was saved to the shared folder on the domain controller. Click on the Next
    button to continue.
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件名框（**4**）中输入你将要导入的证书的文件名。在示例实验室中，这个文件名为 `cs-cert`，保存在域控制器的共享文件夹中。点击“下一步”按钮以继续。
- en: 'In the next screen, Certificate Store, you need to select the store in which
    the certificate will be stored:'
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕中，证书存储，你需要选择证书将存储的存储区：
- en: '![](img/5c20a9c3-b981-4ed3-97e6-20696ea8b5ed.png)'
  id: totrans-284
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5c20a9c3-b981-4ed3-97e6-20696ea8b5ed.png)'
- en: In the Certificate Store dialog box, click on the radio button for Place all
    certificates in the following store (**5**), and then ensure that the Certificate
    store is set to `VMware Horizon View Enrollment Server Trusted Roots`.
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在证书存储对话框中，点击“将所有证书放入以下存储区”的单选按钮（**5**），然后确保证书存储设置为 `VMware Horizon View Enrollment
    Server Trusted Roots`。
- en: Click on the Next button to continue.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“下一步”按钮以继续。
- en: 'You will now see the Completing the Certificate Import Wizard dialog box, as
    shown in the following screenshot:'
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在将看到“完成证书导入向导”对话框，如下图所示：
- en: '![](img/c83ff4f6-fb9e-4747-8c66-034e9a927fdb.png)'
  id: totrans-288
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c83ff4f6-fb9e-4747-8c66-034e9a927fdb.png)'
- en: Finally, click on the Finish button to import the certificate. You should see
    a message stating that the import was successful.
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，点击“完成”按钮以导入证书。你应该看到一条消息，提示导入成功。
- en: 'Once imported, you will see the certificate in the Certificate Management Console,
    as shown in the following screenshot:'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 导入完成后，你将在证书管理控制台中看到证书，如下图所示：
- en: '![](img/fa580a7c-cab4-4bb1-81a8-f8a65e7ca1a0.png)'
  id: totrans-291
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fa580a7c-cab4-4bb1-81a8-f8a65e7ca1a0.png)'
- en: Having successfully imported the certificate, you can now close the Certificate
    Management Console. In the next step, we are going to configure True SSO on the
    Connection Server.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 成功导入证书后，你可以关闭证书管理控制台。在下一步中，我们将配置连接服务器上的 True SSO。
- en: Configuring True SSO on the Connection Server
  id: totrans-293
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在连接服务器上配置 True SSO
- en: Now that you have all of the necessary certificates in place, the next step
    is to set up the True SSO feature on the Connection Server.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经将所有必要的证书放到位，下一步是设置连接服务器上的 True SSO 功能。
- en: This setup process is command-line-driven and uses the `vdmUtil` command, so
    the first step is to open a Command Prompt window on the Connection Server.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 此设置过程是命令行驱动的，并使用 `vdmUtil` 命令，因此第一步是打开连接服务器上的命令提示符窗口。
- en: 'The first command you need to run adds the Enrollment Server to the Horizon
    View environment. This allows you to query the Enrollment Server and gather information
    about the domain and other useful information such as available templates and
    CA name:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要运行的第一个命令是将注册服务器添加到 Horizon View 环境中。这样你就可以查询注册服务器并收集有关域及其他有用信息（如可用模板和 CA
    名称）的信息：
- en: 'From the Connection Server, open a command-line dialog box and type in the
    following command:'
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从连接服务器打开命令行对话框，并输入以下命令：
- en: '[PRE3]'
  id: totrans-298
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: You will need this information during the configuration process, so make sure
    you make a note of it.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 在配置过程中，你将需要这些信息，所以一定要记下来。
- en: 'You will see that the Enrollment Server has now been successfully added to
    the environment:'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 你将看到，注册服务器已经成功添加到环境中：
- en: '![](img/3ffefba9-414e-4c81-9259-c996cbb8a46d.png)'
  id: totrans-301
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3ffefba9-414e-4c81-9259-c996cbb8a46d.png)'
- en: The next command provides you with detailed information about the various Horizon
    components in your environment. This will help with the configuration of True
    SSO.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个命令将为你提供有关环境中各种 Horizon 组件的详细信息。这将有助于 True SSO 的配置。
- en: 'From the command line, type the following command:'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在命令行中，输入以下命令：
- en: '[PRE4]'
  id: totrans-304
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'You will see the following output:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 你将看到如下输出：
- en: '![](img/fe28a04f-9cc5-4fb9-a0f8-bd431989aa5c.png)'
  id: totrans-306
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fe28a04f-9cc5-4fb9-a0f8-bd431989aa5c.png)'
- en: We can now use this information to create a True SSO connector. A True SSO Connector
    specifies the details of enrollment servers, CAs, and certificate templates to
    be used. When a Connection Server receives a request to launch a desktop for an
    end user, it will look up the True SSO Connector for the domain the user belongs
    to and uses the components that you configure to obtain the Certificate.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在可以使用这些信息创建 True SSO 连接器。True SSO 连接器指定了要使用的注册服务器、CA 和证书模板的详细信息。当连接服务器收到启动桌面请求时，它将查找用户所属域的
    True SSO 连接器，并使用你配置的组件来获取证书。
- en: 'From the command line, type the following command:'
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在命令行中，输入以下命令：
- en: '[PRE5]'
  id: totrans-309
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'You will now see that the connector has been successfully created and enabled,
    as shown in the following screenshot:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在会看到连接器已成功创建并启用，如下图所示：
- en: '![](img/6b0626ac-4bec-4505-9641-3d3506ec828b.png)'
  id: totrans-311
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6b0626ac-4bec-4505-9641-3d3506ec828b.png)'
- en: 'Next, we are going to check that True SSO is installed and is working by following
    these steps:'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将通过以下步骤检查 True SSO 是否已安装并正常工作：
- en: Log in to the Horizon View Administrator console.
  id: totrans-313
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到 Horizon View 管理控制台。
- en: From the Dashboard screen, under the System Health section, click on the arrow
    to expand the True SSO section (**21**), and then click on the link for `pvolab.com`
    (**22**)
  id: totrans-314
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在仪表板屏幕上，找到“系统健康”部分，点击箭头展开“True SSO”部分（**21**），然后点击`pvolab.com`的链接（**22**）。
- en: 'You will see the True SSO Domain Details box, as shown in the following screenshot:'
  id: totrans-315
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将看到 True SSO 域详细信息框，如下图所示：
- en: '![](img/4c2fe0e4-0ad8-4e23-9b0e-712fa1f9e9f8.png)'
  id: totrans-316
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4c2fe0e4-0ad8-4e23-9b0e-712fa1f9e9f8.png)'
- en: Click on the OK button to close the box and then log out of the View Administrator.
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“确定”按钮关闭窗口，然后退出 View 管理员。
- en: You have now successfully configured the View elements for True SSO. The real
    benefit of the True SSO feature is when used in conjunction with vIDM, allowing
    a user to single sign-on to their virtual desktop machine or applications from
    the vIDM portal.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经成功配置了 True SSO 的 View 元素。True SSO 功能的真正优势是与 vIDM 配合使用时，允许用户通过 vIDM 门户实现对虚拟桌面或应用程序的单点登录。
- en: Summary
  id: totrans-319
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we discussed some of the security aspects of deploying Horizon
    View. We started off by describing what an SSL certificate is and why Horizon
    View uses them, before going on to show this practically by installing and configuring
    a Root CA server and then configuring the View components in the example lab to
    use these certificates.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讨论了部署 Horizon View 时的一些安全方面。我们首先描述了什么是 SSL 证书以及为什么 Horizon View 需要它们，然后通过安装和配置根
    CA 服务器并配置示例实验室中的 View 组件来实际展示如何使用这些证书。
- en: The second part of this chapter explored the True SSO feature of Horizon View.
    Again, we demonstrated this practically by configuring the certificates server
    to use this feature and then configuring the Horizon View Enrollment Server and
    Connection Server so that they "trusted" each other with the user login process.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的第二部分探讨了 Horizon View 的 True SSO 功能。同样，我们通过配置证书服务器来使用此功能，并配置 Horizon View
    注册服务器和连接服务器，以使它们在用户登录过程中彼此“信任”。
- en: In the next chapter, we are going to turn our attention to virtual desktops
    and start to build virtual desktop images.
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章，我们将把注意力转向虚拟桌面，并开始构建虚拟桌面映像。
