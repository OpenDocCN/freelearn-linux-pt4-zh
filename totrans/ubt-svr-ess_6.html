<html><head></head><body><div class="chapter" title="Chapter&#xA0;6.&#xA0;Tips and Tricks for Ubuntu Server"><div class="titlepage"><div><div><h1 class="title"><a id="ch06"/>Chapter 6. Tips and Tricks for Ubuntu Server</h1></div></div></div><p>This is the last chapter of this essential book. In this chapter, we will take a look at a collection of the best tips and tricks that every Ubuntu Server administrator needs to simplify their life when administering their servers based on Ubuntu.</p><p>This chapter is divided into the following three sections:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">General tips – a set of generic tips related to the CLI, configuration, and scripting</li><li class="listitem" style="list-style-type: disc">Troubleshooting tips – helpful tips for troubleshooting tasks</li><li class="listitem" style="list-style-type: disc">Useful tools and utilities – a set of tricky programs with high added value to the system administrator</li></ul></div><div class="section" title="General tips"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec35"/>General tips</h1></div></div></div><p>In this section, we will explore some useful tips and tricks for Ubuntu Server. These are general tips <a class="indexterm" id="id378"/>related to the <span class="strong"><strong>command-line interface</strong></span> (<span class="strong"><strong>CLI</strong></span>), package management, and the customization of configurations.</p><div class="section" title="Ubuntu Server CLI tips and tricks"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec64"/>Ubuntu Server CLI tips and tricks</h2></div></div></div><p>The following <a class="indexterm" id="id379"/>are some useful CLI commands:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Get the<a class="indexterm" id="id380"/> reason behind installing a package, that is, check the reverse dependencies of the given package, by using the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>apt-cache rdepends --installed [package_name]</strong></span>
<span class="strong"><strong>apt-cache rdepends --installed mysql-server</strong></span>
</pre></div></li><li class="listitem">List all the users along with their respective last login time by executing the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>lastlog</strong></span>
</pre></div></li><li class="listitem">To change<a class="indexterm" id="id381"/> the server time zone, you need to <a class="indexterm" id="id382"/>run the following code:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo dpkg-reconfigure tzdata</strong></span>
</pre></div><p>Furthermore, to check whether the <code class="literal">timezone</code> has changed or not, you need to run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>less /etc/timezone</strong></span>
</pre></div><p>Also, don't forget to restart <code class="literal">cron</code> so that it can pick up the <code class="literal">timezone</code> change, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo service cron restart</strong></span>
</pre></div></li><li class="listitem">If you need to manually synchronize your server time, use the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo ntpdate ntp.ubuntu.com</strong></span>
</pre></div></li><li class="listitem">In case you want to install a time synchronization service, execute the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get install ntp</strong></span>
</pre></div></li><li class="listitem">To update the hardware clock, run the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>hwclock --set --date '`date`'</strong></span>
</pre></div></li><li class="listitem">To list all the mounted and unmounted partitions on your server, use the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo fdisk -l | less</strong></span>
</pre></div></li><li class="listitem">If you just want to list the mounted partitions and the free space on each of these partitions, use the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>df -h</strong></span>
</pre></div></li><li class="listitem">View the size of a particular file or folder by using the following code (this is very important when viewing the size of folders):<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>du -h myfile</strong></span>
<span class="strong"><strong>du -sh myfolder</strong></span>
</pre></div></li><li class="listitem">As a file grows, you can view the appended data with the help of the following code (this is useful for monitoring and troubleshooting):<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>tail -f filename</strong></span>
<span class="strong"><strong>less +F filename</strong></span>
</pre></div></li><li class="listitem">Get the system environment variables by using the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>printenv</strong></span>
</pre></div></li><li class="listitem">To change the server hostname, execute the following code:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo sh -c "echo new_host_name &gt; /etc/hostname"</strong></span>
<span class="strong"><strong>sudo /etc/init.d/hostname restart</strong></span>
</pre></div></li><li class="listitem">To view<a class="indexterm" id="id383"/> information about the Linux <a class="indexterm" id="id384"/>distribution, you need to execute the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>lsb_release -a</strong></span>
</pre></div></li><li class="listitem">To find out the OS installation date, run the following command:<div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>ls -ld /var/log/installer</strong></span>
</pre></div></li></ol></div></div><div class="section" title="How to prevent server daemons from starting during installation"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec65"/>How to prevent server daemons from starting during installation</h2></div></div></div><p>In some<a class="indexterm" id="id385"/> circumstances, we don't want a server or daemon to start as part of a post-installation script when installing updates with <code class="literal">apt-get</code> or <code class="literal">dpkg</code>. To reach this goal, you need to create a file named <code class="literal">policy-rc.d</code> under the <code class="literal">/usr/sbin/</code> directory and put the following content in it:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>#!/bin/sh</strong></span>
<span class="strong"><strong>exit 101</strong></span>
</pre></div><p>Then, give it the <span class="emphasis"><em>755</em></span> rights by using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>chmod 755 /usr/sbin/policy-rc.d</strong></span>
</pre></div><p>When you finish, don't forget to remove this file by using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>rm -f /usr/sbin/policy-rc.d</strong></span>
</pre></div></div><div class="section" title="How to move or copy a directory"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec66"/>How to move or copy a directory</h2></div></div></div><p>The <a class="indexterm" id="id386"/>copy (<code class="literal">cp</code>) command only works for files. To copy a <a class="indexterm" id="id387"/>directory, you need to use the <code class="literal">-r</code> recursive flag, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>cp -r input_directry destination_directory</strong></span>
</pre></div><p>The move (<code class="literal">mv</code>) command works the same way. You need to use the <code class="literal">-r</code> recursive flag to move a directory, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mv -r input_directry destination_directory</strong></span>
</pre></div></div><div class="section" title="System resource limits"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec67"/>System resource limits</h2></div></div></div><p>The default behavior in Ubuntu Server is to not impose resource limits on user processes. This means <a class="indexterm" id="id388"/>that users are free to use all of the available memory on the machine or launch processes in an endless loop, thus rendering the system unusable in seconds. The best solution to this is limiting some user resources by editing the <code class="literal">/etc/security/limits.conf</code> file with the help of the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudoedit /etc/security/limits.conf</strong></span>
</pre></div><p>The content of the file is well explained. Besides, there is a good <code class="literal">man</code> page for the configuration of this file:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>man limits.conf</strong></span>
</pre></div><p>For disk quotation, you need to install the quota package, as discussed in an earlier chapter of this book.</p></div><div class="section" title="Running a command over and over"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec68"/>Running a command over and over</h2></div></div></div><p>Sometimes we need to run the same command again and again to either monitor the progress of an <a class="indexterm" id="id389"/>operation of copying a file, or troubleshoot the status of a server. Though you can run the same command over and over, a better method is to use the <code class="literal">watch</code> command. The <code class="literal">watch</code> program takes a command as an argument and then runs that command every two seconds, showing its output on the screen. So for instance, if we want to monitor the size of <code class="literal">ubuntu.iso</code>, we will type <code class="literal">watch "ls -l ubuntu.iso"</code>. The <code class="literal">watch</code> command accepts a few arguments, such as the <code class="literal">-n</code> argument, so that you can adjust how many seconds it will wait before it runs the program again.</p></div></div></div>
<div class="section" title="Troubleshooting tips"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec36"/>Troubleshooting tips</h1></div></div></div><p>In this section, you will find advanced tips related to the troubleshooting of tasks. They are a must for most Ubuntu Server administrators.</p><div class="section" title="Customizing log rotation on Ubuntu Server"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec69"/>Customizing log rotation on Ubuntu Server</h2></div></div></div><p>The best starting <a class="indexterm" id="id390"/>point for troubleshooting a problem is reading the related service log. Logs are not saved infinitely; they are kept on the system and they follow a specific policy. After a span of time, the oldest <a class="indexterm" id="id391"/>logs are dropped. Thus, we keep only some of the latest log files. This is called <span class="strong"><strong>log rotation</strong></span>; it is done on Ubuntu Server on two levels. The generic policy is configured in the <code class="literal">/etc/logrotate.conf</code> file, and a specific policy is configured for some services in a specific file under the <code class="literal">/etc/logrotate.d/</code> directory.</p><p>This specific file, named <code class="literal">/etc/logrotate.d/*</code> is not commented, but the <code class="literal">/etc/logrotate.conf</code> generic file is very expressive and well commented and has a syntax that is the same as that of the specific file. There is also good documentation about this on the <code class="literal">man</code> page, which can be viewed by executing the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>man logrotate</strong></span>
</pre></div><p>Some of the <a class="indexterm" id="id392"/>parameters that exist on these files by default are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>periodicity of log rotation</strong></span>, rotation can be set in such a way that the log rotation is performed daily, weekly, monthly, and so on</li><li class="listitem" style="list-style-type: disc">The <span class="strong"><strong>lifetime of each log file</strong></span>, that is, the period for which a log file is kept on the system before being deleted, is expressed in weeks and associated with the <code class="literal">rotate</code> parameter</li><li class="listitem" style="list-style-type: disc">An <span class="strong"><strong>option to compress log files</strong></span> is available with an aim to save space by using the <code class="literal">compress</code> parameter</li></ul></div><p>Some of the other parameters that can be added manually are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The <code class="literal">delaycompress</code> parameter postpones the compression of the previous log file to the next rotation cycle, thus allowing users to easily view last week's log without having to uncompressing it</li><li class="listitem" style="list-style-type: disc">The <code class="literal">dateex</code> directive changes the default backlog file name from the default behavior (numerically naming the files: <code class="literal">logname.0</code>, <code class="literal">logname.1</code>, <code class="literal">logname.2</code>, and so on) to include the <span class="emphasis"><em>YYYYMMDD</em></span> date pattern instead of 0, 1, 2, and so on.</li></ul></div></div><div class="section" title="The main system log files"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec70"/>The main system log files</h2></div></div></div><p>System log files are the pillar of every troubleshooting task. Going through them carefully often allows system administrators to discover in advance when something is wrong with the<a class="indexterm" id="id393"/> system and resolve most problems before they escalate.</p><p>Usually, logs files are stored under the <code class="literal">/var/log</code> directory; and for a server that has been running for a while, there are a lot of older versions of log files in that directory, and most of them are compressed with <code class="literal">gzip</code>.</p><p>The following are some log files of note:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The general system log: <code class="literal">/var/log/syslog</code></li><li class="listitem" style="list-style-type: disc">The system authentication logs: <code class="literal">/var/log/auth.log</code></li><li class="listitem" style="list-style-type: disc">The system e-mail logs: <code class="literal">/var/log/mail.log</code></li><li class="listitem" style="list-style-type: disc">The <a class="indexterm" id="id394"/>general log messages: <code class="literal">/var/log/messages</code></li><li class="listitem" style="list-style-type: disc">The kernel ring buffer messages, usually when the system boots up: <code class="literal">/var/log/dmesg</code></li></ul></div></div><div class="section" title="Checking opened files"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec71"/>Checking opened files</h2></div></div></div><p>Sometimes when troubleshooting we need to check for a specific file (check which process is<a class="indexterm" id="id395"/> running and currently opening it), or for a specific filesystem (which files are open on it and for which use). This information is provided by the <code class="literal">lsof</code> command. In the <code class="literal">lsof</code> output, you will see a list of all the processes along with the open files on that filesystem, their process IDs, the user, and the size of the resources allocated to them.</p></div><div class="section" title="Getting information from /proc"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec72"/>Getting information from /proc</h2></div></div></div><p>A good starting point for the troubleshooting of Ubuntu Server is getting information about the state <a class="indexterm" id="id396"/>of processes, hardware devices, kernel subsystems, and other attributes of Linux. This can be done via the <code class="literal">/proc</code> files.</p><p>Getting information from files in the <code class="literal">/proc</code> directory is simply done by using the <code class="literal">cat</code> command. Under <code class="literal">/proc</code>, you will see a separate directory for every running process (each has its PID as a name) containing information about that process. You will also find the <code class="literal">/proc</code> files that contain general data for all kinds of other measurements, such as the computer's CPU, software versions, disk partitions, memory usage, and so on.</p><p>Here's a list of examples that illustrate the information that you can get from your Ubuntu system's <code class="literal">/proc</code> directory:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">To show the options that were used in the boot prompt, run <code class="literal">cat /proc/cmdline</code></li><li class="listitem" style="list-style-type: disc">To show information related to the server processor, run <code class="literal">cat /proc/cpuinfo</code></li><li class="listitem" style="list-style-type: disc">To show the existing character and block devices, run <code class="literal">cat /proc/devices</code></li><li class="listitem" style="list-style-type: disc">To display disks, partitions, and statistics, run <code class="literal">cat /proc/diskstats</code></li><li class="listitem" style="list-style-type: disc">To list the filesystem types in the current kernel, run <code class="literal">cat /proc/filesystems</code></li><li class="listitem" style="list-style-type: disc">To show the physical memory addresses, run <code class="literal">cat /proc/iomem</code></li><li class="listitem" style="list-style-type: disc">To show the virtual memory addresses, run <code class="literal">cat /proc/ioports</code></li><li class="listitem" style="list-style-type: disc">To show the 1-, 5-, and 15-minute load averages, and the running processes/the<a class="indexterm" id="id397"/> total and the highest <span class="strong"><strong>Process Identification Number</strong></span> (<span class="strong"><strong>PID</strong></span>), run <code class="literal">cat /proc/loadavg</code></li><li class="listitem" style="list-style-type: disc">To show the available RAM and swap memory, run <code class="literal">cat /proc/meminfo</code></li><li class="listitem" style="list-style-type: disc">To show the loaded modules, memory size, instances loaded, dependencies' load state, and kernel memory, run <code class="literal">cat /proc/modules</code></li><li class="listitem" style="list-style-type: disc">To show the <a class="indexterm" id="id398"/>mounted local/remote filesystem information, run <code class="literal">cat /proc/mounts</code></li><li class="listitem" style="list-style-type: disc">To show the mounted local disk partitions, run <code class="literal">cat /proc/partitions</code></li><li class="listitem" style="list-style-type: disc">To show the RAID status (when using RAID software), run <code class="literal">cat /proc/mdstat</code></li><li class="listitem" style="list-style-type: disc">To show the kernel stats since the system was booted, run <code class="literal">cat /proc/stat</code></li><li class="listitem" style="list-style-type: disc">To display information about swap space, run <code class="literal">cat /proc/swaps</code></li><li class="listitem" style="list-style-type: disc">To display the kernel version and the related compiler, run <code class="literal">cat /proc/version</code></li></ul></div></div><div class="section" title="Recovering the root password under Ubuntu Server"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec73"/>Recovering the root password under Ubuntu Server</h2></div></div></div><p>Sometimes, server<a class="indexterm" id="id399"/> administrators can't remember the root password. On Ubuntu Server, recovering the root password can be done by booting the system <a class="indexterm" id="id400"/>under a specific mode called a <span class="strong"><strong>single user mode</strong></span>, which is also called <span class="strong"><strong>runlevel 1</strong></span> or the <span class="strong"><strong>Recovery Mode</strong></span>.</p><p>So, the first step is to enter this mode by using the GRUB menu. Normally, on Ubuntu Server, you will find this entry automatically (it has the <code class="literal">Recovery Mode</code> tag between the parentheses after the GRUB entry name). If this is not the case, use GRUB to manually edit the proposed menu entry at the time of booting by adding the word "single" at the end of the line of the boot entry that you want.</p><p>The kernel should boot as usual, but you will get a root prompt (<code class="literal">sh#</code>) instead of the ordinary prompt (<code class="literal">sh$</code>).</p><p>At this point, we have gained root access to the filesystem. We can finally change the password. Now you have root access, when changing the password you will not be asked for your old password. So, on running the following command, you will be asked for your new password and its confirmation directly:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong># passwd</strong></span>
</pre></div><p>Finally, you can now reboot your machine and gain root access again.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip18"/>Tip</h3><p>By default, the filesystem is read-only in the recovery mode. It needs to be remounted as read/write mode in order to change the root password or do any other task that needs writing on the disk. To mount it with read/write access mode, enter the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mount -o remount,rw /</strong></span>
</pre></div><p>Note the spaces: you'll get an error in case you ignore the spacesor add extra ones.</p><p>If you have <code class="literal">/home</code>, <code class="literal">/boot, /tmp</code>, or any other mount point on a separate partition, you <a class="indexterm" id="id401"/>can mount them with the help of the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>mount --all</strong></span>
</pre></div><p>However, you must do this just after the first remount step so that <code class="literal">/etc/mtab</code> is writable.</p></div></div></div></div>
<div class="section" title="Useful tools and utilities"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec37"/>Useful tools and utilities</h1></div></div></div><p>In this section, we will have a look at some tools and utilities that help Ubuntu Server administrators to manage their systems in the best way needs so that systems usability is boosted to its maximum.</p><div class="section" title="NetHogs, a network monitoring tool"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec74"/>NetHogs, a network monitoring tool</h2></div></div></div><p>
<span class="strong"><strong>NetHogs</strong></span> is<a class="indexterm" id="id402"/> a network monitoring tool that helps you identify the program that <a class="indexterm" id="id403"/>consumes your bandwidth. It is a kind of <code class="literal">top</code> command, but it's for network. This tool is very useful when you are troubleshooting network issues such as <span class="strong"><strong>what is hogging the Internet connection?</strong></span>.</p><p>To launch <code class="literal">nethogs</code>, you need to do it with root privileges by using <code class="literal">sudo</code> command, because it relies on <code class="literal">libpcap</code> to sniff the network, like most network monitoring tools.</p><p>The installation of <code class="literal">nethogs</code> is simple, you just need to run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get install nethogs</strong></span>
</pre></div><p>After the installation, you can start using it via the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo nethogs network_interface_card (by default without using the NIC it will use eth0), for example: sudo nethogs eth1</strong></span>
</pre></div><p>Once the program is running, you can use the <span class="emphasis"><em>M</em></span> key to switch between the following two modes:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">The real-time usage</li><li class="listitem" style="list-style-type: disc">The total usage (different modes exist based on the size unit, such as KB, MB, and so on)</li></ul></div></div><div class="section" title="vnStat, a network monitoring tool"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec75"/>vnStat, a network monitoring tool</h2></div></div></div><p>While <code class="literal">nethogs</code>, the tool that we saw in the last section, allows you to monitor your network bandwidth usage in real time by collecting statistics at a given date/time, it cannot give you a hand if you wish to monitor bandwidth usage over an hour/day/week/month. This tricky function is provided by another network monitoring tool <a class="indexterm" id="id404"/>named <code class="literal">vnStat</code>. The <code class="literal">vnstat</code> daemon is a suite of programs that monitor <a class="indexterm" id="id405"/>network bandwidth usage.</p><p>To install <code class="literal">vnStat</code> on Ubuntu Server, you can use <code class="literal">apt-get</code>, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get install vnstat</strong></span>
</pre></div><p>The configuration of <code class="literal">vnStat</code> is done by editing the <code class="literal">/etc/vnstat.conf</code> file; just don't forget to restart <code class="literal">itwith</code>, as follows:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo /etc/init.d/vnstat restart</strong></span>
</pre></div><p>To start the <code class="literal">vnStat</code> daemon, execute the <code class="literal">vnstatd</code> command</p><p>Before using this tool, you need to wait for some time for data to be collected, and then run the <code class="literal">vnstat</code> command.</p><p>There are a lot of helpful options that come with this tool. You can discover them by using the <code class="literal">man</code> page. The <a class="indexterm" id="id406"/>following are the most useful ones:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc"><code class="literal">vnstat -h</code>: This is used to see the summary of the hourly usage</li><li class="listitem" style="list-style-type: disc"><code class="literal">vnstat -d</code>: This is used to see the summary of the daily usage</li><li class="listitem" style="list-style-type: disc"><code class="literal">vnstat -w</code>: This is used to see the summary of the weekly usage</li><li class="listitem" style="list-style-type: disc"><code class="literal">vnstat -m</code>: This is used to see the summary of the monthly usage</li><li class="listitem" style="list-style-type: disc"><code class="literal">vnstat -t</code>: This shows the all-time top 10 traffic days.</li><li class="listitem" style="list-style-type: disc"><code class="literal">vnstat -tr 10</code>: This shows the usage over <code class="literal">X</code> seconds (default value is 5)</li><li class="listitem" style="list-style-type: disc"><code class="literal">vnstat -l</code>: This shows the live bandwidth usage</li></ul></div><p>
<code class="literal">vnStat</code> is a useful little tool if you want to get a good overview of how much bandwidth you use on a hourly/daily/weekly/monthly basis, and it requires almost no resources to do so.</p></div><div class="section" title="Tailing multiple files using multitail"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec76"/>Tailing multiple files using multitail</h2></div></div></div><p>In many cases, a <a class="indexterm" id="id407"/>system administrator needs to tail multiple files<a class="indexterm" id="id408"/> at the same time. There is a sweet Linux tool named <code class="literal">multitail</code> that provides this function. The <code class="literal">multitail</code> tool will let you tail multiple files at the same time within the same shell. Besides this main function, <code class="literal">multitail</code> allows you to run multiple commands and tail their outputs, which simplifies the lives of system administrations, especially for some advanced troubleshooting tasks.</p><p>To install this tool, you just need to run the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get install multitail</strong></span>
</pre></div><p>There are<a class="indexterm" id="id409"/> a lot of ways to use this command. You can refer to <a class="indexterm" id="id410"/>the <code class="literal">man</code> page, where there are different examples that explain how to better customize output.</p></div><div class="section" title="The program cockpit – a remote manager for Ubuntu servers"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec77"/>The program cockpit – a remote manager for Ubuntu servers</h2></div></div></div><p>The <code class="literal">cockpit</code> command <a class="indexterm" id="id411"/>is an interactive server administrator <a class="indexterm" id="id412"/>interface. It is easy to use and very lightweight. It allows an Ubuntu Server administrator to perform a lot of tasks, such as storage administration, journal and log inspection, and services management (starting and stopping) in a user-friendly interface.</p><p>To install <code class="literal">cockpit</code> on Ubuntu Server, you have to run the following commands:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo add-apt-repository ppa:jpsutton/cockpit</strong></span>
<span class="strong"><strong>sudo apt-get update</strong></span>
<span class="strong"><strong>sudo apt-get install cockpit</strong></span>
</pre></div><p>To start the <code class="literal">cockpit</code> service, use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo systemctl start cockpit</strong></span>
</pre></div><p>If you want to start the <code class="literal">cockpit</code> service automatically when you reboot your server, use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo systemctl enable cockpit.socket</strong></span>
</pre></div><p>Finally, to access the <code class="literal">cockpit</code> GUI, use the following URL:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>https://&lt;server_ip&gt;:9090</strong></span>
</pre></div></div><div class="section" title="Webmin: the famous system administration tool"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec78"/>Webmin: the famous system administration tool</h2></div></div></div><p>
<span class="strong"><strong>Webmin</strong></span> is one <a class="indexterm" id="id413"/>of the most famous Unix administration<a class="indexterm" id="id414"/> tools. It is a web-based interface that provides a huge set of functionalities to easily manage server resources, including: the setting up of user accounts; the administration of services such as Apache, FTP, DNS, and so on; the management of sharing files; and a lot of other functions. All in all, it is a user-friendly interface.</p><p>Installing <code class="literal">webmin</code> needs, before anything else, you to have a fully functional and running LAMP server. We discussed how to get this done in <a class="link" href="ch03.html" title="Chapter 3. Deploying Servers on Ubuntu">Chapter 3</a>, <span class="emphasis"><em>Deploying Servers on Ubuntu</em></span>, of this book.</p><p>After that, you need to install <code class="literal">webmin</code> from the APT repository. First of all, you need to add the <code class="literal">webmin</code> official repository to your server source list file. This is done by editing the <code class="literal">/etc/apt/sources.list</code> file using the <code class="literal">sudo vi /etc/apt/sources.list</code> command. Then add<a class="indexterm" id="id415"/> the following lines to <code class="literal">sources.list</code> file:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>deb http://download.webmin.com/download/repository sarge contrib</strong></span>
<span class="strong"><strong>deb http://webmin.mirror.somersettechsolutions.co.uk/repository sarge contrib</strong></span>
</pre></div><p>After doing this, you <a class="indexterm" id="id416"/>need to download the <span class="strong"><strong>GNU Privacy Guard</strong></span> (<span class="strong"><strong>GPG</strong></span>) key<a class="indexterm" id="id417"/> and add it to the APT keys by using the following commands:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>wget http://www.webmin.com/jcameron-key.asc</strong></span>
<span class="strong"><strong>sudo apt-key add jcameron-key.asc</strong></span>
</pre></div><p>Next, update the source list by using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get update</strong></span>
</pre></div><p>Finally, install <code class="literal">webmin</code> by using the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get install webmin</strong></span>
</pre></div><p>To access <code class="literal">webmin</code>, you need to go to <code class="literal">https://&lt;server_ip&gt;:10000</code>.</p></div><div class="section" title="Using the uvtool program and extending the use of Cloud images"><div class="titlepage"><div><div><h2 class="title"><a id="ch06lvl2sec79"/>Using the uvtool program and extending the use of Cloud images</h2></div></div></div><p>The <code class="literal">uvtool</code> program<a class="indexterm" id="id418"/> is provided by Canonical for the Ubuntu administrators who want to use the already-prepared Cloud images outside <a class="indexterm" id="id419"/>the Cloud infrastructure to create a virtual machine without the need of a complete installation of Cloud servers. This greatly facilitates the task of generating VMs using Cloud images.</p><p>Installing <code class="literal">uvtool</code> is simple, just use the following command:</p><div class="informalexample"><pre class="programlisting">
<span class="strong"><strong>sudo apt-get -y install uvtool</strong></span>
</pre></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note42"/>Note</h3><p>The details as regard to using <code class="literal">uvtool</code> to find and synchronize Cloud images and create and manage VMs and the other functionalities provided by this powerful tool, that can be<a class="indexterm" id="id420"/> seen in the rich official documentation that is available at <a class="ulink" href="https://help.ubuntu.com/lts/serverguide/cloud-images-and-uvtool.html">https://help.ubuntu.com/lts/serverguide/cloud-images-and-uvtool.html</a>.</p></div></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch06lvl1sec38"/>Summary</h1></div></div></div><p>In the last chapter of this essential book, we had a look at some of the best tips and tricks that Ubuntu Server administrators need to manage their Ubuntu servers in an easy, efficient, and powerful way. At this point, you have the necessary knowledge and skills to fly high with one of the best OSes in the ICT world.</p></div></body></html>