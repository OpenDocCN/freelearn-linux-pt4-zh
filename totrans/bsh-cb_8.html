<html><head></head><body><div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Advanced Scripting Techniques</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this chapter, we will introduce the following recipes:</p>
<ul class="calibre13">
<li class="calibre14">Calculating and reducing the runtime of a script</li>
<li class="calibre14">Writing one-line conditional statements and loops</li>
<li class="calibre14">Avoiding command not found warnings/errors and improving portability</li>
<li class="calibre14">Creating a config file and using it in tandem with your scripts</li>
<li class="calibre14">Improving your shell – GCC and command line colors</li>
<li class="calibre14">Adding aliases, and altering user paths/variables</li>
<li class="calibre14">Echoing output to raw terminal devices</li>
<li class="calibre14">Creating simple frontend GUIs for Bash scripts</li>
<li class="calibre14">Compiling and installing your own Bash Shell</li>
<li class="calibre14">Recording terminal sessions for automation</li>
<li class="calibre14">Writing high-quality scripts by example</li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Introduction</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">This chapter will help the readers to learn about advanced scripting techniques as well as how to customize their shell. Users will learn to calculate as well as reduce the runtime of the script. It will be easy for users to write one-line loops and conditional statements. Users will learn to write scripts to avoid warnings and errors. They will learn how to create a config file and use it. Users will learn to improve the shell, adding aliases, altering path variables, and echoing output to terminal devices. Users will also learn about recording terminal sessions and writing scripts.</p>
<p class="mce-root"/>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Calculating and reducing the runtime of a script</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we are going to learn how to calculate and reduce the script’s runtime. A simple <kbd class="calibre17">time</kbd> command will help in calculating the execution time.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Besides having a terminal open, m<span class="calibre16">ake sure you have the necessary scripts present in your system.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Now, we will write a simple script that contains a few commands, and then, using the <kbd class="calibre17">time</kbd> command, we will get the runtime of that script. Create a script <kbd class="calibre17">cal_runtime.sh</kbd> and write the following code in it.</p>
<pre class="calibre22">clear<br class="calibre2"/>ls -l<br class="calibre2"/>date<br class="calibre2"/>sudo apt install python3</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Now, we have written a script <kbd class="calibre17">cal_runtime.sh</kbd> and four commands in that script: <kbd class="calibre17">clear, ls, date,</kbd> and a <kbd class="calibre17">python3</kbd> installation command. Run your script as follows:</p>
<pre class="calibre22"><strong class="calibre3">$ time bash cal_runtime.sh</strong></pre>
<p class="mce-root">After the execution, you will get the runtime of the script at the bottom of your output.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Writing one-line conditional statements and loops</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we are going to write scripts that will contain one-line conditional statements as well as looping statements.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">You need to have basic knowledge of conditional and looping statements.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Now we will write a script for a one-line conditional statement. In this script, we will write a simple <kbd class="calibre17">if</kbd> condition. Create a script named <kbd class="calibre17">if_oneline.sh</kbd> and write the following code in it:</p>
<pre class="calibre22">a=100<br class="calibre2"/>if [ $a -eq 100 ]; then echo "a is equal to $a"; fi</pre>
<p class="mce-root">Next, we will write a script for a one-line <kbd class="calibre17">loop</kbd> statement. In it, we are going to write a command that will execute 10 times. Create a script <kbd class="calibre17">for_online.sh</kbd>, and write this code in it.</p>
<pre class="calibre22">for i in {1..10}; do echo "Hello World"; done</pre>
<p class="mce-root">Now, we will write a script for a one-line <kbd class="calibre17">while</kbd> statement. This will be an infinite loop. Create a script named <kbd class="calibre17">while_oneline.sh</kbd> and write the following code in it:</p>
<pre class="calibre22">x=10<br class="calibre2"/>while [ $x -eq 10 ]; do echo $x; sleep 2; done</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we wrote three scripts for a one-line if statement, for loop, and while loop. In the if example, the condition will be checked and then the output will be displayed on the screen.</p>
<p class="mce-root">In the <kbd class="calibre17">for</kbd> loop example, the <kbd class="calibre17">echo</kbd> command will be executed 10 times and Hello world will be displayed 10 times on the screen. In the while example, it will be an infinite loop. We have given a sleep of <kbd class="calibre17">2</kbd> seconds so that the output, 10, will be executed infinitely every 2 seconds.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Avoiding command not found warnings/errors and improving portability</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we are going to learn how to avoid warnings and errors in a shell script. For that, we are going to use the concept of redirection.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Besides having a terminal open, you need to have b<span class="calibre16">asic knowledge of the redirection technique.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Sometimes, while debugging your shell scripts, you may not want to view the errors or warning messages as well as your standard output. So for that, we are going to use the redirection technique. Now, we will write <kbd class="calibre17">lynda</kbd> as a command in our terminal. Run the command as follows.</p>
<pre class="calibre22"><strong class="calibre3">$ lynda</strong></pre>
<p class="cdpaligncenter1"><img src="Images/7ed9fec7-b57e-4722-a086-e913a25c9419.jpg" width="293" height="55" class="calibre40"/></p>
<p class="mce-root">You will get the <kbd class="calibre17">command not found</kbd> error. We can avoid this error by running the following command.</p>
<pre class="calibre22"><strong class="calibre3">$ lynda 2&gt; log.txt</strong></pre>
<p class="mce-root">We will write a script with a wrong syntax for declaring the variable. And we will redirect that error message to <kbd class="calibre17">log.txt</kbd>. Create a script <kbd class="calibre17">avoid_error.sh</kbd>, and write following content in it.</p>
<pre class="calibre22">echo "Hello World"<br class="calibre2"/>a = 100<br class="calibre2"/>b=20<br class="calibre2"/>c=$((a+b))<br class="calibre2"/>echo $a</pre>
<p class="mce-root">In the second line, <kbd class="calibre17">a = 100</kbd>, we will get an error.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Whatever error message you get after pressing <em class="calibre18">Enter</em>, that error will get stored in <kbd class="calibre17">log.txt</kbd>. Now view the contents of <kbd class="calibre17">log.txt</kbd> as follows:</p>
<pre class="calibre22"><strong class="calibre3">$ cat log.txt</strong></pre>
<p class="cdpaligncenter1"><img src="Images/83deac13-d1ee-4119-80d9-f65d92f2118b.jpg" width="407" height="83" class="calibre41"/></p>
<p class="mce-root">So, in this way, you can avoid warnings as well as errors. Now, run the script as:</p>
<pre class="calibre22"><strong class="calibre3">$ bash avoid_error.sh 2&gt; log.txt</strong></pre>
<p class="mce-root">The error message will get stored in <kbd class="calibre17">log.txt</kbd>. You can view it by running the <kbd class="calibre17">cat log.txt</kbd> command.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Creating a config file and using it in tandem with your scripts</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we are going to create a config file and use it in our shell script.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Besides having a terminal open, you need b<span class="calibre16">asic knowledge of creating scripts and config files.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Now, we are going to create a script and config file. The extension of the configuration file is <kbd class="calibre17">.conf</kbd>. Create a script called <kbd class="calibre17">sample_script.sh</kbd> and write this code in it:</p>
<pre class="calibre22">#!/bin/bash<br class="calibre2"/>typeset -A config<br class="calibre2"/>config=(<br class="calibre2"/>    [username]="student"<br class="calibre2"/>    [password]=""<br class="calibre2"/>    [hostname]="ubuntu"<br class="calibre2"/>)<br class="calibre2"/>while read line<br class="calibre2"/>do<br class="calibre2"/>    if echo $line | grep -F = &amp;&gt;/dev/null<br class="calibre2"/>    then<br class="calibre2"/>        varname=$(echo "$line" | cut -d '=' -f 1)<br class="calibre2"/>        config[$varname]=$(echo "$line" | cut -d '=' -f 2-)<br class="calibre2"/>    fi<br class="calibre2"/>done &lt; sampleconfig.conf<br class="calibre2"/>echo ${config[username]}<br class="calibre2"/>echo ${config[password]}<br class="calibre2"/>echo ${config[hostname]}<br class="calibre2"/>echo ${config[PROMPT_COMMAND]}</pre>
<p class="mce-root">We will now create a configuration file. Create a file called <kbd class="calibre17">sampleconfig.conf</kbd> and write the following code in it:</p>
<pre class="calibre22">password=training<br class="calibre2"/>echo rm -rf /<br class="calibre2"/>PROMPT_COMMAND='ls -l'<br class="calibre2"/>hostname=ubuntu; echo rm -rf /</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">After running the script username, password, and hostname, it will display the command we mentioned in  <kbd class="calibre17">PROMPT_COMMAND</kbd>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Improving your shell – GCC and command line colors</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we are going learn how a user can improve the shell. We will do this using the PS1 bash environment variable.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Besides a terminal, you need ba<span class="calibre16">sic knowledge of PS1.</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The terminal appearance is taken by the <kbd class="calibre17">PS1</kbd> shell variable. The content allowed in <kbd class="calibre17">PS1</kbd> will contain backslash-escape special characters.</p>
<p class="mce-root">First, we will see what PS1's current contents in the system. For that, run the following command:</p>
<pre class="calibre22"><strong class="calibre3">$ echo $PS1</strong></pre>
<p class="cdpaligncenter1"><img src="Images/16726413-5619-429c-8eca-2dee1118ee41.jpg" width="725" height="75" class="calibre42"/></p>
<p class="mce-root">Here are the backslash-escape special characters:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre17">\u</kbd>: Current username</li>
<li class="calibre14"><kbd class="calibre17">\h</kbd>: Hostname</li>
<li class="calibre14"><kbd class="calibre17">\W</kbd>: Current working directory</li>
<li class="calibre14"><kbd class="calibre17">\$</kbd>: Will display <kbd class="calibre17">#</kbd> if the user is root; otherwise it will display $ only</li>
<li class="calibre14"><kbd class="calibre17">\@</kbd>: Current time in 12-hour AM/PM format</li>
</ul>
<p class="mce-root">Now, we will modify our Bash. Run the following command:</p>
<pre class="calibre22"><strong class="calibre3">$ PS1="[\\u@\\h \\W \\@]\\$"</strong></pre>
<p class="cdpaligncenter1"><img src="Images/7654f47a-4b67-4ee6-b8ff-d9c638fb4999.jpg" width="555" height="53" class="calibre43"/></p>
<p class="mce-root">Now, we will write a command to change the colors.</p>
<p class="mce-root">To make the text color blue, run the following command:</p>
<pre class="calibre22"><strong class="calibre3">$ PS1="[\\u@\\h \\W \\@]\\$\\e[0;34m"</strong></pre>
<p class="cdpaligncenter1"><img src="Images/19605f38-20c8-4883-b1d5-05474fd373d3.jpg" width="636" height="85" class="calibre44"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root">Now we, will see the <kbd class="calibre17">tput</kbd> command. Run the following commands:</p>
<pre class="calibre22"><strong class="calibre3">$ PS1="\[$(tput setaf 3)\]\u@\h:\w $ \[$(tput sgr0)\]"</strong></pre>
<p class="cdpaligncenter1"><img src="Images/ab886273-6eb9-4bfd-85ea-06292a5397f3.jpg" width="652" height="60" class="calibre45"/></p>
<pre class="cdpalignleft1"><strong class="calibre3">$ PS1="\[$(tput setaf 6)\]\u@\h:\w $ \[$(tput sgr0)\]"</strong></pre>
<p class="cdpaligncenter1"><img src="Images/3a93a212-9120-47a3-b059-3d1ce40b04d6.jpg" width="658" height="57" class="calibre46"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">We used the <kbd class="calibre17">PS1</kbd> shell variable to improve our shell. We add colors in the <kbd class="calibre17">PS1</kbd> variable and the colors were changed. We used the <kbd class="calibre17">tput</kbd> command too. This command is also used to modify the settings. <kbd class="calibre17">setaf</kbd> sets the foreground color, and <kbd class="calibre17">setab</kbd> sets the background color. The color codes for the <kbd class="calibre17">tput</kbd> command are as follows:</p>
<div class="title-page-name">
<table border="1" class="calibre32">
<tbody class="calibre33">
<tr class="calibre34">
<td class="calibre47">
<p class="calibre48"><strong class="calibre6">Code</strong></p>
</td>
<td class="calibre49">
<p class="calibre48"><strong class="calibre6">Color</strong></p>
</td>
</tr>
<tr class="calibre36">
<td class="calibre47">
<p class="calibre48">0</p>
</td>
<td class="calibre49">
<p class="calibre48">Black</p>
</td>
</tr>
<tr class="calibre34">
<td class="calibre47">
<p class="calibre48">1</p>
</td>
<td class="calibre49">
<p class="calibre48">Red</p>
</td>
</tr>
<tr class="calibre36">
<td class="calibre47">
<p class="calibre48">2</p>
</td>
<td class="calibre49">
<p class="calibre48">Green</p>
</td>
</tr>
<tr class="calibre34">
<td class="calibre47">
<p class="calibre48">3</p>
</td>
<td class="calibre49">
<p class="calibre48">Yellow</p>
</td>
</tr>
<tr class="calibre36">
<td class="calibre47">
<p class="calibre48">4</p>
</td>
<td class="calibre49">
<p class="calibre48">Blue</p>
</td>
</tr>
<tr class="calibre34">
<td class="calibre47">
<p class="calibre48">5</p>
</td>
<td class="calibre49">
<p class="calibre48">Magenta</p>
</td>
</tr>
<tr class="calibre36">
<td class="calibre47">
<p class="calibre48">6</p>
</td>
<td class="calibre49">
<p class="calibre48">Cyan</p>
</td>
</tr>
<tr class="calibre37">
<td class="calibre47">
<p class="calibre48">7</p>
</td>
<td class="calibre49">
<p class="calibre48">White</p>
</td>
</tr>
</tbody>
</table>
</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Adding aliases, and altering user paths/variables</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we are going to create an alias of a command and alter the user path variable. We are going to learn about the <kbd class="calibre17">alias</kbd> command. Using <kbd class="calibre17">alias</kbd> command, we are going to create aliases for other commands.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Besides having a terminal open, we need the b<span class="calibre16">asic knowledge of the alias command.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<ol class="calibre20">
<li class="chapter">We will create a alias for the <kbd class="calibre17">pwd</kbd> command. Run this command:</li>
</ol>
<pre class="calibre27"><strong class="calibre3">$ alias p=pwd</strong></pre>
<ol start="2" class="calibre20">
<li class="chapter">Now, we will create an alias for the <kbd class="calibre17">ls</kbd> command. Run the following command:</li>
</ol>
<pre class="calibre27"><strong class="calibre3">$ alias l=”ls -l”</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The <kbd class="calibre17">alias</kbd> command is used to create a shortcut for commonly used commands.</p>
<ol class="calibre20">
<li class="chapter">We have created an alias <kbd class="calibre17">p</kbd> for command <kbd class="calibre17">pwd</kbd>. So, we just run the <kbd class="calibre17">p</kbd> command to get the present working directory.</li>
<li class="chapter">We have created an alias <kbd class="calibre17">l</kbd> for command <kbd class="calibre17">ls</kbd>. So, we just run the <kbd class="calibre17">l</kbd> command to get the list.</li>
</ol>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Echoing output to raw terminal devices</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we are going to learn how we can echo the output from one terminal to another. To achieve this, we are going to use <kbd class="calibre17">tty</kbd>.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Besides having a terminal open, you need b<span class="calibre16">asic knowledge of <kbd class="calibre17">tty</kbd></span>.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><strong class="calibre6">tty</strong> means <strong class="calibre6">teletype.</strong> <kbd class="calibre17">tty</kbd> displays terminal-related information. Everything in Linux is a file. So, <kbd class="calibre17">tty</kbd> prints the filename of the terminal that is connected to standard input.</p>
<p class="mce-root">Now, open a terminal and run tty:</p>
<pre class="calibre22"><strong class="calibre3">$ tty</strong></pre>
<p class="mce-root">After running this command, the current <kbd class="calibre17">tty</kbd> session will be displayed.</p>
<p class="mce-root">Open another terminal B and do the same; you will get that terminal’s tty session.</p>
<p class="mce-root">Now I have two tty sessions as:</p>
<ul class="calibre13">
<li class="calibre14">Terminal A = <kbd class="calibre17">/dev/pts/4</kbd></li>
<li class="calibre14">Terminal B = <kbd class="calibre17">/dev/pts/7</kbd></li>
</ul>
<p class="mce-root">In Terminal A, run the following command:</p>
<pre class="calibre22"><strong class="calibre3">$ echo "Hello World" &gt; /dev/pts/7</strong></pre>
<p class="mce-root">Now check Terminal B; <kbd class="calibre17">Hello world</kbd> will be displayed on the terminal. Again, run the following command to send another string to terminal B.</p>
<pre class="calibre22"><strong class="calibre3">$ echo "Hello This is John" &gt; /dev/pts/7</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">The following will be the output on terminal B.</p>
<pre class="calibre22"><strong class="calibre3">Hello World</strong><br class="calibre2"/><strong class="calibre3">Hello This is John</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Creating simple frontend GUIs for Bash scripts</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we are going to create a simple GUI. We are going to use the zenity tool to do so.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Besides having a terminal open, make sure you have zenity installed in your system.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root"><strong class="calibre6">Zenity</strong> is used to add a graphical interface to shell scripts using a single command. Zenity comes by default with Ubuntu. If not, then install it as follows:</p>
<pre class="calibre22"><strong class="calibre3">$ sudo apt install zenity</strong></pre>
<p class="mce-root">First, we will catch a <kbd class="calibre17">yes/no</kbd> response in our shell script and then perform different commands based on the button. Run the following command to get the <kbd class="calibre17">yes/no</kbd> response.</p>
<pre class="calibre22"><strong class="calibre3">$ zenity --question --title="Query" --text="Would you like to run the script?"</strong></pre>
<p class="cdpaligncenter1"><img src="Images/c8d69678-1488-4269-8d2d-703879be84df.jpg" width="297" height="147" class="calibre50"/></p>
<p class="mce-root">Run the following command to get the error message box:</p>
<pre class="calibre22"><strong class="calibre3">$ zenity --error --title="An Error Occurred" --text="A problem occurred while running the shell script."</strong></pre>
<p class="cdpaligncenter1"><img src="Images/217d5a79-cacf-46da-acb2-d5e2092e5fad.jpg" width="431" height="165" class="calibre51"/></p>
<p class="mce-root">Run the following command to get the text entry:</p>
<pre class="calibre22"><strong class="calibre3">$ zenity --entry --title="Favorite Website" --text="What is your favorite website?"</strong></pre>
<p class="cdpaligncenter1"><img src="Images/d31b659d-2deb-4591-af99-77af34fd7c87.jpg" width="225" height="140" class="calibre52"/></p>
<p class="mce-root">Now we will create a script where the user has to enter a time and till that time the user has to wait. When the wait is over, the user will get a message. Create a script, <kbd class="calibre17">user_wait.sh</kbd>, and write the following content in it.</p>
<pre class="calibre22">#!/bin/bash<br class="calibre2"/>time=$(zenity --entry --title="Timer" --text="Enter a duration for the timer.\n\n Use 10s for 10 seconds, 20m for 20 minutes, or 3h for 3 hours.")<br class="calibre2"/>sleep $time<br class="calibre2"/>zenity --info --title="Timer Complete" --text="The timer is over.\n\n It has been $time."</pre>
<p class="mce-root">Use 10s for 10 seconds, 20m for 20 minutes, or 3h for 3 hours as shown in the following screenshots:</p>
<p class="cdpaligncenter1"><img src="Images/6f9dec70-4bc4-4fff-b35f-b6191178c535.jpg" width="440" height="178" class="calibre53"/></p>
<p class="cdpaligncenter1"><img src="Images/25c0fec8-e204-45cb-91bc-17d83b379e9b.jpg" width="720" height="57" class="calibre54"/></p>
<p class="mce-root">The timer is over:</p>
<p class="cdpaligncenter1"><img src="Images/4d4b7d73-cf24-4e4f-930e-c18e652ddaae.jpg" width="193" height="216" class="calibre55"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Zenity is an open source application that displays dialog boxes using shell scripts as well as the command line. Using zenity communication between the user and shell will be easy:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre17">--question</kbd>: Displays question dialog box</li>
<li class="calibre14"><kbd class="calibre17">--error</kbd>: Displays error dialog box</li>
<li class="calibre14"><kbd class="calibre17">--entry</kbd>: Displays text entry dialog box</li>
<li class="calibre14"><kbd class="calibre17">--info</kbd>: Displays info dialog box</li>
</ul>
<p class="mce-root">In the script <kbd class="calibre17">user_wait.sh</kbd>, we are creating a Timer using a text entry dialogbox and info dialogbox. We have created a variable named <kbd class="calibre17">time</kbd>. We are asking the user to enter a duration of time and that value will be stored in the time variable. Then we are providing that variable to sleep. Therefore, until that time, the user has to wait. After the time completes, the user will get the information dialogbox as the time is over.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Compiling and installing your own Bash shell</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we are going to learn about compile and install the Bash shell. We are going to use SHC, which is shell script compiler.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Besides having a terminal open, m<span class="calibre16">ake sure you have SHC installed in your system.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Now we will write a simple shell script that will print <kbd class="calibre17">“Hello World”</kbd>. Using SHC, the Shell script will be converted into binaries directly. Create a script <kbd class="calibre17">hello.sh</kbd>, and write the following content in it.</p>
<pre class="calibre22">#!/bin/bash<br class="calibre2"/>echo "Hello World"<br class="calibre2"/>a=10<br class="calibre2"/>b=20<br class="calibre2"/>c=$((a+b))<br class="calibre2"/>echo $c</pre>
<p class="mce-root">Now, to log all commands, run the <kbd class="calibre17">logger</kbd> command as follows:</p>
<pre class="calibre22"><strong class="calibre3">$ logger -f hello.sh</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">After executing the script, two extra files will be created. The files are:</p>
<ul class="calibre13">
<li class="calibre14"><kbd class="calibre17">hello.sh.x</kbd>: This file is the stripped binary encrypted shell script in binary format</li>
<li class="calibre14"><kbd class="calibre17">hello.sh.x.c</kbd>: This file is the C source code of <kbd class="calibre17">hello.sh</kbd></li>
</ul>
<p class="mce-root">Now, execute the encrypted shell script as follows:</p>
<pre class="calibre22"><strong class="calibre3">$ ./hello.sh.x</strong></pre>
<p class="mce-root">The logger command will make an entry about your file in the syslog file, which is present in the <kbd class="calibre17">/var/log</kbd> directory of your system. You can check out that file. Navigate to <kbd class="calibre17">/var/log</kbd> directory and run <kbd class="calibre17">nano syslog</kbd>; you will find the entry in it.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Recording terminal sessions for automation</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we are going to learn how to record terminal sessions. We are going to use the <strong class="calibre6">ttyrec</strong> tool to do this.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Besides having a Terminal open, m<span class="calibre16">ake sure</span> ttyrec <span class="calibre16">is installed in your system.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">To record terminal data, we use the ttyrec tool. You can also play the recorded data. Now, to record the terminal session, enter the <kbd class="calibre17">ttyrec</kbd> command in the terminal. You can end the recording by typing <kbd class="calibre17">exit</kbd>. Run the following command to record the terminal session:</p>
<pre class="calibre22"><strong class="calibre3">$ ttyrec</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">When you run the <kbd class="calibre17">ttyrec</kbd> command, the terminal record session will be started. The recording will go on until you type exit. As soon as you type <kbd class="calibre17">exit</kbd>, the recording will be stopped and a file will be created in your current working directory. The filename will be <kbd class="calibre17">ttyrecord</kbd>. You can play this file by running the <kbd class="calibre17">ttyplay</kbd> command. Run the <kbd class="calibre17">ttyrecord</kbd> file as follows:</p>
<pre class="calibre22"><strong class="calibre3">$ ttyplay ttyrecord</strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Writing high-quality scripts by example</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In this recipe, we are going to see functions in shell scripts. We will see how our program testing is done, sequentially on the various parts, using functions. Functions help improve the readability of a program.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">Besides having a terminal open, you need to have a b<span class="calibre16">asic knowledge of functions.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">We are going to write a simple function in our shell script to return the current date and time. Create a script <kbd class="calibre17">function_example.sh</kbd>, and write this code in it:</p>
<pre class="calibre22">#!/bin/bash<br class="calibre2"/>print_date()<br class="calibre2"/>{<br class="calibre2"/>echo "Today is `date`"<br class="calibre2"/>return<br class="calibre2"/>}<br class="calibre2"/>print_date</pre>
<p class="mce-root">Now we will create another script containing two functions with the same name. Create a script <kbd class="calibre17">function2.sh</kbd>, and write the following content in it.</p>
<pre class="calibre22">#!/bin/bash<br class="calibre2"/>display ( ) {<br class="calibre2"/>echo 'First Block'<br class="calibre2"/>echo 'Number 1'<br class="calibre2"/>}<br class="calibre2"/>display ( ) {<br class="calibre2"/>echo 'Second Block'<br class="calibre2"/>echo 'Number 2'<br class="calibre2"/>}<br class="calibre2"/>display<br class="calibre2"/>exit 0</pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content" class="calibre1"><section class="calibre2">

                            <header class="calibre2">
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article class="calibre2">
                
<p class="mce-root">In the first script, we created a function named <kbd class="calibre17">print_date()</kbd> and we just printed a date using a function.</p>
<p class="mce-root">In the second script, we wrote two functions with the same name. However, after execution, the last value was printed on the screen. So in this case, <span class="calibre16">Second block Number 2</span> will be printed on the screen.</p>


            </article>

            
        </section>
    </div>



  </body></html>