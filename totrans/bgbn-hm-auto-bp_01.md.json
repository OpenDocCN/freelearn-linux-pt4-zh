["```\nroot@beaglebone:~# echo cape-bone-iio > /sys/devices/bone_capemgr.9/slots\n\n```", "```\npart_number 'cape-bone-iio', version 'N/A'\nslot #7: generic override\nbone: Using override eeprom data at slot 7\nslot #7: 'Override Board Name,00A0,Override Manuf,cape-bone-iio'\nslot #7: Requesting part number/version based 'cape-bone-iio-00A0.dtbo\nslot #7: Requesting firmware 'cape-bone-iio-00A0.dtbo' for board-name 'Override Board Name', version '00A0'\nslot #7: dtbo 'cape-bone-iio-00A0.dtbo' loaded; converting to live tree\nslot #7: #1 overlays\nhelper.12: ready\nslot #7: Applied #1 overlays.\n\n```", "```\nroot@beaglebone:~# find /sys -name '*AIN*'\n/sys/devices/ocp.3/helper.12/AIN0\n/sys/devices/ocp.3/helper.12/AIN1\n/sys/devices/ocp.3/helper.12/AIN2\n/sys/devices/ocp.3/helper.12/AIN3\n/sys/devices/ocp.3/helper.12/AIN4\n/sys/devices/ocp.3/helper.12/AIN5\n/sys/devices/ocp.3/helper.12/AIN6\n/sys/devices/ocp.3/helper.12/AIN7\n\n```", "```\nroot@beaglebone:~# ./load_firmware.sh adc\n\n```", "```\nroot@beaglebone:~# cat /sys/devices/ocp.3/helper.12/AIN0\n1716\n\n```", "```\nroot@beaglebone:~# cat /sys/bus/iio/devices/iio:device0/in_voltage0_raw\n\n```", "```\nroot@beaglebone:~# echo 68 > /sys/class/gpio/export\nroot@beaglebone:~# echo out > /sys/class/gpio/gpio68/direction\nroot@beaglebone:~# echo 0 > /sys/class/gpio/gpio68/value \nroot@beaglebone:~# echo 69 > /sys/class/gpio/export\nroot@beaglebone:~# echo out > /sys/class/gpio/gpio69/direction\nroot@beaglebone:~# echo 0 > /sys/class/gpio/gpio69/value\n\n```", "```\nroot@beaglebone:~# echo 1 > /sys/class/gpio/gpio68/value \nroot@beaglebone:~# echo 0 > /sys/class/gpio/gpio68/value\nroot@beaglebone:~# echo 1 > /sys/class/gpio/gpio69/value\nroot@beaglebone:~# echo 0 > /sys/class/gpio/gpio69/value\n\n```", "```\nroot@beaglebone:~# ./gpio_set 68 out\nroot@beaglebone:~# ./gpio_set 69 out\n\n```", "```\nroot@beaglebone:~# echo BB-UART1 > /sys/devices/bone_capemgr.9/slots\n\n```", "```\npart_number 'BB-UART1', version 'N/A'\nslot #8: generic override\nbone: Using override eeprom data at slot 8\nslot #8: 'Override Board Name,00A0,Override Manuf,BB-UART1'\nslot #8: Requesting part number/version based 'BB-UART1-00A0.dtbo\nslot #8: Requesting firmware 'BB-UART1-00A0.dtbo' for board-name 'Override Board Name', version '00A0'\nslot #8: dtbo 'BB-UART1-00A0.dtbo' loaded; converting to live tree\nslot #8: #2 overlays\n48022000.serial: ttyO1 at MMIO 0x48022000 (irq = 73) is a OMAP UART1\nslot #8: Applied #2 overlays.\n\n```", "```\nroot@beaglebone:~# ./load_firmware.sh ttyO1\n\n```", "```\nroot@beaglebone:~# ls -l /dev/ttyO1\ncrw-rw---T 1 root dialout 248, 1 Apr 23 22:25 /dev/ttyO1\n\n```", "```\nroot@beaglebone:~# screen /dev/ttyO1 115200\n\n```", "```\nroot@beaglebone:~# aptitude install screen\n\n```", "```\nATZ\nOK\n\n```", "```\nroot@beaglebone:~# aptitude install mysql-client mysql-server\n\n```", "```\nCREATE TABLE status (\n   n VARCHAR(64) NOT NULL,\n   v VARCHAR(64) NOT NULL,\n   PRIMARY KEY (n)\n) ENGINE=MEMORY;\n\n# Setup default values\nINSERT INTO status (n, v) VALUES('alarm', 'off');\n\n#\n# Create the system configuration table\n#\n\nCREATE TABLE config (\n   n VARCHAR(64) NOT NULL,\n   v VARCHAR(64) NOT NULL,\n   PRIMARY KEY (n)\n);\n\n# Setup default values\nINSERT INTO config (n, v) VALUES('sms_delay_s', '300');\n\nINSERT INTO config (n, v) VALUES('mq2_gain', '1');\nINSERT INTO config (n, v) VALUES('mq4_gain', '1');\nINSERT INTO config (n, v) VALUES('mq5_gain', '1');\nINSERT INTO config (n, v) VALUES('mq7_gain', '1');\nINSERT INTO config (n, v) VALUES('mq2_off', '0');\nINSERT INTO config (n, v) VALUES('mq4_off', '0');\nINSERT INTO config (n, v) VALUES('mq5_off', '0');\nINSERT INTO config (n, v) VALUES('mq7_off', '0');\n\nINSERT INTO config (n, v) VALUES('mq2_th_ppm', '2000');\nINSERT INTO config (n, v) VALUES('mq4_th_ppm', '2000');\nINSERT INTO config (n, v) VALUES('mq5_th_ppm', '2000');\nINSERT INTO config (n, v) VALUES('mq7_th_ppm', '2000');\n\n#\n# Create one table per sensor data\n#\n\nCREATE TABLE MQ2_log (\n   t DATETIME NOT NULL,\n   d float,\n   PRIMARY KEY (t)\n);\n\nCREATE TABLE MQ4_log (\n   t DATETIME NOT NULL,\n   d float,\n   PRIMARY KEY (t)\n);\n\nCREATE TABLE MQ5_log (\n   t DATETIME NOT NULL,\n   d float,\n   PRIMARY KEY (t)\n);\n\nCREATE TABLE MQ7_log (\n   t DATETIME NOT NULL,\n   d float,\n   PRIMARY KEY (t)\n);\n```", "```\nfunction daemon_body()\n{\n   global $loop_time;\n   global $sensors;\n\n   # The main loop\n   dbg(\"start main loop (loop_time=${loop_time}s)\");\n   while (sleep($loop_time) == 0) {\n      dbg(\"loop start\");\n\n      # Read sensors\n      foreach ($sensors as $s) {\n         $name = $s['name'];\n         $file = $s['file'];\n         $var = $s['var'];\n         $log = $s['log'];\n\n         # Get the converting values\n         $gain = db_get_config($var . \"_gain\");\n         $off = db_get_config($var . \"_off\");\n\n         dbg(\"gain[$var]=$gain off[$var]=$off\");\n\n         # Read the ADC file\n         $val = file_get_data($file);\n         if ($val === false) {\n            err(\"unable to read sensor $name\");\n            continue;\n         }\n\n      # Do the translation\n      $ppm = $val * $gain + $off;\n\n      dbg(\"file=$file val=$val ppm=$ppm\");\n\n      # Store the result into the status table\n      $ret = db_set_status($var, $ppm);\n      if (!$ret) {\n         err(\"unable to save $name status db_err=%s\",\n             mysql_error());\n         continue;\n      }\n\n      # Store the result into the proper log table\n      $ret = db_log_var($log, $ppm);\n      if (!$ret)\n         err(\"unable to save $name log db_err=%s\",\n             mysql_error());\n      }\n\n      dbg(\"loop end\");\n   }\n}\n```", "```\nroot@beaglebone:~# ./read_sensors.php -d -f -l -T 5\nread_sensors.php[5388]: signals traps installed\nread_sensors.php[5388]: start main loop (loop_time=5s)\nread_sensors.php[5388]: loop start\nread_sensors.php[5388]: gain[mq2]=0.125 off[mq2]=0\nread_sensors.php[5388]: file=/sys/devices/ocp.3/helper.12/AIN0 val=810 ppm=101.25\nread_sensors.php[5388]: gain[mq4]=1 off[mq4]=0\nread_sensors.php[5388]: file=/sys/devices/ocp.3/helper.12/AIN2 val=1477 ppm=1477\nread_sensors.php[5388]: gain[mq5]=1 off[mq5]=0\nread_sensors.php[5388]: file=/sys/devices/ocp.3/helper.12/AIN6 val=816 ppm=816\nread_sensors.php[5388]: gain[mq7]=1 off[mq7]=0\nread_sensors.php[5388]: file=/sys/devices/ocp.3/helper.12/AIN4 val=572 ppm=572\nread_sensors.php[5388]: loop end\nread_sensors.php[5388]: loop start\nread_sensors.php[5388]: gain[mq2]=0.125 off[mq2]=0\nread_sensors.php[5388]: file=/sys/devices/ocp.3/helper.12/AIN0 val=677 ppm=84.625\nread_sensors.php[5388]: gain[mq4]=1 off[mq4]=0\nread_sensors.php[5388]: file=/sys/devices/ocp.3/helper.12/AIN2 val=1456 ppm=1456\nread_sensors.php[5388]: gain[mq5]=1 off[mq5]=0\nread_sensors.php[5388]: file=/sys/devices/ocp.3/helper.12/AIN6 val=847 ppm=847\nread_sensors.php[5388]: gain[mq7]=1 off[mq7]=0\nread_sensors.php[5388]: file=/sys/devices/ocp.3/helper.12/AIN4 val=569 ppm=569\nread_sensors.php[5388]: loop end\n...\n\n```", "```\nroot@beaglebone:~# ./my_dump.sh status\nn   v\nalarm   off\nmq2   84.625\nmq4   1456\nmq5   815\nmq7   569\n\n```", "```\nroot@beaglebone:~# ./my_dump.sh mq2_log\nt   v\n2015-05-15 17:39:36\t101.25\n2015-05-15 17:39:41\t84.625\n2015-05-15 17:39:46\t84.625\n\n```", "```\nroot@beaglebone:~# aptitude install gsm-utils\n\n```", "```\nroot@beaglebone:~# gsmctl -d /dev/ttyO1 me \n<ME0>  Manufacturer: Telit\n<ME1>  Model: GL865-QUAD\n<ME2>  Revision: 10.00.144\n<ME3>  Serial Number: 356308042878501\n\n```", "```\nroot@beaglebone:~# gsmctl -d /dev/ttyO1 pin\n<PIN0> READY\n\n```", "```\ngsmsendsms[ERROR]: ME/TA error 'SIM PIN required' (code 311)\n\n```", "```\nroot@beaglebone:~# gsmctl -d /dev/ttyO1 -I \"+cpin=NNNN\"\n\n```", "```\nroot@beaglebone:~# gsmsendsms -d /dev/ttyO1 \"+NNNNNNNNNNNN\" 'Hello world!'\n\n```", "```\ngsmsendsms[ERROR]: ME/TA error 'Unidentified subscriber' (code 28)\n```", "```\nroot@beaglebone:~# gsmctl -o setsca \"+SSSSSSSSSSSS\"\n```", "```\nfunction daemon_body()\n{\n global $loop_time;\n global $actuators;\n\n $sms_delay = db_get_config(\"sms_delay_s\");\n\n $old_alarm = 0;\n $sms_time = strtotime(\"1970\");\n\n # The main loop\n dbg(\"start main loop (loop_time=${loop_time}s)\");\n while (sleep($loop_time) == 0) {\n dbg(\"loop start\");\n\n # Get the \"alarm\" status and set all alarms properly\n $alarm = db_get_status(\"alarm\");\n foreach ($actuators as $a) {\n $name = $a['name'];\n $file = $a['file'];\n\n dbg(\"file=$file alarm=$alarm\");\n $ret = gpio_set($file, $alarm);\n if (!$ret)\n err(\"unable to write actuator $name\");\n }\n\n # Send the SMS only during off->on transition\n if ($alarm == \"on\" && $old_alarm == \"off\" &&\n strtotime(\"-$sms_time seconds\") > $sms_delay) {\n do_send_sms();\n $sms_time = strtotime(\"now\");\n }\n\n $old_alarm = $alarm;\n\n dbg(\"loop end\");\n }\n}\n\n```", "```\nroot@beaglebone:~# ./my_set.sh status alarm on\nroot@beaglebone:~# ./my_set.sh status alarm off\n\n```", "```\nroot@beaglebone:~# ./write_actuators.php -d -f -l -T 5\nwrite_actuators.php[5474]: signals traps installed\nwrite_actuators.php[5474]: start main loop (loop_time=5s)\nwrite_actuators.php[5474]: loop start\nwrite_actuators.php[5474]: file=/sys/class/gpio/gpio68 alarm=off\nwrite_actuators.php[5474]: file=/sys/class/gpio/gpio69 alarm=off\nwrite_actuators.php[5474]: loop end\nwrite_actuators.php[5474]: loop start\nwrite_actuators.php[5474]: file=/sys/class/gpio/gpio68 alarm=off\nwrite_actuators.php[5474]: file=/sys/class/gpio/gpio69 alarm=off\nwrite_actuators.php[5474]: loop end\n\n```", "```\nroot@beaglebone:~# ./my_set.sh status alarm on\n\n```", "```\nwrite_actuators.php[5474]: loop start\nwrite_actuators.php[5474]: file=/sys/class/gpio/gpio68 alarm=on\nwrite_actuators.php[5474]: file=/sys/class/gpio/gpio69 alarm=on\nwrite_actuators.php[5474]: send SMS...\nwrite_actuators.php[5474]: loop end\n\n```", "```\nfunction do_send_sms()\n{\n   dbg(\"send SMS...\");\n   system('gsmsendsms -d /dev/ttyO1 \"' . PHONE_NUM . '\" \"GAS alarm!\"');\n}\n```", "```\nfunction daemon_body()\n{\n   global $loop_time;\n   global $actuators;\n\n   # The main loop\n   dbg(\"start main loop (loop_time=${loop_time}s)\");\n   while (sleep($loop_time) == 0) {\n      dbg(\"loop start\");\n\n      # Get the gas concentrations and set the \"alarm\" variable\n      $mq2 = db_get_status(\"mq2\");\n      $mq2_th_ppm = db_get_config(\"mq2_th_ppm\");\n      dbg(\"mq2/mq2_th_ppm=$mq2/$mq2_th_ppm\");\n      $mq4 = db_get_status(\"mq4\");\n      $mq4_th_ppm = db_get_config(\"mq4_th_ppm\");\n      dbg(\"mq4/mq4_th_ppm=$mq4/$mq4_th_ppm\");\n      $mq5 = db_get_status(\"mq5\");\n      $mq5_th_ppm = db_get_config(\"mq5_th_ppm\");\n      dbg(\"mq5/mq5_th_ppm=$mq5/$mq5_th_ppm\");\n      $mq7 = db_get_status(\"mq7\");\n      $mq7_th_ppm = db_get_config(\"mq7_th_ppm\");\n      dbg(\"mq7/mq7_th_ppm=$mq7/$mq7_th_ppm\");\n\n      $alarm = $mq2 >= $mq2_th_ppm ||\n         $mq2 >= $mq2_th_ppm ||\n         $mq2 >= $mq2_th_ppm ||\n         $mq2 >= $mq2_th_ppm ? 1 : 0;\n\n      db_set_status(\"alarm\", $alarm);\n      dbg(\"alarm=$alarm\");\n\n      dbg(\"loop end\");\n   }\n}\n```", "```\nroot@beaglebone:~# ./my_set.sh config mq2_th_ppm 5000\n\n```", "```\nroot@beaglebone:~# ./monitor.php -d -f -l -T 5\nmonitor.php[5819]: signals traps installed \nmonitor.php[5819]: start main loop (loop_time=5s)\nmonitor.php[5819]: loop start\nmonitor.php[5819]: mq2/mq2_th_ppm=84.625/5000\nmonitor.php[5819]: mq4/mq4_th_ppm=1456/2000\nmonitor.php[5819]: mq5/mq5_th_ppm=815/2000\nmonitor.php[5819]: mq7/mq7_th_ppm=569/2000\nmonitor.php[5819]: alarm=0\nmonitor.php[5819]: loop end\nmonitor.php[5819]: loop start\nmonitor.php[5819]: mq2/mq2_th_ppm=84.625/5000\nmonitor.php[5819]: mq4/mq4_th_ppm=1456/2000\nmonitor.php[5819]: mq5/mq5_th_ppm=815/2000\nmonitor.php[5819]: mq7/mq7_th_ppm=569/2000\nmonitor.php[5819]: alarm=0\nmonitor.php[5819]: loop end\n...\n\n```", "```\n^Cmonitor.php[5819]: signal trapped!\n\n```", "```\nroot@beaglebone:~# ./my_dump.sh config\nn   v\nmq2_gain   0.125\nmq2_off   0\nmq2_th_ppm   150\nmq4_gain   0.125\nmq4_off   0\nmq4_th_ppm   150\nmq5_gain   0.125\nmq5_off   0\nmq5_th_ppm   150\nmq7_gain   0.125\nmq7_off   0\nmq7_th_ppm   150\nsms_delay_s   300\n\n```", "```\nroot@beaglebone:~# ./my_dump.sh status\nn   v\nmq2   73.5\nmq4   121.75\nmq5   53\nmq7   80.5\nalarm   0\n\n```", "```\nroot@beaglebone:~# ./SYSINIT.sh\ndone!\n\n```", "```\nroot@beaglebone:~# ./read_sensors.php -d -T 2\nroot@beaglebone:~# ./write_actuators.php -d -T 2\nroot@beaglebone:~# ./monitor.php -d -T 2\n\n```", "```\n# tail -f /var/log/syslog\n\n```", "```\nroot@beaglebone:~# ./my_dump.sh status\nn   v\nmq2   203.875\nmq4   166.5\nmq5   52.5\nmq7   122.625\nalarm   1\n\n```", "```\nroot@beaglebone:~# ./my_dump.sh mq2_log | awk '{ print $2 \" \" $3 }' > mq2.log\n\n```", "```\nroot@beaglebone:~# cat mq2.log\n15:02:07 75.25\n15:02:10 74.25\n15:02:12 74.25\n15:02:14 74.375\n15:02:16 74.25\n...\n\n```", "```\n$ gnuplot mq2.plot\n\n```", "```\n# aptitude install gnuplot\n\n```", "```\nroot@beaglebone:~# killall read_sensors.php\nroot@beaglebone:~# killall write_actuators.php\nroot@beaglebone:~# killall monitor.php\n\n```"]