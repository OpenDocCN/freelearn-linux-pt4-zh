["```\n    pi@web1 ~ $ sudo apt-get install -y apache2\n\n    Reading package lists... Done\n    Building dependency tree       \n    Reading state information... Done\n    The following extra packages will be installed:\n      apache2-bin apache2-data apache2-utils libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap liblua5.1-0 ssl-cert\n    Suggested packages:\n      apache2-doc apache2-suexec-pristine apache2-suexec-custom openssl-blacklist\n    The following NEW packages will be installed:\n      apache2 apache2-bin apache2-data apache2-utils libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap liblua5.1-0 ssl-cert\n    0 upgraded, 10 newly installed, 0 to remove and 0 not upgraded.\n    ...\n    ```", "```\n    pi@web1 ~ $ cd /var/www/html\n\n    pi@web1 /var/www/html $ \n    ```", "```\n    pi@web1 /var/www/html $ sudo chown pi:www-data . *\n\n    pi@web1 /var/www/html $\n    ```", "```\n    pi@web1 /var/www/html $ echo '<html><body>web1</body></html>' > index.html \n\n    pi@web1 /var/www/html $\n    ```", "```\n    pi@web1 /var/www/html $ touch lb-check.txt \n\n    pi@web1 /var/www/html $\n    ```", "```\n    pi@lb1 ~ $ sudo apt-get install -y haproxy keepalived\n\n    Reading package lists... Done\n    Building dependency tree       \n    Reading state information... Done\n    The following extra packages will be installed:\n      iproute ipvsadm libpci3 libperl5.20 libsensors4 libsnmp-base libsnmp30\n    Suggested packages:\n      heartbeat ldirectord lm-sensors snmp-mibs-downloader vim-haproxy haproxy-doc\n    The following NEW packages will be installed:\n      iproute ipvsadm keepalived libpci3 libperl5.20 libsensors4 libsnmp-base\n      libsnmp30 haproxy\n    0 upgraded, 9 newly installed, 0 to remove and 0 not upgraded.\n\n    ...\n    ```", "```\n    pi@lb1 ~ $ sudo bash\n\n    root@lb1:/home/pi# cat <<EOD >>/etc/haproxy/haproxy.cfg\n\n    listen stats\n      bind 0.0.0.0:8880\n      stats enable\n      stats hide-version\n      stats uri     /\n      stats realm   HAProxy\\ Statistics\n      stats auth    pi:raspberry\n\n    listen webfarm 192.168.2.100:80\n      mode http\n      balance roundrobin\n      option httpclose\n      option httpchk HEAD /lb-check.txt HTTP/1.0\n      server web1 192.168.2.111:80 check\n      server web2 192.168.2.112:80 check\n\n    EOD\n\n    root@lb1:/home/pi# exit\n\n    pi@lb1 ~ $\n    ```", "```\n    pi@lb1 ~ $ sudo systemctl restart haproxy.service \n\n    pi@lb1 ~ $ \n    ```", "```\n    pi@lb1 ~ $ sudo bash\n\n    root@lb1:/home/pi# echo \"net.ipv4.ip_nonlocal_bind=1\" >>/etc/sysctl.conf\n\n    root@lb1:/home/pi# exit\n\n    pi@lb1 ~ $ \n    ```", "```\n    pi@lb1 ~ $ sudo sysctl –p\n\n    kernel.printk = 3 4 1 3\n    vm.swappiness = 1\n    vm.min_free_kbytes = 8192\n    net.ipv4.ip_nonlocal_bind = 1\n\n    pi@lb1 ~ $\n    ```", "```\n    pi@lb2 ~ $ sudo bash\n\n    root@lb2:/home/pi# cat <<EOD >/etc/keepalived/keepalived.conf\n\n    vrrp_script chk_haproxy \n    {\n            script \"killall -0 haproxy\"\n            interval 2\n            weight 2\n    }\n\n    vrrp_instance VI_1 \n    {\n            interface eth0\n            state MASTER\n            virtual_router_id 51\n\n            priority 101\n\n            virtual_ipaddress \n            {\n                192.168.2.100\n            }\n\n            track_script \n            {\n                chk_haproxy\n            }\n    }\n\n    EOD\n\n    root@lb2:/home/pi# exit\n\n    exit\n\n    pi@lb2 ~ $ \n    ```", "```\n    pi@lb1 ~ $ sudo systemctl restart keepalived.service \n\n    pi@lb1 ~ $ \n    ```", "```\n    golden-macbook:~ rick$ ssh pi@web1.local\n\n    Warning: Permanently added the RSA host key for IP address 'fe80::ba27:ebff:fec9:7ea9%en5' to the list of known hosts.\n    pi@web1.local's password: \n\n    The programs included with the Debian GNU/Linux system are free software;\n    the exact distribution terms for each program are described in the\n    individual files in /usr/share/doc/*/copyright.\n\n    Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\n    permitted by applicable law.\n    Last login: Sat Oct 24 14:34:34 2015 from fe80::12dd:b1ff:feee:dfc6%eth0\n\n    pi@web1 ~ $ sudo poweroff\n\n    Connection to web1.local closed by remote host.\n    Connection to web1.local closed.\n\n    golden-macbook:~ rick$ \n    ```", "```\n    pi@lb1 ~ $ ip addr show eth0\n\n    2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000\n        link/ether b8:27:eb:57:79:6d brd ff:ff:ff:ff:ff:ff\n        inet 192.168.2.101/24 brd 192.168.2.255 scope global eth0\n           valid_lft forever preferred_lft forever\n        inet 192.168.2.100/32 scope global eth0\n           valid_lft forever preferred_lft forever\n        inet6 fe80::9b32:5b03:f901:4777/64 scope link \n           valid_lft forever preferred_lft forever\n\n    pi@lb1 ~ $\n    ```", "```\n    pi@lb2 ~ $ ip addr show eth0\n\n    2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000\n        link/ether b8:27:eb:42:f6:a2 brd ff:ff:ff:ff:ff:ff\n        inet 192.168.2.102/24 brd 192.168.2.255 scope global eth0\n           valid_lft forever preferred_lft forever\n        inet6 fe80::9284:5714:5216:6cde/64 scope link \n           valid_lft forever preferred_lft forever\n\n    pi@lb2 ~ $ \n    ```", "```\n    pi@lb2 ~ $ ip addr sh eth0\n\n    2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000\n        link/ether b8:27:eb:42:f6:a2 brd ff:ff:ff:ff:ff:ff\n        inet 192.168.2.102/24 brd 192.168.2.255 scope global eth0\n           valid_lft forever preferred_lft forever\n        inet 192.168.2.100/32 scope global eth0\n           valid_lft forever preferred_lft forever\n        inet6 fe80::9284:5714:5216:6cde/64 scope link \n           valid_lft forever preferred_lft forever\n\n    pi@lb2 ~ $ \n    ```", "```\nhttp://web1.local/  http://192.168.2.111/\nhttp://web2.local/  http://192.168.2.112/\n```", "```\n  option cookie JSESSIONID prefix\n  server web1 192.168.2.111:80 check cookie web1\n  server web2 192.168.2.112:80 check cookie web2\n```", "```\n    pi@gluster1 ~ $ sudo apt-get install -y glusterfs-server\n\n    Reading package lists... Done\n    Building dependency tree       \n    Reading state information... Done\n    The following extra packages will be installed:\n      glusterfs-client glusterfs-common libaio1 libibverbs1 librdmacm1\n    The following NEW packages will be installed:\n      glusterfs-client glusterfs-common glusterfs-server libaio1 libibverbs1\n      librdmacm1\n    0 upgraded, 6 newly installed, 0 to remove and 0 not upgraded.\n    Need to get 7,604 kB of archives.\n    After this operation, 13.6 MB of additional disk space will be used.\n    …\n    ```", "```\n    pi@gluster1 ~ $ sudo gluster peer probe gluster2.local\n\n    peer probe: success. \n\n    pi@gluster1 ~ $ sudo gluster peer probe gluster3.local\n\n    peer probe: success. \n\n    pi@gluster1 ~ $ sudo gluster peer probe gluster4.local\n    peer probe: success. \n\n    pi@gluster1 ~ $ \n    ```", "```\n    pi@gluster1 ~ $ sudo gluster peer status\n\n    Number of Peers: 3\n\n    Hostname: gluster2.local\n    Uuid: 5b969ed1-01c2-406e-9710-944436c41c98\n    State: Peer in Cluster (Connected)\n\n    Hostname: gluster3.local\n    Uuid: 9a00c151-af6e-44c5-9d14-5607270b4038\n    State: Peer in Cluster (Connected)\n\n    Hostname: gluster4.local\n    Uuid: f036b1c4-7a51-49eb-aa63-81babb843b7e\n    State: Peer in Cluster (Connected)\n\n    pi@gluster1 ~ $ \n    ```", "```\n    pi@gluster2 ~ $ sudo gluster peer status\n\n    Number of Peers: 3\n\n    Hostname: 192.168.2.12\n    Uuid: 4147586b-a723-4068-b8cb-d417df6766d8\n    State: Peer in Cluster (Connected)\n\n    Hostname: gluster3.local\n    Uuid: 9a00c151-af6e-44c5-9d14-5607270b4038\n    State: Peer in Cluster (Connected)\n\n    Hostname: gluster4.local\n    Uuid: f036b1c4-7a51-49eb-aa63-81babb843b7e\n    State: Peer in Cluster (Connected)\n\n    pi@gluster2 ~ $ \n    ```", "```\n    pi@gluster2 ~ $ sudo gluster peer probe gluster1.local\n\n    peer probe: success. \n\n    pi@gluster2 ~ $ sudo gluster peer status\n\n    Number of Peers: 3\n\n    Hostname: gluster1.local\n    Uuid: 4147586b-a723-4068-b8cb-d417df6766d8\n    State: Peer in Cluster (Connected)\n\n    Hostname: gluster3.local\n    Uuid: 9a00c151-af6e-44c5-9d14-5607270b4038\n    State: Peer in Cluster (Connected)\n\n    Hostname: gluster4.local\n    Uuid: f036b1c4-7a51-49eb-aa63-81babb843b7e\n    State: Peer in Cluster (Connected)\n\n    pi@gluster2 ~ $ \n    ```", "```\n    pi@gluster1 ~ $ sudo gluster volume create vol0 stripe 2 replica 2 \n    gluster1.local:/srv/vol0 gluster2.local:/srv/vol0 gluster3.local:/srv/vol0 gluster4.local:/srv/vol0 force\n\n    volume create: vol0: success: please start the volume to access data\n\n    pi@gluster1 ~ $ \n    ```", "```\n    pi@gluster1 ~ $ sudo gluster volume start vol0\n\n    volume start: vol0: success\n\n    pi@gluster1 ~ $ \n    ```", "```\n    pi@gluster1 ~ $ sudo mount -t glusterfs gluster1.local:/vol0 /mnt\n    pi@gluster1 ~ $ \n    ```", "```\n    pi@gluster1 ~ $ ls -l /boot/kernel.img \n\n    -rwxr-xr-x 1 root root 4056224 Sep 23 16:10 /boot/kernel.img\n\n    pi@gluster1 ~ $ sha1sum /boot/kernel.img \n\n    d5e64d892b308b99e9c2c55deaa39c579a2335ec  /boot/kernel.img\n\n    pi@gluster1 ~ $ sudo cp /boot/kernel.img /mnt/\n\n    pi@gluster1 ~ $ ls -l /mnt/kernel.img \n\n    -rwxr-xr-x 1 root root 4056224 Oct 31 23:37 /mnt/kernel.img\n\n    pi@gluster1 ~ $ sha1sum /mnt/kernel.img \n\n    d5e64d892b308b99e9c2c55deaa39c579a2335ec  /mnt/kernel.img\n\n    pi@gluster1 ~ $ \n    ```", "```\n    pi@gluster1 ~ $ ls -la /srv/vol0/\n\n    total 2068\n    drwxr-xr-x 3 root root    4096 Oct 31 23:37 .\n    drwxr-xr-x 3 pi   pi      4096 Oct 31 23:12 ..\n    drw------- 7 root root    4096 Oct 31 23:37 .glusterfs\n    -rwxr-xr-x 2 root root 2090144 Oct 31 23:37 kernel.img\n\n    pi@gluster1 ~ $ \n    ```", "```\n    pi@gluster2 ~ $ ls -la /srv/vol0/\n\n    total 2068\n    drwxr-xr-x 3 root root    4096 Oct 31 23:37 .\n    drwxr-xr-x 3 pi   pi      4096 Oct 31 23:12 ..\n    drw------- 7 root root    4096 Oct 31 23:37 .glusterfs\n    -rwxr-xr-x 2 root root 2090144 Oct 31 23:37 kernel.img\n\n    pi@gluster2 ~ $ \n\n    [log in to peer gluster3]\n    pi@gluster3 ~ $ ls -la /srv/vol0/\n\n    total 1936\n    drwxr-xr-x 3 root root    4096 Oct 31 23:37 .\n    drwxr-xr-x 3 pi   pi      4096 Oct 31 23:12 ..\n    drw------- 7 root root    4096 Oct 31 23:37 .glusterfs\n    -rwxr-xr-x 2 root root 1966080 Oct 31 23:37 kernel.img\n    pi@gluster3 ~ $ \n\n    [log in to peer gluster4]\n    pi@gluster4 ~ $ ls -la /srv/vol0/\n\n    total 1936\n    drwxr-xr-x 3 root root    4096 Oct 31 23:37 .\n    drwxr-xr-x 3 pi   pi      4096 Oct 31 23:12 ..\n    drw------- 7 root root    4096 Oct 31 23:37 .glusterfs\n    -rwxr-xr-x 2 root root 1966080 Oct 31 23:37 kernel.img\n\n    pi@gluster4 ~ $ \n    ```", "```\n    pi@gluster1 ~ $ sudo gluster peer status\n\n    Number of Peers: 3\n\n    Hostname: gluster2.local\n    Uuid: 5b969ed1-01c2-406e-9710-944436c41c98\n    State: Peer in Cluster (Connected)\n\n    Hostname: gluster3.local\n    Uuid: 9a00c151-af6e-44c5-9d14-5607270b4038\n    State: Peer in Cluster (Connected)\n\n    Hostname: gluster4.local\n    Uuid: f036b1c4-7a51-49eb-aa63-81babb843b7e\n    State: Peer in Cluster (Disconnected)\n\n    pi@gluster1 ~ $ \n    ```", "```\n    pi@gluster1 ~ $ sha1sum /mnt/kernel.img \n\n    d5e64d892b308b99e9c2c55deaa39c579a2335ec  /mnt/kernel.img\n\n    pi@gluster1 ~ $ \n    ```", "```\n    pi@gluster1 ~ $ sudo cp /boot/kernel7.img /mnt/\n\n    pi@gluster1 ~ $ \n    ```", "```\n    pi@gluster1 ~ $ ls -l /boot/kernel7.img \n\n    -rwxr-xr-x 1 root root 4032544 Sep 23 16:10 /boot/kernel7.img\n\n    pi@gluster1 ~ $ sha1sum /boot/kernel7.img \n\n    8a2b1f065fc9459de79ba40e7cb791216f2f501b  /boot/kernel7.img\n\n    pi@gluster1 ~ $ ls -la /mnt\n\n    total 7912\n    drwxr-xr-x  3 root root    4096 Nov  1 00:47 .\n    drwxr-xr-x 21 root root    4096 Oct 31 20:29 ..\n    -rwxr-xr-x  1 root root 4032544 Nov  1 00:47 kernel7.img\n    -rwxr-xr-x  1 root root 4056224 Oct 31 23:37 kernel.img\n\n    pi@gluster1 ~ $ sha1sum /mnt/kernel7.img \n\n    8a2b1f065fc9459de79ba40e7cb791216f2f501b  /mnt/kernel7.img\n\n    pi@gluster1 ~ $ \n    ```", "```\n    pi@gluster1 ~ $ ls -la /srv/vol0/\n\n    total 4092\n    drwxr-xr-x 3 root root    4096 Nov  1 00:47 .\n    drwxr-xr-x 3 pi   pi      4096 Oct 31 23:12 ..\n    drw------- 8 root root    4096 Nov  1 00:47 .glusterfs\n    -rwxr-xr-x 2 root root 2066464 Nov  1 00:47 kernel7.img\n    -rwxr-xr-x 2 root root 2090144 Oct 31 23:37 kernel.img\n\n    pi@gluster1 ~ $ \n\n    ```", "```\n    pi@gluster2 ~ $ ls -la /srv/vol0/\n\n    total 4092\n    drwxr-xr-x 3 root root    4096 Nov  1 00:47 .\n    drwxr-xr-x 3 pi   pi      4096 Oct 31 23:12 ..\n    drw------- 8 root root    4096 Nov  1 00:47 .glusterfs\n    -rwxr-xr-x 2 root root 2066464 Nov  1 00:47 kernel7.img\n    -rwxr-xr-x 2 root root 2090144 Oct 31 23:37 kernel.img\n\n    pi@gluster2 ~ $ \n    ```", "```\n    pi@gluster3 ~ $ ls -la /srv/vol0/\n\n    total 3864\n    drwxr-xr-x 3 root root    4096 Nov  1 00:47 .\n    drwxr-xr-x 3 pi   pi      4096 Oct 31 23:12 ..\n    drw------- 8 root root    4096 Nov  1 00:47 .glusterfs\n    -rwxr-xr-x 2 root root 1966080 Nov  1 00:47 kernel7.img\n    -rwxr-xr-x 2 root root 1966080 Oct 31 23:37 kernel.img\n\n    pi@gluster3 ~ $ \n    ```", "```\n    pi@gluster4 ~ $ ls -la /srv/vol0/\n\n    total 1940\n    drwxr-xr-x 3 root root    4096 Nov  1 00:47 .\n    drwxr-xr-x 3 pi   pi      4096 Oct 31 23:12 ..\n    drw------- 8 root root    4096 Nov  1 00:50 .glusterfs\n    -rwxr-xr-x 2 root root       0 Nov  1 00:47 kernel7.img\n    -rwxr-xr-x 2 root root 1966080 Oct 31 23:37 kernel.img\n\n    pi@gluster4 ~ $ \n    ```", "```\n    pi@gluster4 ~ $ ls -la /srv/vol0/\n\n    total 3864\n    drwxr-xr-x 3 root root    4096 Nov  1 00:47 .\n    drwxr-xr-x 3 pi   pi      4096 Oct 31 23:12 ..\n    drw------- 8 root root    4096 Nov  1 00:50 .glusterfs\n    -rwxr-xr-x 2 root root 1966080 Nov  1 00:47 kernel7.img\n    -rwxr-xr-x 2 root root 1966080 Oct 31 23:37 kernel.img\n\n    pi@gluster4 ~ $ \n    ```", "```\npi@gluster1 ~ $ sudo -i bash\n\nroot@gluster1:~# echo \"net.ipv4.ip_nonlocal_bind=1\" >>/etc/sysctl.conf\n\nroot@gluster1:~# sysctl -p\n\nkernel.printk = 3 4 1 3\nvm.swappiness = 1\nvm.min_free_kbytes = 8192\nnet.ipv4.ip_nonlocal_bind = 1\n\nroot@gluster1:~# exit\n\nexit\n\npi@gluster1 ~ $ \n```", "```\npi@gluster1 ~ $ sudo apt-get install -y keepalived\n\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nThe following extra packages will be installed:\n  iproute ipvsadm libpci3 libperl5.20 libsensors4 libsnmp-base libsnmp30\nSuggested packages:\n  heartbeat ldirectord lm-sensors snmp-mibs-downloader\nThe following NEW packages will be installed:\n  iproute ipvsadm keepalived libpci3 libperl5.20 libsensors4 libsnmp-base libsnmp30\n0 upgraded, 8 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 3,902 kB of archives.\nAfter this operation, 7,093 kB of additional disk space will be used.\n\n...\n```", "```\npi@gluster1 ~ $ sudo bash\n\nroot@gluster1:/home/pi# cat <<EOD >/etc/keepalived/keepalived.conf\n\nvrrp_script chk_glusterd \n{\n        script \"killall -0 glusterd\"\n        interval 2\n        weight 2\n}\n\nvrrp_instance VI_1 \n{\n        interface eth0\n        state MASTER\n        virtual_router_id 13\n\n        priority 100\n\n        virtual_ipaddress \n        {\n            192.168.2.100\n        }\n\n        track_script \n        {\n            chk_glusterd\n        }\n}\n\nEOD\n\nroot@gluster1:/home/pi# exit\n\nexit\n\npi@gluster1 ~ $ \n```", "```\npi@gluster1 ~ $ sudo systemctl restart keepalived.service \n\npi@gluster1 ~ $ \n```", "```\npi@gluster4 ~ $ sudo mount -t glusterfs 192.168.2.100:/vol0 /mnt\n\npi@gluster4 ~ $ ls -l /mnt\ntotal 7900\n-rwxr-xr-x 1 root root 4032544 Nov  1 00:47 kernel7.img\n-rwxr-xr-x 1 root root 4056224 Oct 31 23:37 kernel.img\n\npi@gluster4 ~ $ \n```", "```\n    pi@spark-master ~ $ ssh-keygen\n\n    Generating public/private rsa key pair.\n    Enter file in which to save the key (/home/pi/.ssh/id_rsa): \n\n    Enter passphrase (empty for no passphrase): \n\n    Enter same passphrase again: \n\n    Your identification has been saved in /home/pi/.ssh/id_rsa.\n    Your public key has been saved in /home/pi/.ssh/id_rsa.pub.\n    The key fingerprint is:\n    29:0e:95:61:a6:e6:30:8f:23:66:cd:68:d3:c4:0c:8e pi@spark-master\n\n    The key's randomart image is:\n    +---[RSA 2048]----+\n    | .    +          |\n    |o +  + o         |\n    |E.o+o o          |\n    |  *B .   .       |\n    |.*o++ . S        |\n    |+... o .         |\n    |      .          |\n    |                 |\n    |                 |\n    +-----------------+\n\n    pi@spark-master ~ $ \n    ```", "```\n    pi@spark-master ~ $ ssh-copy-id pi@spark-slave-a.local\n\n    The authenticity of host 'spark-slave-a.local (192.168.2.6)' can't be established.\n    ECDSA key fingerprint is e9:55:ff:6c:69:be:5d:8f:80:de:b2:d9:85:eb:1b:90.\n\n    Are you sure you want to continue connecting (yes/no)? yes\n\n    /usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed\n    /usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys\n\n    pi@spark-slave-a.local's password: \n\n    Number of key(s) added: 1\n    ```", "```\n    pi@spark-master ~ $ ssh spark-slave-a.local\n\n    The programs included with the Debian GNU/Linux system are free software;\n    the exact distribution terms for each program are described in the\n    individual files in /usr/share/doc/*/copyright.\n\n    Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\n    permitted by applicable law.\n    Last login: Mon Nov  2 21:29:28 2015 from 192.168.2.1\n\n    pi@spark-slave-a ~ $ \n    ```", "```\n    pi@spark-master ~ $ wget http://www.eu.apache.org/dist/spark/spark-1.5.1/spark-1.5.1-bin-hadoop2.6.tgz\n\n    --2015-11-05 17:41:01--  http://www.eu.apache.org/dist/spark/spark-1.5.1/spark-1.5.1-bin-hadoop2.6.tgz\n    Resolving www.eu.apache.org (www.eu.apache.org)... 88.198.26.2, 2a01:4f8:130:2192::2\n    Connecting to www.eu.apache.org (www.eu.apache.org)|88.198.26.2|:80... connected.\n    HTTP request sent, awaiting response... 200 OK\n    Length: 280901736 (268M) [application/x-gzip]\n    Saving to: 'spark-1.5.1-bin-hadoop2.6.tgz'\n\n    spark-1.5.1-bin-hadoop2.6.tgz   100%[============>] 267.89M   726KB/s   in 4m 38s \n\n    2015-11-05 17:45:39 (987 KB/s) - 'spark-1.5.1-bin-hadoop2.6.tgz' saved [280901736/280901736]\n\n    pi@spark-master ~ $ \n    ```", "```\n    pi@spark-master ~ $ scp spark-1.5.1-bin-hadoop2.6.tgz spark-slave-a.local:.\n\n    spark-1.5.1-bin-hadoop2.6.tgz                       100%  268MB   4.4MB/s   01:01    \n\n    pi@spark-master ~ $ scp spark-1.5.1-bin-hadoop2.6.tgz spark-slave-b.local:.\n\n    spark-1.5.1-bin-hadoop2.6.tgz                       100%  268MB   4.0MB/s   01:07    \n\n    pi@spark-master ~ $ scp spark-1.5.1-bin-hadoop2.6.tgz spark-slave-c.local:.\n\n    spark-1.5.1-bin-hadoop2.6.tgz                       100%  268MB   5.2MB/s   00:47    \n\n    pi@spark-master ~ $ \n    ```", "```\n    pi@spark-master ~ $ tar xvfz spark-1.5.1-bin-hadoop2.6.tgz \n\n    spark-1.5.1-bin-hadoop2.6/\n    spark-1.5.1-bin-hadoop2.6/NOTICE\n    spark-1.5.1-bin-hadoop2.6/CHANGES.txt\n    spark-1.5.1-bin-hadoop2.6/python/\n    spark-1.5.1-bin-hadoop2.6/python/run-tests.py\n    spark-1.5.1-bin-hadoop2.6/python/test_support/\n    spark-1.5.1-bin-hadoop2.6/python/test_support/userlibrary.py\n    spark-1.5.1-bin-hadoop2.6/python/test_support/userlib-0.1.zip\n    spark-1.5.1-bin-hadoop2.6/python/test_support/sql/\n    spark-1.5.1-bin-hadoop2.6/python/test_support/sql/people.json\n    spark-1.5.1-bin-hadoop2.6/python/test_support/sql/orc_partitioned/\n    spark-1.5.1-bin-hadoop2.6/python/test_support/sql/orc_partitioned/b=1/\n    spark-1.5.1-bin-hadoop2.6/python/test_support/sql/orc_partitioned/b=1/c=1/\n\n    ...\n    ```", "```\n    pi@spark-master ~ $ sudo mv spark-1.5.1-bin-hadoop2.6 /opt/spark\n\n    pi@spark-master ~ $ \n    ```", "```\n    pi@spark-master ~/ $ cat <<EOD >/opt/spark/conf/slaves\n\n    spark-slave-a.local\n    spark-slave-b.local\n    spark-slave-c.local\n\n    EOD\n\n    pi@spark-master ~/ $ \n    ```", "```\n    pi@spark-master ~ $ echo \"SPARK_MASTER_IP=`hostname -I`\" >/opt/spark/conf/spark-env.sh\n    ```", "```\n    pi@spark-master ~ $ scp /opt/spark/conf/spark-env.sh spark-slave-a:/opt/spark/conf/spark-env.sh\n\n    spark-env.sh                                  100%   30     0.0KB/s   00:00    \n\n    pi@spark-master ~ $ scp /opt/spark/conf/spark-env.sh spark-slave-b.local:/opt/spark/conf/spark-env.sh\n\n    spark-env.sh                                  100%   30     0.0KB/s   00:00    \n\n    pi@spark-master ~ $ scp /opt/spark/conf/spark-env.sh spark-slave-c.local:/opt/spark/conf/spark-env.sh\n\n    spark-env.sh                                  100%   30     0.0KB/s   00:00    \n\n    pi@spark-master ~ $ \n    ```", "```\n    pi@spark-master ~ $ echo \"SPARK_DRIVER_MEMORY=512m\" >>/opt/spark/conf/spark-env.sh\n\n    pi@spark-master ~ $ \n    ```", "```\n    pi@spark-master ~ $ echo \"SPARK_LOCAL_IP=$(hostname -I)\" >>/opt/spark/conf/spark-env.sh\n\n    pi@spark-master ~ $ \n    ```", "```\n    pi@spark-master ~ $ sed 's/rootCategory=INFO/rootCategory=WARN/' \n    spark/conf/log4j.properties.template >/opt/spark/conf/log4j.properties\n\n    pi@spark-master ~ $ \n    ```", "```\n    pi@spark-master ~ $ cat <<EOD >pi.py\n\n    from operator import add\n    from random   import random\n    from time     import clock\n\n    MSG  = \"Python estimated Pi at %f in %f seconds\"\n\n    n = 1000000\n\n    def f(_):\n        x = random() * 2 - 1\n        y = random() * 2 - 1\n        return 1 if x ** 2 + y ** 2 < 1 else 0\n\n    def main():\n        st = clock()\n        tries = map( f, range( 1, n + 1 ) )\n        count = reduce( add, tries )\n        et = clock()\n        print( MSG % ( 4.0 * count / n, et - st ) )    \n\n    if __name__ == \"__main__\":\n        main()\n\n    EOD\n\n    pi@spark-master ~ $ \n    ```", "```\n    pi@spark-master ~ $ python pi.py \n\n    Python esitmated PI at 3.141444 in 13.430613 seconds\n\n    pi@spark-master ~ $\n    ```", "```\n    pi@spark-master ~ $ cat <<EOD >pi-spark.py\n\n    from __future__ import print_function\n\n    from operator   import add\n    from random     import random\n    from sys        import argv\n    from time       import clock\n\n    from pyspark    import SparkConf, SparkContext\n\n    APP_NAME = \"MonteCarloPi\"\n    MSG      = \"Spark estimated Pi at %f in %f seconds using %i partitions\"\n\n    master     =      argv[ 1 ]   if len( argv ) > 1 else \"local\"\n    partitions = int( argv[ 2 ] ) if len( argv ) > 2 else 2\n\n    n = 1000000\n\n    def f(_):\n        x = random() * 2 - 1\n        y = random() * 2 - 1\n        return 1 if x ** 2 + y ** 2 < 1 else 0\n\n    def main(sc):\n        st    = clock()\n        tries = sc.parallelize( range( 1, n + 1 ), partitions ).map( f )\n        count = tries.reduce( add )\n        et    = clock()\n        print( MSG % ( 4.0 * count / n, et - st, partitions ) )    \n\n    if __name__ == \"__main__\":\n        conf = SparkConf()\n        conf.setMaster( master )\n        conf.setAppName( APP_NAME )\n        sc = SparkContext( conf = conf )\n        main( sc )\n        sc.stop()\n\n    EOD\n\n    pi@spark-master ~ $ \n    ```", "```\n    pi@spark-master ~ $ /opt/spark/sbin/start-all.sh\n\n    starting org.apache.spark.deploy.master.Master, logging to /home/pi/spark/sbin/../logs/spark-pi-org.apache.spark.deploy.master.Master-1-spark-master.out\n    spark-slave-c.local: starting org.apache.spark.deploy.worker.Worker, logging to /home/pi/spark/sbin/../logs/spark-pi-org.apache.spark.deploy.worker.Worker-1-spark-slave-c.out\n    spark-slave-b.local: starting org.apache.spark.deploy.worker.Worker, logging to /home/pi/spark/sbin/../logs/spark-pi-org.apache.spark.deploy.worker.Worker-1-spark-slave-b.out\n    spark-slave-a.local: starting org.apache.spark.deploy.worker.Worker, logging to /home/pi/spark/sbin/../logs/spark-pi-org.apache.spark.deploy.worker.Worker-1-spark-slave-a.out\n\n    pi@spark-master ~ $ \n    ```", "```\n    pi@spark-master ~ $ export SPARK_MASTER_URL=\"http://$(hostname –I | tr –d [:space:]):7077\"\n\n    pi@spark-master ~ $ export PATH=/opt/spark/bin:$PATH\n\n    pi@spark-master ~ $ spark-submit pi-spark.py $SPARK_MASTER_URL 24\n\n    15/11/04 21:39:38 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n    15/11/04 21:39:51 WARN MetricsSystem: Using default name DAGScheduler for source because spark.app.id is not set.\n    [Stage 0:>                                                         (0 + 0) / 24]15/11/04 21:40:00 WARN SizeEstimator: Failed to check whether UseCompressedOops is set; assuming yes\n    15/11/04 21:40:05 WARN TaskSetManager: Stage 0 contains a task of very large size (122 KB). The maximum recommended task size is 100 KB.\n\n    Spark esitmated Pi at 3.143368 in 0.720023 seconds using 24 partitions          \n\n    pi@spark-master ~ $ \n    ```"]