<html><head></head><body><div class="chapter" title="Chapter&#xA0;5.&#xA0;Adding a Passive Infrared Motion Sensor"><div class="titlepage"><div><div><h1 class="title"><a id="ch05"/>Chapter 5. Adding a Passive Infrared Motion Sensor</h1></div></div></div><p>In the previous chapter, we started adding basic but commonly used magnetic switch sensors to our home security system and reading their status to protect doors and windows from intrusion. We also looked at how we can divide our home into zones, such as by individual rooms, so that we can group our sensors into logical circuits, which can then be identified as part of these zones rather than as individual sensor inputs.</p><p>We will now add <a id="id176" class="indexterm"/>
<span class="strong"><strong>motion sensors</strong></span> to our system in the form of <span class="strong"><strong>Passive Infra-Red</strong></span> (<span class="strong"><strong>PIR</strong></span>) detectors. These<a id="id177" class="indexterm"/> detectors come in a variety of types, and you may have seen them lurking in the corners of rooms. Fundamentally, they all work in the same way, which is detecting the presence of body heat within a certain range; so, they are commonly used to trigger alarm systems when somebody (or something, such as a pet cat) enters a room.</p><div class="mediaobject"><img src="graphics/B04579_05_01.jpg" alt="Adding a Passive Infrared Motion Sensor"/><div class="caption"><p>A typical PIR motion sensor (type GardScan QX-PIR)</p></div></div><p>In this chapter, we will:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Learn how PIR detectors work and how they are set up</li><li class="listitem" style="list-style-type: disc">Connect a wired PIR detector to an input on our port expander</li><li class="listitem" style="list-style-type: disc">Start using a 12V power supply instead of 3.3V in our zone circuits</li><li class="listitem" style="list-style-type: disc">Learn how to interface 12V circuits safely with our GPIO ports</li><li class="listitem" style="list-style-type: disc">Learn how to connect a 433 MHz wireless receiver to our Raspberry Pi</li><li class="listitem" style="list-style-type: disc">Connect a remote-controlled switch to our system using 433 MHz radio signals</li><li class="listitem" style="list-style-type: disc">Write a script that will detect and log the state of our detector inputs when it changes</li></ul></div><div class="section" title="Prerequisites"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec31"/>Prerequisites</h1></div></div></div><p>You'll need the following <a id="id178" class="indexterm"/>parts for this chapter (apart from the<a id="id179" class="indexterm"/> components used in the previous chapter):</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">A passive infrared detector, the wired type (this is available from any DIY store)</li><li class="listitem" style="list-style-type: disc">A 4N25/4N35 opto-isolator</li><li class="listitem" style="list-style-type: disc">A 1N4148 diode</li><li class="listitem" style="list-style-type: disc">A 1-Kohm resistor</li><li class="listitem" style="list-style-type: disc">A 10-Kohm resistor</li><li class="listitem" style="list-style-type: disc">A 433 MHz receiver module and remote transmitter (this is optional)</li><li class="listitem" style="list-style-type: disc">A 12V power supply</li><li class="listitem" style="list-style-type: disc">A hook-up wire</li><li class="listitem" style="list-style-type: disc">A 6 core alarm wire</li></ul></div></div></div>
<div class="section" title="Passive infrared sensors explained"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec32"/>Passive infrared sensors explained</h1></div></div></div><p>You might not realize it, but all <a id="id180" class="indexterm"/>objects radiate heat energy (including your coffee table); it's just that you can't see it because heat consists essentially of infrared waves, which are invisible to the human eye (exactly the same as your TV remote control). These waves can, however, be detected by electronic devices designed for such a purpose, such as the infrared receiver in your TV that detects the energy emitted by your remote control when the buttons are pressed.</p><p>You probably do realize, however, that living things such as us, our cat, and the mouse under the floorboards generate quite a bit of heat. Passive infrared motion sensors used in security systems and automatic lights are designed to detect this level of heat. The term <span class="emphasis"><em>passive</em></span> is used because the sensors themselves do not radiate any energy for detection purposes—instead, they just detect the infrared radiation emitted by objects. This is notably different from devices such as ultrasonic sensors and radars, which rely on detecting reflections from objects of the pulses of energy that the sensors send out.</p><p>PIR sensors need to be a <a id="id181" class="indexterm"/>little smart because they effectively have to cope with constantly varying temperatures in the room. They settle on the background temperature of the room they are in, such as that of a wall or floor that they point to. When an object, such as one of us or our cat, moves between the detector unit and the background object, the temperature in front of the sensor rises to the body temperature quickly, and this in turn triggers the system.</p><div class="section" title="Setting up your PIR sensor"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec42"/>Setting up your PIR sensor</h2></div></div></div><p>PIR sensor devices<a id="id182" class="indexterm"/> come in many formats, including different materials in sensor chips and the lens in front of the sensor view window that can widely affect the range, field of view, and sensitivity of the device. Therefore, your best guide to setting up a sensor will usually be in that little bit of instruction paper that comes with it.</p><p>However, regardless of the type<a id="id183" class="indexterm"/> of PIR sensor you have, here are some general guidelines when considering where you mount your sensor in order to avoid false triggers:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Ensure that the device is mounted on a solid foundation and not affected by vibration</li><li class="listitem" style="list-style-type: disc">Never mount it in a location where direct or reflected sunlight can be picked up by the lens</li><li class="listitem" style="list-style-type: disc">Similarly, never mount the device facing or above heat sources</li><li class="listitem" style="list-style-type: disc">Don't mount the unit in draughty locations as this will affect its background temperature calibration</li></ul></div><p>The location of the unit also depends on the area you want to protect. You may want to detect people entering your living room from the hallway, so your coverage area could be defined as being from the corner of the room where the device is mounted to the living room door.</p><p>PIR sensors usually offer a fixed field of view (for example 90 or 110 degrees) but have a varying range, depending on the angle at which they are pointing down and the height at which they are located.</p><p>In my system, I will use a Gardscan QX PIR Detector for my wired units, which is a pretty good, low-cost unit available from RS Components (the order code is 493-1289). This unit has a field view of 110 degrees and a range of up to 12 meters, depending on the<a id="id184" class="indexterm"/> configurable down angle that it's mounted at. The coverage patterns for this particular unit, as taken from its datasheet, are shown in the following figure. Note that from these patterns not every part of the area in front of the device is covered, which is possibly not quite what you expect. This is why positioning the units in accordance with the device's datasheet is so important.</p><div class="mediaobject"><img src="graphics/B04579_05_02.jpg" alt="Setting up your PIR sensor"/><div class="caption"><p>GardScan QX-PIR coverage pattern for its 110 degree field view (top/plan view)</p></div></div><p>Here is a diagram of the side view as well:</p><div class="mediaobject"><img src="graphics/B04579_05_03.jpg" alt="Setting up your PIR sensor"/><div class="caption"><p>GardScan QX-PIR coverage pattern depending on the angle configured plus a "look-down" window (side view)</p></div></div></div></div>
<div class="section" title="Give me power (again)"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec33"/>Give me power (again)</h1></div></div></div><p>Before we can go on to connect off-the-shelf security devices to our alarm system, we need to have a power supply that's compatible with such devices. Typically, alarm circuits and their devices use a 12V supply with enough current to drive all the devices and the alarm control system itself.</p><p>Fortunately, this is not too<a id="id185" class="indexterm"/> difficult to sort out, but it is something we need to do now; otherwise, we won't be able to connect and power our PIR sensors. The easiest way to do this is to buy a high-quality 12V mains adapter that provides a nice regulated supply. These are readily available from online stores or electronics suppliers. Alternatively, you can build your own 12V regulated supply and add it to the power supply strip board that we built in <a class="link" href="ch03.html" title="Chapter 3. Extending Your Pi to Connect More Things">Chapter 3</a>, <span class="emphasis"><em>Extending Your Pi to Connect More Things</em></span>.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note21"/>Note</h3><p>Another option is to use battery-powered PIR sensors, which means that you wouldn't have to power the unit from the security system's panel itself; however, it obviously also means that the batteries would need replacing from time to time. The wireless PIR we will look at later in this chapter is battery-powered.</p></div></div><p>We'll take a look at handling higher-voltage sensor circuits later on in this chapter so that we don't blow up our home security control circuits or the Raspberry Pi.</p></div>
<div class="section" title="Connecting our PIR motion sensor"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec34"/>Connecting our PIR motion sensor</h1></div></div></div><p>Commercially <a id="id186" class="indexterm"/>available alarm systems connect to their devices using a 4 core or 6 core alarm cable. In the previous chapter, we used a 4 core cable because we were connecting a switch that needed two wires plus an antitamper loop, which needed another two wires.</p><p>For our PIR sensor circuit, we need the same four wires; however, we also need to send power to the device from the control panel, so an additional two wires are needed for this—hence the<a id="id187" class="indexterm"/> requirement for a 6 core cable.</p><p>The following diagram shows the wiring connections for my GardScan PIR sensor, but this is in fact typical for most off-the-shelf security system devices:</p><div class="mediaobject"><img src="graphics/B04579_05_04.jpg" alt="Connecting our PIR motion sensor"/><div class="caption"><p>Typical connections for security system sensor devices</p></div></div><p>Similar to the magnetic contact sensors that we looked at in the previous chapter, devices can come with either a<a id="id188" class="indexterm"/>
<a id="id189" class="indexterm"/> <span class="strong"><strong>normally closed</strong></span> (<span class="strong"><strong>NC</strong></span>) or a <span class="strong"><strong>normally open</strong></span> (<span class="strong"><strong>NO</strong></span>) alarm. This particular device has a normally closed output, which<a id="id190" class="indexterm"/> means that the alarm circuit will be broken when the detector is triggered. This is the preferred configuration for our sensor devices as this means that they can be wired in a series within each of our zones.</p><p>We can now add this sensor device into the alarm circuit that we started putting together in the previous chapter. The following diagram shows the circuit for all our sensors so far wired into a single zone:</p><div class="mediaobject"><img src="graphics/B04579_05_05.jpg" alt="Connecting our PIR motion sensor"/><div class="caption"><p>A schematic for our zone with all three sensors plus tamper loop in the same zone</p></div></div><p>Up until now, we used the +3.3V power supply to pass through the sensor switches and alarm circuit. In fact, this is not a good idea, and we've been doing this only for convenience to test out our GPIO inputs.</p><p>In reality, and in <a id="id191" class="indexterm"/>our final system, we really should use a 12V supply to pass through the sensor and antitamper circuits. This is because a higher voltage travels better through the system and is less susceptible to noise, which could prevent triggering or cause false triggering. This also makes it compatible with commercially available systems and accessories.</p></div>
<div class="section" title="12V alarm zone circuits"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec35"/>12V alarm zone circuits</h1></div></div></div><p>Making our zone circuits use 12V instead of 3.3V is as simple as changing the power supply, and in fact all of sensors we used so far can handle 12V power passed through their switches.</p><p>However, if we were to <a id="id192" class="indexterm"/>present the 12V circuit to the inputs on our GPIO port on the Raspberry Pi or our port expander, we would expect to see some magic smoke and smell something burning. So, we need to add some circuitry that allows us to use 12V alarm circuits as well as protect our control board inputs.</p><div class="section" title="Alarm circuit protection"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec43"/>Alarm circuit protection</h2></div></div></div><p>An effective way to<a id="id193" class="indexterm"/> protect our zone inputs from 12V alarm inputs is to use a little low-cost device called an opto-isolator. As the name suggests, this isolates the alarm circuit from the digital inputs of the control board using light.</p><p>Inside an opto-isolator (also called an opto-coupler) is an infrared LED, which transmits light to a photo-transistor when a current is passed through it, thus switching it on. The circuits are electrically isolated as they are controlled only by light.</p><div class="mediaobject"><img src="graphics/B04579_05_06.jpg" alt="Alarm circuit protection"/></div><p>The 4N25 (shown in the preceding image) and 4N35 are low-cost, 6-pin opto-coupler devices, and most manufactures tend to use the pin layout shown in the following diagram:</p><div class="mediaobject"><img src="graphics/B04579_05_07.jpg" alt="Alarm circuit protection"/></div><p>Now that we know<a id="id194" class="indexterm"/> how we will couple our 12V alarm circuit with the inputs on our control panel, let's build the entire circuit, which we'll use for each of the zones that we add to our system.</p><div class="mediaobject"><img src="graphics/B04579_05_08.jpg" alt="Alarm circuit protection"/><div class="caption"><p>A 12V zone circuit optically isolated from the GPIO input</p></div></div></div><div class="section" title="How it works"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec44"/>How it works</h2></div></div></div><p>At this time, we're <a id="id195" class="indexterm"/>assuming that our zone circuits are normally closed—that is, the alarm triggers when the circuit is broken.</p><p>The 12V supply is passed through the LED of the opto-isolator with the current being limited by the 1-Kohm resistor. The 1N4148 diode, in reverse, is there to protect the opto-coupler from reverse-polarity voltages.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note22"/>Note</h3><p>The 1-Kohm resistor is calculated from the fact that we have a 12V supply and a forward voltage drop (Vf) of 1.2V across the LED with a current (If) of about 10 mA.</p></div></div><p>While the alarm<a id="id196" class="indexterm"/> circuit is closed, the current flows, and the LED is on. This keeps the transistor on and the input to the GPIO port is held low. If the alarm circuit is broken, the opto-coupler LED switches off, and this in turn switches off the transistor. The GPIO input is then pulled high by the 10-Kohm resistor.</p><p>This is quite simple but effective, eh?</p><p>The other advantage of this circuit is that it should fail positive—that is, if the opto-coupler should fail for any reason, the alarm input on the GPIO port should be pulled high, thus triggering it rather than it just failing silently.</p></div></div>
<div class="section" title="Wireless PIR motion sensors"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec36"/>Wireless PIR motion sensors</h1></div></div></div><p>
<span class="strong"><strong>Wireless motion sensors</strong></span> are now commonly available at a low cost, allowing them to be installed practically anywhere without any wiring from the alarm control panel. Some of them still require an external power supply, but many operate on batteries. The alarm system must <a id="id197" class="indexterm"/>contain a wireless receiver compatible with the wireless sensor.</p><p>In this section, we'll take a look at how we can use our Raspberry Pi-based security system with wireless receiver devices.</p><div class="section" title="433-MHz wireless alarm systems"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec45"/>433-MHz wireless alarm systems</h2></div></div></div><p>Wireless systems use an<a id="id198" class="indexterm"/> unlicensed radio frequency to communicate between the various components of an alarm system. In the UK, the two most popular frequencies used are <span class="strong"><strong>433 MHz</strong></span> and <span class="strong"><strong>868 MHz</strong></span>. While the more recent systems now use the 868-MHz frequency, 433 MHz is still in widespread use as it has <a id="id199" class="indexterm"/>a slightly longer range than an 868-MHz system. However, the 433-MHz band is also used by many other devices, which makes it congested, whereas 868 MHz is generally used only for alarm systems.</p><p>While wireless security systems can be convenient, it's important to understand the advantages and disadvantages of using wireless rather than wired systems.</p><p>The advantages are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Their ease and<a id="id200" class="indexterm"/> speed of installation</li><li class="listitem" style="list-style-type: disc">Their ease of removal, which means that you can take them anywhere with you</li><li class="listitem" style="list-style-type: disc">Expanding the system in the future can be easier, with most systems automatically detecting new units</li></ul></div><p>The disadvantages are as follows:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">They are more<a id="id201" class="indexterm"/> expensive than wired systems, sometimes three or four times the cost</li><li class="listitem" style="list-style-type: disc">They are not as secure as wired systems and cannot achieve a security grading greater than two in accordance with European Standard BSEN 50131 (although, this grade is suitable for domestic properties)</li><li class="listitem" style="list-style-type: disc">Wireless devices need to have their batteries replaced at regular intervals</li><li class="listitem" style="list-style-type: disc">Wireless systems are less reliable and susceptible to interference and even radio jamming</li></ul></div></div><div class="section" title="Connecting a 433-MHz receiver"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec46"/>Connecting a 433-MHz receiver</h2></div></div></div><p>In the past, it was<a id="id202" class="indexterm"/> possible to roll out your own 433-MHz receiver for the Raspberry Pi using an inexpensive receiver, such as the XY-MV-5V module along with the <span class="strong"><strong>433-Util</strong></span> library that was put together by a guy called Mark Wolfe, a contributor on GitHub. Essentially, he gathered together code relating to 433-MHz<a id="id203" class="indexterm"/> communications and put it all into this library. Originally developed for Arduino, this has now been ported to the Raspberry Pi.</p><p>You can then use a readily available transmitter, such as a key fob or any other 433-MHz transmitter, and take a look at the incoming code as you press each button on the transmitter.</p><div class="mediaobject"><img src="graphics/B04579_05_09.jpg" alt="Connecting a 433-MHz receiver"/><div class="caption"><p>A XY-MK-5V Generic 433-MHz receiver module</p></div></div><p>Finding a suitable <a id="id204" class="indexterm"/>433-MHz receiver should be easy as websites such as Amazon and eBay are awash with them, and they cost as little as a couple of pounds.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note23"/>Note</h3><p>Note that the<a id="id205" class="indexterm"/> 433-MHz band is a free for many types of devices. As such, there are various different types of receiver, and although they may all state that they are 433-MHz receivers, they can operate using AM or FM, and some only detect certain types of data. Some, such as the Quasar QAM range, may also require special decoder chips in order to read transmitted data and may only work with paired transmitters.</p></div></div><p>The receiver module can pick up signals from a key fob remote control, such as the one shown in the following image (this can be picked up from the home security section of any local DIY store), which gets an output as a series of square waves. These square waves are then decoded by the 433-Util software.</p><div class="mediaobject"><img src="graphics/B04579_05_10.jpg" alt="Connecting a 433-MHz receiver"/><div class="caption"><p>A Novar/Blyss 433MHz wireless remote control</p></div></div><p>I liked this particular remote<a id="id206" class="indexterm"/> control because I thought it would be good <a id="id207" class="indexterm"/>as the <span class="strong"><strong>arm</strong></span> and <span class="strong"><strong>disarm</strong></span> device for our home<a id="id208" class="indexterm"/> security system. I will talk<a id="id209" class="indexterm"/> about arming and disarming in <a class="link" href="ch08.html" title="Chapter 8. A Miscellany of Things">Chapter 8</a>, <span class="emphasis"><em>A Miscellany of Things</em></span>, where we will look at the ways to achieve this.</p><div class="section" title="The alternative approach (because we have no choice)"><div class="titlepage"><div><div><h3 class="title"><a id="ch05lvl3sec10"/>The alternative approach (because we have no choice)</h3></div></div></div><p>I started off the <a id="id210" class="indexterm"/>previous section with the words "In the past…". This is because in recent times, I've not been able to get the 433-Util software working with receiver modules, which used to work in the past). I'm not entirely sure why this is so; however, I can only guess that because the software uses "bit banging" to decode incoming data signals, the timing is no longer correct, perhaps because later Raspberry Pi boards are faster and therefore mess up the routines.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note24"/>Note</h3><p>
<span class="strong"><strong>What is bit banging?</strong></span>
</p><p>Bit banging is a way <a id="id211" class="indexterm"/>of using software for serial communication instead of dedicated hardware. The software is responsible for all the parameters of the signal, including timing, levels, and synchronization. Bit banging can be seen as a bit of a hack, but it does allow the implementation of different protocols at a very low cost without any hardware changes.</p></div></div><p>So, in order to make our lives easier (and actually make the device work on all flavors of Pi), we will resort to using a dedicated receiver module that you can pick up for less than £5 on Amazon<a id="id212" class="indexterm"/> and doesn't require all this software bit banging nonsense. You'll notice from the following image that it still uses a similar XY-MK-5V radio receiver; it's just that the host board decodes the signals for us and switches a relay on or off in response to a command from the remote control.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note25"/>Note</h3><p>If you're still interested in<a id="id213" class="indexterm"/> the 433-Util software project and want to try and roll out your own receiver, you can find the original project at <a class="ulink" href="https://github.com/ninjablocks/433Utils">https://github.com/ninjablocks/433Utils</a>.</p></div></div><div class="mediaobject"><img src="graphics/B04579_05_11.jpg" alt="The alternative approach (because we have no choice)"/><div class="caption"><p>A Hielec transmitter fob and receiver module, available on Amazon</p></div></div><p>The fact that it just switches a relay on and off means that we can easily implement this in our home security system because it simply acts as a switch. When you press the button on the transmitter, the relay switches the contacts on; press it again, and the relay switches off. The screw terminals on the board provide us with access to the relay terminals.</p></div></div><div class="section" title="The receiver wiring diagram"><div class="titlepage"><div><div><h2 class="title"><a id="ch05lvl2sec47"/>The receiver wiring diagram</h2></div></div></div><p>As we are just dealing <a id="id214" class="indexterm"/>with a switch input, we can use the <a id="id215" class="indexterm"/>same circuit as we did with the zone circuit earlier but connected to our arm/disarm GPIO input, which we'll determine in <a class="link" href="ch09.html" title="Chapter 9. Putting It All Together">Chapter 9</a>, <span class="emphasis"><em>Putting It All Together</em></span>.</p><div class="mediaobject"><img src="graphics/B04579_05_12.jpg" alt="The receiver wiring diagram"/><div class="caption"><p>Circuit to interface the receiver module with a GPIO input</p></div></div><p>When the receiver module switches the relay on, this will complete the 12V circuit through the opto-coupler's LED by turning it on. This will make the transistor pull the GPIO pin down to ground, giving it a low input.</p><p>You can use this type of circuit for any paired receiver for the wireless security devices that you want to use in your system.</p></div></div>
<div class="section" title="Logging detection data"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec37"/>Logging detection data</h1></div></div></div><p>With any system, it's useful to<a id="id216" class="indexterm"/> be able to log data when something happens. We can do this with our detectors too by writing to a log file every time a detector in a zone is triggered. This way, you can keep a log of every time someone enters a room, which you can review at a later date even if the system isn't armed. You can also keep a log of when the system is armed and disarmed.</p><p>Here's a simple script that shows you how to do this whenever an event happens on our zones connected to the GPIO inputs:</p><div class="informalexample"><pre class="programlisting">#!/bin/bash

#set up the I2C expansion port
sudo i2cset –y 1 0x20 0x00 0xFF

#reset status
CURR_STATE="0x00"
LAST_STATE="0x00"

#path to the log file
LOG_FILE="/etc/pi-alarm/zones.log"

# loop forever
while true
do
  # read the gpio inputs
  CURR_STATE=$(sudo i2cget –y 1 0x20 0x12)
   
   #check if state has changed
   if [ "$CURR_STATE" != "$LAST_STATE" ]
  then
    #write change to log file
      TIMESTAMP=`date "+%Y-%m-%d %H:%M:%S"`
     echo "$TIMESTAMP Zone Status Changed from $LAST_STATE to $CURR_STATE" &gt; $LOG_FILE
  fi
  $LAST_STATE = $CURR_STATE
  sleep 1
done</pre></div><p>The preceding example is<a id="id217" class="indexterm"/> quite simple, but it can be made more useful by actually writing out the zone or zones that change by decoding the hex value that's returned by the <code class="literal">i2cget</code> command in the constituent zones.</p><div class="note" title="Note" style=""><div class="inner"><h3 class="title"><a id="note26"/>Note</h3><p>In <a class="link" href="ch09.html" title="Chapter 9. Putting It All Together">Chapter 9</a>, <span class="emphasis"><em>Putting It All Together</em></span>, you'll learn how this is done in order to display the individual status of each zone on a web page. You can use exactly the same technique to do this for your log files and, in fact, output to the log file by expanding on the same script.</p></div></div></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch05lvl1sec38"/>Summary</h1></div></div></div><p>In this chapter, we started off by learning how passive infrared sensors are used to detect motion to protect a predefined coverage area from intrusion. We then looked at connecting these to the inputs on our port expander via opto-couplers as we will now use 12V to power the alarm zone circuits.</p><p>We then looked at wireless alarm systems that operate on the open 433-MHz band, which is commonly used for security devices. After exploring the possibility of using the legacy 433-Util bit-banging software on our Raspberry Pi to decode the signals transmitted by devices using a simple receiver, we opted to use a paired receiver device that will interface easily with our alarm circuit inputs.</p><p>Finally, we created a simple script that will log the changes in our alarm inputs to a text file, which can later be expanded to log exactly what's going on with the system in detail.</p></div></body></html>