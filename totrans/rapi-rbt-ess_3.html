<html><head></head><body><div class="chapter" title="Chapter&#xA0;3.&#xA0;Motion for the Biped"><div class="titlepage"><div><div><h1 class="title"><a id="ch03"/>Chapter 3. Motion for the Biped</h1></div></div></div><p>Now that you've got your biped all up and running, you can start developing interesting ways to make it move. In this chapter, you'll learn</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">How to adjust the positions of your servos for the Tyrannosaurus Rex pose</li><li class="listitem" style="list-style-type: disc">The basic walking gait for your robot</li><li class="listitem" style="list-style-type: disc">The basic turn for your robot</li></ul></div><p>Before you <a id="id118" class="indexterm"/>begin, however, it will be best if you create a harness for your biped. Your robot is going to be inherently unstable with only two legs, and, as you experiment, you're going to make some mistakes. With only two legs, these mistakes can, and probably will, result in your robot toppling over, which can damage the robot.</p><p>If you have an electronics board vise, or an "Extra Hands" device, they can be useful for this purpose. Here is a picture of how to use this device to create a harness:</p><div class="mediaobject"><img src="graphics/B04591_03_01.jpg" alt="Motion for the Biped"/></div><p>If you <a id="id119" class="indexterm"/>don't, you can easily create this sort of overhead support using a PVC pipe or wood. Really, just something to keep your biped from crashing over during your experimentation.</p><div class="section" title="A basic stable pose"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec21"/>A basic stable pose</h1></div></div></div><p>Now that your biped is built and you know how to program the servos using Python, you can <a id="id120" class="indexterm"/>experiment with some basic poses. You'll first create a program<a id="id121" class="indexterm"/> that allows you to set individual servos so that you can experiment. Here is the program:</p><div class="mediaobject"><img src="graphics/B04591_03_02.jpg" alt="A basic stable pose"/></div><p>This code includes the Python <code class="literal">setAngle</code> function from <a class="link" href="ch02.html" title="Chapter 2. Building the Biped">Chapter 2</a>, <span class="emphasis"><em>Building the Biped</em></span>. The specifics<a id="id122" class="indexterm"/> were taken from the <a class="ulink" href="http://www.pololu.com">www.pololu.com</a> website, but it simply allows you to set a specific servo to a specific angle.</p><p>The next part of the code sets all of the servos to their center location. The final piece of the code, the <code class="literal">while 1:</code> code set, simply asks the user for a servo and an angle, and then sends the command to the servo controller.</p><p>Once the <a id="id123" class="indexterm"/>program is run, you should see your biped standing<a id="id124" class="indexterm"/> straight up. If not, you may need to center your servos by adjusting the position of the horns. This is a useful pose, but there are others that are more stable. As an excellent first example, you can change the pose to be more like a <a id="id125" class="indexterm"/>Tyrannosaurus Rex pose, with knees pointing back. Here are the basic servo positions:</p><div class="informaltable"><table border="1"><colgroup><col style="text-align: left"/><col style="text-align: left"/></colgroup><thead><tr><th style="text-align: left" valign="bottom">
<p>Servo</p>
</th><th style="text-align: left" valign="bottom">
<p>Angle</p>
</th></tr></thead><tbody><tr><td style="text-align: left" valign="top">
<p>1</p>
</td><td style="text-align: left" valign="top">
<p>60</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>2</p>
</td><td style="text-align: left" valign="top">
<p>60</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>3</p>
</td><td style="text-align: left" valign="top">
<p>60</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>6</p>
</td><td style="text-align: left" valign="top">
<p>120</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>7</p>
</td><td style="text-align: left" valign="top">
<p>120</p>
</td></tr><tr><td style="text-align: left" valign="top">
<p>8</p>
</td><td style="text-align: left" valign="top">
<p>120</p>
</td></tr></tbody></table></div><p>The robot pose should look like this:</p><div class="mediaobject"><img src="graphics/B04591_03_03.jpg" alt="A basic stable pose"/></div><p>You can<a id="id126" class="indexterm"/> use these angles to achieve this pose. However, this will leave <a id="id127" class="indexterm"/>you with some limited movement, as your servos will be toward the end of their ability to move in one direction. As this is going to be the starting pose for your robot, to achieve maximum flexibility, you'll want to center the servos at this position. To do this, run the default, <code class="literal">robot.py</code>, to set the legs to the center position. Now, adjust the servo horns to achieve this pose while the values of the servos are at a 90 degree angle.</p><p>It should look like this:</p><div class="mediaobject"><img src="graphics/B04591_03_04.jpg" alt="A basic stable pose"/></div><p>Now that<a id="id128" class="indexterm"/> you have a stable base to work from, you can start programming <a id="id129" class="indexterm"/>a simple walking motion.</p></div></div>
<div class="section" title="A basic walking motion"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec22"/>A basic walking motion</h1></div></div></div><p>Your<a id="id130" class="indexterm"/> robot is poised to walk, however, you first have to get a leg off the ground. Of course, that is easy enough; if you simply lift the leg by changing the angle of the knee joint, your leg can get off the ground. You may also want to change the angle of the front to back ankle; this will allow you to lift the leg without raising it quite as high.</p><p>However, you'll have<a id="id131" class="indexterm"/> a problem if you change just these two servos; as you lift the leg, your robot will fall over. This is due to a simple principle called the center of gravity. When your robot is at rest, your center of gravity looks like this:</p><div class="mediaobject"><img src="graphics/B04591_03_05.jpg" alt="A basic walking motion"/></div><p>It is <a id="id132" class="indexterm"/>clear that if you lift a leg, the robot will fall over in the direction of the leg that has been lifted. What you need to do is to shift the center of gravity over the leg that will be left on the ground using the ankle servo that can tilt the robot left and right, so that it ends up like this:</p><div class="mediaobject"><img src="graphics/B04591_03_06.jpg" alt="A basic walking motion"/></div><p>You'll then<a id="id133" class="indexterm"/> want to set your servos to lift the left leg. Here is <a id="id134" class="indexterm"/>a side view of these servo settings:</p><div class="mediaobject"><img src="graphics/B04591_03_07.jpg" alt="A basic walking motion"/></div><p>Now, it's<a id="id135" class="indexterm"/> time for some Python code to make this happen. You'll start with your <code class="literal">robot.py</code> code and will add the following lines to a function called <code class="literal">liftLeftLeg</code>:</p><div class="mediaobject"><img src="graphics/B04591_03_08.jpg" alt="A basic walking motion"/></div><p>This will <a id="id136" class="indexterm"/>tip the robot onto its right leg, and then lift the left leg, like this:</p><div class="mediaobject"><img src="graphics/B04591_03_09.jpg" alt="A basic walking motion"/></div><p>Now, it is <a id="id137" class="indexterm"/>fairly easy to step forward. Just move the hip joint on the left leg forward, and then move the ankle joint on the right leg to tip the entire<a id="id138" class="indexterm"/> robot forward. Here is the diagram and servo settings:</p><div class="mediaobject"><img src="graphics/B04591_03_10.jpg" alt="A basic walking motion"/></div><p>Here is<a id="id139" class="indexterm"/> the Python code:</p><div class="mediaobject"><img src="graphics/B04591_03_11.jpg" alt="A basic walking motion"/></div><p>Here is a picture of the robot:</p><div class="mediaobject"><img src="graphics/B04591_03_12.jpg" alt="A basic walking motion"/></div><p>This is <a id="id140" class="indexterm"/>the first stage of a walking gait. So, let's detail all the motions you'll need in order to walk your robot forward. Here are the side view diagrams of the different states:</p><div class="mediaobject"><img src="graphics/B04591_03_13.jpg" alt="A basic walking motion"/></div><p>These <a id="id141" class="indexterm"/>are the pictures of the robot in each of the different states:</p><div class="mediaobject"><img src="graphics/B04591_03_14.jpg" alt="A basic walking motion"/></div><p>Here <a id="id142" class="indexterm"/>is the Python code for each of the functions for the different states:</p><div class="mediaobject"><img src="graphics/B04591_03_15.jpg" alt="A basic walking motion"/></div><p>You'll <a id="id143" class="indexterm"/>notice that each function has a number of different servo control statements; these must be performed in this order to get the desired result.</p><p>Here is the Python code to sequence the functions for two steps: one with the left leg, and the other with the right leg:</p><div class="mediaobject"><img src="graphics/B04591_03_16.jpg" alt="A basic walking motion"/></div><p>This is<a id="id144" class="indexterm"/> a very simple gait; it's not particularly elegant. You can see that each state is made up of many individual servo moves. You can certainly add more servo moves to make it smoother and more refined. Your exact servo angle settings will certainly vary from these; you'll need to do some experimentation to get your biped's legs positioned correctly.</p><p>Now that you can walk, you will also need to teach your robot how to turn.</p></div>
<div class="section" title="A basic turn for the robot"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec23"/>A basic turn for the robot</h1></div></div></div><p>Your robot<a id="id145" class="indexterm"/> can walk forward, but you'll also want your robot to be able to turn. Your turning is limited to the amount you can turn the hip of your robot, which is around 20 degrees for this robot. So, to perform a full 90 degree turn, you'll need to take the turn in several steps. The big difference here is that when you return to the standing state, you do not want to reset your hip rotation servos to 90 degrees. Here are the diagrams, including several that are rear view, for a turn:</p><div class="mediaobject"><img src="graphics/B04591_03_17.jpg" alt="A basic turn for the robot"/></div><p>Here is<a id="id146" class="indexterm"/> the Python code for a basic turning operation:</p><div class="mediaobject"><img src="graphics/B04591_03_18.jpg" alt="A basic turn for the robot"/></div><p>And <a id="id147" class="indexterm"/>here is the Python code to chain these basic states together to step a turn:</p><div class="mediaobject"><img src="graphics/B04591_03_19.jpg" alt="A basic turn for the robot"/></div><p>Now your<a id="id148" class="indexterm"/> robot can walk and turn! Obviously, your robot could walk backward by reversing the order of servo control statements in each of the functions. There are many more types of motions you can program with your robot, following the planning method outlined in this chapter.</p></div>
<div class="section" title="Summary"><div class="titlepage"><div><div><h1 class="title"><a id="ch03lvl1sec24"/>Summary</h1></div></div></div><p>Now, your robot is mobile. The next step is to add some sensors so that your robot can avoid, or find, objects in its path.</p></div></body></html>