<html><head></head><body><div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Software Package Management</h1>
                </header>
            
            <article>
                
<p class="CDPAlignLeft CDPAlign"><span><span><span>To keep your system up to date and install or remove applications as you choose, Linux supports multiple methods.</span> <span>One method is to use the source code of the application for compilation and installation on your machine. Another one is using pre-built programs or groups of programs known as <strong>packages</strong>, which are ready for installation on a particular distribution.</span></span></span></p>
<p><span><span><span>In this chapter, you will learn how to manage</span> <span>these pre-built s</span><span>oftware packages using RPM and the YUM utility. You will also learn how to add or remove</span> <span>o</span><span>fficial and third-party repositories in CentOS 7.</span></span></span></p>
<p><span><span>In this chapter, we will cover the following topics:</span></span></p>
<ul>
<li><span><span>Managing applications using RPM</span></span></li>
<li><span><span>Managing applications using YUM</span></span></li>
<li><span><span>Managing official and third-party repositories</span></span></li>
<li><span><span>Creating custom repositories</span></span></li>
</ul>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Managing applications using RPM</h1>
                </header>
            
            <article>
                
<p><span><span><strong>RPM</strong> (short for <strong>Red Hat Package Manager</strong>) is an open source package management utility developed by Red Hat for RPM-based systems such as RHEL, CentOS, and Fedora. Using the RPM utility, the user can install, remove, update, query, and verify application packages built in the <kbd>.rpm</kbd> format. You can download <kbd>.rpm</kbd> packages from repositories containing application packages in <kbd>.rpm</kbd> format.</span></span></p>
<p><span><span>An RPM package may or may not require any resource prerequisites. If a rpm package requires any resource, such as a shared library or another package to be available on system before proceeding ahead with that rpm package installation, then those resources are known as dependencies of that package. A package management utility such as YUM automatically resolves the dependencies when a package is installed, while the RPM utility lacks this feature. Using the RPM utility, you can find out a package dependency, but RPM cannot automatically install them. The RPM utility is also known as a low-level package management tool.</span></span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Anatomy of a RPM</h1>
                </header>
            
            <article>
                
<p><span><span>The naming of each</span></span> RPM <span><span>package file follows a standard, as given here:</span></span></p>
<pre><strong>name-version-release.architecture.rpm</strong></pre>
<p class="mce-root">The naming convention used for RPM packages is shown in the following diagram:</p>
<div class="CDPAlignCenter CDPAlign"><img src="Images/14a4c9ae-4b6c-4bfe-b9a5-0825a9f2be8c.png" width="526" height="153"/></div>
<p>The following table describes the breakdown of various fields used in the naming of RPM packages,<span> </span><span>and their descriptions</span><span>:</span></p>
<div>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p class="CDPAlignCenter CDPAlign"><span><strong><span><span>Field</span></span></strong></span></p>
</td>
<td>
<p class="CDPAlignCenter CDPAlign"><span><strong><span><span>Description</span></span></strong></span></p>
</td>
</tr>
<tr>
<td>
<p><span><span>Name</span></span></p>
</td>
<td>
<p><span><span>It consists of a string describing the contents of the application.</span></span></p>
</td>
</tr>
<tr>
<td>
<p><span><span>Version</span></span></p>
</td>
<td>
<p><span><span>It is the version number of the application.</span></span></p>
</td>
</tr>
<tr>
<td>
<p><span><span>Release</span></span></p>
</td>
<td>
<p><span><span>It is the release number of the package set by the packager.</span></span></p>
</td>
</tr>
<tr>
<td>
<p><span><span>Arch</span></span></p>
</td>
<td>
<p><span><span>It describes the architecture of the package. It says for what architecture the package was built: 32-bit, 64-bit, or both:</span></span></p>
<ul>
<li><kbd>i386</kbd>: 32-bit</li>
<li><kbd>x86_64</kbd>: 64-bit</li>
<li><kbd>noarch</kbd>: Not specific to any architecture, can be used on both 32-bit and 64-bit</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div>
<p> </p>
<p><span><span>Using RPM packages for installing an application has the added advantage of manageability (tracking package files, updating the package, removing the package). Almost all software provided by CentOS is in the form of</span></span> RPM <span><span>packages.</span></span></p>
</div>
<div class="packt_tip">
<p><span><span>An RPM package primarily consists of three components: metadata, files, and scripts. Metadata consists of package name, version, release, builder, date, dependencies, and so on. Files consist of archives of files contained in the package to be installed. The scripts file inside an RPM package is executed when the package is installed, removed, or updated.</span></span></p>
</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">What happens when you update an application</h1>
                </header>
            
            <article>
                
<p><span><span>When an application is updated, typically, the older version of the package is removed from the system. The existing configuration files are generally retained, but retaining, overwriting, or writing a new configuration file with a different name is decided while creating the package.</span></span></p>
<p><span><span>In a typical scenario, only one version of an application is installed at a time. However, in certain </span></span><span><span>cases, multiple versions of the same application exist, such as in kernel packages or in a multi-architecture environment where the same package</span></span><span> </span><span>is installed</span><span> for different architectures (32-bit and 64-bit)</span><span>. A kernel package is designed so that multiple versions can be kept in <span>the </span>system. If a new installation of <span>the </span>kernel fails, the older kernel is always available as a standby. Always remember that <span>the </span>kernel package is never updated using <span>the </span>update option of <span>the </span></span>RPM <span>utility. It is always installed and not updated.</span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using RPM to query options with RPM packages</h1>
                </header>
            
            <article>
                
<p><span><span>There are several options that are used in combination with query options. Some popular ones are as follows:</span></span></p>
<ul>
<li><span><span>List all the packages installed in the system:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ rpm -qa</span></span></strong></pre>
<ul>
<li><span><span>Find a specific package installed in the system by piping the output of the previous command to the <kbd>grep</kbd> command, as shown here:</span></span></li>
</ul>
<p class="CDPAlignCenter CDPAlign"><img src="Images/85839048-0beb-4a96-9155-afe92f81925f.png" style="width:26.25em;height:10.33em;" width="560" height="221"/></p>
<ul>
<li><span>Identify the package that installed a file on the system, as shown here:</span></li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="Images/a57bfb1f-7be4-4926-96e7-80a44b59fdcf.png" style="width:29.00em;height:3.00em;" width="637" height="65"/></div>
<div>
<ul>
<li><span><span>Display the list of files installed by an RPM package, as shown here:</span></span></li>
</ul>
</div>
<div class="CDPAlignCenter CDPAlign"><img src="Images/7ef018a6-f8c7-4d19-b151-8ee8a0970b4e.png" style="width:19.08em;height:8.42em;" width="406" height="179"/></div>
<div class="CDPAlignCenter CDPAlign">
<ul>
<li class="CDPAlignLeft CDPAlign"><span><span>Display the recently installed RPM package, as shown here:</span></span></li>
</ul>
<img src="Images/666d967a-d6a6-4423-9f08-c390aec06d47.png" style="width:39.08em;height:4.83em;" width="889" height="110"/></div>
<ul>
<li><span>Display information on the installed package, as shown here:</span></li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="Images/c6878191-6639-45e4-aa36-8c38c9b15e35.png" style="width:44.67em;height:23.08em;" width="930" height="481"/></div>
<ul>
<li><span>Display the documentation of the file installed by a package, as shown here:</span></li>
</ul>
<div class="CDPAlignCenter CDPAlign"><img src="Images/7af55afd-6654-4030-8d96-4350c949b32c.png" style="width:22.33em;height:10.42em;" width="480" height="223"/></div>
<div>
<ul>
<li><span><span>Display the documentation installed by package, name as shown here:</span></span></li>
</ul>
</div>
<div class="CDPAlignCenter CDPAlign"><img src="Images/e453eeb6-d809-445d-91d7-25daa639c132.png" style="width:20.08em;height:14.08em;" width="414" height="289"/></div>
<div>
<ul>
<li><span><span>Display the configuration file installed by the package, as shown here:</span></span></li>
</ul>
</div>
<div class="CDPAlignCenter CDPAlign"><img src="Images/2f3813e5-33eb-4e41-bc17-f68feca32dc0.png" style="width:21.33em;height:7.33em;" width="451" height="155"/></div>
<div>
<ul>
<li><span><span>Display the list of change information of a specific package, as shown here:</span></span></li>
</ul>
<p class="CDPAlignCenter CDPAlign"><img src="Images/3b5046eb-cf4e-4016-acbc-40d2e20c08da.png" style="width:40.33em;height:18.75em;" width="863" height="401"/></p>
</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Verifying RPM package signatures</h1>
                </header>
            
            <article>
                
<div>
<p>The RPM <span><span>packages are generally signed by the organization, community, or individual that packages them using the GPG private key. Before installing a package on our system, we should always verify the signature of the package with its public GPG key to ascertain its integrity. The following command is used to check the signature of RPM packages:</span></span></p>
<pre><strong><span><span>$ rpm --checksig &lt;packagename.rpm&gt;</span></span></strong></pre></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using RPM to install packages</h1>
                </header>
            
            <article>
                
<div>
<p><span>To install a package, the <kbd>-i</kbd> option is used. It is generally clubbed with the <kbd>-v</kbd> and <kbd>-h</kbd> options for verbosity and to display the progress of the installation using </span><span>hash symbols, as shown in the following screenshot:</span></p>
</div>
<div class="CDPAlignCenter CDPAlign"><img src="Images/42e2b1b1-3cca-40a8-a53f-826ae2bff25f.png" style="width:35.58em;height:6.92em;" width="804" height="156"/></div>
<p><span>The disadvantage of using this method is that RPM is unable to resolve the dependency automatically, and hence it will exit installation in-between if it encounters any unmet dependencies while installing the package.</span></p>
<p>We can use RPM to install a package forcefully as well, by disabling the dependency check during the installation process using the <kbd>--nodeps</kbd> option. This method is not recommended as a program may fail to work after, that is, if it is installed without resolving its dependencies.</p>
<p>An example of forceful installation of a package using the RPM utility is shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/dfc24aba-3969-494b-a4dd-0edc3b3d3191.png" width="646" height="219"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using rpm to remove packages</h1>
                </header>
            
            <article>
                
<p><span><span>We can remove a package by specifying the package name with the <kbd>-e</kbd> option, as shown here:</span></span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/44d0ea80-b191-4c71-b4b7-0356edce8f4d.png" style="width:21.25em;height:3.92em;" width="476" height="88"/></p>
<p><span><span>We can also remove a package without doing the dependency check. It will forcefully remove the package from the system and any application, depending on that particular package may fail to run. The following diagram shows how to remove a package without checking its dependencies:</span></span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/68b95824-0f88-4d5a-a414-f469788c58f9.png" width="725" height="223"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using RPM to upgrade packages</h1>
                </header>
            
            <article>
                
<p><span><span>Most of the time, installed packages are automatically upgraded using a high-level package manager such as YUM. However, if a package is not available for upgrade through the central repository, it can be downloaded from the internet and upgraded manually, as shown here:</span></span></p>
<pre><strong><span><span>$ rpm -U &lt;file.rpm&gt;<br/></span></span></strong></pre>
<p>We can use either the preceding command or the following command to upgrade a package manually:</p>
<pre><span><span><strong>$ rpm -Uvh &lt;file.rpm&gt;</strong><br/></span></span></pre>
<p>An example of the <kbd>rpm</kbd> command to upgrade a package is shown here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/3c847701-9ffb-4bea-b4df-c0b7dd71675e.png" style="width:38.00em;height:7.33em;" width="795" height="153"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using RPM to verify packages</h1>
                </header>
            
            <article>
                
<p><span>Verify the installed files of the package <span><span>against</span></span> the files available in the RPM file, as shown here:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/a202d399-7ce3-4c06-a831-0fa1c5c335c3.png" style="width:45.33em;height:9.00em;" width="982" height="195"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Importing a RPM GPG key</h1>
                </header>
            
            <article>
                
<p><span><span>To verify package integrity before installation, the repository or package author's public GPG key must be imported into our system. The following screenshot shows the command that's used to import the CentOS 7 GPG key:</span></span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/006dd2d3-587b-47d4-8d59-adb8ba3f8d7c.png" style="width:33.25em;height:3.00em;" width="721" height="65"/></p>
<p><span><span>Display all the imported RPM repositories' GPG keys on the system, as shown in the following screenshot:</span></span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/747c14eb-d8ac-4f0c-85a5-327bf70e8346.png" style="width:20.50em;height:5.00em;" width="450" height="110"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Managing applications using YUM</h1>
                </header>
            
            <article>
                
<p><span><span><strong>YUM</strong> (short for <strong>Yellowdog Updater Modified</strong>) is an open source tool that was developed by Red Hat Inc for RPM-based systems. It is a high-level package management tool that's used for easily installing, removing, updating, or searching software packages on systems or in network repositories. It allows us to use a CentOS base and third-party repositories that are created on remote or local servers to install individual packages or groups of packages automatically, after resolving their dependencies.</span></span></p>
<div class="packt_infobox">In upcoming versions, YUM is being replaced by DNF (which is compatible in its command set). YUM has already been replaced with DNF (Dandified YUM) as the main package manager in Fedora.</div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Understanding the YUM package manager</h1>
                </header>
            
            <article>
                
<p><span><span>The main configuration file of YUM</span></span><span><span> is <kbd>/etc/yum.conf</kbd>, and the main directory, which stores the repository configuration file, is <kbd>/etc/yum.repos.d/</kbd>. The repository configuration file has got a specific syntax, and it should end with a <kbd>.repo</kbd> extension in the <kbd>/etc/yum.repos.d/</kbd> directory.</span></span></p>
<p><span><span>The repository configuration file contains the URL of the repository, the <kbd>repo id</kbd>, <kbd>repo name</kbd>, instructions to use GPG for checking package signatures, and an option to enable or disable the repository.</span></span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using the YUM command line</h1>
                </header>
            
            <article>
                
<p>In this section, we will learn about package management by using YUM on <span>the </span>Linux command line.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Finding an application using yum</h1>
                </header>
            
            <article>
                
<p><span><span>We can search for a package name using YUM in multiple ways. The search option with a keyword (package name) lists the package in which the specified keyword is present in the package name itself and in the summary field of packages also. The following example are used to illustrate the working <kbd>yum search</kbd> command:</span></span></p>
<ul>
<li><span><span>Search for a package by name only using <kbd>yum search</kbd> command, as shown here:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum search &lt;package_name&gt;</span></span></strong></pre>
<p style="padding-left: 60px">An example of yum search command to find the package named <kbd>whois</kbd> is shown here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/e2761b6f-2cb3-455c-932d-0163197fc31e.png" style="width:37.50em;height:11.17em;" width="805" height="240"/></p>
<ul>
<li><span><span>Find the package if the search string is available in name, summary, and description fields, as shown here:</span></span></li>
</ul>
<p class="CDPAlignCenter CDPAlign"><img src="Images/d1ab168e-4a3b-4613-83e7-23816cebf407.png" style="width:39.75em;height:10.75em;" width="794" height="215"/></p>
<ul>
<li><span><span>Search for a package by package description using the <kbd>yum whatprovides</kbd> command, as shown here:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum whatprovides "*/package_name"</span></span></strong></pre>
<p style="padding-left: 60px">An example of the <kbd>yum whatprovides</kbd> command to find the package name <kbd>lynx</kbd> is shown here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/cee7a719-4d84-4fca-b660-377bdad504d8.png" style="width:30.08em;height:11.08em;" width="669" height="246"/></p>
<ul>
<li><span><span>Identify the package that installed a file (absolute path name) on the system using the <kbd>yum provides</kbd> command, as shown here:</span></span></li>
</ul>
<p class="CDPAlignCenter CDPAlign"><img src="Images/ce00c151-1b7d-4e02-ac15-899e49cd8db9.png" style="width:38.00em;height:11.33em;" width="816" height="243"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Installing applications using YUM</h1>
                </header>
            
            <article>
                
<p><span><span>We can install a new package using the YUM utility. The YUM utility will resolve all the dependencies of the package and prompt for confirmation before installation.</span></span></p>
<p><strong><span><span>The following are examples to illustrate the usage of the yum command for package installation:</span></span></strong></p>
<ul>
<li>Use the following command to install an application using YUM:</li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum install firefox</span></span></strong></pre>
<ul>
<li><span><span>Install an application without prompting for confirmation by using the <kbd>-y</kbd> option:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum -y install firefox</span></span></strong></pre>
<ul>
<li><span><span>Install a package without verifying its signature:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum install firefox --nogpgcheck</span></span></strong></pre>
<ul>
<li><span><span>Install a downloaded RPM file from a local directory. It automatically downloads the dependencies of the package from the configured repositories:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum localinstall &lt;path_to_rpm_file&gt;</span></span></strong></pre>
<p>An example of the <kbd>yum localinstall</kbd> command is shown here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/33d4c78f-c158-4bb0-9708-3575c764c5d9.png" style="width:53.00em;height:23.00em;" width="1060" height="460"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Displaying packages and their information with YUM</h1>
                </header>
            
            <article>
                
<p><span><span>The following are examples of displaying detailed information of a package using the <kbd>yum</kbd> command:</span></span></p>
<ul>
<li>The usage of the <kbd>yum info</kbd> command is shown here:</li>
</ul>
<p class="CDPAlignCenter CDPAlign"><img src="Images/cde369be-6945-4d7b-88c6-387d13ee637c.png" style="width:40.17em;height:19.17em;" width="878" height="419"/></p>
<ul>
<li><span><span>The usage of the <kbd>yum list</kbd> command to display the installed packages list is shown in the command line here:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum list installed</span></span></strong></pre>
<ul>
<li><span><span>The usage of the <kbd>yum list</kbd> command to display the installed and available package information using its name is shown in the following screenshot:</span></span></li>
</ul>
<p class="CDPAlignCenter CDPAlign"><img src="Images/0fac6c4e-d248-4dae-9bc9-a5e876ba4803.png" style="width:46.25em;height:16.83em;" width="704" height="256"/></p>
<ul>
<li><span><span>The <kbd>yum list</kbd> command can also be used to display all available packages in repositories from the YUM database, as shown in command line here:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum list</span></span></strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Removing applications using yum</h1>
                </header>
            
            <article>
                
<p>The following are examples to illustrate the usage of the <kbd>yum command</kbd> for removing an application package:</p>
<ul>
<li><span><span>The <kbd>yum</kbd> command can be used to remove a package with all its dependencies, as shown in the command line here:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum remove firefox</span></span></strong></pre>
<ul>
<li><span><span>The</span></span> <kbd>yum</kbd> command <span><span>can also be used with the <kbd>-y</kbd> option to remove an application without prompting for confirmation, as shown in the command line here:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum -y remove firefox</span></span></strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Updating applications and the system using yum</h1>
                </header>
            
            <article>
                
<p><span><span>We can see whether there are any updates available for the packages installed on our system by executing the command line, as shown here:</span></span></p>
<pre><strong><span><span>$ yum check-update</span></span></strong></pre>
<p><span><span>We can also update an installed application and its dependencies to the latest stable version using the <kbd>yum</kbd> command. In this process, YUM preserves the existing configuration files, except in cases where it is mandatory to update the configuration file for working on an updated version of the application, as shown in command line here:</span></span></p>
<pre><strong><span><span>$ yum update httpd</span></span></strong></pre>
<p><span><span>We can update our system and installed application together in a single command by not specifying any application name to the <kbd>yum update</kbd> command, as shown in command line here:</span></span></p>
<pre><span><span><strong>$ yum update</strong></span></span></pre>
<p><span><span>While updating the system or application, all applications except the kernel are updated immediately at runtime. The latest kernel version comes into effect only after rebooting the system. We can use the <kbd>uname -r</kbd> command to view the running kernel version.</span></span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Managing groups of applications using YUM</h1>
                </header>
            
            <article>
                
<p><span><span>In CentOS 7, related packages that serve a common purpose are grouped under one category. We can also install a particular group containing related packages, in place of installing them one by one, as shown in the following examples:</span></span></p>
<ol>
<li><span><span>Display all the package groups by using the <kbd>yum grouplist</kbd> command, as shown here:</span></span></li>
</ol>
<pre style="padding-left: 60px"><strong><span><span>$ yum grouplist</span></span></strong></pre>
<ol start="2">
<li><span><span>Install a specific package group of related packages by using the <kbd>yum groupinstall</kbd> command, as shown here:</span></span></li>
</ol>
<pre style="padding-left: 60px"><strong><span><span>$ yum groupinstall "Development Tools"</span></span></strong></pre>
<ol start="3">
<li><span><span>Update packages in an existing installed package group by using the <kbd>yum groupupdate</kbd> command, as shown here:</span></span></li>
</ol>
<pre style="padding-left: 60px"><strong><span><span>$ yum groupupdate "Administration Tools"</span></span></strong></pre>
<ol start="4">
<li><span><span>We can also remove an installed group of packages from the system by using the <kbd>yum groupremove</kbd> command, as shown here:</span></span></li>
</ol>
<pre style="padding-left: 60px"><strong><span><span>$ yum groupremove "Development Tools"</span></span></strong></pre>
<p><span><span>We can display information about mandatory, default, and optional packages that are installed or not installed with the group in the system by using the <kbd>yum groupinfo</kbd> command. The output of this command displays the list of packages in that group, with each package name displayed with a symbol in front of them. The following table lists the symbol and its corresponding meaning, as follows:</span></span></p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p class="CDPAlignCenter CDPAlign"><span><strong><span><span>Symbol</span></span></strong></span></p>
</td>
<td>
<p class="CDPAlignCenter CDPAlign"><span><strong><span><span>Meaning</span></span></strong></span></p>
</td>
</tr>
<tr>
<td>
<p><kbd>=</kbd></p>
</td>
<td>
<p><span><span>Package was installed as part of the group and is presently installed on the system.</span></span></p>
</td>
</tr>
<tr>
<td>
<p><kbd>+</kbd></p>
</td>
<td>
<p>Package is not installed on <span>the </span>system. It will get installed if <span>the </span>group is installed or updated.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>-</kbd></p>
</td>
<td>
<p>Package is not installed on <span>the </span>system and it will not get installed if <span>the </span>group is installed or updated.</p>
</td>
</tr>
<tr>
<td>
<p>No symbol</p>
</td>
<td>
<p>Package is installed on <span>the </span>system, but it was not installed through <span>the </span>group.</p>
</td>
</tr>
</tbody>
</table>
<p> </p>
<p>An example of the <kbd>yum groupinfo</kbd> command to find the information of packages installed with a group is shown in the command line here:</p>
<pre><strong><span><span>$ yum groupinfo "System Administration Tools"</span></span></strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Using YUM history</h1>
                </header>
            
            <article>
                
<p><span><span>YUM keeps a record of all the past install and remove transactions in a log file that is,</span></span> <kbd>/var/log/yum.log</kbd>. An example to display the record of yum transactions kept in a log file is shown in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/bfdf793a-0bef-41df-b717-39a8f760a44b.png" style="width:34.67em;height:12.33em;" width="755" height="269"/></p>
<p><span><span>We can display the history of installed and removed packages with the <kbd>yum</kbd> command, as shown here:</span></span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/cdc822bf-3dbe-49d2-8ade-c8e9b33a98e5.png" style="width:43.58em;height:15.75em;" width="960" height="348"/></p>
<p><span><span>We can undo a previous transaction using the</span></span> <kbd>yum history undo</kbd> command, as shown here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/eb27fb19-1cb8-4007-8d6f-01b7ff07db54.png" style="width:46.83em;height:20.50em;" width="1062" height="464"/></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Managing application repositories using YUM</h1>
                </header>
            
            <article>
                
<p>To manage application repositories using YUM, do the following:</p>
<ul>
<li><span><span>Display only all enabled repositories in the system using the <kbd>yum repolist</kbd> command, as shown here:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum repolist</span></span></strong></pre>
<ul>
<li><span><span>Display all available (enabled or disabled) repositories in the system using the <kbd>yum repolist all</kbd> command, as shown here:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum repolist all</span></span></strong></pre>
<ul>
<li><span><span>We can install a package from a specific repository by enabling it for runtime only. It is used to install a package from a specific repository when it exists in more than one repository, as shown in command line here:</span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum  --enablerepo=epel install httpd</span></span></strong></pre>
<ul>
<li><span><span><span>We can permanently enable or disable a repository by using the <kbd>yum-config-manager</kbd> utility.</span> <span>It makes necessary changes in the file stored in the <kbd>/etc/yum.repos.d/</kbd> directory, as shown in command line here:</span></span></span></li>
</ul>
<pre style="padding-left: 60px"><strong><span><span><span>$ yum-config-manager  --enable &lt;repo id&gt;</span></span></span></strong></pre>
<div class="packt_tip"><span><span>The</span></span> <kbd>yum-config-manager</kbd> <span><span>utility can also be used to create a client repo configuration file inside</span></span> <kbd>/etc/yum.repos.d</kbd>,<span><span> as shown in the following command line:<br/></span></span><kbd>$ yum-config-manager       \                                        --addrepo=http://repo.example.com/7/x86_64/</kbd></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Handling other miscellaneous options of yum</h1>
                </header>
            
            <article>
                
<p><span><span>The YUM utility also provides an interactive shell using the <kbd>yum shell</kbd> command for performing multiple tasks in one go. To exit from the YUM shell, type <kbd>exit</kbd> or <kbd>quit</kbd>, or press <em>Ctrl</em> + <em>D.</em> The example in the following screenshot illustrates the usage of the <kbd>yum shell</kbd> command:</span></span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/eb66ad06-c127-4ec5-a217-9dbe8f76a434.png" style="width:37.67em;height:16.00em;" width="774" height="328"/></p>
<p><span><span>YUM keeps all the enabled repositories' cached packages and other data in the <kbd>/var/cache/yum</kbd> directory. Here, YUM creates a subdirectory for each repository. We can clean or empty the cached directory to save space at any time by executing the following command:</span></span></p>
<pre><strong><span><span>$ yum clean all</span></span></strong></pre>
<p><span><span>We can display the usage information of YUM by using the following command:</span></span></p>
<pre><strong><span><span>$ yum help</span></span></strong></pre>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Managing official and third-party repositories</h1>
                </header>
            
            <article>
                
<p>Sometimes, the desired software is not available in <span>the </span>base (official) repositories of CentOS 7. In such scenarios, CentOS 7 and other Linux communities have contributed to several third-party repositories that can be used to install a variety of applications that are not available in official repositories. This section discusses various popular third-party repositories <span>that are</span> available for CentOS 7.</p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Official repositories of CentOS 7</h1>
                </header>
            
            <article>
                
<p><span><span>By default, CentOS 7 provides the base repository, the updates repository, and the extras repository. These repositories are managed by the CentOS community and are sufficient for completing most of the daily operations requirements.</span></span></p>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Third-party repositories</h1>
                </header>
            
            <article>
                
<p><span><span>These are the repositories that are not managed by the official CentOS community. Sometimes, we need to add them to our YUM database of repositories to download and install certain software, which is not available in CentOS official repositories. However, if these are added, they should be managed separately to prevent any unintended or conflicting updates from them.</span></span></p>
<p><span><span>The following is a list of certain repositories that have certain additional </span></span><span>CentOS</span><span> </span><span>packages that are</span> <span>not available in the CentOS base or updates repository:</span></p>
<ul>
<li><span><span><strong>Extra Packages for the Enterprise Linux (EPEL) repository</strong>: </span></span><span><span>This repository is maintained by the Fedora community and is one of the most trusted third-party repositories that can be added in your system. We can add this repository to our system with the following command:</span></span></li>
</ul>
<pre style="padding-left: 60px"><span><span><strong>$ yum install epel-release -y</strong> </span></span></pre>
<ul>
<li><span><span><strong>Community Enterprise Linux Repository (ELRepo)</strong>: </span></span>This is an Enterprise Linux repository that provides hardware-related RPM packages. It includes filesystem drivers, graphics, sound, webcam, video, and network drivers, and the latest kernel packages. We can add this repository to our system with the following command:</li>
</ul>
<p class="CDPAlignCenter CDPAlign"><img src="Images/05c9efb8-7922-4d48-9c6e-bae87c52f04a.png" style="width:48.25em;height:7.25em;" width="1039" height="156"/></p>
<ul>
<li><span><span><strong>Nux-desktop repository</strong>: </span></span>This repository provides desktop and multimedia-related packages for Enterprise Linux. Some popular multimedia software such as VLC media player, mplayer, and so on are available through this repository. Some of the packages in this repository have some dependencies that are resolved with <span>the </span>EPEL repository. At the same time, it is strongly recommended not to use this repository with RPMForge or the ATRPMS repository as it may lead to conflict between packages and dependencies. Also, RPMForge is a dead project and is not being maintained. We can add <span>the </span>Nux-desktop repository to our system with the following command:</li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum install epel-release <br/></span></span><span><span>$ rpm -Uvh \<br/></span></span><span><span>http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-5.el7.nux.noarch.rpm</span></span></strong></pre>
<ul>
<li><span><span><strong>Remi repository</strong>: </span></span>This is a third-party repository, mainly famous for providing the latest versions of <span>the </span>PHP stack, MySQL, and related software used in Enterprise Linux. It also requires <span>the </span>EPEL repository to be installed on CentOS before installing it. We can push the remi repository to our system with the following commands:</li>
</ul>
<pre style="padding-left: 60px"><strong><span><span>$ yum install epel-release<br/></span></span><span><span>$ rpm -Uvh <span><span>https://rpms.remirepo.net/enterprise/remi-release-7.rpm</span></span></span></span></strong></pre>
<div style="padding-left: 60px" class="packt_infobox">The remi repository is not enabled by default on installation. To install packages using this repository, we need to first enable it.</div>
<ul>
<li><span><strong>RPM fusion repository</strong>: </span>This third-party repository offers some free and non-free add-on packages that <span>the </span>Fedora project or Red Hat do not want to share with Enterprise Linux. We can add this repository to our system with the following command:</li>
</ul>
<pre style="padding-left: 60px"><strong><span>$ rpm -Uvh https://download1.rpmfusion.org/free/el/rpmfusion-free-release-7.noarch.rpm</span></strong></pre>
<div class="packt_infobox"><span><span>There are many third-party repositories available; some of them are not maintained, whereas some of them have conflicting packages. For more information about repositories, such as which repositories should be avoided and which are recommended, you can go to the following wiki page of CentOS:<br/>
 </span></span><span><span><a href="https://wiki.centos.org/AdditionalResources/Repositories">https://wiki.centos.org/AdditionalResources/Repositories</a>.</span></span></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Creating custom repositories</h1>
                </header>
            
            <article>
                
<p><span><span>Creating a YUM repository is one of the easiest and best ways to install software or security updates on multiple systems over LAN. We can download all the packages from the internet repository or from the DVD and host them on the local server, which will be known as the YUM server. Other Linux machines on the LAN can be configured to download the required packages from the local YUM server and they will be known as the YUM clients. This saves internet bandwidth, provides offline installation of packages to clients, and speeds up the update process.</span></span></p>
<p><span><span>In this section, we will create a custom repository of the packages shipped in the CentOS 7 DVD and share this repository to clients using an FTP server, as follows:</span></span></p>
<ol>
<li><span><span>Mount the media containing the packages. In our case, it will be the CentOS 7 DVD, as shown here:</span></span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/92c96960-530f-4917-8646-f0b7b5cbdd83.png" style="width:29.33em;height:2.33em;" width="579" height="46"/></p>
<ol start="2">
<li class="CDPAlignLeft CDPAlign">Install the FTP server package, <kbd>vsftpd</kbd>, from <span>the mounted DVD, as shown here:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/23cab79d-7d1b-4b08-aaea-e2aef5247c03.png" style="width:35.17em;height:8.42em;" width="736" height="177"/></p>
<ol start="3">
<li class="CDPAlignLeft CDPAlign">Now, enable the service to start <kbd>vsftpd</kbd> on boot automatically and start the service, as shown here:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/5412a63b-3ec2-4d28-8a8a-eada17911721.png" style="width:39.33em;height:5.33em;" width="806" height="110"/></p>
<ol start="4">
<li>Install the <kbd>createrepo</kbd> package to create a local repository database. If <span>the </span>internet is connected to our system, we can use YUM <span>to install</span> <span>the </span><kbd>createrepo</kbd> <span>package, as shown in command line here:</span></li>
</ol>
<pre style="padding-left: 90px"><strong><span><span>$ yum install createrepo -y</span></span></strong></pre>
<p style="padding-left: 60px"><span><span>If you don’t have an internet connection, then install the package using the RPM package manager, as shown here:</span></span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/fb72259c-a44a-4a96-a8af-87766a7e1802.png" style="width:37.92em;height:6.42em;" width="796" height="134"/></p>
<p style="padding-left: 60px"><span><span>We got the preceding error because in our system the <kbd>createrepo</kbd> package dependencies were not installed. So, we met the dependencies of <kbd>createrepo</kbd> package. First, install the following packages in the same order that's shown here:</span></span></p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/54e2211e-8420-43ba-89f5-6a1857e4ca56.png" style="width:41.58em;height:17.42em;" width="889" height="373"/></p>
<ol start="5">
<li><span><span>Store the packages in the <kbd>ftp</kbd> folder to build the local repository, as shown here:</span></span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/ca92fa8d-6a2a-4361-ac08-3fe4243c1489.png" style="width:35.17em;height:4.00em;" width="803" height="92"/></p>
<ol start="6">
<li><span><span>Restore the SELinux tag on packages copied from the DVD, as per the <kbd>vsftpd</kbd> server files, as shown here:</span></span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="Images/e9cb118e-2b40-4c93-b403-73cf3b05ec1e.png" style="width:29.08em;height:2.08em;" width="653" height="47"/></p>
<ol start="7">
<li><span><span>Create</span></span> a YUM <span><span>server configuration file with the <kbd>.repo</kbd> extension in the <kbd>/etc/yum.repos.d/</kbd> directory, as shown in command line here:</span></span></li>
</ol>
<pre style="padding-left: 60px"><strong><span><span>$ vim /etc/yum.repos.d/localserver.repo</span></span></strong></pre>
<p style="padding-left: 60px">The content of the <kbd>localserver.repo</kbd> file is shown here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/debb73f8-9625-4db2-a11c-417b30de4175.png" style="width:18.50em;height:6.33em;" width="394" height="136"/></p>
<ol start="8">
<li><span><span>Enable the local YUM server repository and clean the yum cache by using the <kbd>yum</kbd> command, as shown here:</span></span></li>
</ol>
<pre style="padding-left: 60px"><strong><span><span>$ yum clean all</span></span></strong></pre>
<p style="padding-left: 60px">After cleaning the previous cache of <span>the </span>YUM database, build the YUM database of <span>the </span>repository from scratch with the command that's shown here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="Images/1f820123-9c11-4160-bba1-185a0f52cbee.png" style="width:37.08em;height:15.08em;" width="809" height="330"/></p>
<div class="packt_infobox"><span><span>You can use any other application such as a web server or an NFS server for sharing the packages of the YUM server (system serving the packages) to the YUM client (system downloading the packages). We also need to open the corresponding application port in the firewall to allow access for YUM clients for downloading packages from the YUM server.</span></span></div>


            </article>

            
        </section>
    </div>



  
<div id="sbo-rt-content"><section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p><span><span>In this chapter, we began with learning methods to keep your system and application software up to date. We learned how package management utilities such as RPM</span></span><span><span> and YUM</span></span><span><span> are used to install, remove, or update application packages. We had a look at different third-party repositories for CentOS 7. Finally, we wrapped up this chapter by creating or own custom repository and making it available for clients. Keeping your system and applications updated is vital to make sure they are free from any vulnerabilities. This helps in securing your information and making the system safe from malware and hackers.</span></span></p>
<p><span><span>In our next chapter, we will learn some of the essential utilities of CentOS 7. We will see how system logging works and how you can manage system services. Then, we will understand the functionality of the firewall and SELinux for hardening system security.</span></span></p>


            </article>

            
        </section>
    </div>



  </body></html>