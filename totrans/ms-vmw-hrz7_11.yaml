- en: Configuring and Managing Desktop Pools - Part 2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Following on from [Chapter 8](d44c9a7b-bcae-4758-a857-197be388a4be.xhtml), *Configuring
    and Managing Desktop Pools - Part 1*, where we configured dedicated desktop pools,
    in this chapter, we are going to create a number of floating desktop pools using
    Linked Clones, Instant Clones, and also a manual desktop pool. Then, we will entitle
    end users to these desktop pools and therefore allow them to connect to a virtual
    desktop machine.
  prefs: []
  type: TYPE_NORMAL
- en: We will also look at some of the management tasks that you will need to undertake
    when deploying Linked Clone desktop pools, before finally looking at how to review
    the deployment.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover following topics:'
  prefs: []
  type: TYPE_NORMAL
- en: Creating floating, Linked Clone desktop pools
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating floating, Full Clone desktop pools
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating floating, Instant Clone desktop pools
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating a manual desktop pool
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Adding end user entitlements
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Managing Linked Clone desktop pools
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Reviewing the infrastructure post-deployment
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating floating, Linked Clone desktop pools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'As with the other pools we have created, the process for creating a floating,
    Linked Clone desktop pool is pretty much the same as we covered in the previous
    section, with a few changes to reflect this pool having a floating assignment.
    As such, in this section, we will just highlight the different configuration options:'
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation, open a browser and enter the address details of the View
    Connection server. In the example lab, the address of the connection server is
    `https://hzn7-cs1.pvolab.com/admin`. Don't forget the `/admin` at the end; otherwise,
    you will end up on the Horizon Client page.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the View Administrator login screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: From Horizon View Administrator, click to expand the Catalog option, and then
    click on Desktop Pools. Then from the Desktop Pools pane that is now displayed,
    click the Add... button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Add Desktop Pool screen, starting with the Type section
    where we select which type of desktop pool you want to create. In this example,
    we are creating an automated pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the radio button for Automated Desktop Pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the User Assignment screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'For this pool, we are going to click the radio button for Floating (**1**)
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/4b2d198e-e681-4439-8541-37ec2f3ed6c8.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For this pool, we are going to use Linked Clone virtual machines, so click the
    radio button for View Composer linked clones, and select the relevant vCenter
    server from the list. In the example lab, the `vCenter 192.168.1.178` is shown,
    along with the vCenter user account we set up for View. Click to highlight and
    select this vCenter server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next > button to continue the configuration. The next configuration
    screen is for the Desktop Pool Identification as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5f847aad-54ff-4c88-b173-d597c5fd2956.png)'
  prefs: []
  type: TYPE_IMG
- en: In the ID box (**2**), enter a name for this desktop pool. In the example lab,
    for this pool, we are going to call it `Win7-Floating-lc`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Display name box (**3**), enter a name for this desktop pool that the
    end users will see. In the example lab, we have called this `Windows 7 Floating
    Linked Clone`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, in the Description box (**4**), enter a description to describe the
    function of this desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Desktop Pool Settings screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Configure the setting you want to apply to this desktop pool and then click
    the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Provisioning Settings screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The first setting in the Basic section is to Enable provisioning. Tick the Enable
    provisioning box to switch provisioning on. This setting means that virtual desktop
    machines can be provisioned as per the configuration settings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next setting is for Stop provisioning on error. By checking this box, it
    means that provisioning will stop if there is an error during the provisioning
    process.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next section to configure is for the Virtual Machine Naming**.**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the radio button for Use a naming pattern and then in the Naming Pattern
    box (**6**), enter the name pattern you want to use. In the example lab, we have
    called this `W7-Float-lc-{n}`. This will result in the virtual desktop machines
    being named `W7-Float-lc-1`, `W7-Float-lc-2`, and so on, up to the number of machines
    you specify that you want to build, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/94de6f08-fc72-4602-951a-171f900874bb.png)'
  prefs: []
  type: TYPE_IMG
- en: Next, in the Max number of machines box, enter the maximum number of machines
    that can be provisioned in this desktop pool. This sets the limit of the number
    of virtual desktop machines in this desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next is the setting for Number of spare (powered on) machines. In the box, enter
    the number of machines that should be powered on and waiting for users to connect
    to them.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Provisioning Timing is the next option to configure. Either click the radio
    button for Provision machines on demand and then enter the minimum number of machines,
    or click the radio button for Provision all machines up-front.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the View Composer Disks screen and the Disposable File Redirection
    configuration setting.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To configure this setting, click the radio button for Redirect disposable files
    to a non-persistent disk (**7**), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8084883a-228e-42d1-85e5-715791c11455.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Disk size box, enter a size for the persistent disk, and in the Drive
    letter drop-down box, select a drive letter for this persistent disk.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To disable the Disposable File Redirection feature, then click the radio button
    for Do not redirect disposable files (**8**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue. The next configuration screen is for Storage
    Optimization.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The only option on this screen is to configure the Storage Policy Management,
    starting with VMware Virtual SAN. To enable VSAN, then click the radio button
    for Use VMware Virtual SAN. As we don't have this configured in the example lab,
    then we will click the radio button for Do not use VMware Virtual SAN. You can
    then choose if you want to use separate datastores for replica and OS disks. To
    enable this, check the box for Select separate datastores for replica and OS disks.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue to the next configuration screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the vCenter Settings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: First, select the Parent VM, in this example our Windows 7 Gold Image, and then
    from the Snapshot box, choose which snapshot of the Windows 7 Gold Image virtual
    desktop machine you want to use.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Virtual Machine Location section, under VM Folder Location, select the
    folder where you want to store these new virtual desktop machines. In the example
    lab, we are going to use the `Horizon Desktops` folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, under the Resource Settings section, select the Host or cluster to
    run the virtual desktops machines, the Resource pool, and then the Datastore.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue to the next configuration screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Advanced Storage Options configuration screen. Leave the
    default settings and click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will see the Guest Customization configuration screen. Leave the default
    settings and click the Next > button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Ready to Complete screen. Review your configuration settings,
    and then click the Finish button to create the desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see that the pool has been created as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ceb6faf4-b3a7-4ad6-937f-77a71aa30a7d.png)'
  prefs: []
  type: TYPE_IMG
- en: In the next section, we are going to create another automated desktop pool,
    but this time, we will create a pool with a floating assignment, and built using
    Full Clone virtual desktop machines.
  prefs: []
  type: TYPE_NORMAL
- en: Creating floating, Full Clone desktop pools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'As with the previous pools we have created, the process for creating a floating,
    full-clone desktop pool is pretty much the same as we covered previously, with
    a few changes to reflect this pool having a floating assignment. As such, in this
    section, we will just highlight the key differences in the configuration options:'
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation, open a browser and enter the address details of the View
    Connection server. In the example lab, the address of the connection server is
    `https://hzn7-cs1.pvolab.com/admin`. Don't forget the `/admin` at the end; otherwise,
    you will end up on the Horizon Client page.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the View Administrator login screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: From Horizon View Administrator, click to expand the Catalog option, and then
    click on Desktop Pools. Then from the Desktop Pools pane that is now displayed,
    click the Add... button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Add Desktop Pool screen, starting with the Type section
    where we select which type of desktop pool you want to create. In this example,
    we are creating an automated pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the radio button for Automated Desktop Pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the User Assignment screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For this pool, we are going to click the radio button for Floating.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue. You will now see the vCenter Server screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For this pool, we are going to use full-clone virtual machines, so click the
    radio button for Full virtual machines, and then select the relevant vCenter server
    from the list. In the example lab, the `vCenter 192.168.1.178` is shown, along
    with the vCenter user account we set up for View. Click to highlight and select
    this vCenter server.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next > button to continue the configuration. The next configuration
    screen is for the Desktop Pool Identification as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/239e5bab-beea-4d2c-af3d-2a662e8df98f.png)'
  prefs: []
  type: TYPE_IMG
- en: In the ID box (**1**), enter a name for this desktop pool. In the example lab,
    for this pool, we are going to call it `Win7-Floating-fc`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Display name box (**2**), enter a name for this desktop pool that the
    end users will see. In the example lab, we have called this `Windows 7 Floating
    Full Clones`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, in the Description box (**3**), enter a description to describe the
    function of this desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Desktop Pool Settings screen. In the Remote Settings section,
    there are a couple of new configurations options as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/dc683b55-4bb0-49fe-8b0a-4b22b12ab3d5.png)'
  prefs: []
  type: TYPE_IMG
- en: The first three configuration options have been described previously, but we
    now have the Allow user to initiate separate sessions from different client devices
    option (**4**). If this option is set to Yes, from the drop-down menu, then if
    a user connects to the same desktop pool but from a different client device, then
    they will get a different/new desktop session. The user can only reconnect to
    an existing session by using the same client device from where the session was
    originally initiated. When this option is set to No, the user will be reconnected
    to their existing session regardless of the client device used.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The final configuration setting is to Delete machine after logoff (**5**). If
    this option is set to Yes, from the drop-down menu, then when the user logs off,
    the virtual desktop machine is deleted. When this option is set to No, then the
    virtual desktop machine is not deleted when they log off. This feature is only
    supported for desktop pools that use manual naming, as dynamic creation and deletion
    of virtual desktop machines is not supported.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Configure the remaining desktop pool settings so that they are appropriate to
    your environment; in the example lab, we will leave them as the defaults.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Provisioning Settings screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The first setting in the **Basic** section is to Enable provisioning. Tick the
    Enable provisioning box to switch provisioning on.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, check the box for Stop provisioning on error.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next section to configure is Virtual Machine Naming**.**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the radio button for Use a naming pattern and then in the Naming Pattern
    box (**6**), enter the name pattern you want to use. In the example lab, we have
    called this `W7-Float-fc-{n}`. This will result in the virtual desktop machines
    being named `W7-Float-fc-1`, `W7-Float-fc-2`, and so on, up to the number of machines
    you specify that you want to build, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/74c909f0-3860-4c4f-9be8-2b408e4531a7.png)'
  prefs: []
  type: TYPE_IMG
- en: Complete the remaining settings so that they are appropriate to your environment,
    or in the example lab, we will leave them as the defaults.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Storage Optimization configuration screen. Leave the default
    settings and click Next >**.**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the vCenter Settings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: First, from the Virtual Machine Template section, select the template you want
    to use. In this example, we are going to use the Windows 7 Gold Image template.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Virtual Machine Location section, under VM Folder Location, select the
    folder where you want to store these new virtual desktop machines. In the example
    lab, we are going to use the `Horizon Desktops` folder.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, under the Resource Settings section, select the Host or cluster to
    run the virtual desktops machines, the Resource pool, and then the Datastore.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue to the next configuration screen. You will
    now see the Advanced Storage Options configuration screen. Leave the default settings
    and then click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Guest Customization configuration screen. Leave the default
    settings and click the Next > button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, you will now see the Ready to Complete screen. Review your configuration
    settings, and then click the Finish button to create the desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see that the pool has been created as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/bbd2ec35-9286-417c-8d65-c9164820793a.png)'
  prefs: []
  type: TYPE_IMG
- en: In the final section of *Creating Automated Desktop Pools*, we are going to
    create another automated desktop pool, but, this time, we will create a pool with
    a floating assignment, now built using Instant Clone virtual desktop machines.
  prefs: []
  type: TYPE_NORMAL
- en: Creating floating, Instant Clone desktop pools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we are going to create an automated desktop pool that has a
    floating assignment and is built using Instant Clones. There are two steps to
    this configuration. First, we need to configure a domain administrator before
    we then configure the actual pool itself.
  prefs: []
  type: TYPE_NORMAL
- en: Configuring the Instant Clone domain administrator
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Before you can configure a desktop pool using Instant Clones, you first have
    to add an Instant Clone domain administrator. This account is used to perform
    the Active Directory tasks required to create new virtual desktop machines. It''s
    similar to the service account used in View Composer, but as Instant Clones don''t
    use Composer, you need to add the account within the View Administrator. The account
    needs the following permissions:'
  prefs: []
  type: TYPE_NORMAL
- en: Create Computer Objects
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Delete Computer Objects
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Write All Properties
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To configure the Instant Clone domain admin, complete the following tasks:'
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation, open a browser and enter the address details of the View
    Connection server. In the example lab, the address of the connection server is
    `https://hzn7-cs1.pvolab.com/admin`. Don't forget the `/admin` at the end; otherwise,
    you will end up on the Horizon Client page.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the View Administrator login screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: To add the account, from the View Administrator dashboard, expand the option
    for View Configuration from the Inventory menu in the left-hand pane, and then
    click on the option for Instant Clone Domain Admins (**1**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Then click on the Add… button (**2**), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/3fef61ca-3e19-4f85-8ab0-6ce925484491.png)'
  prefs: []
  type: TYPE_IMG
- en: You will then see the Add Domain Admin box.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Full domain name section, click the drop-down arrow (**3**) and select
    the domain. In the example lab, this is our `pvolab.com` domain.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the User name box (**4**), enter a username that has the permissions as outlined
    at the beginning of this section.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, in the Password box (**5**), enter the password for the username account
    you just entered.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK when you have completed the details.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see that the domain administrator account has now been added as
    shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e4b0e41a-fa8e-48ab-b05d-b0f921261c7c.png)'
  prefs: []
  type: TYPE_IMG
- en: You have now successfully configured the domain admin account for Instant Clones.
    We can now continue with the process of creating an Instant Clone desktop pool.
  prefs: []
  type: TYPE_NORMAL
- en: Creating the Instant Clone desktop pool
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'As with the other pools we have created, the process for creating a floating,
    Instant Clone desktop pool is pretty much the same as we covered in the previous
    section, with a few changes to reflect this pool being built using Instant Clones.
    As such, in this section, we will just highlight the main differences in the configuration
    options:'
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation, open a browser and enter the address details of the View
    Connection server. In the example lab, the address of the connection server is
    `https://hzn7-cs1.pvolab.com/admin`. Don't forget the `/admin` at the end; otherwise,
    you will end up on the Horizon Client page.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the View Administrator login screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: From the Horizon View administrator, click to expand the Catalog option, and
    then click on Desktop Pools. Then, from the Desktop Pools pane that is now displayed,
    click the Add... button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Add Desktop Pool screen, starting with the Type section
    where we select which type of desktop pool you want to create. In this example,
    we are creating an automated pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the radio button for Automated Desktop Pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the User Assignment screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For this pool, we are going to click the radio button for Floating.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Next > button to continue. You will now see the vCenter Server screen
    where you will configure how the virtual desktops machine will be built, In this
    example, click the radio button for Instant Clones (**1**) as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/00335435-3c99-4dae-8d9a-91eb8a620c98.png)'
  prefs: []
  type: TYPE_IMG
- en: Click and select the vCenter Server (**2**), and then click the Next > button
    to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next configuration screen is for the Desktop Pool Identification as shown
    in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9031fb62-8e0d-4fea-9883-59968e9e4a18.png)'
  prefs: []
  type: TYPE_IMG
- en: In the ID box (**3**), enter a name for this desktop pool. In the example lab,
    for this pool, we are going to call it `Win10-Floating-ic`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Display name box (**4**), enter a name for this desktop pool that the
    end users will see. In the example lab, we have called this `Windows 10 Instant
    Clone`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, in the Description box (**5**), enter a description to describe the
    function of this desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Desktop Pool Settings screen. Complete the configuration
    details as per your required settings and then click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next section to configure is for Virtual Machine Naming**.**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the radio button for Provisioning Settings. Ensure that you check the
    box for Enable provisioning and the box for Stop provisioning on error.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the Naming Pattern box (**6**), enter the name pattern you want to use.
    In the example lab, we have called this `W10-Float-ic-{n}`. This will result in
    the virtual desktop machines being named `W10-Float-ic-1`, `W10-Float-ic-2`, and
    so on, up to the number of machines you specify that you want to build, as shown
    in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0f2a9d75-ae8e-40a4-aea8-634f5de4544e.png)'
  prefs: []
  type: TYPE_IMG
- en: Complete the remaining settings so that they are appropriate to your environment,
    or in the example lab, we will leave them as the defaults.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Storage Optimization configuration screen. Leave the default
    settings and click the Next > button to continue. You will now see the vCenter
    Settings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next configuration screen is the vCenter Settings configuration screen.
    On this screen, we are going to select the parent VM from which to build the virtual
    desktop machines, and then the location and resources that are going to run them
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/cc710c39-8c6e-4422-918f-35ceacf81919.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The first thing to configure is the details of the Default Image to be used
    as the parent image from which to create the virtual desktop machines for this
    desktop pool. This section is shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/83b5efb0-6ec3-4a32-b184-1cee41b8f7a3.png)'
  prefs: []
  type: TYPE_IMG
- en: 'On the first box, Parent VM in vCenter, click the Browse... button (**7**).
    You will now see the Select Parent VM box as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/485b1fa0-6c57-4698-b80e-f96ec7026c18.png)'
  prefs: []
  type: TYPE_IMG
- en: For this desktop pool, we are going to use Windows 10 as the virtual desktop
    machine operating system, so select the entry for Windows 10 Gold Image (**8**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once you have selected the parent VM you want to use, click OK to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now return to the vCenter Settings screen, where we can now configure
    the second of the options on the Default Image section for Snapshot. You will
    also see that the Parent VM box (**9**) has now been populated with the details
    of the Windows 10 Gold Image as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/d0a7ec30-f5ad-4d78-afeb-34daf3a99bc8.png)'
  prefs: []
  type: TYPE_IMG
- en: As this is an Instant Clone virtual desktop machine, the next configuration
    task is to configure the details of the snapshot that was created from the parent
    image.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'On the Snapshot box, click the Browse... button (**10**). You will now see
    the Select default image box as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ac6f04fc-9206-489b-8eca-3a6b2e1ec829.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Click to highlight the snapshot you want to use (**11**) and then Click OK.
    You will now see that the snapshot has been added as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/26e6de70-bd12-458c-95a0-3f2bb7d83c52.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The next part of the vCenter Settings is the Virtual Machine Location setting
    as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/a952f8a9-070e-4721-86c9-4390d8e17663.png)'
  prefs: []
  type: TYPE_IMG
- en: On the VM folder location box, click the Browse... button (**12**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Select the folder to store the VM box. Expand PVO's Datacenter
    by clicking the arrow and then select the folder in which you want to create the
    virtual desktop machines into. In the example lab, this folder has been called
    `Horizon Desktops`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will return to the vCenter Settings screen where you will see that the
    VM Folder Location has now been added as you can see in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/656437a8-3530-4225-a492-e9982a5b307c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'The next configuration section is for the resources that are going to host
    and run the virtual desktop machines in the pool:'
  prefs: []
  type: TYPE_NORMAL
- en: 'First, in the Cluster box, click the Browse... button (**13**), as shown in
    the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0f344fe0-1f7d-4809-9ed2-8b494b0c502a.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You will now see the Cluster box appear, listing the available cluster resources
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/637c675e-de3c-4ac4-a43d-1a62f4816496.png)'
  prefs: []
  type: TYPE_IMG
- en: Click and highlight on the cluster you want to run this Instant Clone desktop
    pool on. In the example lab, the cluster is called PVO Desktop Cluster (**14**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: When it comes to configuring the Resource Settings section of this configuration,
    it's worth noting that you need to have a host cluster and resource pool configured.
    You cannot use standalone hosts for Instant Clone desktop pools.
  prefs: []
  type: TYPE_NORMAL
- en: Click OK to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now return to the vCenter Settings screen where you will see that the
    Cluster has now been added.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, we are going to configure the resource pool for this desktop pool to use.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Resource pool box, click the Browse... button. You will now see the Select
    a resource pool to use for this desktop pool box from where you can select the
    resource pool to run the desktop pool. The resource pool for the example lab is
    the cluster again, so click and highlight PVO Desktop Cluster from the list.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now return to the vCenter Settings screen where you will see that the
    Resource pool has now been added.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next configuration option in this section is for Datastores. In the Datastores
    box, click the Browse... button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Select Instant Clone Datastores configuration screen, which
    shows all available datastores.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check the box for VM Datastore and click the OK button. You will return to the
    vCenter Settings configuration screen, where you will see that the details of
    the Instant Clone datastores have now been entered by displaying the text 1 selected**.**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Finally, on the Instant Clone configuration of the vCenter Settings screen,
    you can configure Networks as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/2de8a7e7-a644-441c-b6e6-105be4ae013e.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Networks box, click the Browse ... button (**15**). You will then see
    the Select Networks box. Here, you can use the network that is currently configured
    within the virtual desktop machine image, or you can select another network from
    the list. Click OK to continue and to return to the vCenter Settings screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now click the Next > button to continue to the next configuration screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Guest Customization configuration screen. Leave the default
    settings and click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, you will now see the Ready to Complete screen. Review your configuration
    settings, and then click the Finish button to create the desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see that the pool has been created as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8f5f8604-1367-435f-b423-81db445ac84c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'You can also see from within the folder view of the vCenter Server, that the
    Instant Clone folder structure has been created, as shown in the following screenshot,
    by the folder names starting with ClonePrep:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/27d386f6-7715-42f1-8e4b-a856bb0cd4fe.png)'
  prefs: []
  type: TYPE_IMG
- en: You have now successfully configured a desktop pool for Instant Clone virtual
    desktop machines, running Windows 10\. In the next section, we are going to work
    through the steps to create a manual desktop pool.
  prefs: []
  type: TYPE_NORMAL
- en: Creating a manual desktop pool
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous sections, we have talked about creating automated desktop pools.
    Horizon View also has the ability to create desktop pools from already existing
    virtual desktop machines, or even physical desktop machines.
  prefs: []
  type: TYPE_NORMAL
- en: 'The process for creating manual desktop pools is not too dissimilar to the
    process we covered previously for automated desktop pools, so, in the following
    section, we will create a manual pool and highlight where the process differs:'
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation, open a browser and enter the address details of the View
    Connection server. In the example lab, the address of the connection server is
    `https://hzn7-cs1.pvolab.com/admin`. Don't forget the `/admin` at the end; otherwise,
    you will end up on the Horizon Client page.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the View Administrator login screen. Log in using the administrator
    account.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once logged in, from the Horizon View administrator, click to expand the Catalog
    option, and then click on Desktop Pools. Then, from the Desktop Pools pane that
    is now displayed, click the Add... button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Add Desktop Pool screen, starting with the Type section
    where we select which type of desktop pool you want to create. In this example,
    we are creating a manual pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the radio button for Manual Desktop Pool (**1**) as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/7a5b1059-d8b7-415c-b01c-18625b81567c.png)'
  prefs: []
  type: TYPE_IMG
- en: Now click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the User Assignment screen. Select whether or not you want
    a dedicated assignment with an automatic assignment or a floating assignment.
    In the example lab, we are going to click the radio button to select the option
    for Dedicated, and also check the box for Enable automatic assignment.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Next, you will see the Machine Source screen as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/e1d936b4-a9af-47a3-bb21-6e7963fca109.png)'
  prefs: []
  type: TYPE_IMG
- en: On this configuration screen, there are two options. The first is the option
    to select virtual desktop machines that are managed by vCenter but are not built
    using some form of cloning technology. As the virtual desktop machine we are going
    to use resides on the vCenter server, then in the example lab, click the radio
    button for vCenter virtual machines (**2**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The second option is for Other sources (**3**). This option is for non-vCenter-managed
    desktops that you want users to connect to using Horizon View. An example of this
    may be something such as a blade- or rack-mounted workstation machine that resides
    in the datacenter and that you want users to connect to remotely using a protocol
    capable of the high-performance graphics. All you need do is ensure that the Horizon
    Agent is installed on these machines.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the vCenter Server configuration screen. Select the example
    lab vCenter server by clicking on it and then click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Next, you will see the Desktop Pool ID screen as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/960bb58a-f48a-4635-8732-ace34de09d2c.png)'
  prefs: []
  type: TYPE_IMG
- en: In the ID box (**4**), enter a name for this desktop pool. In the example lab,
    for this pool, we are going to call it `Win7-Manual`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the Display name box (**5**), enter a name for this desktop pool that the
    end users will see. In the example lab, we have called this `Windows 7 Manual
    Desktop`**.**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, in the Description box (**6**), enter a description to describe the
    function of this desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Desktop Pool Settings screen. Complete the configuration
    details as per your required settings and then click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The next section to configure is for the Virtual Machine, where we add the
    virtual desktop machines that we want to include as part of this desktop pool,
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/af817e7e-9d6b-454f-9cca-7afcd425b2e1.png)'
  prefs: []
  type: TYPE_IMG
- en: In the first table, you will see a list of the available virtual machines. This
    table does not include any virtual desktop machines that are already part of another
    desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click and highlight the virtual desktop machine you want to include in the desktop
    pool. In the example lab, this virtual desktop machine is called `Windows 7 Manual
    Desktop` (**7**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now click the Add button (**8**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the virtual desktop machine has been added to the table at
    the bottom, meaning that it has been selected and added to the desktop pool (9).
    If you wanted to remove it, then simply click and highlight the machine in the
    lower table and click the Remove button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Advanced Storage Options configuration screen. Leave the
    default settings and then click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, you will now see the Ready to Complete screen. Review your configuration
    settings, and then click the Finish button to create the desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see that the pool has been created as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/f11a9b9e-0be1-4778-82da-8c0614930666.png)'
  prefs: []
  type: TYPE_IMG
- en: You have now successfully configured a manual desktop pool using an existing,
    pre-built virtual desktop machine running Windows 7.
  prefs: []
  type: TYPE_NORMAL
- en: Now that we have a number of desktop pool configured, and virtual desktop machines
    created, in the next section, we are going to work through the steps to entitle
    end users to desktop pool.
  prefs: []
  type: TYPE_NORMAL
- en: Adding end user entitlements
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now that you have created a number of desktop pools that contain virtual desktop
    machines, the next step is to allow the users to have access to the pools and
    virtual desktop machines.
  prefs: []
  type: TYPE_NORMAL
- en: We are going to look at how to entitle end users, first using Horizon View Administrator,
    and then using the new Horizon Console web-based client.
  prefs: []
  type: TYPE_NORMAL
- en: Adding user entitlement using the Horizon View Administrator Classic console
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To entitle end users to desktop pools using Horizon View Administrator, we
    are going to follow the steps described:'
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation, open a browser and enter the address details of the View
    Connection server. In the example lab, the address of the connection server is
    `https://hzn7-cs1.pvolab.com/admin`. Don't forget the `/admin` at the end; otherwise,
    you will end up on the Horizon Client page.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the View Administrator login screen. Log in using the administrator
    account.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once logged in, from Horizon View Administrator, click on Users and Groups
    (**1**) from the Inventory pane on the left-hand side as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/899712ec-e317-4c42-8155-0e0445f61618.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now click the Entitlements... button (**2**). From the drop-down menu options,
    click on Add Desktop Entitlement (**3**). You will now see the Add Desktop Entitlement
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/24af6f45-fdd1-46d6-a86d-6a6e6e9f3344.png)'
  prefs: []
  type: TYPE_IMG
- en: On this screen, we can search for, and add users from Active Directory. The
    first option is for Type. You have the option of searching for User, Groups, or
    Unauthenticated users. Check the relevant box for the type of search.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you can select the domain in which you want to search. In the Domain box,
    click the down-arrow (**4**) and select the relevant domain from those that are
    listed. In the example lab, we are going to choose `pvolab.com` from the list.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You can then choose to search for either a name or username or by description.
    You also have the option of the criteria on which to filter using **Contains**,
    **Starts with**, or **Is exactly**. In the example lab, we are going to search
    for a specific user so in the **Name/User name** box, select **Contains** from
    the drop-down, and then type in the username `peter` and then click the Find button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The results are shown in the table below. In the example lab, you will see the
    details for the user entered (**7**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once you have completed adding user and group entitlements, you want to add
    the desktop pool then click the Next > button. You will now see the Select the
    desktop pools to entitle screen as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/475fe15b-2bfe-4ed1-a022-692e110d5ca2.png)'
  prefs: []
  type: TYPE_IMG
- en: In the example lab, click and highlight the entry in the table for Win7-Manual
    (**8**). If you want to entitle this user to more than one desktop pool, you can
    press and hold the *Ctrl* key while clicking on the pool you want to entitle them
    to.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once you have finished adding users and desktop pools, click the Finish button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now return to the Users and Groups screen, which now shows the entitled
    user(s) as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/b5efe0c0-02b1-4d60-b843-7a8c0f35f9b5.png)'
  prefs: []
  type: TYPE_IMG
- en: 'An alternative way of entitling users to a desktop pool is to do it from the
    Desktop Pools screen as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/3fdb8296-2608-45d9-8b43-0caeb292ab14.png)'
  prefs: []
  type: TYPE_IMG
- en: Highlight the desktop pool you want to entitle users to. In the example lab,
    we will use the Windows 7 manual pool again, so click and select Win7-Manual (**9**)
    from those listed in the table.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Then click the Entitlements... button (**10**), and then from the menu options,
    select Add entitlement... (**11**). You will now see the Add Entitlements box
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/7951ef1b-ad37-4c51-802b-8e9049168afd.png)'
  prefs: []
  type: TYPE_IMG
- en: Now click the Add... button (**12**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Find User or Group box, the same box as the Add Desktop
    Entitlement in point **4**. Enter the users and/or groups you want to entitle
    to the desktop pool and then Click OK. Then, on the Add Entitlements box, click
    OK again to complete entitling users to the desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'There is one other final way to demonstrate entitling users to desktop pools,
    which we have seen already when we created the desktop pools. This is the option
    on the Ready to Complete screen as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/a73d39ea-f349-4603-b027-b17740679da9.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Entitle users after this wizard finishes box (**12**), and once you
    complete the desktop pool configuration, the Add Desktop Entitlement will automatically
    be displayed.
  prefs: []
  type: TYPE_NORMAL
- en: You have now successfully entitled users to a desktop pool. If you were now
    to log in to Horizon View as a user that is entitled to a desktop pool, you would
    now see that the pool is available to select and connect to from Horizon Client.
    We will look at connecting to the virtual desktop machines in more detail in [Chapter
    12](e1944fcc-6ae9-4db7-b51b-db75e37e01ab.xhtml), *Horizon Client Options*.
  prefs: []
  type: TYPE_NORMAL
- en: In the next section, we are going to look at how to entitle users from the new
    Horizon console.
  prefs: []
  type: TYPE_NORMAL
- en: Adding user entitlement using the new Horizon console
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In this section, we are going to repeat the previous task, but this time using
    the Horizon Console to configure the user entitlements, following the steps described:'
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation, open a browser and enter the address details of the View
    Connection server. In the example lab, the address of the connection server is
    `https://hzn7-cs1.pvolab.com/admin`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the View Administrator login screen. Log in using the administrator
    account.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once logged in, from Horizon View Administrator, click on the option for Horizon
    Console as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/f3e454fb-8cca-4f23-8d2f-580820e00a08.png)'
  prefs: []
  type: TYPE_IMG
- en: Alternatively, you can navigate your browser directly to the Horizon console
    using the connection server URL `https://hzn7-cs1.pvolab.com/newadmin`. Then log
    in using the administrator account.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Horizon console screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'From the menu options on the left-hand side of the screen, click on Users and
    Groups (**2**) as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/211ee7ed-a373-4fc4-a8dc-a8817c0af1be.png)'
  prefs: []
  type: TYPE_IMG
- en: The Users and Groups screen is now displayed. Click on the Entitlements button
    (**3**), and then from the drop-down menu options, select Add Desktop Entitlement
    (**4**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Add Desktop Entitlement screen and the first of the configuration
    options for User as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/2c2d47ae-f60b-4199-b007-55acab447f31.png)'
  prefs: []
  type: TYPE_IMG
- en: First of all, select whether or not you want to entitle individual Users or
    Groups (from AD) by checking the relevant box (**5**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, in the Domain box, click the drop-down arrow (**6**) and select the domain
    where the user or group resides. In the example lab, this is the `pvolab.com`
    domain.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You then have the option to search for the user or group, either by name or
    by description. In this example, we are going to search for a username, so in
    the Name/User name box, we are going to type the first part of the username, which
    is `peter`. We are also going to select the filter option for Contains.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now click the Find button (**8**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The results of the search are then displayed. You will see that our user has
    been found so check the box (**9**) to select the user and then click Next to
    continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Desktop Pools configuration option where we select which
    desktop pool the user will have access to as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/2763dbf0-65bf-4756-9b7e-3edb1f8162c9.png)'
  prefs: []
  type: TYPE_IMG
- en: Check the box for the desktop pool you want to entitle this user to. In the
    example lab, this is the Windows 7 manual desktop pool, so check the box for Win7-Manual
    (**10**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Submit button to complete the entitlement configuration.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now return to the Users and Groups screen where you will see that
    the user has been entitled to the desktop pool. You will see in the Desktop Entitlements
    column of the table that this particular user is actually entitled to two desktop
    pools as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/77f1864a-8a16-4a85-b887-52d57b0b1602.png)'
  prefs: []
  type: TYPE_IMG
- en: You have now successfully entitled a user to a desktop pool using the Horizon
    console.
  prefs: []
  type: TYPE_NORMAL
- en: In the next section of this chapter, we are going to take a closer look at some
    of the management tasks required in managing Linked Clone desktop pools.
  prefs: []
  type: TYPE_NORMAL
- en: Managing Linked Clone desktop pools
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'With a Linked Clone desktop pool, once you create and entitle your desktop
    pool, your desktops will be created, first by creating the replica and then by
    creating the Linked Clones virtual desktop machines. There are a number of management
    tasks that you will need to perform, which we will cover in this section. Before
    performing any of these, it''s always worth checking the status of the desktop
    pool first:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To do this, from the Horizon View Administrator dashboard screen, under the
    Inventory section in the left-hand pane, expand the Catalog section and then click
    on Desktop Pools (**1**). You will now see the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/63ff8aca-0118-449c-988b-3bdf5494d5bf.png)'
  prefs: []
  type: TYPE_IMG
- en: 'From the list of desktop pools displayed, you can now select one by clicking
    on it. In the example lab, we are going to select the Linked Clone desktop pool,
    so click on the entry for `Win7-Floating-lc` (**2**). You will now see the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/d37f1bb1-89c9-4315-bacf-65f3d45bf194.png)'
  prefs: []
  type: TYPE_IMG
- en: From the tabs across the top, click the Inventory tab (**3**). You can then
    check the Status of the desktop pool (**4**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In total, there are 24 different statuses that get reported on for the Linked
    Clone virtual desktop machines. You can see a breakdown of all the statuses taken
    from the Horizon View documentation:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Provisioning**: The virtual machine is being provisioned.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Customizing**: The virtual machine in an automated pool is being customized
    as per the configuration.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Deleting**: The virtual machine is marked for deletion, but is not yet deleted.
    Once the process has completed, then it will be deleted.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Waiting for Agent**: The View Connection server is waiting to establish communication
    with the Horizon Agent running on a virtual desktop machine in a manual pool.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Maintenance mode**: The virtual machine is in maintenance mode. This means
    it is unavailable and therefore end users cannot log in or use the virtual desktop
    machine.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Startup**: The Horizon agent has started on the virtual desktop machine,
    but other required services such as the display protocol are still in the process
    of starting up.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Agent disabled**: This state can occur in two cases. First, in a desktop
    pool with the Delete or refresh machine on logoff or the Delete machine after
    logoff setting enabled, a desktop session is logged out, but the virtual machine
    is not yet refreshed or deleted. Second, the View Connection server disables the
    Horizon agent just before sending a request to power off the virtual desktop machine.
    This state ensures that a new desktop session cannot be started on the virtual
    desktop machine'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Agent unreachable**: The View Connection server cannot establish communication
    with the Horizon agent running on a virtual desktop machine.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Invalid IP**: The subnet mask registry setting is configured on the virtual
    desktop machine, and no active network adapters have an IP address within the
    configured range.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Agent needs reboot**: A View component was upgraded, and the virtual desktop
    machine must be restarted to allow the Horizon agent to operate with the upgraded
    component.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Protocol failure**: A display protocol did not start before the Horizon agent
    startup period expired.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Domain failure**: The virtual desktop machine encountered a problem reaching
    the domain. The domain server was not accessible, or the domain authentication
    failed.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Already used**: In a desktop pool with the Delete or refresh machine on logoff
    or Delete machine after logoff setting enabled, there is no session on the virtual
    desktop machine, but the session was not logged off. This could occur should a
    virtual desktop machine shut down unexpectedly or if the end user resets the machine
    in mid-session.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Configuration error**: The display protocol is not enabled.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Provisioning error**: An error occurred during provisioning.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Error**: An unknown error occurred in the virtual desktop machine.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Unassigned user connected**: A different user who is not the assigned user
    is logged into a virtual desktop machine in a dedicated desktop pool.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Unassigned user disconnected**: A user other than the assigned user is logged
    in and disconnected from a virtual machine in a dedicated desktop pool.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Unknown**: The virtual desktop machine state is unknown.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Provisioned**: The virtual desktop machine has been built but is powered
    off or suspended.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Available**: The virtual desktop machine is powered on and ready for an end
    user to connect to it.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Connected**: The virtual desktop machine already has a user session running
    and is connected to the Horizon client.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Disconnected**: The virtual machine is already being used in a session, but
    it is disconnected from the Horizon client device.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**In progress**: The virtual machine is in a transitional state during a maintenance
    operation.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'There are also a number of tasks you can complete on each virtual desktop machine
    within the desktop pool. By right-clicking on any desktop listed in the table,
    you are able to undertake any of a number of tasks on that given desktop. You
    have the following options as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](img/56675f53-9a11-48a5-bfdf-85126dd93889.png)'
  prefs: []
  type: TYPE_IMG
- en: 'These options are described in more detail in the following list:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Restart Desktop: Restarts that particular virtual desktop machine.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Reset Virtual Machine: Will complete a hard reset on the desktop and could
    be used in the case of a system lockup. This will also reset the virtual desktop
    machine back to the original snapshot state.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Remove: Will remove the virtual desktop machine from the pool.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Refresh, Recompose, and Rebalance: This options have been described in [Chapter
    2](5d942e5b-dda5-4e5a-8278-62a64210aeef.xhtml), *Understanding Horizon 7 Architecture
    and Components*, and can be completed here on an individual desktop basis rather
    than performing them on the entire pool. We will look at these in more detail
    in the next section.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Cancel task: Cancels any outstanding task on the individual virtual machine.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Assign User: Can be used to allocate a desktop to a specific user.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Unassign User: Removes a user from being entitled to this desktop this allocation.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Enter Maintenance Mode: Places the desktop in a state where users cannot be
    allocated to the desktop or connect to it while maintenance is carried out.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Exit Maintenance Mode: Returns the desktop to the pool.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Disconnect Session: Disconnects the currently connected user from the pool
    without logging them off.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Logoff Session: Logs the user off.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Send Message: Sends a message to any given user.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Export table contents: Exports a copy of the table containing the virtual desktop
    machine details as a CSV file.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Refresh table contents: Updates the table with the latest information.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In the next section, we are going to look at a couple of the more common, Linked
    Clone specific tasks for managing the desktop pools, starting with recomposing
    a desktop pool.
  prefs: []
  type: TYPE_NORMAL
- en: Recomposing a Linked Clone desktop pool
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: One of the more common tasks you are likely to perform is to recompose a desktop
    pool to update the operating system or applications in the base image or, alternatively,
    to add new applications. It's always recommended to have test pools available
    for you to test updates prior to sending them out to your end users.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this example, we are going to recompose one of the example desktop pools,
    but you could also perform a recompose operation on an individual virtual desktop:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To recompose a desktop pool, from the Horizon View Administrator dashboard
    screen, under the Inventory section in the left-hand pane, expand the option for
    Catalog, and then click on Desktop Pools. Double-click on the desktop pool on
    which you want to perform the recompose operation. In the example lab, we are
    going to select the Linked Clone desktop pool called `Win7-Floating-lc`. You will
    now see the details of the desktop pool in the Summary tab of the chosen desktop
    pool as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/0867bbe5-9ccc-4846-a52d-e3f3d27c43fd.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the View Composer button (**1**), and then from the menu options displayed,
    click on Recompose (**2**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Recompose screen and the Image option as shown in the
    following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/284235e0-10d2-4bcb-89e8-b20e378a9b6f.png)'
  prefs: []
  type: TYPE_IMG
- en: Here, you have the option to change the parent VM by clicking the Change...
    button (**3**). You can then select a new parent VM to recompose from. You would
    then see the snapshots that are associated with the newly selected parent VM in
    the table (**4**), from where you would then click it to select it.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You can just select a new snapshot of the current image. This would reflect
    an updated version of the existing image that you then created a new snapshot
    from. To do this, again click the snapshot you want to use (**4**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click Next > to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Scheduling screen where you can configure the time of
    the recompose operation, and what happens if users are connected at the time of
    the recompose. This is shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/5897117c-7bb2-4e0e-8e6d-f7d9fe1960af.png)'
  prefs: []
  type: TYPE_IMG
- en: The first option is to set the date and time that you want the recompose operation
    to start (**5**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, you have the option to wait until users log off before the recompose starts.
    To enable this option, click the radio button for Wait for users to log off (**6**).
    Or you can click the radio button for Force user to log off (**7**), which will
    forcibly log users off. However, they may be given a grace period before actually
    being logged off to allow them to save any work.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You then have the option to check the box for Stop at first error (**8**). Check
    this to stop the recompose if there are any errors. This would prevent rebuilding
    all the virtual desktop machines in the pool if there are any problems.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'If we just refer back to the force users to log off option, you can also configure
    a grace period before they are logged off. This can be edited in the Global Settings
    section as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/30ae6747-a5f3-4da4-858f-5a445247611e.png)'
  prefs: []
  type: TYPE_IMG
- en: To edit the global settings, from the Inventory pane on the left-hand side,
    expand out the option for View Configuration, and then click on Global Settings
    (**10**). Then click on Edit... (**11**), and in the General Settings box, scroll
    down to the highlight section (**12**). You can then configure the message and
    the grace period.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the Recompose screen, now click Next > to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Ready to Complete box as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/70caaf3d-7cc6-4925-b74a-beff6b4fa0a3.png)'
  prefs: []
  type: TYPE_IMG
- en: Check the configuration settings and then click the Finish button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The recompose operation will now start depending on the start time configured
    and whether to wait for users to log off.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have now successfully performed a recompose operation on one of the Linked
    Clone desktop pools in the example lab. In the next section, we will look at the
    refresh operation.
  prefs: []
  type: TYPE_NORMAL
- en: Refreshing a Linked Clone desktop pool
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Another task you are likely to perform is to refresh a desktop pool. By carrying
    out a refresh of the Linked Clone virtual desktops or desktop pools, you are effectively
    reverting them back to their initial state, when the original snapshot was taken
    after they had completed the customization phase. Only the operating system disk
    is refreshed and no other disks are affected:'
  prefs: []
  type: TYPE_NORMAL
- en: To recompose a desktop pool, from the Horizon View Administrator dashboard screen,
    under the Inventory section in the left-hand pane, expand the option for Catalog,
    and then click on Desktop Pools. Double-click on the desktop pool on which you
    want to perform the refresh operation. In the example lab, we are going to select
    the Linked Clone desktop pool called `Win7-Floating-lc`. You will now see the
    details of the desktop pool in the Summary tab of the chosen desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the View Composer button, and then from the menu options displayed click
    on Refresh.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Scheduling screen where you can configure the time of
    the recompose operation, and what happens if users are connected at the time of
    the refresh. This is shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9dac8a67-b6e7-46f4-9a5f-d91bc212c2e8.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Ready to Complete box as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/94a05940-a46d-4a59-b454-6fcc31b9884a.png)'
  prefs: []
  type: TYPE_IMG
- en: Check the configuration settings and then click the Finish button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The refresh operation will now start depending on the start time configured
    and whether to wait for users to log off.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have now successfully performed a refresh operation on one of the Linked
    Clone desktop pools in the example lab. In the next section, we will look at the
    rebalance operation.
  prefs: []
  type: TYPE_NORMAL
- en: Rebalancing a Linked Clone desktop pool
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The final task you will perform is to rebalance a desktop pool. The rebalance
    operation in View Composer is used to evenly distribute the Linked Clone virtual
    desktop machines across multiple datastores in your environment.
  prefs: []
  type: TYPE_NORMAL
- en: 'You would perform this task if one of your datastores was becoming full while
    others have ample free space:'
  prefs: []
  type: TYPE_NORMAL
- en: To rebalance a desktop pool, from the Horizon View Administrator dashboard screen,
    under the Inventory section in the left-hand pane, expand the option for Catalog,
    and then click on Desktop Pools. Double-click on the desktop pool in which you
    want to perform the rebalance operation. In the example lab, we are going to select
    the Linked Clone desktop pool called `Win7-Floating-lc`. You will now see the
    details of the desktop pool in the Summary tab of the chosen desktop pool.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the View Composer button, and then from the menu options displayed, click
    on Rebalance.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the following information box:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/6d0d6fac-6a2c-4522-9379-9eabdfd8ebca.png)'
  prefs: []
  type: TYPE_IMG
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Scheduling screen where you can configure the time of the
    rebalance operation, and what happens if users are connected at the time of the
    rebalancing. This is the same screen as we have seen previously for the refresh
    and recompose operations.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the Next > button to continue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'You will now see the Ready to Complete box as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/59ea4eeb-85ca-4fb2-82cb-e52c7dca8e3d.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Ready to Complete box, this time you will see the logoff message that
    will be displayed to the users. There is also an important information box at
    the bottom regarding the desktop pool settings and the number of virtual desktop
    machines available in the desktop pool during the rebalance operation.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Check the configuration settings and then click the Finish button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The rebalance operation will now start depending on how you configured the start
    time and whether to wait for users to log off.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have now successfully performed a rebalance operation on one of the Linked
    Clone desktop pools in the example lab. In the next section, we will look at managing
    some of the additional disks that are created by View Composer.
  prefs: []
  type: TYPE_NORMAL
- en: Managing persistent disks
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In the previous section, we discussed View Composer's operations, which are
    all about managing the OS side of what gets created for the virtual desktop machines.
    In this section, we are going to look at how to manage the non-OS disks or the
    persistent disk.
  prefs: []
  type: TYPE_NORMAL
- en: A persistent disk can be configured on a dedicated virtual hard disk per user,
    which will allow you to preserve user data and settings between recompose operations
    and more. There are a number of tasks that can be undertaken with regard to persistent
    disk management.
  prefs: []
  type: TYPE_NORMAL
- en: You are able to detach the virtual disk from a dedicated desktop. The main use
    case for this could be due to the end user leaving the company, and so the desktop
    is no longer needed but the data needs to be kept for compliance or audit reasons.
    It could also be because there is an issue with the desktop and you need to recreate
    it afresh without losing the user's data. Equally, you can attach an existing
    persistent disk to a virtual desktop machine in order to access the files and
    data stored on it. In the next sections, we are going to work through both attaching
    and detaching a persistent disk.
  prefs: []
  type: TYPE_NORMAL
- en: Detaching a persistent disk
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In the first instance, let''s look at how you would detach a persistent disk
    from a user''s virtual desktop machine, following these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation, open a browser and enter the address details of the View
    Connection server. In the example lab, the address of the connection server is
    `https://hzn7-cs1.pvolab.com/admin`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the View Administrator login screen. Log in using the administrator
    account.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Horizon View Administrator dashboard screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'From Horizon View Administrator, click to expand the Catalog option from the
    Inventory on the left-hand side. From there, click on Desktop Pools (**1**), as
    shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/ff4f1f24-513c-4f6e-b085-0b4394380823.png)'
  prefs: []
  type: TYPE_IMG
- en: Next, click on the Inventory tab (**2**). You will now see a table listing the
    virtual desktop machines within the desktop pool, along with a number of clickable
    options across the top.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on the Persistent Disks option (**3**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The table view then switches to detail the persistent disks attached to these
    virtual desktop machines. Click and select one of the disks. In this example,
    we will select Win7-VM-1-vdm-user-disk-D (**4**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now click the Detach... button (**5**). The disk is now detached and is available
    as a standalone disk that can be attached to another virtual machine. The use
    case for this could be for keeping a user's data should they leave your organization
    and you need to keep their data for compliance purposes or to share it with other
    users.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'There is also another way to detach a persistent disk as described in the following
    steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Once logged in to the Horizon View Administrator, from the dashboard, click
    to expand the resources option from the Inventory on the left-hand side. From
    there, click on Persistent Disks (**6**), as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/8fd3cda6-d977-43d7-a45d-6331535dbad9.png)'
  prefs: []
  type: TYPE_IMG
- en: You will now see the table detailing the persistent disks attached to these
    virtual desktop machines. Click and select one of the disks. In this example,
    we will select Win7-VM-2-vdm-user-disk-D (**7**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now click the Detach... button (**8**). The disk is now detached.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the next section, we are going to work through the reverse and show you how
    to attach a persistent disk.
  prefs: []
  type: TYPE_NORMAL
- en: Attaching a persistent disk
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To attach a persistent disk to a users virtual desktop machine, follow these
    steps:'
  prefs: []
  type: TYPE_NORMAL
- en: From a workstation, open a browser and enter the address details of the View
    connection server. In the example lab, the address of the connection server is
    `https://hzn7-cs1.pvolab.com/admin`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the View Administrator login screen. Log in using the administrator
    account.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now see the Horizon View Administrator dashboard screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'From Horizon View Administrator, click to expand the resources option from
    the Inventory on the left-hand side. From there, click on Persistent Disks (**1**),
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/9fd45104-7a56-4a82-a42b-2a9ee1c2fc7c.png)'
  prefs: []
  type: TYPE_IMG
- en: Now click on the Detached tab (**2**). If you already had a number of detached
    disks, then you would see them listed in the table. In the example lab, we don't
    have any, but if we did, you would click the entry for the persistent disk from
    the list, and then click on the Attach... button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The next step is to select a Linked Clone virtual desktop machine to which to
    attach the persistent disk, select the Attach as a secondary disk option, and
    then click Finish.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The disk will now be made available on the virtual desktop machine you selected.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You cannot attach a persistent disk that is stored on a non-VMware Virtual SAN
    datastore to a virtual desktop machine that is stored on a VMware Virtual SAN
    datastore. Also, you need to ensure that the virtual desktop machine you are attaching
    the persistent disk to uses the same operating system as the virtual desktop machine
    in which the persistent disk was created.
  prefs: []
  type: TYPE_NORMAL
- en: 'You also have the option to import an existing disk direct from vCenter. To
    do this, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Click the Import from vCenter... button (**3**) as shown in the previous screenshot.
    You will now see the Import Persistent Disk from vCenter configuration box as
    shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/68e492af-a685-4c9c-ae2d-6821f1c966ce.png)'
  prefs: []
  type: TYPE_IMG
- en: First, in the vCenter Server box, click the drop-down arrow and select the vCenter
    server from the list shown that contains the virtual disk you want to import.
    In the example lab, this is shown by the IP address `192.168.1.178`. You will
    also see that it shows the vCenter user account.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, select the datacenter from the Datacenter box (**5**) by clicking the
    drop-down arrow and selecting the datacenter where the virtual disk resides. In
    the example lab, this is the PVO's Datacenter option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, in the Linked-clone desktop pool box, click the drop-down arrow (**6**)
    and select the desktop pool of where the virtual disk resides. In the example
    lab, this is the desktop pool called `Win7-dedicated-lc`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Next, you need to choose the Persistent Disk File. Click the Browse... button
    (**7**). You will now see the Select Datastore Path configuration box as shown
    in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/81d677ec-2a5a-4821-929a-2c3dd3854377.png)'
  prefs: []
  type: TYPE_IMG
- en: From the Datastore box, click the down-arrow (**9**), and from the list, choose
    the datastore on which the persistent disk resides. In the example lab, this is
    the datastore called VM Datastore.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Then, from the list, navigate to the virtual disk you want to import and click
    the OK button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now return to the Import Persistent Disk from vCenter configuration
    box. The final thing to configure is the User option.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Click the Browse... button (**8**). You will now see the select datastore path
    configuration box as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/bfff01ef-4701-45e5-9bd7-34eb24bae65e.png)'
  prefs: []
  type: TYPE_IMG
- en: In the Domain box (**10**), click the drop-down arrow and select the domain
    in which the user resides. In the example lab, this is the `pvolab.com` domain.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, in the Name/User name box (**11**), type in the username of `Peter` and
    ensure that you select Contains from the drop-down menu for the filter.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now click the Find button (**12**).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the table, you will now see the results displayed. Click and select the relevant
    user (**13**) and then click OK.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You will now return to the Import Persistent Disk from vCenter configuration
    box.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click OK to complete the configuration. The disk will now be attached to a virtual
    desktop machine in the selected desktop pool when the associated user logs on.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: You have now successfully attached a persistent disk to an existing virtual
    desktop machine.
  prefs: []
  type: TYPE_NORMAL
- en: Reviewing the infrastructure post-deployment
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: So, with the desktop pools created and the virtual desktop machines built and
    running, now is a good time to go back and review the infrastructure to check
    that everything is running as expected before you start adding end users and allowing
    them to log in. This is just to make sure your sizing of resources is as you expected
    it to be, but it also gives you another opportunity to tweak anything before it's
    too late and you have live users logged in.
  prefs: []
  type: TYPE_NORMAL
- en: Ideally, you should compare the assessment data with the current data from your
    environment. Back in [Chapter 3](20877fa6-9a03-4c97-ab85-4a4338e2c680.xhtml),
    *Design and Deployment Considerations*, we looked at Liquidware Stratusphere as
    a solution for this, as not only will it give us the assessment data, it will
    also provide data on the infrastructure performance and will be useful in the
    next section when we come to fine-tuning the end user experience.
  prefs: []
  type: TYPE_NORMAL
- en: This will allow you to measure CPU, memory, and network performance so you can
    quickly understand the resources being used and identify any potential bottlenecks.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this, the second part of [Chapter 8](d44c9a7b-bcae-4758-a857-197be388a4be.xhtml),
    *Configuring and Managing Desktop Pools - Part 1*, we looked at how to create
    floating desktop pools, and then we looked at how to entitle end users to have
    access to the desktop pools and the virtual desktop machines in the pool. We looked
    at doing this from the View Admin console and also from the new Horizon Console.
  prefs: []
  type: TYPE_NORMAL
- en: Then, we went on to look at some the of the more common pool management tasks,
    particularly when it came to managing Linked Clone desktop pools.
  prefs: []
  type: TYPE_NORMAL
- en: We finished the chapter by looking at how to review your environment once you
    complete the initial deployment.
  prefs: []
  type: TYPE_NORMAL
