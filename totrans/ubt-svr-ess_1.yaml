- en: Chapter 1. The Ubuntu Server Installation
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章. Ubuntu Server安装
- en: This chapter will cover how to install Ubuntu Server by using different methods.
    We will have a look at how to install Ubuntu Server in the manual and automated
    mode by using a simple or an advanced installation.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将介绍如何通过不同的方法安装Ubuntu Server。我们将了解如何通过简单或高级安装在手动和自动模式下安装Ubuntu Server。
- en: 'To reach this goal, we will follow this plan:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 为了实现这个目标，我们将按照以下计划进行：
- en: Preparation before the installation
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装前的准备
- en: The manual installation
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 手动安装
- en: The automated installation
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动安装
- en: Preparation before the installation
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装前的准备
- en: In this section, we will take a quick look at the latest Ubuntu Server release
    news and then, we will make a list of all the system requirements.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将快速了解最新的Ubuntu Server版本发布信息，然后列出所有的系统要求。
- en: The latest Ubuntu release
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 最新的Ubuntu版本
- en: Canonical, the company that produces Ubuntu, releases a new version every 6
    months. Each release has a code with a *YY.ZZ* pattern, where *YY* is the year
    and *ZZ* is the month.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 生产Ubuntu的公司Canonical每6个月发布一个新版本。每个版本都有一个*YY.ZZ*模式的代码，其中*YY*表示年份，*ZZ*表示月份。
- en: I started writing this book just after Ubuntu 15.04 (Vivid Vervet) was released
    on April 23, 2015\. Currently, there are two major releases—the LTS one that was
    released last year (**LTS** stands for **long-term support**), which is version
    14.04, and the latest version 15.04\. It is not a big deal if you choose either
    of these two versions to perform the tasks in the coming chapters, since it will
    make no difference. So, we decided to use the latest version as a reference for
    our samples, especially because the next LTS release will be based on it. (Note
    that only the LTS releases are supported for 5 years by Canonical, and the non-LTS
    releases have a support of only 9 months. That's why we normally choose the LTS
    versions for Ubuntu Server deployments.) When there is a notable difference between
    these two versions, we will mention it.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 我开始写这本书是在2015年4月23日Ubuntu 15.04（Vivid Vervet）发布之后。目前有两个主要版本——去年发布的LTS版本（**LTS**代表**长期支持**），即版本14.04，以及最新的版本15.04。如果你选择这两个版本中的任意一个来执行接下来的章节任务，应该没有太大问题，因为没有区别。因此，我们决定以最新版本为示例，尤其是因为下一个LTS版本将基于该版本。（请注意，只有LTS版本由Canonical提供5年的支持，而非LTS版本的支持期仅为9个月。这就是我们通常选择LTS版本来部署Ubuntu
    Server的原因。）当这两个版本之间有显著差异时，我们会提到它。
- en: 'Now, let''s take a look at some information related to the latest version:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看看与最新版本相关的一些信息：
- en: It uses Linux kernel 3.19, which brings a lot of improvements in terms of performance
    as well as network facilities for both servers and cloud.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它使用了Linux内核3.19，带来了很多关于性能的改进，同时也为服务器和云计算提供了更好的网络功能。
- en: 15.04 is the first Ubuntu version that features LXD.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 15.04是第一版引入LXD的Ubuntu版本。
- en: It uses the latest versions of OpenStack, **LXC** (**Linux Containers**), LXD,
    Juju, libvirt, QEMU, Open vSwitch, Ceph, cloud-init, Docker, and HA-related package
    updates.
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它使用了最新版本的OpenStack、**LXC**（**Linux容器**）、LXD、Juju、libvirt、QEMU、Open vSwitch、Ceph、cloud-init、Docker以及与HA相关的软件包更新。
- en: It replaced the service manager and the standard boot `upstart` with `systemd`.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它将服务管理器和标准启动`upstart`替换为`systemd`。
- en: Note
  id: totrans-16
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The `upstart` boot still exists under Ubuntu. You can use it by opening the
    **GRUB** boot menu, choosing **Advanced options for Ubuntu**, and then clicking
    on **Ubuntu, with Linux** (upstart).
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '`upstart`启动方式在Ubuntu中仍然存在。你可以通过打开**GRUB**启动菜单，选择**Ubuntu的高级选项**，然后点击**Ubuntu，使用Linux（upstart）**来使用它。'
- en: If you would like to switch permanently to the `upstart` boot, you can install
    the `upstart-sysv` package, which will remove `ubuntu-standard` and `systemd-sysv`.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你希望永久切换到`upstart`启动方式，可以安装`upstart-sysv`包，它将移除`ubuntu-standard`和`systemd-sysv`。
- en: System requirements
  id: totrans-19
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 系统要求
- en: System requirements depend on the services that may need to be deployed in the
    future and installed on the server. For demonstration/test purposes, we need a
    minimal configuration of 300 MHz CPU, 192 MB of RAM, and a 1.5 GB hard disk. This
    light configuration allows us to deploy Ubuntu Server on an old computer or even
    a little virtual machine. This limited footprint is basically due to the absence
    of the X Windows System (graphic interface), which is not needed in a server environment.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 系统要求取决于未来可能需要部署和安装的服务。为了演示/测试的目的，我们需要一个最小配置：300 MHz 的 CPU，192 MB 的 RAM 和 1.5
    GB 的硬盘。这个轻量级配置使我们可以在旧计算机甚至虚拟机上部署 Ubuntu Server。这种有限的资源占用主要是因为没有 X Windows 系统（图形界面），而在服务器环境中通常不需要图形界面。
- en: In a production environment, you should be careful about your actual needs in
    terms of resources (the CPU, RAM, and hard disk) and the estimation growth of
    those needs. To do this, you need to make a good measure of dimensions based on
    the services that you are going to deploy.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在生产环境中，您应小心考虑资源（CPU、RAM 和硬盘）的实际需求以及这些需求的预估增长。为此，您需要根据即将部署的服务，做好尺寸的良好衡量。
- en: In the case of the samples in this book, we will use the 64-bit version of Ubuntu
    Server 15.04, and we will install it on a virtual box machine that has 1 GB of
    RAM and 2 TB of hard disk.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的示例将使用 64 位版本的 Ubuntu Server 15.04，并将在一台拥有 1 GB RAM 和 2 TB 硬盘的虚拟机上安装。
- en: Tip
  id: totrans-23
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Note that if you are using a used computer/server, you should back up your data
    before installing or upgrading Ubuntu. Partitioning tools used in the installation
    process are reliable and can be used for many years without any problems in general,
    but sometimes, they can perform catastrophic actions.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，如果您使用的是二手计算机/服务器，在安装或升级 Ubuntu 之前，您应先备份数据。安装过程中使用的分区工具是可靠的，通常可以无问题地使用多年，但有时它们可能会执行灾难性的操作。
- en: Additional resources
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 额外资源
- en: This book comprises only the essentials. It contains exactly what you need to
    know to perform a specific task. If you need more information about and an in-depth
    understanding of Ubuntu, you can have a look at the official documentation by
    visiting [https://help.ubuntu.com](https://help.ubuntu.com).
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 本书仅包含必要的内容。它恰好涵盖了您完成特定任务所需了解的内容。如果您需要更多关于 Ubuntu 的信息并深入了解，可以访问官方文档，[https://help.ubuntu.com](https://help.ubuntu.com)。
- en: You should download the CD image according to your system architecture. The
    whole list exists at [http://releases.ubuntu.com/15.04/](http://releases.ubuntu.com/15.04/).
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 您应根据您的系统架构下载 CD 镜像。完整的镜像列表可以在[http://releases.ubuntu.com/15.04/](http://releases.ubuntu.com/15.04/)找到。
- en: The manual installation
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 手动安装
- en: In this section, we will have a look at how to install Ubuntu Server manually,
    either from the CD or the USB key. Here, we will only cover the installation from
    the CD; the same procedure applies for the installation from the USB key. In the
    latter case, you should configure your computer (using the BIOS interface) to
    boot from USB.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将看看如何手动安装 Ubuntu Server，无论是从 CD 还是 USB 驱动器。在此，我们仅讨论从 CD 安装的过程；从 USB 驱动器安装的过程相同。在后者的情况下，您需要通过
    BIOS 界面配置计算机从 USB 启动。
- en: There is another way to manually install Ubuntu Server, which is via network,
    but since we will see this procedure in depth in the next **Automated installation**
    section, we will not cover it here.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一种手动安装 Ubuntu Server 的方式，即通过网络安装，但由于我们将在下一节**自动化安装**中深入讲解此过程，因此在这里不做讨论。
- en: A simple installation from a CD
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 从 CD 进行简单安装
- en: 'The procedure for installing Ubuntu from a CD is the same as that for most
    of the Linux distributions. So, if you are familiar with this, you can save time
    and move directly to the next section. If you are a newbie in this field, please
    follow this section closely, since the next sections (advanced installation and
    automated installation) will be based on this. Note that for Ubuntu Server edition,
    there is no graphical environment like the one in the desktop edition. So, you
    will need to use only the keyboard and not the mouse. The stepwise procedure to
    install Ubunto from CD is as follows:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 从 CD 安装 Ubuntu 的过程与大多数 Linux 发行版相同。因此，如果您已经熟悉这一过程，可以节省时间，直接跳到下一节。如果您是这个领域的新手，请仔细阅读这一节，因为接下来的章节（高级安装和自动化安装）将基于此。请注意，Ubuntu
    Server 版没有桌面版那样的图形环境。因此，您只需使用键盘，而不能使用鼠标。以下是从 CD 安装 Ubuntu 的逐步过程：
- en: First of all, download the installation CD image that matches your CPU architecture
    from the download page at [http://releases.ubuntu.com/15.04/](http://releases.ubuntu.com/15.04/)
    and burn it on to an empty CD.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，从[http://releases.ubuntu.com/15.04/](http://releases.ubuntu.com/15.04/)的下载页面下载与你的
    CPU 架构匹配的安装 CD 镜像，并将其刻录到空白 CD 上。
- en: Secondly, verify that your server BIOS is configured to boot on a CD-ROM drive;
    if this isn't the case, take care that you change it.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 其次，验证你的服务器 BIOS 是否配置为从 CD-ROM 驱动器启动；如果不是这种情况，请确保进行更改。
- en: Insert your CD in to the CD-ROM drive and boot it.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 CD 插入 CD-ROM 驱动器并启动。
- en: Just after the boot process starts, you will be asked to select the installation
    language. Choose the one that you want. Don't worry if you choose some other language
    by mistake. You will soon learn how to change the settings.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在启动过程刚开始时，你将被要求选择安装语言。选择你需要的语言。如果你不小心选择了其他语言，也不用担心，你很快就会学会如何更改设置。
- en: Now, you will get the following interface:![A simple installation from a CD](img/B04800_01_01.jpg)
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你将看到以下界面：![从 CD 启动的简单安装](img/B04800_01_01.jpg)
- en: 'You can see a lot of options that cater to your needs:'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你可以看到很多选项，满足你的需求：
- en: If you just press the *Enter* key when selecting the default **Install Ubuntu
    Server** option, you will start the installation process.
  id: totrans-39
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果在选择默认的 **安装 Ubuntu 服务器** 选项时直接按 *Enter* 键，你将启动安装过程。
- en: The second option, **Multiple server install with MAAS**, will be covered later
    in the chapter when talking about virtualization and cloud.
  id: totrans-40
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二个选项，**使用 MAAS 安装多个服务器**，将在本章后面讲解虚拟化和云计算时讨论。
- en: Some people prefer starting with the third option, **Check disk for defects**,
    to verify that the burn process of the ISO file on the CD was done correctly.
  id: totrans-41
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有些人更喜欢从第三个选项，**检查磁盘缺陷**，开始，以验证将 ISO 文件刻录到 CD 上的过程是否正确。
- en: The fourth option, **Test memory**, is very helpful, especially when your server
    starts crashing and you suspect a RAM-related problem.
  id: totrans-42
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第四个选项，**测试内存**，非常有帮助，特别是在你的服务器开始崩溃并且你怀疑是内存相关问题时。
- en: You can use the fifth option, **Boot from first hard disk**, to bypass the boot
    from the CD in case you forgot it by mistake in the CD-ROM driver.
  id: totrans-43
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以使用第五个选项，**从第一个硬盘启动**，以防你忘记在 CD-ROM 驱动器中启动 CD。
- en: Finally, the last option, **Rescue a broken system**, turns a CD into a rescue
    disk that is useful for backup and recovery.
  id: totrans-44
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，最后一个选项，**修复损坏的系统**，将 CD 变成一个救援磁盘，对于备份和恢复非常有用。
- en: In most of the cases, all that you need to do is launch the installation by
    pressing the **Enter** key when selecting the default **Install Ubuntu Server**
    option, but there are some cases where you need some special options, either because
    of some specific hardware-related need of your machine, or because you need to
    customize the kernel parameters of the server for future use. For this purpose,
    Ubuntu gives you a lot of possibilities via the bottom menu on the boot splash
    screen, which can be accessed via the function keys.
  id: totrans-45
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在大多数情况下，当你选择默认的 **安装 Ubuntu 服务器** 选项时，所有你需要做的就是按 **Enter** 键启动安装过程，但也有一些情况需要一些特殊选项，要么是因为你的机器有一些特定的硬件需求，要么是因为你需要为未来使用定制服务器的内核参数。为此，Ubuntu
    通过启动画面底部的菜单提供了许多可能性，可以通过功能键访问。
- en: If you press **F1**, you will see an interactive help screen with documentation
    for the rest of the options.
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你按 **F1**，你将看到一个交互式帮助屏幕，里面有其他选项的文档。
- en: If you accidentally chose the wrong language at the time of booting, press **F2**
    to change it. The boot screen will automatically choose a keyboard mapping based
    on your language.
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你在启动时不小心选择了错误的语言，按 **F2** 键进行更改。启动屏幕将根据你的语言自动选择一个键盘映射。
- en: If you want a different mapping (for example, in my case, I am preparing screenshots
    for this book in English but I am using a French keyboard), press **F3** to choose
    from a list of keyboard mapping options. The boot screen also has a lot of great
    accessibility options.
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你想选择不同的键盘映射（例如，我在准备本书的截图时使用的是英文，但我使用的是法语键盘），按 **F3** 键从键盘映射选项列表中选择。启动屏幕还提供了许多优秀的辅助功能选项。
- en: The **F4** key displays a list of installation modes from which you can choose
    to install Ubuntu Server by using an OEM installation, a minimal system, and a
    minimal virtualization guest. The OEM installation is available for manufacturers.
    The minimal virtualization guest gives you an easy way to install a virtualized
    version of Ubuntu.
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**F4**键会显示一个安装模式的列表，您可以选择使用 OEM 安装、最小化系统或最小化虚拟化客户端来安装 Ubuntu 服务器。OEM 安装适用于制造商。最小化虚拟化客户端为您提供了一个轻松安装虚拟化版
    Ubuntu 的方法。'
- en: The **F5** key shows an accessibility menu that allows you to choose a high-contrast
    screen, a screen magnifier, a screen reader, a braille terminal, keyboard modifiers,
    and even an on-screen keyboard.
  id: totrans-50
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**F5**键显示了一个辅助功能菜单，允许您选择高对比度屏幕、屏幕放大器、屏幕阅读器、盲文终端、键盘修饰符，甚至屏幕键盘。'
- en: 'The real power and control over the boot process is available once you press
    the **F6** key. Here, you can see a menu of the common arguments that help the
    CD boot on difficult hardware. If you press the *Esc* key, you will move from
    this menu to the boot prompt. You can type extra kernel boot parameters that you
    might need for your hardware, as shown in the following screenshot:'
  id: totrans-51
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一旦按下**F6**键，您将获得对启动过程的真正控制。在这里，您可以看到一个常见参数的菜单，这些参数有助于在硬件较为复杂的情况下从 CD 启动。如果按下*Esc*键，您将从该菜单返回启动提示符。在此处，您可以输入可能需要的额外内核启动参数，具体如下所示的截图：
- en: '![A simple installation from a CD](img/B04800_01_02.jpg)'
  id: totrans-52
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![从 CD 进行简单安装](img/B04800_01_02.jpg)'
- en: Just after launching the installation process, you will be asked to choose the
    language of the installation procedure, which will be the default language of
    the server that you wish to install. Select the one that you want by using the
    up/down arrow keys on your keyboard and then press the *Enter* key. You will also
    be asked for the location of the server (based on this, the system will fix the
    server time settings). Then, you have a choice of either letting the installer
    detect your keyboard layout, or you entering it manually.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在启动安装过程后，系统会要求您选择安装过程的语言，这将成为您要安装的服务器的默认语言。使用键盘上的上下箭头键选择您想要的语言，然后按*Enter*键。系统还会要求您选择服务器的位置（基于此，系统将调整服务器时间设置）。之后，您可以选择让安装程序自动检测键盘布局，或手动输入键盘布局。
- en: After performing these steps, the installer starts the installation process
    by detecting the hardware and loading some packages. Then, it moves on to configure
    the network settings by using **DHCP** (**Dynamic Host Configuration Protocol**)
    and asking for the hostname that you would like to give to your server. If you
    wouldn't like to use DHCP for network configuration, choose **go back** or simply
    press the *Esc* button to go to the first interface of network configuration,
    where you will find the **Configure the network manually** option, as shown in
    the following screenshot:![A simple installation from a CD](img/B04800_01_03.jpg)
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行完这些步骤后，安装程序将通过检测硬件并加载一些软件包来启动安装过程。然后，它将继续配置网络设置，使用**DHCP**（**动态主机配置协议**），并询问您想要为服务器设置的主机名。如果您不想使用
    DHCP 进行网络配置，请选择**返回**，或者简单按*Esc*键回到网络配置的第一个界面，在这里您可以找到**手动配置网络**选项，如下图所示：![从 CD
    进行简单安装](img/B04800_01_03.jpg)
- en: By making this choice, you will be asked via different interfaces to enter your
    IP address, Netmask, the default Gateway, and DNS.
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 通过做出这个选择，系统会通过不同的界面提示您输入 IP 地址、子网掩码、默认网关和 DNS。
- en: Note
  id: totrans-56
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Note that if you enter wrong information by mistake and you realize just after
    pressing the *Enter* key, don't worry. You can go back easily to the previous
    interface and re-enter the correct data. All that you need to do is choose **Go
    Back** or simply press the *Esc* button.
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意，如果您不小心输入了错误的信息，并且在按下*Enter*键后才发现，也不必担心。您可以轻松返回上一界面并重新输入正确的数据。只需要选择**返回**，或者简单按*Esc*键。
- en: Also note that this data is not a tattoo, and you can change it later. We will
    have a look at how to do this in the next chapter.
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 还请注意，这些数据并非“固定不变”，您可以稍后更改它们。我们将在下一章中介绍如何操作。
- en: At this point, we have almost finished the network settings part. We will be
    asked for the hostname in the next screen, and then we will move on to the user
    settings. First of all, you will be asked about the full username. Then, you will
    get an interface that asks for the Ubuntu username, which will be used for authentication
    with a proposition derived from the full username that you entered before. You
    can accept the proposition or modify it. Finally, you will be asked to enter and
    re-enter a password for this user. Be careful in this step because the keys entered
    will be hidden, as shown in the following screenshot. Therefore, it is important
    to remember the keys that you have entered:![A simple installation from a CD](img/B04800_01_04.jpg)
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此时，我们几乎完成了网络设置部分。接下来将要求输入主机名，然后我们进入用户设置部分。首先，你将被问及完整的用户名。接着，你将看到一个界面，要求输入用于身份验证的Ubuntu用户名，该用户名通常会根据你之前输入的完整用户名给出建议。你可以接受这个建议或进行修改。最后，你将被要求输入并重新输入该用户的密码。此步骤需要小心，因为输入的密码将被隐藏，如下截图所示。因此，记得输入的密码非常重要：![从CD进行简单安装](img/B04800_01_04.jpg)
- en: Next, you will be asked whether you would like to encrypt your home directory.
    Don't do that unless you know what you are doing. At the end of this step, you
    will be asked to check your time zone. Change it in case it is incorrect.
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 接下来，你将被问是否想要加密你的家目录。除非你知道自己在做什么，否则不要选择加密。在这一步的最后，你将被要求检查时区。如果时区不正确，请进行更改。
- en: Now, the most critical part of the installation arrives—partitioning! If you
    are using a new hard disk, you will see a screen, as shown in the following screenshot:![A
    simple installation from a CD](img/B04800_01_05.jpg)
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，安装的最关键部分到来了——分区！如果你使用的是一块新的硬盘，你将看到一个屏幕，如下截图所示：![从CD进行简单安装](img/B04800_01_05.jpg)
- en: If you are using a used hard disk, you will receive an interface that is a little
    different. It contains in general the same four options with the options related
    to the reuse of the existing partitions. The first three options are the recommended
    ones for a newbie. In our case, we will choose the **Guided—use entire disk and
    set up LVM** option. The **Manual** option will be covered in the **Advanced installation**
    section.
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你使用的是一块二手硬盘，你将看到一个稍微不同的界面。它通常包含相同的四个选项，并且与现有分区的重用选项相关联。前三个选项是推荐给新手的。在我们的例子中，我们将选择**引导——使用整个磁盘并设置LVM**选项。**手动**选项将在**高级安装**部分介绍。
- en: 'On pressing the *Enter* key, you will be taken to the next screen, where you
    will be asked to choose the disk that you would like to partition. You will then
    be taken to an interface, which will ask for your permission to write changes
    on the disk with the **No** option selected. We of course need to make changes
    to the disk. We should just verify that we created a backup of our data on the
    disk before moving on. The next step is to select the **Yes** option and press
    the *Enter* key. Before you finish this step, you will be asked to enter the size
    of each volume group that you will be using for this partitioning. You can answer
    with a number followed by a symbol such as MB, GB, and TB, or simply use a percentage.
    Finally, you will get a summary of the partitioning step, which needs to be confirmed
    before it is applied, as shown in the following screenshot. Select the **Yes**
    option and press the *Enter* key:'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 按下*Enter*键后，你将进入下一屏幕，系统会要求你选择要分区的磁盘。然后你将进入一个界面，系统会询问你是否允许在磁盘上写入更改，默认选择的是**否**。我们当然需要对磁盘进行更改。在继续之前，我们应该确保已经备份了磁盘上的数据。接下来选择**是**选项并按*Enter*键。完成此步骤前，你将被要求输入每个卷组的大小，这些卷组将用于这次分区。你可以输入一个数字，后面跟上单位，如MB、GB或TB，或者简单地使用百分比。最后，你将得到分区步骤的摘要，需在应用之前确认，如下截图所示。选择**是**选项并按*Enter*键：
- en: '![A simple installation from a CD](img/B04800_01_06.jpg)'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![从CD进行简单安装](img/B04800_01_06.jpg)'
- en: At this point, the real installation process starts. During the installation,
    the installer needs only the CD, but if there is an Internet connection, it can
    be used to download software lists and install the latest updates. For that, it
    will ask you to either enter the proxy settings if you have one, or to keep this
    field empty.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此时，真正的安装过程开始了。在安装过程中，安装程序只需要CD，但如果有网络连接，它可以用来下载软件列表并安装最新的更新。为此，它将要求你输入代理设置（如果有的话），或者保持此字段为空。
- en: 'After this step, the installer will start downloading the software list (we
    will cover this later in the next chapter). This step can take some time, depending
    on your Internet speed:'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![A simple installation from a CD](img/B04800_01_07.jpg)'
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: 'After a few minutes, the installation process starts:'
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '![A simple installation from a CD](img/B04800_01_08.jpg)'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_IMG
- en: During this step, you will be asked about the update policy. Personally, I recommend
    that you deactivate the automatic installation of updates. It is better when the
    administrator manages the installation of updates manually depending on the servers
    that are running on Ubuntu Server.
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: One of the useful facilities that are given by the Ubuntu installer is the ability
    to choose to install server packages such as the SSH and DNS server. You can choose
    one of them by pressing the *space bar*, and you can continue the installation
    process by pressing the *Enter* key. In our case, we will decide not to install
    a server at this step. We will have a look at how to do this in a later chapter:![A
    simple installation from a CD](img/B04800_01_09.jpg)
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, you will be asked to confirm the installation of the GRUB boot loader
    to the **Master Boot Recorder** (**MBR**). Then, you will get the following notification
    at the end of the installation process:![A simple installation from a CD](img/B04800_01_10.jpg)
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Upgrading from an old release
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In case you have an existing Ubuntu Server and you would like to upgrade it
    to the newest release, you can use the `do-release-upgrade` command. This command
    is a part of the `update-manager-core` package; it does not have any graphical
    dependencies and is installed by default.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: 'You can check the options list associated with this command by running the
    following:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'You will find the following options very useful:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
- en: '`do-release-upgrade --check-dist-upgrade-only`: The `--check-dist-upgrade-only`
    option checks for a new version. If a new version is found, it is displayed as
    a result in the terminal. Once executed, this command performs only a verification
    job; no upgrade is made.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`do-release-upgrade --sandbox`: The `--sandbox` option is used to test an upgrade
    in a protected environment. This is particularly useful if you wish to test the
    deployment of an upgrade prior to its application in the production environment.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`do-release-upgrade`: The `do-release-upgrade` tool researches and makes an
    upgrade to the next LTS or stable version available, if it exists.'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Tip
  id: totrans-81
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The upgrade policy used by the `do-release-upgrade` tool is defined in the `/etc/update-manager/release-upgrades`
    file. The prompt variable at the end of the file indicates whether only the LTS
    versions will be considered or all the versions (the LTS ones as well as the regular
    ones) will be searched for when asking for an upgrade. The prompt variable can
    take as values `lts` for the LTS versions, `normal` for all versions, and `never`
    to never search for new versions.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: You should only use the `Prompt=lts` mode when you are deploying a version of
    Ubuntu that is already an LTS. Otherwise, no new version will be detected by `do-release-upgrade`.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 当您部署的是已经是LTS版本的Ubuntu时，您应仅使用`Prompt=lts`模式。否则，`do-release-upgrade`将无法检测到新版本。
- en: The advanced installation
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高级安装
- en: Much of the Ubuntu Server installation process fulfils a majority of user needs,
    and it is used in the same manner by most of the users (newbie or advanced), but
    the part that requires much more attention and which is customized by many advanced
    system administrators depending on their needs is the partitioning step. In this
    section, we will have a look at how to perform an advanced partitioning for a
    specific hard disk schema.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数Ubuntu服务器的安装过程满足了大多数用户的需求，并且大部分用户（无论是新手还是高级用户）都是以相同的方式使用它，但需要更多关注并且根据需求由许多高级系统管理员自定义的部分是分区步骤。在本节中，我们将看看如何针对特定硬盘架构执行高级分区。
- en: Using RAID
  id: totrans-86
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用RAID
- en: The **RAID** technology (an acronym for **Redundant Array of Inexpensive Disks**)
    refers to the techniques used to distribute data across multiple hard drives (creating
    a storage unit from several hard disks). The unit thus created has an improved
    fault tolerance (high availability) or a greater performance (the capacity/write
    speed). The distribution of data on several hard drives allows you to increase
    the safety and reliability of the associated services.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '**RAID**技术（**冗余独立磁盘阵列**的缩写）指的是将数据分布在多个硬盘上（从几个硬盘创建一个存储单元）的一种技术。由此创建的单元具有更高的容错能力（高可用性）或更高的性能（容量/写入速度）。将数据分布在多个硬盘上可以提高相关服务的安全性和可靠性。'
- en: Note
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For more information about this technology, you can take a tour at [http://www.tldp.org/HOWTO/Software-RAID-HOWTO.html](http://www.tldp.org/HOWTO/Software-RAID-HOWTO.html).
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 如需了解更多关于此技术的信息，您可以访问[http://www.tldp.org/HOWTO/Software-RAID-HOWTO.html](http://www.tldp.org/HOWTO/Software-RAID-HOWTO.html)进行学习。
- en: 'In this section, we will see how to install Ubuntu Server using two RAID1 partitions
    on two different hard disks, one for the **root** and the other for **Swap**:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将展示如何使用两个RAID1分区在两个不同的硬盘上安装Ubuntu服务器，一个用于**根**分区，另一个用于**交换**分区：
- en: In the **Partition disk** step, select **manual**. Then, select one by one all
    the disks that you want and which should be a part of the RAID partitions (in
    our case, only two disks). For each disk, create a new empty partition table on
    it.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**分区磁盘**步骤中，选择**手动**。然后，逐个选择您希望成为RAID分区的一部分的所有磁盘（在我们的例子中，只有两个磁盘）。对于每个磁盘，创建一个新的空分区表。
- en: Select the free space on the first drive. Then, choose **Create a new partition**.
    Set the size that you want for **Swap**; it should be twice the RAM size and up
    to 2 GB. Then, choose **Primary** and select **Beginning**. The **physical volume
    for RAID** option should be chosen in the **Use as:** line. Finally, select **Done
    setting up partition**.
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择第一个硬盘上的空闲空间。然后，选择**创建新分区**。设置您希望为**交换区**分配的大小；它应为RAM大小的两倍，最大不超过2 GB。接着，选择**主分区**并选择**起始位置**。在**用作：**一行中，应选择**RAID的物理卷**选项。最后，选择**完成分区设置**。
- en: With the remaining free space, perform the same steps for the root partition.
    The only exception is that after setting the size, choose **Continue** and then
    select **Primary**. Also, select the **Bootable flag:** line to change the value
    to **on**.
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用剩余的空闲空间，为根分区执行相同的步骤。唯一的例外是，在设置大小后，选择**继续**，然后选择**主分区**。此外，选择**可启动标志：**一行并将其值更改为**开**。
- en: Return to the **Partition Disks** step and select **Configure Software RAID**
    at the beginning of the page. Then, choose **yes** to write the modifications
    to disk.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回**分区磁盘**步骤，并在页面开头选择**配置软件RAID**。然后，选择**是**以将更改写入磁盘。
- en: In the **Create MD device** setup and for this example, choose **RAID1**, but
    if you are applying another architecture, choose the one that fits your needs.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**创建MD设备**设置中，对于本示例，选择**RAID1**，但如果您应用的是其他架构，请选择适合您需求的选项。
- en: Now, enter the number of hard drives that you have chosen for the array (in
    our case, we have two active devices). Then, select **Continue**.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，输入您为阵列选择的硬盘数量（在我们的例子中，我们有两个活动设备）。然后，选择**继续**。
- en: Next, enter the number of spare devices (choose the default setting for RAID1,
    which is 0) and then select **Continue**.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，输入备用设备的数量（对于RAID1，选择默认设置为0），然后选择**继续**。
- en: At this step, choose the partitions that you wish to use. For the **Swap** partition,
    choose **sda1** and **sdb1**. Select **Continue** to go to the next step.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Repeat steps 3 to 7 to prepare the root partition, and at the end, choose **sda2**
    and **sdb2**. Finally, select **Finish**.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'We should now have a list of RAID devices and hard drives. The next remaining
    steps are required to format and set the mount point for the RAID devices. Deal
    with the RAID devices as a local hard disk; format and mount accordingly:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
- en: 'Getting back to the initial partitioning page again, we will see our newly
    created **RAID devices #0** and **#1** partitions.'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Under the **RAID1 device #0** partition, select **#1** and press the *Enter*
    key.'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the **Use as:** file, select **swap area** and then apply this partition
    by using the **Done setting up partition** entry.
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Under the **RAID1 device #1** partition, select **#1** and press the *Enter*
    key.'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the **Use as:** file, select **Ext4 journaling file system**.
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the **Mount point** field, choose **/** (the root file system). You can change
    the other options as you wish. Then, apply that partition by using the **Done
    setting up partition** entry.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, select **Finish partitioning and write changes to disk**.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The installation process will then continue normally.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
- en: Using LVM
  id: totrans-109
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '**LVM** (**Logical Volume Manager**) allows the creation and the management
    of logical volume on Linux. The use of logical volumes somehow replaces the disks''
    partitioning. This is a much more flexible system as it allows you, for instance,
    to reduce the size of a file system to expand another one regardless of their
    location on disks.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
- en: Note
  id: totrans-111
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: For more information about this technology, you can take a tour at [http://tldp.org/HOWTO/LVM-HOWTO/](http://tldp.org/HOWTO/LVM-HOWTO/).
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
- en: 'In this section, we will have a look at the partitioning step of Ubuntu Server
    installation process with the **/srv** partition mounted on a LVM volume. This
    section will be divided into two parts—the first part is during the Ubuntu installation
    within only one **PV** (**physical volume**), which will be a part of the **VG**
    (**volume group**), and the second part will be after the Ubuntu installation.
    While performing this process, we will demonstrate how to add a second PV to the
    VG:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
- en: In the **Partition disks** screen, choose **Manual**.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the hard disk. Then, choose **Yes** to confirm the **Create a new empty
    partition table on this device** order.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Next, create standard swap and / partitions with the file system that you want.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: For our `/srv` LVM partition, create a new logical partition and change the
    **Use as** field to **physical volume for LVM**. Then, select **Done setting up
    the partition**.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, choose **Configure the Logical Volume Manager** and select **Yes**.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On the next screen and for **LVM configuration action**, select **Create volume
    group**. Name the VG (for example, vg01). Then, select the partition prepared
    for LVM and choose **Continue**.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Return to the **LVM configuration action** page and select **Create logical
    volume**. Choose the newly created VG and name the new LV. Then, choose a size
    and at the end, select **Finish**. You will be taken to the main **Partition Disks**
    page again.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Now, let's add a file system to our new LVM. To do this, select the partition
    under the LVM that you created and set up the file system that you want and choose
    **/srv** as the mount point. Next, select **Done setting up the partition**.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, apply the **Finish partitioning and write changes to disk** order.
    Then, confirm the changes and continue your installation.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Now, we will continue with the second part that started after the Ubuntu Server
    installation and which covers adding a second hard disk, creating a PV, adding
    it to the existing VG, extending LV with the srv command, and finally extending
    the file system. In this part, we will use a second hard disk named `/dev/sdb`,
    and we will use it entirely as a PV. You can configure and use as much of PV as
    you want:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: 'First of all, create the PV using the following command:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Next, extend the VG (called `vg01` in our example), as follows:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Use the `vgdisplay` command to find out the size that you can allocate (for
    free physical extents, see the **Free PE / size** line). We will assume in our
    example a free size of 511 PE (which is equivalent to 2 GB with a size of 4 MB
    PE), and we will use the entire available free space.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'We can now use the PE to extend the LV via the following command (there are
    other methods, but they are beyond the scope of this book):'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: We used the `-l` option here to extend the LV using PE. If you want to extend
    using MB, GB, and TB, you can use the `-l` option.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Before expanding an `ext3` or `ext4` file system, it is recommended that you
    unmount it before hand (as best practice). In case you want to reduce an LV, it
    will be mandatory to unmount it. The following commands unmount the partition
    and then check it:'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-133
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Finally, you can resize the file system by using the following command:'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Now, you can mount the partition and check its new size using the following
    command:'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The automated installation
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Sometimes, we have a large number of servers to install. In this case, the manual
    installation will take a lot of time to perform a repetitive task. To solve this
    problem, there is the automation installation, or what we call the network boot.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
- en: For this, we need a machine equipped with a DHCP server and a TFTP server that
    will provide us the services and configuration files that we need for the system
    to be installed.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
- en: The PXE process
  id: totrans-141
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The client computer (our future server) will boot its network interface in the
    **PXE** (**Preboot Execution Environment**) mode. Then, the DHCP present on the
    network will send it the `pxelinux.0` file; this will be explained later. Thus,
    the client computer accesses the `pxelinux.cfg` configuration file via TFTP, which
    contains the necessary information required to launch the installation process.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
- en: The PXE installation procedure
  id: totrans-143
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Let''s start with the server installation:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
- en: First of all, install the DHCP server by using the `sudo apt-get install isc-dhcp-server
    -y` command, and then configure it by using the `/etc/default/isc-dhcp-server`
    file to use the network that you want for listening (such as `eth0`).
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'In the `/etc/dhcp/dhcpd.conf` file, you should configure some parameters such
    as the subnet and the address range. Then, restart it by using the following command:'
  id: totrans-146
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'After this, install the following packages that are necessary if you wish to
    set up the PXE environment:'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Now, it is time to configure the TFTP service. To do this, add the following
    two lines to the `/etc/default/tftpd-hpa` file:'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Also, add the following line at the end of the `/etc/inetd.conf file`:'
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Then, reboot the service using the `sudo /etc/init.d/tftpd-hpa restart` command.
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'Now, we need to copy the installation files to the PXE server. In our example,
    I used the ISO image that I have in my home directory. First of all, mount it
    by using the following command:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Then, copy the required files to the server by using the following commands:'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'After doing this, modify the `/var/lib/tftpboot/pxelinux.cfg/default` PXE config
    file by adding the following lines at the end:'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Be careful when adding the IP address.
  id: totrans-161
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'The last step required to set up the PXE server is to add the following lines
    at the end of the `/etc/dhcp/dhcpd.conf` file:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Then, reboot the DHCP server by using the following command:'
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Let''s move on to the client configuration. In our case, I used a `virtualbox`
    instance to test this kind of installation:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
- en: Create the virtual machine with the characteristics that you want via the `virtualbox`
    manager.
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Then, go to the **Settings** of the machine and select the **System** tab. In
    the **Boot Order** part, deselect all options and select **Network**, as shown
    in the following screenshot:![The PXE installation procedure](img/B04800_01_11.jpg)
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the **Network** tab and configure the network adaptor to act as a bridge.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finally, start your VM. You will see the following interface:![The PXE installation
    procedure](img/B04800_01_12.jpg)
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enjoy watching the server installation if you were doing it locally from a CD.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  id: totrans-172
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The PXE installation can be used to install a lot of machines in parallel as
    well as to install Ubuntu Server on machines without a CD-ROM driver.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
- en: The installation process will be entirely automated if you combine the PXE method
    with a `kickstart` and/or `preseed` file. A good starting point for working with
    `kickstart` is [https://help.ubuntu.com/community/KickstartCompatibility](https://help.ubuntu.com/community/KickstartCompatibility).
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: Additional resources
  id: totrans-175
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Since this book consists of the essentials for the Ubuntu Server, we can''t
    cover topics in depth. Therefore, here are some useful links that will help you
    go as far as you want in this subject:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
- en: For details regarding the installation of the Ubuntu desktop from a PXE server,
    visit [https://help.ubuntu.com/community/Installation/LocalNet](https://help.ubuntu.com/community/Installation/LocalNet).
    You can use the same procedure to install Ubuntu Server.
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有关从PXE服务器安装Ubuntu桌面版本的详细信息，请访问：[https://help.ubuntu.com/community/Installation/LocalNet](https://help.ubuntu.com/community/Installation/LocalNet)。你可以使用相同的程序来安装Ubuntu
    Server。
- en: To learn how to prepare a PXE server that allows you to boot multiple distributions
    (Ubuntu, Debian, Fedora, CentOS, and openSUSE), visit [https://help.ubuntu.com/community/PXEInstallMultiDistro](https://help.ubuntu.com/community/PXEInstallMultiDistro).
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你想学习如何准备一个PXE服务器，允许你启动多个发行版（如Ubuntu、Debian、Fedora、CentOS和openSUSE），请访问：[https://help.ubuntu.com/community/PXEInstallMultiDistro](https://help.ubuntu.com/community/PXEInstallMultiDistro)。
- en: For those of you searching for how to set up a MAAS server that will deploy
    a Ubuntu system through `netboot`, a very good guide is available at [http://maas.ubuntu.com/docs/install.html](http://maas.ubuntu.com/docs/install.html).
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于那些正在寻找如何设置一个通过`netboot`部署Ubuntu系统的MAAS服务器的读者，可以参考一个非常好的指南：[http://maas.ubuntu.com/docs/install.html](http://maas.ubuntu.com/docs/install.html)。
- en: Summary
  id: totrans-180
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we had a look at how to install Ubuntu Server in different
    modes—manually and automated—with the help of a simple or an advanced installation.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们了解了如何通过简单或高级安装的方式，在不同模式下安装Ubuntu Server——手动安装和自动安装。
- en: Now, we can start managing our server, which is the subject that we will cover
    in the next chapter.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以开始管理我们的服务器，这是我们将在下一章中讨论的主题。
