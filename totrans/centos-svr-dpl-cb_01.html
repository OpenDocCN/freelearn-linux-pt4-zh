<html><head></head><body><div class="chapter" title="Chapter&#xA0;1.&#xA0;Getting Started with CentOS"><div class="titlepage"><div><div><h1 class="title"><a id="ch01"/>Chapter 1. Getting Started with CentOS</h1></div></div></div><p>This chapter contains the following recipes:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Installing CentOS using Anaconda in graphics mode</li><li class="listitem" style="list-style-type: disc">Installing CentOS using Anaconda in text mode</li><li class="listitem" style="list-style-type: disc">Coordinating multiple installations using Kickstart</li><li class="listitem" style="list-style-type: disc">Running a cloud image with Amazon Web Services' EC2</li><li class="listitem" style="list-style-type: disc">Installing a container image from the Docker Registry</li><li class="listitem" style="list-style-type: disc">Installing the GNOME desktop</li><li class="listitem" style="list-style-type: disc">Installing the KDE Plasma desktop</li></ul></div><div class="section" title="Introduction"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec8"/>Introduction</h1></div></div></div><p>This chapter's recipes focus on getting up and running with CentOS using a variety of installation methods. You'll learn how to perform interactive graphical and text-based installations using Anaconda and perform an unattended installation using Kickstart. You'll also see how to run CentOS in the cloud with Amazon Web Services and in a Docker container image. Most of the recipes in this book take place at the command prompt, but some require a graphical desktop, so we'll finish up with a look at installing the GNOME and KDE Plasma desktops.</p></div></div>
<div class="section" title="Installing CentOS using Anaconda in graphics mode"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec9"/>Installing CentOS using Anaconda in graphics mode</h1></div></div></div><p>In this recipe, you'll learn how to install CentOS using the graphical installer Anaconda. This is the most common way that CentOS is installed, although there are other ways too (some of which are discussed in later recipes). This approach is also the easiest installation method, especially for setting up single-server deployments.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec9"/>Getting ready</h2></div></div></div><p>This recipe assumes that you have a copy of the CentOS 7 installation medium. If you don't, visit <a class="ulink" href="https://www.centos.org">https://www.centos.org</a> and download a minimal ISO image. You'll also need to make a physical disc from the image. Instructions for burning the ISO image to disc can be found at <a class="ulink" href="https://www.centos.org/docs/5/html/CD_burning_howto.html">https://www.centos.org/docs/5/html/CD_burning_howto.html</a>.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip3"/>Tip</h3><p>If your system doesn't have an optical drive and its BIOS supports booting from a USB device, you can also write the ISO image to a USB stick.</p></div></div></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec10"/>How to do it...</h2></div></div></div><p>Follow these steps to install CentOS using the graphical installer Anaconda:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Insert the installation disc into your system's optical drive (or USB stick into a USB port) and reboot. The system should boot to the CentOS 7 installation menu:<div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_001.jpg"/><div class="caption"><p>The installer is launched from the installation menu</p></div></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note4"/>Note</h3><p>If your system doesn't boot to the installation menu then the drive may not be configured as a boot device. The exact steps to verify and adjust the configuration vary between BIOS vendors, but in general you'll press <span class="emphasis"><em>Esc, F1, F2,</em></span> or <span class="emphasis"><em>Delete</em></span> while the system is booting to gain access to the BIOS settings. Then you'll find the list of boot devices and change the order in which each is searched for a boot record.</p></div></div></li><li class="listitem">Using the arrow keys, make sure that the <span class="strong"><strong>Install CentOS 7</strong></span> option is highlighted and press <span class="emphasis"><em>Enter.</em></span></li><li class="listitem">The <span class="strong"><strong>WELCOME TO CENTOS 7</strong></span> screen confirms which language to use during the installation process. Select your desired language and click on <span class="strong"><strong>Continue</strong></span>:<div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_002.jpg"/><div class="caption"><p>You can change the language used during the installation process</p></div></div></li><li class="listitem">The next screen is a menu that organizes the installation options by category. We'll configure networking first—click on <span class="strong"><strong>NETWORK &amp; HOST NAME</strong></span> under the <span class="strong"><strong>SYSTEM</strong></span> category:<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note5"/>Note</h3><p>If your system doesn't have a mouse, you can navigate using <span class="emphasis"><em>Tab</em></span> to cycle through the input fields, use the arrow keys to select the entry, and press <span class="emphasis"><em>Enter</em></span> to select or activate an input.</p></div></div><div class="mediaobject"><img alt="How to do it..." src="graphics/B00509_01_03.jpg"/><div class="caption"><p>The installation summary screen organizes the installation options into categories</p></div></div></li><li class="listitem">Enter the system's hostname in the <span class="strong"><strong>Host name</strong></span> field. Then, select the system's primary network interface and toggle the switch at the right to <span class="strong"><strong>ON</strong></span> to enable it. Click on the <span class="strong"><strong>Done</strong></span> button when you're finished to return to the <span class="strong"><strong>INSTALLATION SUMMARY</strong></span> menu:<div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_004.jpg"/><div class="caption"><p>The NETWORK &amp; HOST NAME screen lets us configure the system's network interfaces</p></div></div></li><li class="listitem">Click on <span class="strong"><strong>DATE &amp; TIME</strong></span> under the <span class="strong"><strong>LOCALIZATION</strong></span> category.</li><li class="listitem">Set your time zone by either selecting your region and city or by clicking on your location on the map. Then, click on <span class="strong"><strong>Done</strong></span> to return to the <span class="strong"><strong>INSTALLATION SUMMARY</strong></span> menu:<div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_005.jpg"/><div class="caption"><p>The DATE &amp; TIME screen lets us configure the system's time zone</p></div></div></li><li class="listitem">If you know what purpose the system will serve on your network and require something more than a minimal installation, click on <span class="strong"><strong>SOFTWARE SELECTION</strong></span> under the <span class="strong"><strong>SOFTWARE</strong></span> category. Select the environment and any additional add-ons to install the desired packages. When you're finished, click on <span class="strong"><strong>Done:</strong></span><div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_006.jpg"/><div class="caption"><p>The SOFTWARE SELECTION screen lets us install purpose-based software</p></div></div><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note6"/>Note</h3><p>Software can easily be installed using <code class="literal">yum</code>, so don't worry if you need to install additional software after you already have CentOS up and running. The <span class="strong"><strong>SOFTWARE SELECTION</strong></span> section is purely for convenience.</p></div></div></li><li class="listitem">Click on <span class="strong"><strong>INSTALLATION DESTINATION</strong></span> under the <span class="strong"><strong>SYSTEM</strong></span> category.</li><li class="listitem">Click on the appropriate drive in the <span class="strong"><strong>Local Standard Disks</strong></span> area to set the installation target. If the drive is not bootable, or if multiple drives are selected, click on the <span class="strong"><strong>Full disk summary and boot loader...</strong></span> link at the bottom of the screen to open the <span class="strong"><strong>Selected Disks</strong></span> window. Then, select the drive you want to be the boot device, click on the <span class="strong"><strong>Set as Boot Device</strong></span> button, and click on <span class="strong"><strong>Close</strong></span>. When you're finished, click on <span class="strong"><strong>Done:</strong></span><div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_007.jpg"/><div class="caption"><p>The INSTALLATION DESTINATION screen lets us set the disk where CentOS will be installed</p></div></div></li><li class="listitem">Click on the <span class="strong"><strong>Begin Installation</strong></span> button to start the installation process.</li><li class="listitem">Click on <span class="strong"><strong>Root Password</strong></span>. In the input fields, enter and confirm the password you want to use for the system's root account. Click on <span class="strong"><strong>Done</strong></span> when you've finished entering these details:<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note7"/>Note</h3><p>You'll need to press the Done button twice to return to the configuration screen if you specify a password that's too weak. If you need help to create a strong password, visit <a class="ulink" href="http://www.howtogeek.com/195430/how-to-create-a-strong-password-and-remember-it/">http://www.howtogeek.com/195430/how-to-create-a-strong-password-and-remember-it/</a>.</p></div></div><div class="mediaobject"><img alt="How to do it..." src="graphics/B00509_01_08.jpg"/><div class="caption"><p>The ROOT PASSWORD screen lets us set the root account's password</p></div></div></li><li class="listitem">Click on <span class="strong"><strong>User Creation</strong></span>. In the input fields, provide your name, username, and desired password. Again, press <span class="strong"><strong>Done</strong></span> when you've finished entering these details:<div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_009.jpg"/><div class="caption"><p>The CREATE USER screen lets us create an unprivileged user account</p></div></div></li><li class="listitem">When the installation is complete, click on the <span class="strong"><strong>Finish Configuration</strong></span> button. Anaconda will finalize the system's configuration and the button's label will change to <span class="strong"><strong>Reboot</strong></span>.</li><li class="listitem">Remove the CentOS installation media from the drive and reboot your system.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec11"/>How it works...</h2></div></div></div><p>After installing CentOS using Anaconda in graphical mode, you should now have a basic CentOS 7 system up and running. The process began when we booted the system from the installation disc and selected <span class="strong"><strong>Install CentOS 7</strong></span> from the installation menu. The installer's kernel loaded into memory and Anaconda launched in graphical mode.</p><p>The <span class="strong"><strong>NETWORK &amp; HOST NAME</strong></span> screen shows a list of the available network interfaces and basic information about them, for instance, the card's MAC address and transfer rate. By default, the interfaces are configured to use DHCP to obtain their IP address when they are enabled. (Configuring a static IP address is discussed in a later recipe.)</p><p>The system's time zone is set on the <span class="strong"><strong>LOCALIZATION</strong></span> screen. The date and time fields are disabled when NTP is enabled because the values will be set by the NTP service. The system clock's time can drift for many reasons, especially if the system is running on a virtual machine, so allowing NTP to manage the system's time is a good idea to ensure it stays correct. If the date and time fields aren't set by NTP, make sure the <span class="strong"><strong>Network Time</strong></span> toggle is set <span class="strong"><strong>ON</strong></span>. You can specify an NTP server by clicking on the button with the gears icon.</p><p>The <span class="strong"><strong>INSTALLATION DESTINATION</strong></span> screen lets us set the installation target for CentOS and specify how the system's drives are partitioned. You can choose to configure the partitions if you have special requirements, but in this recipe I let Anaconda partition the drives automatically.</p><p>While Anaconda is busy installing CentOS and any additional software packages you may have requested, it shows us the <span class="strong"><strong>Configuration</strong></span> screen. This screen gives us the opportunity to set a password for the system's administrative account (<code class="literal">root</code>) and create an unprivileged user account. You should only sign in with <code class="literal">root</code> when necessary; for your normal day-to-day work you should use your unprivileged account. Anaconda finalizes the installation by configuring the system's boot record and creating the user account.</p><p>After the system reboots, the Grub boot loader prompt appears and the arrow keys can be used to select a boot configuration. There's also a timer, so pressing nothing will eventually boot the system using the default configuration.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec12"/>See also</h2></div></div></div><p>For more information on installing CentOS 7, refer to the RHEL 7 Installation Guide (<a class="ulink" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide</a>).</p></div></div>
<div class="section" title="Installing CentOS using Anaconda in text mode"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec10"/>Installing CentOS using Anaconda in text mode</h1></div></div></div><p>Next, you'll learn how to install CentOS using Anaconda in text mode. It's recommended that you install CentOS graphically because graphics mode is easier to use and offers more functionality. However, it may not be available when the system lacks sufficient resources to run the installer in graphical mode, for example, if the display adaptor's capabilities are limited or if there is reduced RAM.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec13"/>Getting ready</h2></div></div></div><p>This recipe assumes that you have a copy of the CentOS 7 installation medium. If you don't, visit <a class="ulink" href="https://www.centos.org">https://www.centos.org</a> to download an ISO image and then burn the image to a disc.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec14"/>How to do it...</h2></div></div></div><p>Follow these steps to perform a text-based installation of CentOS:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Insert the installation disc into your system's optical drive (or USB stick into a USB port) and reboot. The system should boot to the CentOS 7 installation menu.</li><li class="listitem">Using the arrow keys, make sure the <span class="strong"><strong>Install CentOS 7</strong></span> option is highlighted and press <span class="emphasis"><em>
<span class="strong"><strong>Tab</strong></span>.</em></span> The command to boot the installer kernel appears at the bottom of the screen.</li><li class="listitem">Add the word <code class="literal">text</code> to the end of the list of arguments and press <span class="emphasis"><em>
<span class="strong"><strong>Enter</strong></span>.</em></span> Anaconda will launch in text mode:<pre class="programlisting">       vmzlinuz initrd=initrd.img inst.stage2=hd:LABEL=CentOS &#13;
       \x207\x20x86_64 rd.live.check quiet text &#13;
</pre><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note8"/>Note</h3><p>Anaconda will launch in text mode automatically if your system has less than 768 MB of RAM.</p></div></div></li><li class="listitem">The <span class="strong"><strong>Installation</strong></span> menu presents the installation options by category. Type <span class="strong"><strong>2</strong></span> and press <span class="emphasis"><em>Enter</em></span> to select <span class="strong"><strong>Timezone settings</strong></span>:<div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_010.jpg"/><div class="caption"><p>The text-based installation menu categorizes the installation options</p></div></div></li><li class="listitem">The <span class="strong"><strong>Timezone settings</strong></span> menu presents a list of regions. Enter the number for the desired value.</li><li class="listitem">You will be given a list of available time zones in the selected region (paginate through the list by pressing <span class="emphasis"><em>Enter</em></span> if the list is long). Enter the number for the desired time zone.</li><li class="listitem">If you know what purpose the system will serve and require something more than a minimal installation, enter <span class="strong"><strong>3</strong></span> to select <span class="strong"><strong>Software selection</strong></span>. Here you can select groups of software packages for that purpose. When finished, enter <span class="emphasis"><em>c</em></span> to continue back to the <span class="strong"><strong>Installation</strong></span> menu.</li><li class="listitem">Enter <span class="strong"><strong>5</strong></span> to select <span class="strong"><strong>Network settings</strong></span>.</li><li class="listitem">Enter <span class="strong"><strong>1</strong></span> to set the system's hostname. Type the desired name and press <span class="emphasis"><em>Enter.</em></span></li><li class="listitem">Enter the number to configure the system's primary network interface. Then, enter <span class="strong"><strong>7</strong></span> to mark <span class="strong"><strong>Connect automatically after reboot</strong></span> and <span class="strong"><strong>8</strong></span> to mark <span class="strong"><strong>Apply configuration in installer</strong></span>. Enter <span class="emphasis"><em>c</em></span> to go back to the <span class="strong"><strong>Network settings</strong></span> menu and <span class="emphasis"><em>c</em></span> again to return to the <span class="strong"><strong>Installation</strong></span> menu:<div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_011.jpg"/><div class="caption"><p>The Network settings menu lets us configure the system's network interfaces</p></div></div></li><li class="listitem">Enter <span class="strong"><strong>6</strong></span> to select <span class="strong"><strong>Install Destination</strong></span>.</li><li class="listitem">If the desired drive is not already marked, enter the number for the drive. Then, enter <span class="emphasis"><em>c</em></span> to continue. The <span class="strong"><strong>Autopartioning Options</strong></span> menu is shown in the following screenshot:<div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_012.jpg"/><div class="caption"><p>The Install Destination menu let us set the installation target and the Autopartioning Options menu lets us specify how the disk will be used</p></div></div></li><li class="listitem">Enter the number for the desired partitioning (<span class="strong"><strong>Use All Space</strong></span> is the default) and then <span class="strong"><strong>c</strong></span> to continue.</li><li class="listitem">Select the desired partition scheme (<span class="strong"><strong>LVM</strong></span> is the default) and then enter <span class="emphasis"><em>c</em></span> to return to the <span class="strong"><strong>Installation</strong></span> menu.</li><li class="listitem">Enter <span class="strong"><strong>8</strong></span> to select <span class="strong"><strong>Create user</strong></span>.</li><li class="listitem">Enter <span class="strong"><strong>1</strong></span> to mark the <span class="strong"><strong>Create user</strong></span> option. Provide your name and set a username for the account by entering <span class="strong"><strong>2</strong></span> and <span class="strong"><strong>3</strong></span> respectively. Enter <span class="strong"><strong>4</strong></span> to mark the <span class="strong"><strong>Use password</strong></span> option and then <span class="strong"><strong>5</strong></span> to set your password. Then, enter <span class="emphasis"><em>c</em></span> to return to the <span class="strong"><strong>Installation</strong></span> menu:<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note9"/>Note</h3><p>You must confirm you really want to use your password if you provide a password that is too weak.</p></div></div><div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_013.jpg"/><div class="caption"><p>The Create User menu let us create an unprivileged user account</p></div></div></li><li class="listitem">Enter <span class="strong"><strong>9</strong></span> to select <span class="strong"><strong>Set root password</strong></span>. Enter and confirm the password you want to use for the system's root account.</li><li class="listitem">After all of the sections that required attention have been resolved, enter <span class="emphasis"><em>b</em></span> to begin the installation process.</li><li class="listitem">When the installation is complete, remove the media from the drive and reboot the system.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec15"/>How it works...</h2></div></div></div><p>This recipe showed you how to install CentOS using Anaconda running in text mode. The process began when we booted the system from the installation disc, selected <span class="strong"><strong>Install CentOS 7</strong></span> from the installation menu, and added the <code class="literal">text</code> option to the boot parameters. The installer's kernel loaded into memory and Anaconda launched in text mode.</p><p>The text-based installation is similar to installing CentOS in graphical mode, answering prompts for time zone, software, and networking information. However, Anaconda presents the prompts in a different order when running in text mode and some functionality is missing. For example, we can't perform custom disk partitioning. Nevertheless, text mode enables us to quickly install a basic CentOS system.</p></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec16"/>See also</h2></div></div></div><p>For more information on installing CentOS 7, refer to the RHEL 7 Installation Guide (<a class="ulink" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide</a>).</p></div></div>
<div class="section" title="Coordinating multiple installations using Kickstart"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec11"/>Coordinating multiple installations using Kickstart</h1></div></div></div><p>If you're planning on installing CentOS on multiple servers, it's more convenient to automate as much of the process as possible. In this recipe, you'll learn how to use Anaconda's <code class="literal">kickstart.cfg</code> file to perform an unattended network-based installation.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec17"/>Getting ready</h2></div></div></div><p>This recipe requires at least two systems on your network: an existing system running an HTTP server to host the installation files and Kickstart configuration (the recipe <span class="emphasis"><em>Installing Apache HTTP Server and PHP</em></span> in <a class="link" href="ch10.html" title="Chapter 10. Managing Web Servers">Chapter 10</a>, <span class="emphasis"><em>Managing Web Servers</em></span>, shows you how to install Apache) and the target system on which we'll install CentOS. You'll also need the installation media and administrative privileges.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec18"/>How to do it...</h2></div></div></div><p>Follow these steps to perform unattended network installations using the Kickstart method:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in to the system running the HTTP server using the root account.</li><li class="listitem">Place the installation disc in the system's optical drive.</li><li class="listitem">Mount the disc using the <code class="literal">mount</code> command so that its contents are accessible:<pre class="programlisting">
<span class="strong"><strong>mount /dev/cdrom /media</strong></span>
</pre></li><li class="listitem">Create a new directory under Apache's web root to host the installation files:<pre class="programlisting">
<span class="strong"><strong>mkdir -p /var/www/html/centos/7/x86_64</strong></span>
</pre></li><li class="listitem">Copy the contents of the installation disc to the new directory:<pre class="programlisting">
<span class="strong"><strong>cp -r /media/* /var/www/html/centos/7/x86_64</strong></span>
</pre></li><li class="listitem">Copy the <code class="literal">kickstart.cfg</code> file created by Anaconda when the system was installed to Apache's web root:<pre class="programlisting">
<span class="strong"><strong>cp /root/kickstart.cfg /var/www/html/kickstart.cfg</strong></span>
</pre></li><li class="listitem">Unmount and remove the installation disc:<pre class="programlisting">
<span class="strong"><strong>umount /media</strong></span>
<span class="strong"><strong>eject /dev/cdrom</strong></span>
</pre></li><li class="listitem">Insert the disc into the target system's drive and reboot it. The system should boot to the CentOS 7 installation menu.</li><li class="listitem">Highlight the <span class="strong"><strong>Install CentOS 7</strong></span> option and press <span class="emphasis"><em>Tab.</em></span></li><li class="listitem">Update the arguments used to boot the installer kernel to read as follows. Change the IP address as necessary to point to the system hosting the Kickstart file:<pre class="programlisting">       vmlinuz initrd=initrd.img ks=http://192.168.56.100/kickstart.cfg &#13;
</pre></li><li class="listitem">Press <span class="emphasis"><em>Enter</em></span> to begin the installation process.</li><li class="listitem">Once the installation process begins, you can eject the disc and begin the next system's installation. Repeat steps 8-11 for each additional system.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec19"/>How it works...</h2></div></div></div><p>Anaconda writes the configuration values we provide when performing a graphical or text-based installation to <code class="literal">kickstart.cfg</code>. If you plan on installing CentOS on multiple servers, it's more convenient to use the file to provide the interface's answers. The remaining installations can be performed mostly unattended and the systems' configurations will be more consistent.</p><p>This recipe showed you how to make the <code class="literal">kickstart.cfg</code> file and the CentOS installation files available to other systems over the network, and update the boot command to tell Anaconda where to look for the installation files and prompt responses. Since the software packages are retrieved from the installation server instead of the disc, you can eject the disc as soon as the installation process is underway and use it to begin the next process on your next system.</p><p>Of course, <code class="literal">kickstart.cfg</code> can be used as a starting point, and you can edit the responses using a text editor to further customize the installations. If you like, you can create multiple kickstart files in the web root, each with a different configuration. Just specify the desired file when you set the installer's boot arguments.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip10"/>Tip</h3><p>Although you can edit your kickstart files with a basic text editor, dedicated programs exist for editing them as well. Check out Kickstart Configurator (<a class="ulink" href="http://landoflinux.com/linux_kickstart_configurator.html">http://landoflinux.com/linux_kickstart_configurator.html</a>).</p></div></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec20"/>See also</h2></div></div></div><p>For more information on coordinating multiple installations of CentOS 7, refer to the following resources:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">RHEL 7 Installation Guide (<a class="ulink" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide</a>)</li><li class="listitem" style="list-style-type: disc">Anaconda documentation (<a class="ulink" href="http://rhinstaller.github.io/anaconda/index.html">http://rhinstaller.github.io/anaconda/index.html</a>)</li><li class="listitem" style="list-style-type: disc">Install PXE Server on CentOS 7 (<a class="ulink" href="http://www.unixmen.com/install-pxe-server-centos-7">http://www.unixmen.com/install-pxe-server-centos-7</a>)</li></ul></div></div></div>
<div class="section" title="Running a cloud image with Amazon Web Services' EC2"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec12"/>Running a cloud image with Amazon Web Services' EC2</h1></div></div></div><p>Amazon Web Services (AWS) is a suite of services hosted within Amazon's network infrastructure which allows companies and individuals take advantage of their computing/storage capacity and world wide data centers. Elastic Cloud Compute (EC2) is a virtualization platform that lets us set up virtual systems on demand, usually to host websites and web apps. This recipe will walk you through the process of setting up a new virtual server running CentOS on the AWS platform.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec21"/>Getting ready</h2></div></div></div><p>This recipe assumes that you have an AWS account. You can sign up for one at <a class="ulink" href="http://aws.amazon.com">http://aws.amazon.com</a>. You will need to provide a valid credit card, although you will have access to Amazon's free tier for 12 months.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec22"/>How to do it...</h2></div></div></div><p>To set up a new Amazon Machine Instance (AMI) on AWS's EC2 platform, follow these steps:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Log in at <a class="ulink" href="https://aws.amazon.com">https://aws.amazon.com</a> and go to the AWS Management console. Under the <span class="strong"><strong>Compute</strong></span> category, click on the EC2 link to access the EC2 management page. Then, click on the <span class="strong"><strong>Launch Instance</strong></span> button:<div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_014.jpg"/><div class="caption"><p>The EC2 Management Console presents an overview and quick access to resources</p></div></div></li><li class="listitem">On the <span class="strong"><strong>Choose an Amazon Machine Image (AMI)</strong></span> page, select <span class="strong"><strong>Community AMIs</strong></span> in the side menu and then check the <span class="strong"><strong>CentOS</strong></span> filter. A list of instances created by the community will be shown. Select the one you desire:<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note11"/>Note</h3><p>Review the list of available images carefully. Many are available, created using different versions of CentOS and with various configurations.</p></div></div><div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_015.jpg"/><div class="caption"><p>The image selection page presents a filterable list of machine images created by community users</p></div></div></li><li class="listitem">On the <span class="strong"><strong>Review Instance Launch</strong></span> page, review your instance's resources (the number of virtual CPUs, available memory, and so on) and click on the <span class="strong"><strong>Launch</strong></span> button:<div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note12"/>Note</h3><p>Amazon guides you through selecting an AMI and configuring it in a wizard-like fashion, listing the steps at the top of the page. The <span class="strong"><strong>Review</strong></span> and <span class="strong"><strong>Launch</strong></span> buttons jump directly to the last step. You can use the links at the top of the page to go back to an earlier step and adjust the instance's configuration.</p></div></div><div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_016.jpg"/><div class="caption"><p>Review your instance's resources on the <span class="strong"><strong>Review Instance Launch</strong></span> page</p></div></div></li><li class="listitem">Using the drop-down list, select <span class="strong"><strong>Create a new key pair</strong></span>, enter a suitable filename for the key, and click on the <span class="strong"><strong>Download Key Pair</strong></span> button. After you save the downloaded private encryption key, click on the <span class="strong"><strong>Launch Instances</strong></span> button:<div class="mediaobject"><img alt="How to do it..." src="graphics/image_01_017.jpg"/><div class="caption"><p>You're prompted to create a pair of encryption keys the first time you launch the image</p></div></div></li><li class="listitem">On the launch status page, click on the <span class="strong"><strong>View Instances</strong></span> button at the bottom of the page. Then, right-click on the running instance and select <span class="strong"><strong>Connect</strong></span> from the context menu. Select the preferred connection method and follow the instructions that appear on the screen.</li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec23"/>How it works...</h2></div></div></div><p>This recipe walked you through the steps necessary to spin up a new CentOS AMI on AWS's EC2 platform. To log in to the system, a password or set of encryption keys is needed, and since the primary user account's password is likely to be unknown, we opted to generate a new pair of keys. The private key is downloaded and then used with your SSH client to authenticate your login.</p><p>Once you have logged in to your running system, it's worth viewing the contents of the <code class="literal">/etc/system-release</code> file to verify the running version of CentOS. Also, you should use the <code class="literal">passwd</code> command to change the root account's password if the account isn't already locked down. This is an important security precaution because you don't know who knows the default password. You'll find recipes for managing user permissions in <a class="link" href="ch03.html" title="Chapter 3. User and Permission Management">Chapter 3</a>, <span class="emphasis"><em>User and Permission Management,</em></span> and recipes for managing remote access in <a class="link" href="ch06.html" title="Chapter 6. Allowing Remote Access">Chapter 6</a>, <span class="emphasis"><em>Allowing Remote Access:</em></span></p><div class="mediaobject"><img alt="How it works..." src="graphics/image_01_018.jpg"/><div class="caption"><p>After you log in, verify the system's version number and update the root password</p></div></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec24"/>See also</h2></div></div></div><p>Refer to the following resources for more information on working with AMIs on Amazon's EC2 platform:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">What Is Amazon EC2? (<a class="ulink" href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts.html">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts.html</a>)</li><li class="listitem" style="list-style-type: disc">Connect to Your Linux Instance (<a class="ulink" href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstances.html">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstances.html</a>)</li><li class="listitem" style="list-style-type: disc">Remove SSH Host Key Pairs (<a class="ulink" href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/building-shared-amis.html#remove-ssh-host-key-pairs">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/building-shared-amis.html#remove-ssh-host-key-pairs</a>)</li></ul></div></div></div>
<div class="section" title="Installing a container image from the Docker Registry"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec13"/>Installing a container image from the Docker Registry</h1></div></div></div><p>This recipe shows you how to procure a CentOS base for your development needs using Docker, a virtualization strategy based on the concept of containers. Each container wraps the target software in its own filesystem so that it can run regardless of the operating system on which it's installed. Developers like Docker especially because it helps provide consistency between development and deployment environments.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec25"/>Getting ready</h2></div></div></div><p>The recipe assumes that you have a system with Docker installed. If you don't, you can obtain the Docker installer from <a class="ulink" href="http://www.docker.com">http://www.docker.com</a>.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec26"/>How to do it...</h2></div></div></div><p>Follow these steps to install a CentOS container image from the Docker Registry:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Open the Docker Toolbox terminal program.</li><li class="listitem">At the terminal's prompt, invoke the <code class="literal">docker pull</code> command to retrieve a CentOS 7 container:<pre class="programlisting">
<span class="strong"><strong>docker pull centos:7</strong></span>
</pre></li><li class="listitem">After the container has been downloaded, you can launch an interactive shell with <code class="literal">docker run</code>:<pre class="programlisting">
<span class="strong"><strong>docker run -i -t centos:7 /bin/bash</strong></span>
</pre></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec27"/>How it works...</h2></div></div></div><p>This recipe retrieves the official CentOS container from the Docker Registry using the <code class="literal">docker pull</code> command. By providing the version tag (<code class="literal">:7</code>), we can make sure we retrieved CentOS 7 as opposed to an earlier (or perhaps newer) version.</p><p>Alternatively, Kitematic is the graphical program which lets us search for and retrieve containers from the registry. Simply launch Kitematic and enter CentOS as the search term in the search box. Then, look for the official CentOS repository in the results list.</p><p>The default version retrieved by Kitematic is the latest. To specifically select CentOS 7 or a maintenance release, click on the entry's ellipsis button. Set the desired tag and then click on the <span class="strong"><strong>Create</strong></span> button:</p><div class="mediaobject"><img alt="How it works..." src="graphics/image_01_019.jpg"/><div class="caption"><p>Kitematic displays the results of searching for CentOS</p></div></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec28"/>See also</h2></div></div></div><p>Refer to the following resources for more information about working with Docker:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">Docker home page (<a class="ulink" href="http://www.docker.com">http://www.docker.com</a>)</li><li class="listitem" style="list-style-type: disc">Understanding the Docker architecture (<a class="ulink" href="https://docs.docker.com/engine/understanding-docker">https://docs.docker.com/engine/understanding-docker</a>)</li><li class="listitem" style="list-style-type: disc">The official CentOS Docker hub (<a class="ulink" href="https://hub.docker.com/_/centos">https://hub.docker.com/_/centos</a>)</li></ul></div></div></div>
<div class="section" title="Installing the GNOME desktop"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec14"/>Installing the GNOME desktop</h1></div></div></div><p>This recipe shows you how to install the GNOME desktop environment, which provides a graphical user interface (GUI) for working with your CentOS system. Usually, such environments aren't installed on server systems, but it can be convenient sometimes to have one available. For example, an administrator might feel more comfortable updating a system's configuration using graphical programs.</p><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="note13"/>Note</h3><p>GNOME isn't the only GUI environment available —other popular environments include KDE, XFCE, and Fluxbox. If GNOME isn't your cup of tea, the next recipe shows you how to install KDE.</p></div></div><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec29"/>Getting ready</h2></div></div></div><p>This recipe requires a CentOS system with a working network connection. Administrative privileges are also required by logging in with the <code class="literal">root</code> account.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec30"/>How to do it...</h2></div></div></div><p>Follow these steps to install the GNOME desktop environment:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Install the <code class="literal">GNOME Desktop</code> package group with <code class="literal">yum groupinstall</code>:<pre class="programlisting">
<span class="strong"><strong>yum groupinstall "GNOME Desktop"</strong></span>
</pre></li><li class="listitem">Manually start the desktop environment using <code class="literal">startx</code>:<pre class="programlisting">
<span class="strong"><strong>startx</strong></span>
</pre></li><li class="listitem">If more than one environment is installed, you'll need to specify the path to <code class="literal">gnome-session</code>:<pre class="programlisting">
<span class="strong"><strong>startx /usr/bin/gnome-session</strong></span>
</pre></li><li class="listitem">When you're done using GNOME and log out of the desktop, you'll be returned to the console.</li><li class="listitem">To configure the system to automatically start the graphical environment when it boots, set the default start up target to <code class="literal">graphical.target</code>:<pre class="programlisting">
<span class="strong"><strong>systemctl set-default graphical.target</strong></span>
</pre></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec31"/>How it works...</h2></div></div></div><p>This recipe uses <code class="literal">yum</code> to install the GNOME desktop environment. All of the necessary components and dependencies are installed by the <code class="literal">GNOME Desktop</code> package group. Package groups saves us time and hassle because they let us install a collection of packages for a common task at the same time instead of individual packages one at a time.</p><pre class="programlisting">
<span class="strong"><strong>yum groupinstall "GNOME Desktop"</strong></span>
</pre><p>Unlike Windows, where the graphical desktop is part of its operating system, Linux systems delegate basic graphics and input handling to a graphics server. This approach is one reason why there are several desktop environments to choose from —it abstracts many of the specifics and provides a common platform on top of which any number of environments can run, both locally and across a network. CentOS's default graphics server is X Window System.</p><p>If GNOME is the only desktop environment installed, it'll be run by default when we launch X with <code class="literal">startx</code>. However, if more than one desktop is installed, we need to tell X which one we want to run. For GNOME, we provide the path to <code class="literal">gnome-session</code>:</p><pre class="programlisting">
<span class="strong"><strong>startx /usr/bin/gnome-session</strong></span>
</pre><div class="mediaobject"><img alt="How it works..." src="graphics/image_01_020.jpg"/><div class="caption"><p>The GNOME desktop provides a graphical interface for working with the system</p></div></div><p>The systemd service manager is responsible for starting various servers and processes when the system boots. The <code class="literal">systemctl</code> command is our interface to the service manager and can be used to set the default boot target. The default target dictates whether the system boots to a terminal or GUI-based login screen:</p><pre class="programlisting">
<span class="strong"><strong>systemctl set-default graphical.target</strong></span>
</pre><p>When set to graphical, systemd starts X and the GNOME Display Manager when the system boots, which presents us with a graphical login to provide our account details. Once we're authenticated, the desktop session is initiated and we find ourselves at the GNOME desktop.</p><p>If you no longer want to boot to the graphical environment, you can set the default target back to multiuser and the system will boot to the terminal-based login screen again:</p><pre class="programlisting">
<span class="strong"><strong>systemctl set-default multi-user.target</strong></span>
</pre><div class="note" style="" title="Note"><div class="inner"><h3 class="title"><a id="tip14"/>Tip</h3><p>You can choose which desktop environment you want to use if more than one environment is installed by selecting it from the gear button on the login screen:</p><div class="mediaobject"><img alt="How it works..." src="graphics/image_01_021.jpg"/><div class="caption"><p>You can select your preferred desktop from the login screen</p></div></div></div></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec32"/>See also</h2></div></div></div><p>The following resources will provide you with more information about installing graphical desktop environments and using the GNOME desktop:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">GNOME Library (<a class="ulink" href="https://help.gnome.org">https://help.gnome.org</a>)</li><li class="listitem" style="list-style-type: disc">RHEL 7 Desktop Migration and Administration Guide (<a class="ulink" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Desktop_Migration_and_Administration_Guide">https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Desktop_Migration_and_Administration_Guide</a>)</li><li class="listitem" style="list-style-type: disc"><span class="emphasis"><em>Guild to X11/Starting Sessions</em></span> (<a class="ulink" href="https://en.wikibooks.org/wiki/Guide_to_X11/Starting_Sessions">https://en.wikibooks.org/wiki/Guide_to_X11/Starting_Sessions</a>)</li><li class="listitem" style="list-style-type: disc">How to install desktop environments on CentOS 7 (<a class="ulink" href="http://unix.stackexchange.com/questions/181503/how-to-install-desktop-environments-on-centos-7/181504#181504">http://unix.stackexchange.com/questions/181503/how-to-install-desktop-environments-on-centos-7/181504#181504</a>)</li></ul></div></div></div>
<div class="section" title="Installing the KDE Plasma desktop"><div class="titlepage"><div><div><h1 class="title"><a id="ch01lvl1sec15"/>Installing the KDE Plasma desktop</h1></div></div></div><p>Separating the graphical interface from the operating system gives users the power to choose the graphical environment they like best. Don't worry if you're not a GNOME fan because there are still many other desktops you can explore! This recipe shows you how to install another popular desktop environment, KDE Plasma Workspaces.</p><div class="section" title="Getting ready"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec33"/>Getting ready</h2></div></div></div><p>This recipe requires a CentOS system with a working network connection. Administrative privileges are also required by logging in with the root account.</p></div><div class="section" title="How to do it..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec34"/>How to do it...</h2></div></div></div><p>Follow these steps to install the KDE Plasma Workspaces desktop environment:</p><div class="orderedlist"><ol class="orderedlist arabic"><li class="listitem">Install the <code class="literal">KDE Plasma Workspaces</code> package group:<pre class="programlisting">
<span class="strong"><strong>yum groupinstall "KDE Plasma Workspaces"</strong></span>
</pre></li><li class="listitem">Manually start the desktop environment using <code class="literal">startkde</code>. When you're done using KDE and log out of the desktop, you'll be returned to the console:<pre class="programlisting">
<span class="strong"><strong>startkde</strong></span>
</pre></li><li class="listitem">To configure the system to automatically start the graphical environment when it boots, use <code class="literal">systemctl</code> to set the default start up target to <code class="literal">graphical.target</code>:<pre class="programlisting">
<span class="strong"><strong>systemctl set-default graphical.target</strong></span>
</pre></li></ol></div></div><div class="section" title="How it works..."><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec35"/>How it works...</h2></div></div></div><p>This recipe installs the KDE Plasma Workspaces desktop environment via Yum's package groups. All of the necessary software components and dependencies to run KDE are installed by the <code class="literal">KDE Plasma Workspaces</code> package group:</p><pre class="programlisting">
<span class="strong"><strong>yum groupinstall "KDE Plasma Workspaces"</strong></span>
</pre><p>The <code class="literal">startkde</code> script starts the X server and launches the KDE environment together. Unlike with GNOME, we're not invoking <code class="literal">startx</code> directly, so we don't need to provide additional paths when more than one environment is installed:</p><pre class="programlisting">
<span class="strong"><strong>startkde</strong></span>
</pre><div class="mediaobject"><img alt="How it works..." src="graphics/image_01_022.jpg"/><div class="caption"><p>KDE Plasma Workspaces is a  popular graphical desktop environment for Linux-based systems</p></div></div></div><div class="section" title="See also"><div class="titlepage"><div><div><h2 class="title"><a id="ch01lvl2sec36"/>See also</h2></div></div></div><p>The following resources will provide you with more information about installing and using KDE Plasma Workspaces:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem" style="list-style-type: disc">How to install desktop environments on CentOS 7 (<a class="ulink" href="http://unix.stackexchange.com/questions/181503/how-to-install-desktop-environments-on-centos-7/181504#181504">http://unix.stackexchange.com/questions/181503/how-to-install-desktop-environments-on-centos-7/181504#181504</a>)</li><li class="listitem" style="list-style-type: disc">KDE documentation (<a class="ulink" href="https://docs.kde.org">https://docs.kde.org</a>)</li></ul></div></div></div></body></html>