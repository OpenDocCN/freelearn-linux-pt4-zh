["```\nroot@beaglebone:~# echo cape-bone-iio > /sys/devices/bone_capemgr.9/slots\n\n```", "```\nroot@beaglebone:~# ./load_firmware.sh adc\n```", "```\nroot@beaglebone:~# cat /sys/devices/ocp.3/helper.12/AIN0\n1745\n\n```", "```\nroot@beaglebone:~# cat /sys/devices/ocp.3/helper.12/AIN0\n1\n\n```", "```\nroot@beaglebone:~# cat /sys/devices/ocp.3/helper.12/AIN1\n317\n\n```", "```\nroot@beaglebone:~# cat /sys/devices/ocp.3/helper.12/AIN1\n15\n\n```", "```\nroot@beaglebone:~# cat /sys/devices/ocp.3/helper.12/AIN1\n954\n\n```", "```\nroot@beaglebone:~# echo BB-I2C1 > /sys/devices/bone_capemgr.9/slots\n\n```", "```\nroot@beaglebone:~# i2cget -y 2 0x5a 0x07 wp\n0x3bab\n\n```", "```\nroot@beaglebone:~# echo \"$(printf \"ibase=16; %X\\n\" $(i2cget -y 2 0x5a 0x07 wp) | bc) * 0.02 - 273.15\" | bc\n\n```", "```\nroot@beaglebone:~# echo BB-W1-GPIO > /sys/devices/bone_capemgr.9/slots\n\n```", "```\nroot@beaglebone:~# ls /sys/bus/w1/devices/\n28-000004b541e9  w1_bus_master1\n\n```", "```\nroot@beaglebone:~# cat /sys/bus/w1/devices/28-000004b541e9/w1_slave\nd8 01 00 04 1f ff 08 10 1c : crc=1c YES\nd8 01 00 04 1f ff 08 10 1c t=29500\n\n```", "```\nroot@beaglebone:~# ls -l /dev/video*\ncrw-rw---T 1 root video 81, 0 Jan  1  2000 /dev/video0\n\n```", "```\nroot@beaglebone:~# aptitude install fswebcam\n\n```", "```\nroot@beaglebone:~# fswebcam webcam-shot.jpg\n--- Opening /dev/video0...\nTrying source module v4l2...\n/dev/video0 opened.\nNo input was specified, using the first.\nAdjusting resolution from 384x288 to 352x288.\n--- Capturing frame...\nCaptured frame in 0.00 seconds.\n--- Processing captured image...\nWriting JPEG image to 'webcam-shot.jpg'.\n\n```", "```\n--- Opening /dev/video0...\nTrying source module v4l2...\n/dev/video0 opened.\nNo input was specified, using the first.\nAdjusting resolution from 384x288 to 352x288.\n--- Capturing frame...\ngd-jpeg: JPEG library reports unrecoverable error: Not a JPEG file: starts with 0x11 0x80\nCaptured frame in 0.00 seconds.\n--- Processing captured image...\nWriting JPEG image to 'webcam-shot.jpg'.\n```", "```\nroot@beaglebone:~# fswebcam -S 10 webcam-shot.jpg\n\n```", "```\nroot@beaglebone:~# fswebcam --title \"Picture's title\" --info \"Information text\" --jpeg 85 webcam-shot.jpg\n--- Opening /dev/video0...\nTrying source module v4l2...\n/dev/video0 opened.\nNo input was specified, using the first.\nAdjusting resolution from 384x288 to 352x288.\n--- Capturing frame...\nCaptured frame in 0.00 seconds.\n--- Processing captured image...\nSetting title \"Picture's title\".\nSetting info text \"Information text\".\nSetting output format to JPEG, quality 85\nWriting JPEG image to 'webcam-shot.jpg'.\n\n```", "```\nroot@beaglebone:~# wget https://github.com/facebook/facebook-php-sdk-v4/archive/5.0-dev.zip\n\n```", "```\nroot@beaglebone\n:~# unzip 5.0-dev.zip\n\n```", "```\ndefine('FACEBOOK_SDK_V4_SRC_DIR', __DIR__ . '/facebook-php-sdk-v4-5.0-dev/src/Facebook/');\nrequire_once __DIR__ . '/facebook-php-sdk-v4-5.0-dev/src/Facebook/autoload.php';\n```", "```\nrequire_once \"setup.php\";\n```", "```\n# Define the Facebook session\n$fb = new Facebook\\Facebook([\n   'app_id'                  => APP_ID,\n   'app_secret'              => APP_SECRET,\n   'default_graph_version'   => 'v2.4',\n   'default_access_token'    => DEF_TOKEN,\n   'fileUpload'              => true,\n   'cookie'                  => true,\n]);\n\n# Print user's information\ntry {\n   $res = $fb->get('/me');\n} catch(Exception $e) {\n   err(\"error!\\n\");\n   dbg(\"=========================================================================\\n\");\n   dbg($e);\n   dbg(\"=========================================================================\\n\");\n   die();\n}\n$node = $res->getGraphObject();\ninfo(\"name is \\\"%s\\\" (%s)\\n\",\n   $node->getProperty('name'), $node->getProperty('id'));\n\n# Print user's permissions\n$res = $fb->get(\"/me/permissions\");\n$node = $res->getDecodedBody();\ninfo(\"permissions are:\\n\");\nforeach ($node['data'] as $perm)\n   info(\"\\t%s is %s\\n\", $perm['permission'], $perm['status']);\n```", "```\n<?php\n\ndefine('APP_ID', '000000000000000');\ndefine('APP_SECRET', '00000000000000000000000000000000');\ndefine('DEF_TOKEN', 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX');\n\n?>\n```", "```\nrequire_once \"config.php\";\n```", "```\nroot@beaglebone:~# ./get_info.php\nget_info.php[  62]: name is \"Open Graph Test User\" (119617175051891)\nget_info.php[  67]: permissions are:\nget_info.php[  69]:    user_friends is granted\nget_info.php[  69]:    publish_actions is granted\nget_info.php[  69]:    public_profile is granted\n\n```", "```\n# Define the Facebook session\n$fb = new Facebook\\Facebook([\n   'app_id'                  => APP_ID,\n   'app_secret'              => APP_SECRET,\n   'default_graph_version'   => 'v2.4',\n   'default_access_token'    => DEF_TOKEN,\n   'fileUpload'              => true,\n   'cookie'                  => true,\n]);\n\n# Print user's information\ntry {\n   $res = $fb->get('/me');\n} catch(Exception $e) {\n   err(\"error!\\n\");\n   dbg(\"=========================================================================\\n\");\n   dbg($e);\n   dbg(\"=========================================================================\\n\");\n   die();\n}\n$node = $res->getGraphObject();\ninfo(\"name is \\\"%s\\\" (%s)\\n\",\n   $node->getProperty('name'), $node->getProperty('id'));\n\n# Publish to user's timeline\ntry {\n   $ret = $fb->post('/me/photos', array(\n      'message'   => 'MyPlant message',\n      'source'   => $fb->videoToUpload(realpath('web-cam-shot.jpg')),\n   ));\n} catch(Exception $e) {\n   err(\"error!\\n\");\n   dbg(\"=========================================================================\\n\");\n   dbg($e);\n   dbg(\"=========================================================================\\n\");\n   die();\n}\n\ninfo(\"done\\n\");\n```", "```\nroot@beaglebone:~# ./post_pic.php\npost_pic.php[  62]: name is \"Open Graph Test User\" (119617175051891)\npost_pic.php[  78]: done\n\n```", "```\nroot@beaglebone:~# ./get_info.php\nget_info.php[  62]: name is \"Rodolfo Giometti\" (10206138948545992)\nget_info.php[  67]: permissions are:\nget_info.php[  69]:    publish_actions is granted\nget_info.php[  69]:    public_profile is granted\n\n```", "```\nroot@beaglebone:~# ./post_pic.php\npost_pic.php[  62]: name is \"Rodolfo Giometti\" (10206138948545992)\npost_pic.php[  78]: done\n\n```", "```\nroot@beaglebone:~# ./get_info.php -d\nget_info.php[  54]: error!\nget_info.php[  55]: ==========================================================================\nget_info.php[  56]: exception 'Facebook\\Exceptions\\FacebookSDKException' with message 'SSL certificate problem: certificate is not yet valid' in /root/chapter_07/facebook-php-sdk-v4-5.0-dev/src/Facebook/HttpClients/FacebookCurlHttpClient.php:83\nStack trace:\n#0 /root/chapter_07/facebook-php-sdk-v4-5.0-dev/src/Facebook/FacebookClient.php(216): Facebook\\HttpClients\\FacebookCurlHttpClient->send('https://graph.f...', 'GET', '', Array, 60)\n#1 /root/chapter_07/facebook-php-sdk-v4-5.0-dev/src/Facebook/Facebook.php(504): Facebook\\FacebookClient->sendRequest(Object(Facebook\\FacebookRequest))\n#2 /root/chapter_07/facebook-php-sdk-v4-5.0-dev/src/Facebook/Facebook.php(377): Facebook\\Facebook->sendRequest('GET', '/me', Array, NULL, NULL, NULL)\n#3 /root/chapter_07/get_info.php(52): Facebook\\Facebook->get('/me')\n#4 {main}get_info.php[  57]: ==========================================================================\n\n```", "```\nroot@beaglebone# diff -u facebook-php-sdk-v4-5.0-dev/src/Facebook/HttpClients/FacebookCurlHttpClient.php.orig facebook-php-sdk-v4-5.0-dev/src/Facebook/HttpClients/FacebookCurlHttpClient.php\n--- facebook-php-sdk-v4-5.0-dev/src/Facebook/HttpClients/FacebookCurlHttpClient.php.orig   2014-04-26 01:34:08.187500961 +0000\n+++ facebook-php-sdk-v4-5.0-dev/src/Facebook/HttpClients/FacebookCurlHttpClient.php   2014-04-26 01:34:37.582032215 +0000\n@@ -111,7 +111,7 @@\n CURLOPT_RETURNTRANSFER => true, // Follow 301 redirects\n CURLOPT_HEADER => true, // Enable header processing\n CURLOPT_SSL_VERIFYHOST => 2,\n-            CURLOPT_SSL_VERIFYPEER => true,\n+            CURLOPT_SSL_VERIFYPEER => false,\n CURLOPT_CAINFO => __DIR__ . '/certs/DigiCertHighAssuranceEVRootCA.pem',\n ];\n\n```", "```\nfunction daemon_body () {\n   # Read plant data and take the first picture\n   read_sensors\n   next_date=$(do_picture)\n\n   # The main loop\n   dbg \"start main loop\"\n   while sleep 1 ; do\n      # Read plant data from all sensors\n      read_sensors\n\n      ( # Wait for lock on LOCK_FILE (fd 99) for 10 seconds\n      flock -w 10 -x 99 || exit 1\n\n      # Read the user parameters\n      cff_mois=$(cat $STATUS_FILE | json_decode cff_mois)\n      [ -z \"$cff_mois\" ] && cff_mois=1\n      dbg \"cff_mois=$cff_mois\"\n\n      # Compute the moisture level\n      est_mois=$msr_mois\n      if (( $(bc <<< \"$int_temp < $ext_temp\") == 1 )) ; then\n         est_mois=$(bc -l <<< \"$msr_mois + $cff_mois * ( $ext_temp - $int_temp )\")\n         fi\n         dbg \"est_mois=$est_mois\"\n\n         # Write back the plant parameters\n         json_encode lig_levl $lig_levl \\\n            int_temp $int_temp \\\n            ext_temp $ext_temp \\\n            msr_mois $msr_mois \\\n            cff_mois $cff_mois \\\n            est_mois $est_mois > $STATUS_FILE\n\n         # Release the lock\n         ) 99>$LOCK_FILE\n\n         # Have to take a new picture?\n         [ $(date \"+%H%M\") == \"$next_date\" ] && next_date=$(do_picture)\n     done\n}\n```", "```\nfunction read_sensors ( ) {\n   lig_levl=$(adc_read $LIGHT_DEV)\n   int_temp=$(w1_read $INT_TEMP_DEV)\n   ext_temp=$(i2c_read $EXT_TEMP_DEV)\n   msr_mois=$(adc_read $MOISTURE_DEV)\n   dbg \"lig_levl=$lig_levl int_temp=$int_temp ext_temp=$ext_temp msr_mois=$msr_mois\"\n   dbg \"curr_date=$(date \"+%H%M\") next_date=$next_date\"\n}\n```", "```\nfunction do_picture ( ) {\n   # Compute the light level\n   ll=\"mid\"\n   [ $lig_levl -le $LIGHT_LOW ] && ll=\"low\"\n   [ $lig_levl -ge $LIGHT_HIGH ] && ll=\"high\"\n\n   # Take the picture\n   fswebcam -q --title \"My lovely plant\" \\\n      --info \"Temp: $ext_temp/$int_temp°C - Light: $ll\" \\\n      --jpeg 85 $IMG_FILE\n\n   # Compute the next picture time\n   date -d \"now +$1 minutes\" \"+%H%M\"\n}\n```", "```\n   (\n      flock -n 9 || exit 1\n      # ... commands executed under lock ...\n   ) 9>/var/lock/mylockfile\n```", "```\nroot@beaglebone:~# ./plant_mon.sh -d -l -f -k 1\nplant_mon.sh: min=1\nplant_mon.sh: signals traps installed\nplant_mon.sh: lig_levl=295 int_temp=29.50 ext_temp=31.01 msr_mois=0\nplant_mon.sh: curr_date=1109 next_date=\nplant_mon.sh: start main loop\nplant_mon.sh: lig_levl=304 int_temp=29.50 ext_temp=31.11 msr_mois=0\nplant_mon.sh: curr_date=1109 next_date=1110\nplant_mon.sh: cff_mois=50\nplant_mon.sh: est_mois=80.50\n...\n\n```", "```\n<body>\n <h1>Plant monitor status</h1>\n\n <h2>Internal variables</h2>\n\n <table class=\"status\">\n  <tr class=\"d0\">\n    <td>Light level</td>\n    <td><b id=\"lig_levl\">0</b></td>\n    <td></td>\n  </tr>\n  <tr class=\"d1\">\n    <td>Internal temperature[C]</td>\n    <td><b id=\"int_temp\">0</b></td>\n    <td></td>\n  </tr>\n  <tr class=\"d0\">\n    <td>External temperature[C]</td>\n    <td><b id=\"ext_temp\">0</b></td>\n    <td></td>\n  </tr>\n  <tr class=\"d1\">\n    <td>Measured moisture</td>\n    <td><b id=\"msr_mois\">0</b></td>\n    <td></td>\n  </tr>\n  <tr class=\"d0\">\n    <td>Moisture coefficient</td>\n    <td><b id=\"cff_mois\">0</b></td>\n    <td><input id=\"val_cff_mois\" name=\"val_cff_mois\" class=\"set-inputbox\">\n     <button id=\"set_cff_mois\" class=\"set-button\">Set</button>\n    </td>\n  </tr>\n  <tr class=\"d1\">\n    <td>Estimated moisture</td>\n    <td><b id=\"est_mois\">0</b></td>\n    <td></td>\n  </tr>\n </table>\n\n <h2>Last picture</h2>\n\n <img id=\"webcam_shot\" alt=\"Last picture\">\n\n <p><button id=\"post_pic\" class=\"do-button\">Post on Facebook</button></p>\n\n</body>\n```", "```\n<script>\n $(function() {\n  $('button[class=\"set-button\"]').click(function() {\n   var id = $(this).attr(\"id\");\n   var box = document.getElementById(id.replace('set_', 'val_'));\n\n   $.ajax({\n    url: \"/handler.php\",\n    type: \"POST\",\n    data: \"set=\" + id.replace('set_', '') + \"&val=\" + box.value,      success: function() {\n      console.log('set POST success');\n     },\n     error: function() {\n      console.log('set POST error');\n     }\n   });\n  });\n });\n</script>\n```", "```\n    <script>\n      $(function() {\n        $('button[class=\"do-button\"]').click(function() {\n          var id = $(this).attr(\"id\");\n\n          $.ajax({\n            url: \"/handler.php\",\n            type: \"POST\",\n            data: \"do=\" + id,\n            success: function() {\n              console.log('do POST success');\n            },\n            error: function() {\n              console.log('do POST error');\n            }\n          });\n        });\n      });\n    </script>\n```", "```\n    <script>\n      var polldata = function() {\n        $.getJSON('/handler.php', function(data) {\n          $.each(data, function(key, val) {\n            var e = document.getElementById(key);\n\n            if (e != null) {\n              if (e.type == \"text\")\n                e.value = val;\n              else\n                e.textContent = val;\n            }\n          });\n        });\n\n        var url = '/webcam-shot.jpg';\n        var d = new Date();\n        $('#webcam_shot').attr('src', url + '?d=' + d.getTime());\n      };\n\n      setInterval(polldata, 1000);\n    </script>\n```", "```\n        var url = '/webcam-shot.jpg';\n        var d = new Date();\n        $('#webcam_shot').attr('src', url + '?d=' + d.getTime());\n```", "```\n#\n# Ok, do the job\n#\n\n# Check the POST requests\nif (isset($_POST[\"val\"]))\n   $new_cff_mois = floatval($_POST[\"val\"]);\nelse if (isset($_POST[\"do\"]))\n   do_post();\n\n# Wait for lock on /tmp/plant.lock\n$lock = file_lock(LOCK_FILE);\nif (!$lock)\n   die();\n\n# Read the status file and decode it\n$ret = file_get_contents(STATUS_FILE);\nif ($ret === false)\n   die();\n$data = json_decode($ret, true);\n\n# Use the stored value reset to a specific defualt\nif (isset($new_cff_mois))\n   $data['cff_mois'] = $new_cff_mois;\n\n# Write back the new status (if needed)\n$status = json_encode($data);\nif (isset($new_cff_mois)) {\n   $ret = file_put_contents(STATUS_FILE, $status);\n   if ($ret === false)\n      die();\n}\n\n# Release the lock\nfile_unlock($lock);\n\n# Encode data for JSON\necho $status;\n```", "```\nfunction file_lock($name)\n{\n   $f = fopen($name, 'w');\n   if ($f === false)\n      return false;\n\n   $ret = flock($f, LOCK_EX);\n   if ($ret === false)\n      return false;\n\n   return $f;\n}\n\nfunction file_unlock($f)\n{\n   flock($f, LOCK_UN);\n   fclose($f);\n}\n```", "```\nfunction do_post()\n{\n   # Define the Facebook session\n   $fb = new Facebook\\Facebook([\n      'app_id'                => APP_ID,\n      'app_secret'            => APP_SECRET,\n      'default_graph_version' => 'v2.4',\n      'default_access_token'  => DEF_TOKEN,\n      'fileUpload'            => true,\n      'cookie'                => true,\n   ]);\n\n   # Publish to user's timeline\n   $ret = $fb->post('/me/photos', array(\n      'message'    => 'My lovely plant!',\n      'source'     => $fb->videoToUpload(realpath('webcam-shot.jpg')),\n   ));\n}\n```", "```\nroot@beaglebone:~# ./SYSINIT.sh\ndone!\n\n```", "```\nroot@beaglebone:~# root@beaglebone:~/chapter_07# ./plant_mon.sh -d -l -f\nplant_mon.sh: min=10\nplant_mon.sh: signals traps installed\nplant_mon.sh: lig_levl=442 int_temp=29.50 ext_temp=29.91 msr_mois=0\nplant_mon.sh: curr_date=0010 next_date=\nplant_mon.sh: start main loop\nplant_mon.sh: lig_levl=428 int_temp=29.50 ext_temp=29.25 msr_mois=0\nplant_mon.sh: curr_date=0010 next_date=0011\nplant_mon.sh: cff_mois=50\nplant_mon.sh: est_mois=221\nplant_mon.sh: lig_levl=423 int_temp=29.50 ext_temp=27.99 msr_mois=0\nplant_mon.sh: curr_date=0010 next_date=0011\nplant_mon.sh: cff_mois=50\nplant_mon.sh: est_mois=220\n...\n\n```", "```\nroot@beaglebone:~# ls /var/www/\nplant.lock  plant.status  webcam-shot.jpg\n\n```", "```\nroot@beaglebone:# wget --no-check-certificate https://code.jquery.com/jquery-1.9.1.js\n\n```", "```\nroot@beaglebone:# cd /var/www && chown -R www-data:www-data *\n\n```", "```\nroot@beaglebone:/var/www# ls -l\ntotal 308\n-rw-r--r-- 1 www-data www-data    344 Aug 19  2015 config.php\ndrwxr-xr-x 5 www-data www-data   4096 Aug 18  2015 facebook-php-sdk-v4-5.0-dev\n-rw-r--r-- 1 www-data www-data   1846 Aug 26  2015 handler.php\n-rw-r--r-- 1 www-data www-data 268381 Oct 24  2014 jquery-1.9.1.js\n-rw-r--r-- 1 www-data www-data   2968 Aug 26  2015 plant.html\n-rw-rw-rw- 1 www-data www-data      0 Apr 26 01:17 plant.lock\n-rw-rw-rw- 1 www-data www-data     95 Apr 26 01:17 plant.status\n-rw-r--r-- 1 www-data www-data    183 Aug 24  2015 setup.php\n-rw-r--r-- 1 www-data www-data  17583 Apr 26 01:17 webcam-shot.jpg\n\n```"]