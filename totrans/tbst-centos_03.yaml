- en: Chapter 3. Troubleshooting the Network Environment
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: From ghost connections to packet errors, stream failures and connectivity errors
    to missing routes, troubleshooting a network environment can be a slow and arduous
    process that typically begins with the physical layer. However, once you have
    confirmed that the physical nodes are working, the next step is to consider and
    consult the many tools available to your system.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will:'
  prefs: []
  type: TYPE_NORMAL
- en: Discover the basic tools that will help you troubleshoot a variety of issues
    related to the network environment. This discussion will include a round-trip
    tour of `ping`, `dig`, `host`, `traceroute`, and `mtr`.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Discover how to monitor network connections with the `ss` command.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Learn how to investigate packet transmissions with `tcpdump`.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Using ping, dig, host, traceroute, and mtr
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Some of the most common tools available to a troubleshooter are `ping`, `dig`,
    `host`, `traceroute`, and `mtr`. Used collectively, these tools provide the troubleshooter
    with the evidence they need to make a judgment call with respect to almost any
    network-based issue. This is the basis of the network toolkit, but having said
    this, it is important to realize that these commands are used for different purposes,
    and for this reason, we will approach them individually.
  prefs: []
  type: TYPE_NORMAL
- en: The ping command
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The `ping` command is a small utility that can be used to ascertain whether
    or not a specific IP address can be reached. The `ping` command is common to most
    computer systems, and it enables you to query an IP address or a fully qualified
    domain name in order to check whether there is an available connection.
  prefs: []
  type: TYPE_NORMAL
- en: 'The basic syntax of the `ping` command is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: The `ping` command works by issuing an ICMP echo request to a specified destination
    in order to verify and check network connectivity, and it is the simplicity of
    this statement that makes this command such a useful tool when diagnosing any
    network-based connectivity issue.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, if you were to issue a ping request to Google (`# ping google.com`),
    then, depending on your networking environment and conditions, the output will
    look similar to this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: These results are an illustration of a successful ping, and it can be described
    as the journey of an echo request issued by a local computer system to `google.com
    (216.58.210.14)`.
  prefs: []
  type: TYPE_NORMAL
- en: The request begins on the host computer; it is then sent over the local network
    and finally across the Internet. Once the request is successfully received, the
    target will then respond and the time taken to complete this process is measured
    in order to generate an average response or latency time. However, if there is
    no response, then it is likely that there is either a physical problem on the
    network itself, a fundamental issue such as the location is incorrect or non-functional,
    the target machine not honoring a ping request, or that the host routing table
    is incorrect.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: In online computer games, a ping request (also referred to as a "high ping"
    or "low ping") is typically associated with the measurement of speed from the
    local machine to the external game server. For example, a player with a low ping
    (10 ms for example) will have a better gaming experience than a player with a
    180 ms ping.
  prefs: []
  type: TYPE_NORMAL
- en: Moreover, you should also be aware that, if you have a high ping of over 500ms,
    then it means that any request is taking over half a second to get to the server
    and back. This condition is noticeable as you will probably be experiencing "frame
    jitters" or "frame jumps"—a phenomenon known as "rubber banding" in the world
    of online gameplay.
  prefs: []
  type: TYPE_NORMAL
- en: The `ping` command is simple to use, but in its naked form, it will continue
    to execute until it is cancelled. In certain situations, this may prove useful,
    but it is generally easier to invoke the `-c` option in order to reduce the number
    of echo requests made and to be provided with a summary of the event.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, if you wanted to restrict the number of echo requests made to
    4, you need to type the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'In the preceding example, the `ping` command will stop issuing echo requests
    after 4 cycles, and based on our previous example, the output will look similar
    to this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Now, just before we finish this introduction to the `ping` command, there are
    a few points regarding any ping requests that should be considered. These points
    may not necessarily represent a problem, but they will influence the results of
    a ping test:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Distance to the target**: Let''s say you live in the U.S., and you try to
    connect to a server in the EU. In this situation you should expect that the ping
    would be higher than if you tried to connect to an alternative U.S. server that
    is closer to you geographically. Further to this, you should expect that there
    could be speed differences across the various geographical locations.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**The Internet connection speed**: If you have a low-bandwidth Internet connection
    (that is, with a poor upload and download speed rating), the ping will take longer
    to come back to you than if you have a high-bandwidth broadband connection (that
    is, with a good upload and download speed rating).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**The hop count**: The hop count is a generic term that refers to the route
    and servers the ping has to take to reach the destination and back. So, just like
    it is in the real world, if you live far away from the main train line, you will
    need to make additional "connections" or "hops" in order to reach the final destination.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The basic principle always states that a low ping is always desirable as it
    is critical for time-based instructions. However, when conducting a ping test,
    you must not only consider the total number of pings that actually made it to
    the target site, but you should also carefully note the average and standard deviation
    of the pings in question.
  prefs: []
  type: TYPE_NORMAL
- en: 'Look at it this way: if the pings do not arrive, this may indicate that there
    could be packet loss due to an unreliable Internet connection between your computer
    and the destination. However, if the ping rate is low but it shows a widening
    variable rate over a specific time period, then under certain circumstances, this
    type of environment is not always preferable when compared to a more constant
    rate during the same time period.'
  prefs: []
  type: TYPE_NORMAL
- en: The dig and host commands
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The `dig` command can be used to verify DNS mappings, Internet connectivity,
    host addresses, and MX records, and to discover more about any potential reverse
    DNS issues that can give rise to spam and blacklisting. Made available through
    the `bind-utils` package, the information supplied by `dig` is available in four
    main parts. This includes a header section (a list of the options used), a question
    section (the query type), the answer section (the address of the location in question),
    and the query section (containing statistical information regarding the query
    time, nameservers, and more). The `dig` command was introduced to replace `nslookup`
    and the basic syntax is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'The results will look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'You will notice that there is a lot of information contained within such output,
    so let''s break this down by starting with the global options section:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'This is then followed by an output that reports on the answer:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'Following this, `dig` then repeats the original question:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'The answer is provided as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'Finally, we are presented with some general statistics about the query itself:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'Also, by replacing `XXX.XXX.XXX.XXX` with a relevant IP address, you can query
    a specific nameserver like so:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'So, if you run the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 'You can expect to see the following results:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'Moreover, where the default action of the `dig` command is to search for `A`
    records, you can manipulate the `dig` syntax in order to obtain information based
    on a specific record type as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'As an alternative, and in order to generalize the results, you can implement
    the `ANY` query in order to obtain as much information as possible by typing:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: Further to this, the `dig` command can be used to implement a reverse lookup
    in order to obtain relevant DNS information based on a specific IP address.
  prefs: []
  type: TYPE_NORMAL
- en: 'This can be achieved by typing:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: 'The preceding command will subsequently respond with an answer in the following
    way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: 'So, as you can see, `dig` is a flexible command-line tool that will enable
    you to perform a valid DNS query. Its output is verbose, but it can be encapsulated
    with the `+short` switch to provide a reduced and concise answer like so:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: 'The above command should respond in the following way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: The `dig` command is an incredibly useful tool for troubleshooting a network,
    and its success is primarily associated with its ability to return the question,
    answer, authority, and additional sections.
  prefs: []
  type: TYPE_NORMAL
- en: 'However, and having said that, the alternative is to use the `host` command
    in the following way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: 'The `host` command works in a similar way to the `dig` command but its output
    looks like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: As you can see, the `host` command serves a similar purpose to `dig` and yet
    it is far more succinct.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, a basic `host` query will be as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: 'The returned output will look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: 'Alternatively, you can specify a third-party DNS server in the following way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: 'The output of this will report on the use of an alternative DNS server and
    look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
- en: 'Finally, `host` can perform reverse lookups like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs: []
  type: TYPE_PRE
- en: 'So, let''s say you run a reverse lookup against Red Hat''s Akamai Edge server
    with the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs: []
  type: TYPE_PRE
- en: 'The output will look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs: []
  type: TYPE_PRE
- en: 'So look at it this way: for the purpose of troubleshooting a network, you can
    use either `dig` or `host`. Both of the commands are similar in terms of what
    they can be used for and what they can achieve, but where `host` offers simplicity,
    `dig` serves to provide a more advanced and script-worthy option.'
  prefs: []
  type: TYPE_NORMAL
- en: The traceroute command
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The `traceroute` command is designed to show the pathway to a remote destination
    and the delays that occur at every stop. Most administrators are familiar with
    `traceroute` and it maintains three primary objectives that can be summarized
    as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: To provide details of the entire path that a packet will traverse
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: To provide the names and the identity of the devices and routers found on that
    path
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: To report on network latency as a result of assessing the time taken to send
    and receive data to each device on a given path
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'In simple terms, the `traceroute` command is a tool that verifies the path
    your data will take without using any data, and the syntax used is based on the
    following:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs: []
  type: TYPE_PRE
- en: 'The output will provide the specified host, the IP address for that domain,
    the maximum number of hops required, and the size of the packet that will be used.
    The subsequent lines then report the hop number, hostname, IP address, and packet
    round-trip times. Of course, you can also avoid reverse DNS with the use of the
    `-n` option in the following way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs: []
  type: TYPE_PRE
- en: The `traceroute` command sends three packets with each TTL and will display
    the round-trip time (RTT), which indicates the time difference between the issuing
    of a probe and the receipt of a response packet. This is useful in discovering
    network bottlenecks, and if you begin to see asterisks (*), then this suggests
    that there is a potential problem routing to that host as the asterisks can indicate
    packet loss or a dropped packet. However, it is also important to realize that
    interpreting `traceroute` can rely on an understanding and appreciation of its
    inherent quirks.
  prefs: []
  type: TYPE_NORMAL
- en: The `traceroute` command is recognized to be the cornerstone of TCP/IP troubleshooting.
    It begins by issuing a UDP-based packet with a TTL value of 1\. If the packet
    reaches the target, then the gateway sends a response packet and reports its findings.
    However, if the packet does not reach the target, then the recipient gateway will
    decrease the TTL by the value of 1\. If the TTL value reaches 0, then the gateway
    will drop the packet and report the results after a new packet is issued with
    an increased value in order to circumvent the same gateway in the next phase.
    This process is repeated until the target host is reached or the maximum TTL value
    is reached.
  prefs: []
  type: TYPE_NORMAL
- en: There are three different types of `traceroute` implementation that cover UDP,
    TCP, and ICMP.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, if you wanted to use the ICMP variation, you will type:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs: []
  type: TYPE_PRE
- en: 'Again, you can bypass DNS with the `–n` option like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs: []
  type: TYPE_PRE
- en: This variation will work in a manner similar to the previous examples that use
    UDP in which the `traceroute` program will send echo requests, and the hops in
    between will reply. However, unlike the UDP version, the process will use ICMP.
  prefs: []
  type: TYPE_NORMAL
- en: 'The final way is to use a TCP variation in the following way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE33]'
  prefs: []
  type: TYPE_PRE
- en: In many respects, the TCP option is probably the most effective method, as most
    networks will allow for this traffic. This is particularly so if you are targeting
    port 80\. However, there are no hard and fast rules to determine which version
    of `traceroute` you can or want to use. The rules will be set by the network configuration,
    as some networks will block UDP requests by default (typically, ports 33434 to
    33534). So, based on this, why not try them all and see what provides the best
    results for your environment.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s look at it this way: knowing how `traceroute` works is winning only
    half the battle. If `traceroute` can reach the host, but not the target, then
    it is likely that the issue is with the target. However, if `traceroute` cannot
    reach the host, then it is likely that the issue lies with the route itself, which
    not only consists of some routers denying `traceroute` packets, but others that
    show remarkable differences in bandwidth and latency, firewalls, and a whole host
    of other traps that are filtering `traceroute` packets. In this situation, multiple
    targets should be selected (you should also consider sending your requests using
    UDP, ICMP, and TCP to circumvent any network issues), and given that the Internet
    is asymmetric by nature, it is generally a good idea to perform a `traceroute`
    action in both directions in order to judge the overall network efficiency.'
  prefs: []
  type: TYPE_NORMAL
- en: On the whole, `traceroute` is an excellent tool, but it can be misleading, so
    be cautious in analyzing the results and always supplement your work with additional
    investigation.
  prefs: []
  type: TYPE_NORMAL
- en: The mtr command
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'As an alternative to `traceroute`, there is the `mtr` command. On some Linux
    systems, you will need to run this as the root user or in conjunction with `sudo`,
    but whatever method you use, the syntax of this command is very simple and it
    works in the following way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs: []
  type: TYPE_PRE
- en: 'The output may look similar to `traceroute`, but the display is in real-time,
    thereby enabling you to monitor trends and averages to reflect how network performance
    changes over time. So unlike `traceroute`, instead of merely taking a snapshot
    of a single journey, by using `mtr` you are able to check for intermittent packet
    issues by gathering data over a longer period of time. Moreover, as an alternative
    to real-time updates, `mtr` will also provide a reporting option that will issue
    the results of 10 packets to each hop encountered:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE35]'
  prefs: []
  type: TYPE_PRE
- en: So, upon reflection, it can be argued that `mtr` is superior to `traceroute`
    at monitoring network connectivity. It certainly has many advantages and it can
    provide a significant amount of detail, but knowing that you cannot control how
    the world will work outside your internal network, the seasoned troubleshooter
    should always remain vigilant and choose to examine every tool at his disposal.
  prefs: []
  type: TYPE_NORMAL
- en: Monitoring network connections with the ss command
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The socket statistics command (`ss`) is the successor to `netstat`; it is not
    only faster, but it is also able to display more information. However, unlike
    `netstat`, which obtains its information from the various files contained within
    the `/proc` directory, the `ss` command obtains its information directly from
    the kernel space.
  prefs: []
  type: TYPE_NORMAL
- en: 'The basic syntax of the `ss` command is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE36]'
  prefs: []
  type: TYPE_PRE
- en: 'Using this syntax, we have simply called for an output of all TCP, UDP, and
    Unix socket connections with an optional pipe to `less` in order to ensure that
    the results can be seen on screen. Of course, this command can be combined with
    either the `-t`, `-u` or, `-x` option to restrict any output to show either TCP,
    UDP, or Unix socket connections respectively, but in order to make the output
    more informative, you will probably want to combine one of these additional options
    with the `-a` option in order to report on both connected and listening sockets
    like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE37]'
  prefs: []
  type: TYPE_PRE
- en: 'As you will notice, in the preceding instance we are only reporting on the
    current TCP environment and it can be changed to suit UDP (`ss -ua`) or Unix socket
    connections (`ss -xa`) in a similar way. However, if you enjoy a degree of precision,
    you will be comforted to know that the `ss` command can be combined with a query
    by using the `–A` option like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE38]'
  prefs: []
  type: TYPE_PRE
- en: 'Restricting the output does serve to make the information far more concise,
    but to take this one stage further, additional filters can be applied using the
    following syntax:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE39]'
  prefs: []
  type: TYPE_PRE
- en: 'For example, where all standard TCP states are accounted for, you can display
    all established IPv4 TCP sockets in the following way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE40]'
  prefs: []
  type: TYPE_PRE
- en: 'You can show all closed TCP states like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE41]'
  prefs: []
  type: TYPE_PRE
- en: Now, it can be argued that using the `ss` command will perform in a similar
    way to using `netstat -a`. This in part is true, but (and remember that you can
    replace `-t` with `-u` or `-x`) given the ability to increase the speed of execution
    by not resolving hostnames (`ss -nt`), show only listening sockets (`ss -ltn`),
    show socket memory usage (`ss -t -m`), show processes using particular sockets
    (`ss -t -p`), print the process name (`ss -ltp`), display either IPv4 or IPv6
    (`ss -tl4` or `ss -tl6`), and show time information (`ss -tn -o`), you will notice
    that we have merely scratched the surface of the `ss` command.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, you can even run a query to discover who was using port 22 (SSH)
    by using the following syntax:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE42]'
  prefs: []
  type: TYPE_PRE
- en: 'Alternatively, you can use the following syntax to show all ports connected
    from a remote IP address:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE43]'
  prefs: []
  type: TYPE_PRE
- en: 'Then filter the query to a specific port with the following variation:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE44]'
  prefs: []
  type: TYPE_PRE
- en: Remember, familiarity with your networking environment will always help, and
    armed with this command, you should be in a better position to recognize problematic
    connections before they take hold.
  prefs: []
  type: TYPE_NORMAL
- en: Packet analysis with tcpdump
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The `tcpdump` command is a packet analyzer that is able to capture and provide
    a description of the traffic being transmitted across a network interface. It
    is common to most flavors of Linux, and it provides access to a unique view of
    the network at the packet level that can prove vital when troubleshooting the
    network environment.
  prefs: []
  type: TYPE_NORMAL
- en: 'The basic syntax for using `tcpdump` is expressed in the following way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE45]'
  prefs: []
  type: TYPE_PRE
- en: 'You can also specify a protocol like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE46]'
  prefs: []
  type: TYPE_PRE
- en: 'While a port value can be used in the following way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE47]'
  prefs: []
  type: TYPE_PRE
- en: 'Verbosity options can be issued by using `-v` or `-vv`, while DNS can be avoided
    with the `-n` option. However, because `tcpdump` will continue running until the
    request is cancelled, it is always preferable to use the `-c` option in order
    to capture a pre-determined number of events in the following way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE48]'
  prefs: []
  type: TYPE_PRE
- en: 'Taking this one step further, you can capture `10` packets from a specific
    IP address by calling either the `src` option (source) or the `dst` option (destination)
    like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE49]'
  prefs: []
  type: TYPE_PRE
- en: 'While the device name itself can be obtained by running the following option:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE50]'
  prefs: []
  type: TYPE_PRE
- en: The `tcpdump` command can be run in both the read and write modes. However,
    where the latter implies the use of the `-w` option that will cause `tcpdump`
    to save the packet data to a file for later analysis, the former, signified by
    the use of the `-r` option, will determine that `tcpdump` will read from a saved
    packet file only. As you will come to realize, when in the write mode you should
    specify the relevant device name (that is `eth0`), but in both cases, only packets
    that match an expression will be matched and displayed.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, in read mode, the basic syntax of this commands looks like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE51]'
  prefs: []
  type: TYPE_PRE
- en: 'While in write mode, you can send the entire Ethernet frame for further analysis
    in the following way:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE52]'
  prefs: []
  type: TYPE_PRE
- en: So as you can see, the most common application of `tcpdump` is to verify whether
    the process of two-way communication is working. The `tcpdump` command can be
    used to record network segments, and while recognizing this fact, we have merely
    scratched the surface of its flexibility.
  prefs: []
  type: TYPE_NORMAL
- en: For this reason, I hope you can already see how this small utility can become
    an important tool when troubleshooting your networking environment.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The purpose of this chapter was to provide a starting point when attempting
    to troubleshoot areas of concern across the network environment. Of course, there
    is always more to learn, and knowing this will take you on a journey that goes
    far beyond the basic syntax of `dig`, `ping`, or even `tcpdump`. However, having
    toured a number of commands and utilities, you can now see how becoming an effective
    troubleshooter is quickly becoming an obtainable goal. To further our cause, we
    will now set our sights on the need to troubleshoot package management.
  prefs: []
  type: TYPE_NORMAL
- en: References
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The TCP Wikipedia page: [http://en.wikipedia.org/wiki/Transmission_Control_Protocol](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The Ping Wikipedia page: [http://en.wikipedia.org/wiki/Ping_(networking_utility)](http://en.wikipedia.org/wiki/Ping_(networking_utility))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The Traceroute Wikipedia page: [http://en.wikipedia.org/wiki/Traceroute](http://en.wikipedia.org/wiki/Traceroute)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The `ss` command official page: [http://www.cyberciti.biz/files/ss.html](http://www.cyberciti.biz/files/ss.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The ARP Wikipedia page: [http://en.wikipedia.org/wiki/Address_Resolution_Protocol](http://en.wikipedia.org/wiki/Address_Resolution_Protocol)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The `dig` command Wikipedia page: [http://en.wikipedia.org/wiki/Dig_(command)](http://en.wikipedia.org/wiki/Dig_(command))'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The `tcpdump` Wikipedia page: [http://en.wikipedia.org/wiki/Tcpdump](http://en.wikipedia.org/wiki/Tcpdump)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
