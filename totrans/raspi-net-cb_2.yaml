- en: Chapter 2. Administration
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2章 用户管理
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将覆盖以下主题：
- en: Executing commands with privileges (`sudo`)
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用特权执行命令（`sudo`）
- en: Expanding the size of a filesystem (`raspi-config`)
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展文件系统大小（`raspi-config`）
- en: Configuring memory usage (`raspi-config`)
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置内存使用（`raspi-config`）
- en: Configuring remote access (`raspi-config`)
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置远程访问（`raspi-config`）
- en: Obtaining remote access by using SSH
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过SSH获得远程访问
- en: Obtaining remote access by using PuTTY
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用PuTTY获得远程访问
- en: Changing the login password (`passwd`)
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修改登录密码（`passwd`）
- en: Adding a user (`adduser`)
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加用户（`adduser`）
- en: Giving a user sudo privileges (`id` and `usermod`)
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 授予用户sudo特权（`id`和`usermod`）
- en: Introduction
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: 'The recipes in this chapter are for the basic administration of the Raspberry
    Pi. This chapter starts with a recipe that shows how you can use the `sudo` command
    to execute other commands that require superuser privileges. The next three recipes
    use the `raspi-config` command-line tool to complete the following three initial
    configuration tasks:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中的配方用于树莓派的基本管理。本章从一个配方开始，展示如何使用`sudo`命令执行其他需要超级用户权限的命令。接下来的三个配方使用`raspi-config`命令行工具完成以下三项初始配置任务：
- en: Expanding the filesystem to use all the space on an SD card
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扩展文件系统以使用SD卡上的所有空间
- en: Changing the memory allocation for better performance
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更改内存分配以提高性能
- en: Enabling remote access to the Raspberry Pi
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用树莓派的远程访问
- en: 'The following two recipes show how the Raspberry Pi can be accessed remotely:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 以下两个配方展示了如何远程访问树莓派：
- en: Using the `SSH` command-line client from Linux or Mac OS X computers
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从Linux或Mac OS X计算机使用`SSH`命令行客户端
- en: Using the PuTTY client from Windows computers
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从Windows计算机使用PuTTY客户端
- en: 'The final three recipes in this chapter, which are as follows, are for user
    administration:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的最后三个配方如下所示，专门用于用户管理：
- en: How to change the password of the default user whose username is `pi`
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何修改默认用户用户名为`pi`的密码
- en: How to create a new user login
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何创建一个新的用户登录
- en: How to add a user to the privileged `sudo` user group
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何将用户添加到特权`sudo`用户组
- en: Once you've completed this chapter, you will be able to administer the Raspberry
    Pi remotely via a network connection without a keyboard or display.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你完成了本章内容，你将能够通过网络连接远程管理树莓派，而无需键盘或显示器。
- en: Executing commands with privileges (sudo)
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用特权执行命令（`sudo`）
- en: This recipe shows how you can execute privileged commands using `sudo`.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方展示了如何使用`sudo`执行特权命令。
- en: The default Raspberry Pi user (`pi`) is an ordinary user and not a super-user.
    The `sudo` command is used to temporarily grant an ordinary user the privileges
    of a super-user.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 默认的树莓派用户（`pi`）是普通用户，而非超级用户。`sudo`命令用于临时授予普通用户超级用户的权限。
- en: After you've completed this recipe, you will be able to execute commands with
    super-user privileges by using `sudo` as a command prefix.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本配方后，你将能够通过使用`sudo`作为命令前缀来执行具有超级用户权限的命令。
- en: Getting ready
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following ingredients are required for this recipe:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方需要以下配料：
- en: You need an initial setup or a basic networking setup for the Raspberry Pi that
    has been powered on. You also need to be logged in as the user whose username
    is `pi` (refer to the recipes in [Chapter 1](ch01.html "Chapter 1. Installation
    and Setup"), *Installation and Setup*, for instructions on how to boot and log
    in and the recipes given later in this chapter for instructions on how to log
    in remotely).
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你需要为已开机的树莓派进行初始设置或基本的网络设置。你还需要以用户名为`pi`的用户身份登录（有关如何启动和登录的说明，请参阅[第1章](ch01.html
    "第1章 安装与设置")，*安装与设置*，并参考本章稍后的配方以了解如何远程登录）。
- en: A network connection is an optional requirement.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络连接是可选要求。
- en: If the Raspberry Pi has remote access enabled, this recipe can be completed
    remotely using SSH or PuTTY (refer to the *Remote access (SSH)* and *Remote access
    (PuTTY)* recipes that are given later in this chapter).
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 如果树莓派已启用远程访问，本配方可以通过SSH或PuTTY远程完成（参阅本章稍后给出的*远程访问（SSH）*和*远程访问（PuTTY）*配方）。
- en: How to do it...
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'This recipe executes a privileged command, first without and then with privileges:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方首先不带特权地执行命令，然后使用特权执行：
- en: 'First, try executing a privileged command, such as `reboot`, as an ordinary
    user, as follows:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，尝试作为普通用户执行一个需要特权的命令，例如`reboot`，如下所示：
- en: '[PRE0]'
  id: totrans-36
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Then, try executing the command again with super-user privileges, as follows:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，再次尝试以超级用户权限执行该命令，如下所示：
- en: '[PRE1]'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: How it works...
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The `sudo` command is for nonprivileged users who wish to temporarily grant
    another command super-user privileges (as a super-user would do something).
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '`sudo` 命令是为非特权用户提供的，允许临时授予另一个命令超级用户权限（就像超级用户会做某事一样）。'
- en: In this recipe, the privileged command, `reboot`, was first executed without
    super-user privileges by the ordinary user `pi`. The `reboot` command then reported
    an error by stating that `must be superuser`. An ordinary user cannot execute
    the `reboot` command.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个操作中，特权命令 `reboot` 最初是由普通用户 `pi` 执行的，而没有超级用户权限。然后，`reboot` 命令报告了一个错误，提示“必须是超级用户”。普通用户不能执行
    `reboot` 命令。
- en: Finally, the `sudo` command was used like a super-user prefix to temporarily
    give the ordinary user, `pi`, super-user privileges. Then, the system was rebooted
    as requested.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，`sudo` 命令被用作超级用户前缀，暂时将普通用户 `pi` 提升为超级用户权限。然后，系统按要求重新启动。
- en: There's more...
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: The following are a few more commands that can be used.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些可以使用的其他命令。
- en: Switch user (sudo –u)
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 切换用户（sudo –u）
- en: The `sudo` command is really a *switch user* and *do something* command.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '`sudo` 命令实际上是一个 *切换用户* 和 *执行某事* 的命令。'
- en: By default, the `sudo` command temporarily switches to the `root user`, who's
    the superuser. When a command is run as the `root` user, the command has all the
    privileges that the `root` user enjoys.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，`sudo` 命令会临时切换到 `root` 用户，`root` 是超级用户。当以 `root` 用户身份运行命令时，命令将拥有 `root`
    用户的所有权限。
- en: When executed with the `–u` command-line argument, `sudo` can be used to impersonate
    any user on the system, temporarily giving one command all the privileges of another
    user.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `–u` 命令行参数执行时，`sudo` 可以临时以任何系统用户的身份执行命令，从而赋予该命令另一个用户的所有权限。
- en: For more information on creating additional users for the Raspberry Pi, refer
    to the *Adding a user* recipe at the end of this chapter.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 有关为 Raspberry Pi 创建额外用户的更多信息，请参阅本章末尾的 *添加用户* 章节。
- en: 'Here is an example of using the `sudo` command to switch to another user that
    already exists on your Raspberry Pi, the user whose username is `nobody`. The
    user `nobody` has no privileges (that is its purpose – to have no privileges;
    it is a security feature), but we can use `nobody` to show how the `sudo` command
    works. This example creates and deletes two files – a file that belongs to the
    user `pi` and another that belongs to the user `nobody`:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个示例，展示如何使用 `sudo` 命令切换到 Raspberry Pi 上已经存在的另一个用户，该用户的用户名为 `nobody`。用户 `nobody`
    没有任何权限（这是它的目的——没有权限；这是一个安全特性），但我们可以使用 `nobody` 来演示 `sudo` 命令的工作原理。这个示例创建并删除了两个文件——一个属于用户
    `pi`，另一个属于用户 `nobody`：
- en: '[PRE2]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Note that there is now one file in the temporary directory and this file is
    owned by the user `pi` (the third column of the `ls –l` command''s output contains
    the file''s owner):'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，现在临时目录中只有一个文件，并且该文件属于用户 `pi`（`ls –l` 命令的输出中的第三列显示文件的所有者）：
- en: '[PRE3]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: There are now two files in the `/tmp` directory. One file, `i-belong-to-pi`,
    belongs to the user `pi` and the other file, `i-belong-to-nobody`, belongs to
    the user `nobody`.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 现在 `/tmp` 目录中有两个文件。一个文件 `i-belong-to-pi` 属于用户 `pi`，另一个文件 `i-belong-to-nobody`
    属于用户 `nobody`。
- en: 'Now, let''s try to remove the two files that we created from the temporary
    directory, as follows:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们尝试从临时目录中删除我们创建的两个文件，如下所示：
- en: '[PRE4]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Removing the `i-belong-to-pi` file worked. There is only file left in the directory:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 删除 `i-belong-to-pi` 文件成功。目录中只剩下一个文件：
- en: '[PRE5]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Removing the `i-belong-to-nobody` file does not work because the file is owned
    by the user `nobody`.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 删除 `i-belong-to-nobody` 文件没有成功，因为该文件属于用户 `nobody`。
- en: 'If you want to delete the `i-belong-nobody` file, you will first have to switch
    to the user `nobody` using the `sudo` command, as follows:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想删除 `i-belong-nobody` 文件，首先需要使用 `sudo` 命令切换到用户 `nobody`，如下所示：
- en: '[PRE6]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Using `sudo –u` `nobody` worked! There are no files left in the `/tmp` directory.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `sudo –u` `nobody` 成功了！现在 `/tmp` 目录中没有剩余文件。
- en: Password
  id: totrans-63
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 密码
- en: The Raspbian Linux distribution's default configuration requires no password
    when using `sudo` for users in the `sudo` group.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: Raspbian Linux 发行版的默认配置对于 `sudo` 组中的用户在使用 `sudo` 时无需输入密码。
- en: If you are using another Linux distribution, you may be required to enter a
    password when using `sudo`. If you are required to enter a password, use the same
    password as the one that you used when logging in to the Raspberry Pi.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用的是其他 Linux 发行版，使用`sudo`时可能需要输入密码。如果需要输入密码，请使用登录 Raspberry Pi 时所用的相同密码。
- en: The sudo group
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: sudo 组
- en: If you have added additional users to the Raspberry Pi, you will also need to
    add them to the `sudo` user group if you wish those users to use privileged commands,
    such as `shutdown` and `reboot`, or change files in the configuration directory
    (`/etc`). Users that are not in the `sudo` group will not be able to execute privileged
    commands or change privileged files.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已向树莓派添加了额外的用户，并且希望这些用户能够使用特权命令（如`shutdown`和`reboot`）或更改配置目录（`/etc`）中的文件，则还需要将他们添加到`sudo`用户组中。没有加入`sudo`组的用户将无法执行特权命令或更改特权文件。
- en: The recipes at the end of this chapter have more information about user administration,
    including how to add users to the `sudo` user group.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 本章末尾的配方提供了更多关于用户管理的信息，包括如何将用户添加到`sudo`用户组。
- en: See also
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参见
- en: '**sudo, sudoedit – execute a command as another user** ([http://manpages.debian.net/cgi-bin/man.cgi?query=sudo](http://manpages.debian.net/cgi-bin/man.cgi?query=sudo)):
    The switch user command temporarily executes a command as another user. The Debian
    manual page for the `sudo` command describes all of its features and options.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**sudo, sudoedit – 以其他用户身份执行命令** ([http://manpages.debian.net/cgi-bin/man.cgi?query=sudo](http://manpages.debian.net/cgi-bin/man.cgi?query=sudo))：切换用户命令暂时以其他用户身份执行命令。Debian的`sudo`命令手册页描述了它的所有功能和选项。'
- en: '**touch – change file timestamps** ([http://manpages.debian.net/cgi-bin/man.cgi?query=touch](http://manpages.debian.net/cgi-bin/man.cgi?query=touch)):
    The `touch` command will create a file if it does not exist. The Debian man page
    for the touch command describes all of its features and options.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**touch – 更改文件时间戳** ([http://manpages.debian.net/cgi-bin/man.cgi?query=touch](http://manpages.debian.net/cgi-bin/man.cgi?query=touch))：`touch`命令如果文件不存在，则会创建一个文件。Debian的`touch`命令手册页描述了它的所有功能和选项。'
- en: Expanding the size of a filesystem (raspi-config)
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 扩展文件系统的大小（raspi-config）
- en: This recipe shows how you can use the `raspi-config` command to expand the Raspberry
    Pi's filesystem so that it uses all the available disk space on an SD card.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方展示了如何使用`raspi-config`命令扩展树莓派的文件系统，使其使用SD卡上所有可用的磁盘空间。
- en: The operating system images for the Raspberry Pi are compacted and compressed
    to use as little disk space as possible. This reduction in the size of an operating
    system image helps improve the speed of downloading the image. When these reduced
    images are copied to an SD card, it is very likely that the SD card will still
    have space left over. Larger SD Cards (greater than 8 GB) will be mostly empty!
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派的操作系统映像经过压缩，以尽可能减少磁盘空间的使用。操作系统映像大小的缩减有助于提高下载映像的速度。当这些压缩后的映像复制到SD卡时，SD卡很可能会仍然有剩余空间。较大的SD卡（大于8GB）通常会是空的！
- en: Note
  id: totrans-75
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you used NOOBS to install the Raspberry Pi, you do not need to expand the
    filesystem. NOOBS has already expanded the filesystem for you.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用NOOBS安装了树莓派，则无需扩展文件系统。NOOBS已经为你扩展了文件系统。
- en: This recipe uses the `raspi-config` command-line utility to expand the filesystem
    of the operating system image so that it includes all the available space on an
    SD card.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方使用`raspi-config`命令行工具扩展操作系统映像的文件系统，使其包括SD卡上所有可用的空间。
- en: After you've completed this recipe, the filesystem that your Raspberry Pi uses
    for storage will be expanded to include all the available space on the SD card.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本配方后，你的树莓派存储使用的文件系统将扩展，包含SD卡上所有可用的空间。
- en: Getting ready
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following ingredients are required for this recipe:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 此配方需要以下材料：
- en: You need an initial setup or a basic networking setup for the Raspberry Pi that
    has been powered on. You also need to be logged in as the user `pi` (refer to
    the recipes in [Chapter 1](ch01.html "Chapter 1. Installation and Setup"), *Installation
    and Setup*, for instructions on how to boot and log in and the recipes later in
    this chapter for instructions on how to log in remotely).
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你需要为已开机的树莓派进行初步设置或基本的网络配置。你还需要以用户`pi`登录（有关如何启动和登录的说明，请参考[第1章](ch01.html "第1章：安装与设置")，*安装与设置*，本章后续的配方将介绍如何远程登录）。
- en: A network connection is an optional requirement.
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络连接是可选的要求。
- en: If the Raspberry Pi has remote access enabled, this recipe can be completed
    remotely using SSH or PuTTY (refer to the *Remote access (SSH)* and *Remote access
    (PuTTY)* recipes provided later in this chapter).
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 如果树莓派已启用远程访问，本配方可以通过SSH或PuTTY远程完成（有关*远程访问（SSH）*和*远程访问（PuTTY）*的配方，请参阅本章后续部分）。
- en: The SD card used in the examples for this recipe has a storage of 32 GB.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 本食谱示例中使用的SD卡存储容量为32 GB。
- en: How to do it...
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Use the following steps to expand the Raspberry Pi''s filesystem:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤来扩展树莓派的文件系统：
- en: 'Use the `df` command to see how much disk space is available, as follows:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`df`命令查看可用的磁盘空间，操作如下：
- en: '[PRE7]'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Note that the **Size** (column 2) of the root filesystem (`/dev/root`) is only
    `3.9 G`, even though the actual disk size is much larger.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请注意，根文件系统（`/dev/root`）的**大小**（第二列）仅为`3.9 G`，即使实际磁盘大小要大得多。
- en: 'Execute the `raspi-config` command to expand the size of the root file system,
    as follows:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行`raspi-config`命令来扩展根文件系统的大小，操作如下：
- en: '[PRE8]'
  id: totrans-91
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The `raspi-config` main menu is then displayed:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后会显示`raspi-config`主菜单：
- en: '[PRE9]'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Press the *Enter* key to select the first menu item, `Expand Filesystem`. Use
    the up and down arrow keys to change the selection.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按下*Enter*键选择第一个菜单项，`Expand Filesystem`。使用上下箭头键更改选择。
- en: 'After a brief moment, the screen displays this:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 稍等片刻，屏幕会显示如下内容：
- en: '[PRE10]'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Press the *Enter* key; you will return to the main menu.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按下*Enter*键，您将返回到主菜单。
- en: 'Press the *Tab* key to select **Finish** and then press the *Enter* key:'
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按下*Tab*键选择**完成**，然后按下*Enter*键：
- en: '[PRE11]'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Press the *Enter* key to select **Yes**. The Raspberry Pi will reboot.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按下*Enter*键选择**是**。树莓派将重新启动。
- en: 'After logging back in, use the `df –h` command to check out the available disk
    space on the root filesystem (`/`), as follows:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重新登录后，使用`df –h`命令检查根文件系统（`/`）上的可用磁盘空间，操作如下：
- en: '[PRE12]'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: How it works...
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: This recipe begins by displaying the amount of disk space that is available
    on the Raspberry Pi. The `df` command displays how much disk space is free (df
    is short for disk free). The `–h` command-line argument asks `df` to display the
    result in a human-readable format. The output of the command shows that the `/dev/root`
    filesystem has a total of 3.9 GB and 84% of the filesystem is in use, leaving
    only 596 MB available.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 本食谱开始时会显示树莓派上可用的磁盘空间。`df`命令显示可用的磁盘空间（df是磁盘空闲的缩写）。`–h`命令行参数要求`df`以人类可读的格式显示结果。命令的输出显示，`/dev/root`文件系统的总大小为3.9
    GB，84%的文件系统已被使用，仅剩下596 MB可用。
- en: Then, the `raspi-config` command is run to expand the root filesystem. The first
    command in the `raspi-config` command's main menu, `Expand Filesystem`, is selected
    to resize the Raspberry Pi's root partition (`/dev/root`).
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，运行`raspi-config`命令来扩展根文件系统。`raspi-config`命令主菜单中的第一个命令，`Expand Filesystem`，用于调整树莓派的根分区（`/dev/root`）大小。
- en: After resizing the root filesystem, the Raspberry Pi needs to be rebooted. Once
    rebooted, the size of the root filesystem is checked once again. The amount of
    available disk space is now 24 GB!
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在调整根文件系统大小后，树莓派需要重新启动。重新启动后，根文件系统的大小会再次被检查。此时，剩余的磁盘空间为24 GB！
- en: There's more...
  id: totrans-107
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: The best time to expand the root filesystem is right after the installation
    – before you install new software or require additional disk space.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 扩展根文件系统的最佳时机是在安装后立即进行——在安装新软件或需要额外磁盘空间之前。
- en: The `raspi-config` utility is used to configure many basic components of the
    Raspberry Pi. Examples of its use can be found in the recipes named *Configuring
    remote access* and *Configuring memory usage*.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '`raspi-config`工具用于配置树莓派的许多基本组件。可以在名为*配置远程访问*和*配置内存使用*的食谱中找到它的使用示例。'
- en: See also
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: '`Raspi-config` ([https://www.raspberrypi.org/documentation/configuration/raspi-config.md](https://www.raspberrypi.org/documentation/configuration/raspi-config.md)):
    A reference page for the `raspi-config` command can be found in the Raspberry
    Pi Foundations documentation.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Raspi-config` ([https://www.raspberrypi.org/documentation/configuration/raspi-config.md](https://www.raspberrypi.org/documentation/configuration/raspi-config.md)):
    树莓派基金会文档中可以找到`raspi-config`命令的参考页面。'
- en: '`RPi raspi-config` ([http://elinux.org/RPi_raspi-config](http://elinux.org/RPi_raspi-config)):
    This documentation at the Embedded Linux website shows how the `raspi-config`
    script helps you configure the Raspberry Pi.'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RPi raspi-config` ([http://elinux.org/RPi_raspi-config](http://elinux.org/RPi_raspi-config)):
    该文档位于嵌入式Linux网站，介绍了`raspi-config`脚本如何帮助你配置树莓派。'
- en: Configuring memory usage (raspi-config)
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置内存使用（raspi-config）
- en: This recipe shows how the `raspi-config` utility is used to change the Raspberry
    Pi's memory split to maximize the amount of memory available for the CPU.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 本食谱展示了如何使用`raspi-config`工具更改树莓派的内存分配，以最大化可供CPU使用的内存量。
- en: This book features solutions that do not require a display. Many of these solutions
    will benefit from having the additional memory that the display is using.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 本书提供的解决方案不需要显示器。其中许多解决方案将受益于显示器使用的额外内存。
- en: However, if you are using the Raspberry Pi as a desktop computer, you may want
    to maximize the amount of video memory. Internet content displayed in web browsers,
    such as images and video, as well as computer games will benefit from a high video
    memory.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果你将树莓派作为桌面电脑使用，可能希望最大化视频内存的容量。浏览器中显示的互联网内容，如图像和视频，以及计算机游戏，都将受益于高视频内存。
- en: After you have completed this recipe, you can choose your own balance between
    memory dedicated for the video core and the memory available for the CPU.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此步骤后，你可以根据需要选择在视频核心和CPU之间分配内存的平衡。
- en: Getting ready
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: The ingredients required for this recipe are an initial setup or a basic networking
    setup for the Raspberry Pi that has been powered on. You also need to be logged
    in as the user `pi` (refer to the recipes in [Chapter 1](ch01.html "Chapter 1. Installation
    and Setup"), *Installation and Setup*, for instructions on how to boot and log
    in).
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 此步骤所需的准备工作是已经开机的树莓派的初始设置或基础网络设置。你还需要以用户`pi`身份登录（请参考[第1章](ch01.html "第1章 安装与设置")中的食谱，*安装与设置*，了解如何启动并登录）。
- en: How to do it...
  id: totrans-120
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Use the following steps to configure the Raspberry Pi''s memory usage:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤配置树莓派的内存使用：
- en: 'Execute the `raspi-config` command, as follows:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行`raspi-config`命令，如下所示：
- en: '[PRE13]'
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The `raspi-config` main menu is then displayed:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接着会显示`raspi-config`主菜单：
- en: '[PRE14]'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Use the up and down arrow keys to change the selection. Then, press the *Enter*
    key to select **Advanced Options**.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用上下箭头键更改选择，然后按*Enter*键选择**高级选项**。
- en: 'The **Advanced Options** menu is displayed, as follows:'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 显示**高级选项**菜单，如下所示：
- en: '[PRE15]'
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Select **Memory Split** from the menu to change the memory split.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从菜单中选择**内存划分**来更改内存划分。
- en: 'You are prompted to enter an amount of memory for the GPU:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 系统提示你输入GPU的内存量：
- en: '[PRE16]'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Enter `16` and press the *Enter* key to give the Raspberry Pi's GPU the minimum
    amount of memory.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`16`并按下*Enter*键，为树莓派的GPU分配最小内存量。
- en: You are returned to the main menu of `raspi-config`.
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 系统返回到`raspi-config`的主菜单。
- en: Select **Finish** from the main menu and reboot the Raspberry Pi.
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从主菜单中选择**完成**并重启树莓派。
- en: How it works...
  id: totrans-135
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: One of the selections available from the **Advanced Options** menu of the `raspi-config`
    configuration tool is to specify the memory split between the **Graphics Processing
    Unit** (**GPU**) used for video processing and the CPU used for general processing.
    In this recipe, you entered 16 MB, the minimum value for the GPU.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 在`raspi-config`配置工具的**高级选项**菜单中，有一个选择项允许你指定视频处理的**图形处理单元**（**GPU**）和用于通用处理的CPU之间的内存划分。在本食谱中，你输入了16
    MB，这是GPU的最小值。
- en: 'The Raspberry Pi shares 256 MB of its total memory (1 GB for the Raspberry
    Pi 2) between its CPU and GPU. The memory can be split in the following five different
    ways:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派将其总内存（树莓派 2 为 1 GB）中的 256 MB 分配给其CPU和GPU。内存可以通过以下五种不同的方式进行划分：
- en: 16 MB for the GPU and 1008 MB for the CPU
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GPU 16 MB，CPU 1008 MB
- en: 32 MB for the GPU and 992 MB for the CPU
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GPU 32 MB，CPU 992 MB
- en: 64 MB for the GPU and 960 MB for the CPU
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GPU 64 MB，CPU 960 MB
- en: 128 MB for the GPU and 896 MB for the CPU
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GPU 128 MB，CPU 896 MB
- en: 256 MB for the GPU and 768 MB for the CPU
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GPU 256 MB，CPU 768 MB
- en: For many of the recipes in this book, the GPU only needs a minimum of 16 MB
    of memory. These recipes don't require a display and will benefit if the maximum
    amount of memory is assigned to the CPU (1008 MB). This will improve the CPU's
    overall performance.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本书中的许多食谱，GPU只需要最低16 MB的内存。这些食谱不需要显示，如果最大内存分配给CPU（1008 MB），将有助于提高CPU的整体性能。
- en: For solutions that require a display, more memory should be allocated to the
    GPU. Multimedia solutions, such as OMXPlayer or XBMC distributions, will benefit
    from having a maximum of 256 MB of Video Core memory.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 对于需要显示的解决方案，应为GPU分配更多内存。多媒体解决方案，如OMXPlayer或XBMC发行版，将受益于最大256 MB的视频核心内存。
- en: Even when the maximum amount of memory is assigned to the GPU, the Raspberry
    Pi 2 will still have 768 MB of memory left for use by the CPU. To experiment with
    the recipes in this book, 768 MB is more than enough memory. However, for higher
    performance or long-term use, the recipes that do not require a display will benefit
    from having the full 1008 MB available for the CPU.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 即使将最大内存分配给 GPU，Raspberry Pi 2 仍会留下 768 MB 的内存供 CPU 使用。为了实验本书中的配方，768 MB 的内存已经足够。然而，对于更高性能或长期使用，不需要显示器的配方将从将全部
    1008 MB 内存分配给 CPU 中受益。
- en: There's more...
  id: totrans-146
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: The `raspi-config` utility is used to configure many basic components of the
    Raspberry Pi. Examples of its use can be found in the recipes in this chapter
    that are named *Expanding the size of the filesystem* and *Configuring remote
    access*.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '`raspi-config` 工具用于配置 Raspberry Pi 的许多基本组件。其使用示例可以在本章中名为 *扩展文件系统大小* 和 *配置远程访问*
    的配方中找到。'
- en: Configuring remote access (raspi-config)
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置远程访问（raspi-config）
- en: This recipe shows how to use the `raspi-config` utility to configure remote
    access to the Raspberry Pi.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方展示了如何使用 `raspi-config` 工具配置 Raspberry Pi 的远程访问。
- en: For most network applications, a graphical user interface (a GUI desktop) is
    not needed. The memory and processing power spent creating a GUI desktop can be
    invested in a better in the network application. The majority of the recipes in
    this book are written so that they can be used remotely without a graphical user
    interface.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 对于大多数网络应用程序，不需要图形用户界面（GUI桌面）。创建 GUI 桌面所耗费的内存和处理能力可以用于提升网络应用程序的性能。本书中的大部分配方都是为远程使用而编写的，无需图形用户界面。
- en: Note
  id: totrans-151
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: If you have installed a Raspbian Linux distribution (as recommended in [Chapter
    1](ch01.html "Chapter 1. Installation and Setup"), *Installation and Setup*),
    secure remote access via the SSH protocol is already enabled.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你安装了 Raspbian Linux 发行版（如 [第 1 章](ch01.html "第1章 安装与设置")，*安装与设置* 中所推荐的那样），则已经启用了通过
    SSH 协议进行安全远程访问。
- en: Raspbian Linux has remote access via SSH enabled by default.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: Raspbian Linux 默认启用通过 SSH 的远程访问。
- en: After you've completed this recipe, your Raspberry Pi will be securely accessible
    on your local network from another PC using the **Secure Shell** (**SSH**) protocol.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本配方后，你的 Raspberry Pi 将可以通过 **安全外壳**（**SSH**）协议在本地网络中从另一台 PC 安全访问。
- en: Getting ready
  id: totrans-155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following ingredients are needed for this recipe:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方所需的材料如下：
- en: An initial setup or a basic networking setup for the Raspberry Pi that has been
    powered on. You also need to be logged in as the user `pi` (refer to the recipes
    in [Chapter 1](ch01.html "Chapter 1. Installation and Setup"), *Installation and
    Setup*, for instructions on how to boot and log in and the recipes later in this
    chapter for instructions on how to log in remotely).
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于已经开机的 Raspberry Pi，进行初步设置或基本网络设置。你还需要以 `pi` 用户身份登录（有关如何启动和登录的说明，请参阅 [第 1 章](ch01.html
    "第1章 安装与设置")，*安装与设置*，有关如何远程登录的说明，请参阅本章后续部分的配方）。
- en: A network connection is an optional requirement.
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络连接是可选的要求。
- en: If the Raspberry Pi has remote access enabled, this recipe can be completed
    remotely using SSH or PuTTY (refer to the *Remote access (SSH)* and *Remote access
    (PuTTY)* recipes that are given in the later parts of this chapter).
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 Raspberry Pi 已启用远程访问，可以通过 SSH 或 PuTTY 远程完成本配方（有关 SSH 和 PuTTY 远程访问的配方，请参阅本章后面的部分）。
- en: How to do it...
  id: totrans-160
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Use the following steps to configure remote access to the Raspberry Pi:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤配置远程访问到 Raspberry Pi：
- en: 'Execute the `raspi-config` command, as follows:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行 `raspi-config` 命令，如下所示：
- en: '[PRE17]'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The `raspi-config` main menu is then displayed:'
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`raspi-config` 主菜单随即显示：'
- en: '[PRE18]'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Use the up and down arrow keys to change the selection and then press the *Enter*
    key to select **Advanced Options**.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用上下箭头键更改选择项，然后按 *Enter* 键选择 **高级选项**。
- en: 'The **Advanced Options** menu is displayed:'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**高级选项**菜单显示：'
- en: '[PRE19]'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Select **SSH** from the **Advanced Options** menu to enable remote access.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 **高级选项** 菜单中选择 **SSH** 以启用远程访问。
- en: 'The following screen appears:'
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下屏幕出现：
- en: '[PRE20]'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Use the *Tab* key to select the option and then press the *Enter* key or choose
    **Enable**.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 *Tab* 键选择选项，然后按 *Enter* 键或选择 **启用**。
- en: 'After a brief moment, the SSH server is enabled:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 稍等片刻后，SSH 服务器被启用：
- en: '[PRE21]'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Click on **Ok** to return to the main menu.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **确定** 返回主菜单。
- en: Click on **Finish** from the main menu and then click on **Yes** to reboot the
    Raspberry Pi and enable remote access.
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从主菜单中点击**完成**，然后点击**是**以重启树莓派并启用远程访问。
- en: How it works...
  id: totrans-177
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: One of the selections available in the `raspi-config` main menu is to enable
    the Open SSH Secure Shell server. The Open SSH server enables secure access to
    the Raspberry Pi over a network connection. Once enabled, the SSH server will
    be started automatically each time the Raspberry Pi boots.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: '`raspi-config`主菜单中的一个选项是启用Open SSH安全外壳服务器。Open SSH服务器可以通过网络连接实现对树莓派的安全访问。启用后，每次树莓派启动时，SSH服务器将自动启动。'
- en: To disable remote access, disable the Open SSH server. The server can be disabled
    from the `raspi-config` utility using the same steps in this recipe, except that
    **Disable** should be selected when the utility asks, "Would you like the SSH
    server enabled or disabled?".
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 若要禁用远程访问，请禁用Open SSH服务器。可以使用与本菜谱中相同的步骤通过`raspi-config`工具禁用服务器，不同的是当工具询问“您是否希望启用或禁用SSH服务器？”时，应该选择**禁用**。
- en: The Secure Shell server runs on the Raspberry Pi. A client program – such as
    SSH on Mac OS X or Linux, or PuTTY on Windows – can be used to connect to the
    Secure Shell server. The client program is a virtual terminal that, once connected,
    permits a user to interact remotely with the Raspberry Pi as though it is connected
    directly with a keyboard and display. The virtual terminal cannot run X Windows
    directly. Therefore, you will need another tool to view the Raspberry Pi's GUI
    desktop remotely.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 安全外壳服务器在树莓派上运行。可以使用客户端程序——例如Mac OS X或Linux上的SSH，或Windows上的PuTTY——来连接到安全外壳服务器。客户端程序是一个虚拟终端，一旦连接，允许用户远程与树莓派交互，就像直接连接了键盘和显示器一样。虚拟终端无法直接运行X
    Windows。因此，您需要使用另一个工具来远程查看树莓派的GUI桌面。
- en: There's more...
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: This `raspi-config` utility is used to configure many of the basic components
    of the Raspberry Pi. More examples of its use can be found in the recipes named
    *Expanding the size of the filesystem* and *Configuring memory usage*.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 该`raspi-config`工具用于配置树莓派的许多基本组件。更多使用示例可以在名为*扩展文件系统大小*和*配置内存使用*的菜谱中找到。
- en: The *Remote access (SSH)* and *Remote access (PuTTY)* recipes in this chapter
    have instructions on how to connect remotely from Mac OS X, Linux, and Windows
    using an SSH client.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中的*远程访问（SSH）*和*远程访问（PuTTY）*方法提供了如何使用SSH客户端从Mac OS X、Linux和Windows进行远程连接的说明。
- en: In [Chapter 5](ch05.html "Chapter 5. Advanced Networking"), *Advanced Networking*,
    the *Connecting to the desktop remotely* recipe shows how to access the Raspberry
    Pi's GUI desktop remotely.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第5章](ch05.html "第5章 高级网络配置")，*高级网络配置*，*远程连接桌面*方法展示了如何远程访问树莓派的GUI桌面。
- en: See also
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: '**Secure Shell** ([http://en.wikipedia.org/wiki/Secure_Shell](http://en.wikipedia.org/wiki/Secure_Shell)):
    This Wikipedia article about the Secure Shell shows how it is a network protocol
    for secure data communication. The article highlights the history of the protocol,
    explains its architecture and vulnerabilities, and contains links to the current
    implementations.'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Secure Shell** ([http://en.wikipedia.org/wiki/Secure_Shell](http://en.wikipedia.org/wiki/Secure_Shell)):
    这篇关于Secure Shell的Wikipedia文章介绍了它作为一种安全数据通信的网络协议。文章概述了该协议的历史，解释了其架构和漏洞，并包含了当前实现的链接。'
- en: '**OpenSSH** ([http://www.openssh.org/](http://www.openssh.org/)): Open SSH
    was a SSH1 and SSH2 implementation that was originally designed as a part of the
    FreeBSD project. It is now a part of most Linux distributions, including Raspbian
    Linux.'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**OpenSSH** ([http://www.openssh.org/](http://www.openssh.org/)): Open SSH是SSH1和SSH2协议的实现，最初是作为FreeBSD项目的一部分设计的。现在，它是大多数Linux发行版的一部分，包括Raspbian
    Linux。'
- en: Obtaining remote access by using SSH
  id: totrans-188
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用SSH获取远程访问
- en: This recipe shows how to access the Raspberry Pi remotely using the `ssh` command.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 本菜谱展示了如何使用`ssh`命令远程访问树莓派。
- en: After the Raspberry Pi has been configured to automatically start the Secure
    Shell server when it boots (see the previous recipe named *Configuring remote
    access* in this chapter), it is possible to access the Raspberry Pi remotely using
    the Secure Shell client, `ssh`.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 在树莓派配置为每次启动时自动启动安全外壳服务器后（请参见本章之前名为*配置远程访问*的菜谱），可以使用安全外壳客户端`ssh`远程访问树莓派。
- en: The `ssh` command is built into the current version of the Mac OS X operating
    systems and is also available for most Linux distributions. For Microsoft Windows
    operating systems, another utility will be required (refer to the recipe named
    *Remote Access (PuTTY)*.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '`ssh` 命令是当前版本的 Mac OS X 操作系统中内置的，并且也适用于大多数 Linux 发行版。对于 Microsoft Windows 操作系统，则需要使用其他工具（请参见名为
    *远程访问（PuTTY）* 的食谱）。'
- en: This recipe starts by logging directly into the Raspberry Pi using an attached
    keyboard and display to discover the IP address of the Raspberry Pi. Once the
    IP address is known, the recipe shows how to log in to the Raspberry Pi from another
    computer using SSH.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 本食谱从直接登录 Raspberry Pi 开始，使用附加的键盘和显示器来发现 Raspberry Pi 的 IP 地址。知道 IP 地址后，本食谱展示如何通过另一台计算机使用
    SSH 登录 Raspberry Pi。
- en: After you've completed this recipe, you will no longer be required to log in
    directly to the Raspberry Pi with an attached keyboard. You will also not need
    a display. You will be able to remotely administer your Raspberry Pi from another
    PC on the same network.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本食谱后，你将不再需要直接通过附加键盘登录 Raspberry Pi，也不需要显示器。你将能够从同一网络上的另一台 PC 远程管理你的 Raspberry
    Pi。
- en: Getting ready
  id: totrans-194
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following ingredients are needed for this recipe:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 本食谱所需的配料如下：
- en: You need an initial setup for the Raspberry Pi that has been powered on. You
    also need to be logged in as the user `pi` (refer to the recipes in [Chapter 1](ch01.html
    "Chapter 1. Installation and Setup"), *Installation and Setup*, for instructions
    on how to boot and log in).
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你需要对已开机的 Raspberry Pi 进行初始设置。你还需要以用户`pi`身份登录（有关如何启动和登录的说明，请参见[第 1 章](ch01.html
    "Chapter 1. Installation and Setup")，*安装和设置*部分）。
- en: A network connection is required.
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要网络连接。
- en: A PC that runs on Mac OS X, Linux, or other Unix-based operating system is also
    required.
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 还需要一台运行 Mac OS X、Linux 或其他 Unix 基础操作系统的 PC。
- en: How to do it...
  id: totrans-199
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Perform the following steps to remotely access the Raspberry Pi using the `ssh`
    command:'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤通过 `ssh` 命令远程访问 Raspberry Pi：
- en: 'On a Max OS X or Linux PC, use the `ssh` command to log in as the user `pi`
    on the host named `raspberrypi.local`, as follows:'
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Max OS X 或 Linux 电脑上，使用`ssh`命令以用户`pi`身份登录名为`raspberrypi.local`的主机，方法如下：
- en: '[PRE22]'
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Since this is the first time you have connected to your Raspberry Pi remotely
    using a secure shell, the Raspberry Pi shares its security fingerprint for future
    identification.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于这是你首次通过安全 shell 远程连接到 Raspberry Pi，因此 Raspberry Pi 会分享其安全指纹用于以后识别。
- en: 'When prompted, answer `yes` to `Are you sure you want to continue connecting
    (yes/no)?`, as follows:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当提示时，回答`yes`以继续连接，询问如下：`Are you sure you want to continue connecting (yes/no)?`。
- en: '[PRE23]'
  id: totrans-205
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'After entering `yes`, you are told that your Raspberry Pi''s security fingerprint
    is being permanently added to the list of known hosts. Then, you are prompted
    for a password:'
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`yes`后，你会看到提示，告诉你 Raspberry Pi 的安全指纹已永久添加到已知主机列表中。然后，系统会提示你输入密码：
- en: '[PRE24]'
  id: totrans-207
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Enter the password for the user `pi` on the Raspberry Pi (if you have not yet
    changed it, the default password is `raspberry`). You will then be shown a logon
    message and a command prompt:'
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入 Raspberry Pi 上用户`pi`的密码（如果你还没有更改密码，默认密码是`raspberry`）。随后，你将看到登录信息和命令提示符：
- en: '[PRE25]'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Type `exit` to log out:'
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`exit`退出登录：
- en: '[PRE26]'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: How it works...
  id: totrans-212
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: This recipe starts by using the `ssh` command to log in to the Raspberry Pi
    using its default username, `pi`, and its default hostname, `raspberrypi.local`.
    The default password is `raspberry`.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 本食谱从使用`ssh`命令通过默认用户名`pi`和默认主机名`raspberrypi.local`登录 Raspberry Pi 开始。默认密码是`raspberry`。
- en: The format of the login parameter to the `ssh` command is `user@hostname`. The
    example shows `pi@raspberrypi.local` because we want to log in to the `raspberrypi`
    host on the local network as the user `pi`.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '`ssh` 命令的登录参数格式为`user@hostname`。示例中显示`pi@raspberrypi.local`，因为我们希望以用户`pi`身份登录本地网络上的`raspberrypi`主机。'
- en: Since this is the first time that we are logging in to the Raspberry Pi from
    the golden-macbook computer, the golden-macbook computer says that it cannot establish
    the authenticity of the Raspberry Pi. So, the Raspberry Pi shares its secure digital
    fingerprint (`f3:de:d3:58:eb:66:1e:23:2c:6e:cf:c9:12:0c:e3:e2`). Once we agree
    to accepting a connection from this new computer, the golden-macbook computer
    says that it will store the fingerprint permanently.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这是我们第一次从golden-macbook计算机登录到Raspberry Pi，golden-macbook计算机表示它无法验证Raspberry
    Pi的真实性。因此，Raspberry Pi共享了其安全数字指纹（`f3:de:d3:58:eb:66:1e:23:2c:6e:cf:c9:12:0c:e3:e2`）。一旦我们同意接受来自这台新计算机的连接，golden-macbook计算机会表示它将永久存储此指纹。
- en: Digital fingerprints
  id: totrans-216
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数字指纹
- en: Secure digital fingerprints are one part of the SSH protocol. Each computer
    has its own digital fingerprints that are as unique to the computer as human fingerprints
    are to humans. The golden-macbook computer stores the Raspberry Pi's fingerprints
    for reference to prevent *spoofing* that can be done by another computer. The
    other computer should not have the same digital fingerprints as those in the Raspberry
    Pi.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 安全数字指纹是SSH协议的一部分。每台计算机都有其独特的数字指纹，就像人类的指纹对于每个人都是唯一的。golden-macbook计算机存储了Raspberry
    Pi的指纹，以防止*欺骗*攻击，这是其他计算机可以实施的。其他计算机不应与Raspberry Pi的数字指纹相同。
- en: After the Raspberry Pi's fingerprint has been accepted and stored, we are prompted
    for the password of the user `pi` at the `raspberrypi.local` host. After entering
    the password, we are presented with the Raspberry Pi's login message, the date
    of the last login, and a command prompt.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 在接受并存储Raspberry Pi的指纹后，系统会提示我们输入`raspberrypi.local`主机上`pi`用户的密码。输入密码后，我们将看到Raspberry
    Pi的登录信息、上次登录日期和命令提示符。
- en: For this recipe, there is nothing more left to do. So, we will enter `exit`
    at the command prompt, and the remote connection to the Raspberry Pi is closed.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个操作，已经没有其他事情需要做了。所以，我们将在命令提示符下输入`exit`，此时与Raspberry Pi的远程连接会被关闭。
- en: Hostname
  id: totrans-220
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 主机名
- en: It is not always possible to log in using the default hostname, which is `raspberrypi.local`.
    Sometimes, you will need to discover the IP address of the Raspberry Pi before
    you can log in.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 使用默认主机名`raspberrypi.local`并不总是能成功登录。有时，你需要先找出Raspberry Pi的IP地址才能登录。
- en: 'If you have connected the Raspberry Pi to a keyboard and display, you can use
    the `hostname` command to discover the IP address of the Raspberry Pi. The `–I`
    option asks the command to display all the IP addresses for the Raspberry Pi:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你已将Raspberry Pi连接到键盘和显示器，可以使用`hostname`命令发现Raspberry Pi的IP地址。`–I`选项要求命令显示Raspberry
    Pi的所有IP地址：
- en: '[PRE27]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'After the IP address is discovered (192.168.2.12), it can be used to log in
    remotely to the Raspberry Pi, as follows:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 在发现IP地址（192.168.2.12）后，可以使用该地址远程登录到Raspberry Pi，如下所示：
- en: '[PRE28]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: There's more...
  id: totrans-226
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Let's have a look at some other requirements for a remote login.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一下远程登录的其他要求。
- en: Finding out the IP address of the Raspberry Pi
  id: totrans-228
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 查找Raspberry Pi的IP地址
- en: 'Before the remote login is possible, the network address of the Raspberry Pi
    must be known. The `hostname` command can be used to directly discover the IP
    address from the Raspberry Pi via an attached keyboard and display. It is also
    possible to discover the IP address from the configuration interface of the local
    network gateway or DSL router. The following screenshot shows how the IP Address
    of a device named `raspberrypi` is displayed in a DSL router''s configuration
    interface:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 在远程登录之前，必须知道Raspberry Pi的网络地址。可以通过连接的键盘和显示器使用`hostname`命令直接从Raspberry Pi发现IP地址。也可以通过本地网络网关或DSL路由器的配置界面发现IP地址。以下截图展示了在DSL路由器的配置界面中，名为`raspberrypi`的设备的IP地址是如何显示的：
- en: '![Finding out the IP address of the Raspberry Pi](img/B04745_02_01.jpg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![查找Raspberry Pi的IP地址](img/B04745_02_01.jpg)'
- en: The IP address of a device, such as the Raspberry Pi, is a mapping between the
    permanent hardware address of the device's network interface (`b8:27:eb:29:aa:5a`)
    and its current address in the topology of the local network (192.168.1.79). In
    the previous example, the network ID that was assigned is `79` for the device
    named `raspberrypi` in the 192.168.1 subnet of the local network.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 设备（如Raspberry Pi）的IP地址是设备网络接口的永久硬件地址（`b8:27:eb:29:aa:5a`）与其在本地网络拓扑中的当前地址（192.168.1.79）之间的映射。在之前的示例中，为名为`raspberrypi`的设备分配的网络ID是`79`，并位于本地网络的192.168.1子网中。
- en: Most home and small office networks attempt to assign network IDs semi-permanently
    to the same device (the hardware address). So, once discovered, it is not likely
    that the Raspberry Pi's IP address will change.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数家庭和小型办公室网络尝试将网络 ID 半永久性地分配给相同的设备（硬件地址）。因此，一旦被发现，树莓派的 IP 地址不太可能发生变化。
- en: Spoofing the secure fingerprint
  id: totrans-233
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 欺骗安全指纹
- en: SSH, the Secure Shell utility, uses encryption to ensure that communication
    between the Raspberry Pi and other computers on the network remains secure. On
    the first launch, the Secure Shell server creates a unique security key that,
    like a fingerprint, can be used to uniquely identify that particular Secure Shell
    server. The first time a Secure Shell client connects to a Secure Shell server
    at a specific IP address, the client prompts the user to verify that the server
    has the correct fingerprint. Then, it stores the key to identify the server during
    the next connection.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: SSH（安全外壳工具）使用加密技术确保树莓派与网络上其他计算机之间的通信保持安全。在首次启动时，安全外壳服务器会生成一个唯一的安全密钥，像指纹一样，可以用来唯一标识该特定的安全外壳服务器。首次连接到指定
    IP 地址的安全外壳客户端时，客户端会提示用户验证该服务器是否具有正确的指纹。然后，它会存储密钥，以便下次连接时识别该服务器。
- en: 'The Secure Shell client will prevent logins to a machine with the same IP address
    but a different security key. This helps prevent a hacker from spoofing a device
    by stealing its IP address. The following example shows what happens when SSH
    suspects a hacker. In this case, it is only a new installation of the Raspberry
    Pi:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 安全外壳客户端将阻止使用相同 IP 地址但不同安全密钥的机器登录。这有助于防止黑客通过窃取设备的 IP 地址来伪造设备。以下示例展示了 SSH 在怀疑有黑客攻击时的处理情况。在这个例子中，实际上只是树莓派的新安装：
- en: '[PRE29]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Each new install creates new digital fingerprints
  id: totrans-237
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 每次新安装都会创建新的数字指纹
- en: Each new installation of a computer generates new digital fingerprints. Therefore,
    the Raspberry Pi's digital fingerprints will change. The digital fingerprint that
    the golden-macbook just received no longer matches the one that it has stored.
    Hence, access to the Raspberry Pi is denied. The same safety check that prevents
    a hacker from completing a successful man-in-the-middle attack also prevents a
    login to a newly reinstalled Raspberry Pi.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 每次新的计算机安装都会生成新的数字指纹。因此，树莓派的数字指纹会发生变化。金色 MacBook 刚接收到的数字指纹已经与它所存储的指纹不匹配。因此，无法访问树莓派。防止黑客成功进行中间人攻击的相同安全检查，也会阻止登录到重新安装的树莓派。
- en: 'The old, invalid digital fingerprint of the Raspberry Pi is still stored on
    the golden-macbook and can be removed using the `–R` option of the `ssh-keygen`
    command, as shown in the following piece of code:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 树莓派的旧的无效数字指纹仍然保存在金色 MacBook 中，并可以使用 `ssh-keygen` 命令的 `–R` 选项将其删除，如以下代码所示：
- en: '[PRE30]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: Once the old invalid digital fingerprint has been removed, `ssh` will no longer
    block access to that IP address. The next login using `ssh` works the same as
    the first time. The Raspberry Pi will share its new digital fingerprint, and it
    will be stored to prevent future *attacks*.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦旧的无效数字指纹被删除，`ssh`将不再阻止对该 IP 地址的访问。使用 `ssh` 的下一次登录与第一次登录相同。树莓派将共享其新的数字指纹，并将其存储以防止未来的*攻击*。
- en: See also
  id: totrans-242
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: '**hostname – show or set the system''s host name** ([http://manpages.debian.net/cgi-bin/man.cgi?query=hostname](http://manpages.debian.net/cgi-bin/man.cgi?query=hostname)):
    The `hostname` command can be used to display the IP address of the Raspberry
    Pi. The Debian manual page for hostname describes all the command''s options and
    also has notes on how to change the hostname of the system.'
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**hostname – 显示或设置系统的主机名** ([http://manpages.debian.net/cgi-bin/man.cgi?query=hostname](http://manpages.debian.net/cgi-bin/man.cgi?query=hostname)):
    `hostname` 命令可用于显示树莓派的 IP 地址。Debian 的 hostname 手册页面描述了该命令的所有选项，并附有如何更改系统主机名的说明。'
- en: '**ssh – OpenSSH SSH client (remote login program)** ([http://manpages.debian.net/cgi-bin/man.cgi?query=ssh](http://manpages.debian.net/cgi-bin/man.cgi?query=ssh)):
    The Debian manual page for SSH gives details about the command and its options.'
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ssh – OpenSSH SSH 客户端（远程登录程序）** ([http://manpages.debian.net/cgi-bin/man.cgi?query=ssh](http://manpages.debian.net/cgi-bin/man.cgi?query=ssh)):
    Debian 的 SSH 手册页面详细介绍了该命令及其选项。'
- en: '**ssh-keygen – key generation, management and conversion** ([http://manpages.debian.net/cgi-bin/man.cgi?query=ssh-keygen](http://manpages.debian.net/cgi-bin/man.cgi?query=ssh-keygen)):
    By using the `–R` option, `ssh-keygen` can be used to remove old digital fingerprints
    from the `known_hosts` file. The Debian manual page for `ssh-keygen` has information
    about the command and how it supports the secure shell (SSH) protocol.'
  id: totrans-245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ssh-keygen – 密钥生成、管理和转换** ([http://manpages.debian.net/cgi-bin/man.cgi?query=ssh-keygen](http://manpages.debian.net/cgi-bin/man.cgi?query=ssh-keygen))：通过使用`–R`选项，`ssh-keygen`可用于从`known_hosts`文件中移除旧的数字指纹。Debian手册页面提供了关于该命令及其如何支持安全外壳（SSH）协议的信息。'
- en: Obtaining remote access by using PuTTY
  id: totrans-246
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用PuTTY获取远程访问
- en: This recipe shows how to create a secure connection to the Raspberry Pi by using
    PuTTY, one of the most commonly used Windows Secure Shell clients.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 本教程展示了如何通过使用PuTTY（一款最常用的Windows安全外壳客户端）来创建与树莓派的安全连接。
- en: PuTTY, the Windows Secure Shell client, is not built into the Windows operating
    system. However, it is a commonly used third-party utility for secure communication.
    Before you can begin this recipe, you will need to download PuTTY from the Internet
    and install it on the Windows PC (the download URL is in the next section).
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: PuTTY，Windows平台的安全外壳（SSH）客户端，并未内置于Windows操作系统中。然而，它是一个常用的第三方工具，用于安全通信。在开始此教程之前，您需要从互联网下载PuTTY并将其安装在Windows电脑上（下载网址在下一节中提供）。
- en: Note
  id: totrans-249
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: There are also versions of PuTTY that are available for Mac OS X and Linux.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: PuTTY也有适用于Mac OS X和Linux的版本。
- en: Once you've completed this recipe, you will be able to remotely administer the
    Raspberry Pi from a Windows PC.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本教程后，您将能够从Windows PC远程管理树莓派。
- en: Getting ready
  id: totrans-252
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following ingredients are used in this recipe:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 本教程使用以下材料：
- en: You will require an initial setup or a basic networking setup for the Raspberry
    Pi that has been powered on. You also need to be logged in as the user `pi` (refer
    to the recipes in [Chapter 1](ch01.html "Chapter 1. Installation and Setup"),
    *Installation and Setup*, for instructions on how to boot and log in).
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您需要为已开机的树莓派进行初始设置或基本的网络配置。您还需要以`pi`用户身份登录（有关如何启动和登录的说明，请参阅[第1章](ch01.html "第1章
    安装与设置")，*安装与设置*部分）。
- en: A network connection is needed.
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要网络连接。
- en: You need to have a Windows PC with PuTTY installed.
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您需要一台已安装PuTTY的Windows PC。
- en: You can find a download link for PuTTY with instructions for its installation
    at [http://www.chiark.greenend.org.uk/~sgtatham/putty/](http://www.chiark.greenend.org.uk/~sgtatham/putty/)
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在[http://www.chiark.greenend.org.uk/~sgtatham/putty/](http://www.chiark.greenend.org.uk/~sgtatham/putty/)找到PuTTY的下载链接以及安装说明。
- en: How to do it...
  id: totrans-258
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作方法…
- en: 'Perform the following steps to access the Raspberry Pi remotely by using the
    PuTTY command:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤使用PuTTY命令远程访问树莓派：
- en: Start PuTTY on the Windows PC by double-clicking on `PuTTY.exe`.
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击`PuTTY.exe`，在Windows PC上启动PuTTY。
- en: When PuTTY is started, the PuTTY Configuration screen is displayed, as shown
    in the following screenshot:![How to do it...](img/B04745_02_02.jpg)
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动PuTTY时，会显示PuTTY配置屏幕，如下图所示：![操作方法](img/B04745_02_02.jpg)
- en: In the screenshot, the configuration window for PuTTY is being configured to
    connect to a Raspberry Pi whose IP address is 192.168.1.79.
  id: totrans-262
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在截图中，PuTTY的配置窗口正在配置以连接到IP地址为192.168.1.79的树莓派。
- en: Enter the Raspberry Pi's IP address in the **Host Name** field and click on
    **Open** to connect to the Raspberry Pi.![How to do it...](img/B04745_02_03.jpg)
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**主机名**字段中输入树莓派的IP地址，然后点击**打开**以连接到树莓派。![操作方法](img/B04745_02_03.jpg)
- en: The first time you connect remotely to the Raspberry Pi, PuTTY will display
    a warning message that says that the Raspberry Pi's digital fingerprint (or the
    host key) has not been registered with PuTTY because this is the first time that
    PuTTY has seen the digital fingerprint of the Raspberry Pi.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一次远程连接树莓派时，PuTTY会显示一条警告信息，表示树莓派的数字指纹（或主机密钥）尚未在PuTTY中注册，因为这是PuTTY首次看到树莓派的数字指纹。
- en: Click on the **Yes** button to accept the Raspberry Pi's digital fingerprint
    and continue.
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**是**按钮接受树莓派的数字指纹并继续。
- en: After you've accepted the security warning, you will be asked for a username
    and password. Enter `pi` as the username and then enter the password that you
    configured during installation for the user whose username is `pi` (`raspberry`
    is the default password). The following screenshot shows a successful login using
    PuTTY:![How to do it...](img/B04745_02_04.jpg)
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在接受安全警告后，系统会提示你输入用户名和密码。输入 `pi` 作为用户名，然后输入在安装过程中为用户名 `pi` 配置的密码（默认密码为 `raspberry`）。下图显示了使用
    PuTTY 成功登录的画面：![如何操作...](img/B04745_02_04.jpg)
- en: Type `exit` to log out.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入 `exit` 以注销。
- en: How it works...
  id: totrans-268
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: This recipe begins by starting the PuTTY client.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 本教程从启动 PuTTY 客户端开始。
- en: The IP address of the Raspberry Pi is entered into the **Host Name** field and
    the **Open** button is clicked to establish a secure connection to the Raspberry
    Pi.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 将 Raspberry Pi 的 IP 地址输入到 **Host Name** 字段中，然后点击 **Open** 按钮以建立与 Raspberry Pi
    的安全连接。
- en: Before the connection is established, PuTTY displays a **Security Alert** dialog
    box warning that states that the Raspberry Pi's digital fingerprint (or host key)
    has not been registered and there is *no guarantee that the server is the computer
    you think it is*. The alert is normal and expected for the first connection to
    a new computer. Clicking on **Yes** clears the alert and adds the Raspberry Pi
    to PuTTY's list of known hosts.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 在连接建立之前，PuTTY 会显示一个 **Security Alert** 警告框，提示 Raspberry Pi 的数字指纹（或主机密钥）尚未注册，并且
    *无法保证该服务器就是你认为的计算机*。这个警告是正常的，并且是首次连接新计算机时预期的行为。点击 **Yes** 清除警告并将 Raspberry Pi
    添加到 PuTTY 的已知主机列表中。
- en: After the security warning has been cleared, the PuTTY Terminal window is opened
    and we are prompted for the username (`login as:`) and password to use when logging
    in to the Raspberry Pi. After entering the username and password, a welcome message
    and the time of last login are displayed, which is followed by a command prompt.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 清除安全警告后，PuTTY 终端窗口会打开，系统会提示输入用于登录 Raspberry Pi 的用户名（`login as:`）和密码。输入用户名和密码后，欢迎信息和上次登录时间将显示，然后是命令提示符。
- en: There's nothing more that needs to be done in this recipe. Therefore, we will
    use the `exit` command to close the connection.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个教程中没有其他操作需要进行。因此，我们将使用 `exit` 命令来关闭连接。
- en: There's more...
  id: totrans-274
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多内容...
- en: Whenever the Raspberry Pi is reinstalled, it will create a new digital fingerprint.
    This new fingerprint will not be recognized by PuTTY the first time it is used.
    When PuTTY tries to connect to the newly reinstalled Raspberry Pi, PuTTY will
    display a warning that states that there has been a **POTENTIAL SECURITY BREACH**
    (see the following screenshot).
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 每当重新安装 Raspberry Pi 时，它将生成一个新的数字指纹。PuTTY 在首次使用该新指纹时不会识别它。当 PuTTY 尝试连接到重新安装的
    Raspberry Pi 时，会显示一条警告，指出发生了 **POTENTIAL SECURITY BREACH**（潜在的安全漏洞）（请参见下方截图）。
- en: If you have just reinstalled your Raspberry Pi, do not panic. The Raspberry
    Pi's new digital fingerprint has not yet been recognized by PuTTY. Simply click
    on the **Yes** button to accept the new fingerprint.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你刚刚重新安装了 Raspberry Pi，请不要慌张。PuTTY 尚未识别 Raspberry Pi 的新数字指纹。只需点击 **Yes** 按钮接受新的指纹即可。
- en: 'If you didn''t just reinstall your Raspberry Pi and this warning pops up, you
    may very well have a security breach. Therefore, check your network connections
    and ensure that there is no possibility of a man-in-the-middle attack:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你并非刚刚重新安装 Raspberry Pi，而这个警告突然出现，可能真的存在安全漏洞。因此，请检查你的网络连接，确保不存在中间人攻击的可能：
- en: '![There''s more...](img/B04745_02_05.jpg)'
  id: totrans-278
  prefs: []
  type: TYPE_IMG
  zh: '![更多内容...](img/B04745_02_05.jpg)'
- en: See also
  id: totrans-279
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: '**PuTTY** ([http://www.chiark.greenend.org.uk/~sgtatham/putty/](http://www.chiark.greenend.org.uk/~sgtatham/putty/)):
    PuTTY is a free SSH client for Windows. It is also a telnet client and an xterm
    emulator.'
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**PuTTY** ([http://www.chiark.greenend.org.uk/~sgtatham/putty/](http://www.chiark.greenend.org.uk/~sgtatham/putty/)):
    PuTTY 是一款免费的 Windows SSH 客户端。它也是一个 Telnet 客户端和 Xterm 模拟器。'
- en: '**Man-in-the-middle attack** ([https://en.wikipedia.org/wiki/Man-in-the-middle_attack](https://en.wikipedia.org/wiki/Man-in-the-middle_attack)):
    Wikipedia has more information about the man-in-the-middle attack, where the attacker
    secretly relays and possibly alters the communication between two parties who
    believe that they are directly communicating with each other.'
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Man-in-the-middle attack** ([https://en.wikipedia.org/wiki/Man-in-the-middle_attack](https://en.wikipedia.org/wiki/Man-in-the-middle_attack)):
    维基百科提供了有关中间人攻击的更多信息，其中攻击者秘密地转发并可能篡改两个看似直接通信的各方之间的通信。'
- en: Changing the login password (passwd)
  id: totrans-282
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更改登录密码（passwd）
- en: This recipe shows how to change the login password.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方演示了如何更改登录密码。
- en: Once remote access to the Raspberry Pi has been enabled, anyone on the local
    network who knows the correct username and password will be able to log in remotely.
    To prevent unauthorized access to the Raspberry Pi, the default installation password
    should be changed immediately after the installation is complete.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦启用了 Raspberry Pi 的远程访问，任何知道正确用户名和密码的本地网络用户都可以远程登录。为了防止未经授权的访问 Raspberry Pi，安装完成后应立即更改默认安装密码。
- en: The `raspi-config` utility can be used to change the login password. However,
    this recipe uses the `passwd` command. The `passwd` command is a standard GNU
    utility that is available with most Linux distributions and can generally be used
    even when `raspi-config` is not available.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: '`raspi-config`工具可以用来更改登录密码。然而，本配方使用的是`passwd`命令。`passwd`命令是一个标准的GNU工具，大多数Linux发行版都自带此命令，即使`raspi-config`不可用，通常也可以使用它。'
- en: Changing the login password frequently will inhibit unauthorized access to the
    Raspberry Pi. You should use this recipe on a regular basis to protect access
    to your Raspberry Pi.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 经常更改登录密码可以有效防止未经授权的访问。您应该定期使用此配方来保护对 Raspberry Pi 的访问。
- en: After completing this recipe, you will be able to change your login password.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本配方后，您将能够更改登录密码。
- en: Getting ready
  id: totrans-288
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following ingredients are required for this recipe:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本配方所需的以下要素：
- en: You will require an initial setup or a basic networking setup for the Raspberry
    Pi that has been powered on. You also need to be logged in as the user `pi` (refer
    to the recipes in [Chapter 1](ch01.html "Chapter 1. Installation and Setup"),
    *Installation and Setup*, for instructions for how to boot and log in and the
    previous recipes in this chapter for instructions for how to log in remotely).
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您需要为已开机的 Raspberry Pi 进行初始设置或基本网络设置。同时，您需要以`pi`用户登录（有关如何启动并登录的说明，请参考[第1章](ch01.html
    "第1章 安装与设置")，*安装与设置*，以及本章前面的配方，了解如何远程登录的说明）。
- en: A network connection is an optional requirement.
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络连接是可选要求。
- en: If the Raspberry Pi has remote access enabled, this recipe can be completed
    remotely using SSH or PuTTY (refer to the *Remote access (SSH)* and *Remote access
    (PuTTY)* recipes).
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 Raspberry Pi 已启用远程访问，则可以使用 SSH 或 PuTTY 远程完成此配方（请参考*远程访问（SSH）*和*远程访问（PuTTY）*配方）。
- en: How to do it...
  id: totrans-293
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to change the login password:'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来更改登录密码：
- en: 'Use the `passwd` command to change the password for the user `pi`, as follows:'
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`passwd`命令来更改用户`pi`的密码，如下所示：
- en: '[PRE31]'
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Enter the (current) Unix password, which is the password that was used during
    the login.
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入当前的Unix密码，即登录时使用的密码。
- en: Note
  id: totrans-298
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The passwords will not be displayed when they are entered.
  id: totrans-299
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 密码输入时不会显示。
- en: Enter the new password.
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入新密码。
- en: Enter the new password a second time for verification.
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第二次输入新密码以进行验证。
- en: 'The command responds with `passwd: password updated correctly`.'
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '命令会返回`passwd: password updated correctly`。'
- en: The login password has been changed successfully!
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录密码已成功更改！
- en: How it works...
  id: totrans-304
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 原理...
- en: The `passwd` command first prompts for the current login password to ensure
    that the user who's attempting to change the password is really authorized to
    do so.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: '`passwd`命令首先会提示输入当前的登录密码，以确保尝试更改密码的用户确实被授权进行此操作。'
- en: The password is not displayed as it is typed to protect the password from being
    overseen. If the current password is not entered correctly, the user will be asked
    to retype the password.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 为了保护密码不被旁人看到，输入时密码不会显示。如果当前密码输入错误，系统会要求重新输入密码。
- en: Once the user has been authorized, the command prompts for a new Unix password.
    Again, the new password is not displayed. The command prompts you to retype the
    new Unix password to ensure that the password was entered correctly. If the two
    password entries differ, you will be asked to type them again.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦用户被授权，命令会提示输入新的Unix密码。同样，新密码不会显示。命令会要求你重新输入新密码，以确保密码输入正确。如果两次输入的密码不一致，将要求重新输入。
- en: 'After the new password has been entered correctly, you are notified with a
    message that states this: `password updated successfully`. Changing the login
    password on a regular basis will help prevent unauthorized access to the Raspberry
    Pi.'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 在新密码输入正确后，系统会通知您一条消息：“`密码更新成功`”。定期更改登录密码有助于防止未授权访问树莓派。
- en: See also
  id: totrans-309
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: '**passwd - change user password** ([http://manpages.debian.net/cgi-bin/man.cgi?query=passwd](http://manpages.debian.net/cgi-bin/man.cgi?query=passwd)):
    The Debian manual page for `passwd` has details about the command and its use.'
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**passwd - 更改用户密码** ([http://manpages.debian.net/cgi-bin/man.cgi?query=passwd](http://manpages.debian.net/cgi-bin/man.cgi?query=passwd))：Debian的`passwd`手册页面提供了该命令及其用法的详细信息。'
- en: Adding a user (useradd)
  id: totrans-311
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加用户（useradd）
- en: This recipe shows how to add a new user login to your Raspberry Pi.
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 本食谱演示如何在树莓派上添加一个新的用户登录。
- en: Creating separate logins for different users (or for different purposes) helps
    improve the security of the Raspberry Pi and organize the use of the Raspberry
    Pi's filesystem by giving each user a home directory in which they can organize
    their files.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 为不同用户（或不同目的）创建独立的登录有助于提高树莓派的安全性，并通过为每个用户提供一个主目录来组织树莓派文件系统的使用，用户可以在该目录中整理自己的文件。
- en: After completing this recipe, you will be able to add a new user to the Raspberry
    Pi.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本食谱后，您将能够在树莓派上添加新用户。
- en: Getting ready
  id: totrans-315
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following ingredients are required for this recipe:'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 本食谱需要以下材料：
- en: You will need an initial setup or a basic networking setup for the Raspberry
    Pi that has been powered on. You also need to be logged in as the user `pi` (refer
    to the recipes in [Chapter 1](ch01.html "Chapter 1. Installation and Setup"),
    *Installation and Setup*, to learn how to boot and log in and the previous recipes
    in this chapter to understand how to log in remotely).
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您需要先进行初始设置或基本的网络设置，以便树莓派通电后使用。您还需要以`pi`用户身份登录（参见[第1章](ch01.html "第1章 安装与设置")，*安装与设置*，了解如何启动和登录，并参考本章之前的食谱，了解如何远程登录）。
- en: A network connection is an optional requirement.
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络连接是一个可选要求。
- en: If the Raspberry Pi has remote access enabled, this recipe can be completed
    remotely using SSH or PuTTY (refer to the *Remote access (SSH)* and *Remote access
    (PuTTY)* recipes).
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 如果树莓派启用了远程访问，可以通过SSH或PuTTY远程完成此食谱（参见*远程访问（SSH）*和*远程访问（PuTTY）*食谱）。
- en: How to do it...
  id: totrans-320
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to add a new user:'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以添加新用户：
- en: 'Use `ls` to display the users who already have home directories, as follows:'
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`ls`命令显示已经拥有主目录的用户，具体如下：
- en: '[PRE32]'
  id: totrans-323
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Execute the `adduser` command to add the user whose username is `golden`, as
    follows:'
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行`adduser`命令以添加用户名为`golden`的用户，具体如下：
- en: '[PRE33]'
  id: totrans-325
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: The `adduser` command prompts for a new Unix password, but it does not display
    it as it is being typed. Therefore, it asks you to retype the new UNIX password
    so that the hidden password can be verified.
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`adduser`命令会提示输入新Unix密码，但在输入时不会显示密码。因此，系统会要求您重新输入新Unix密码，以便验证该密码。'
- en: After the password is entered, you are prompted for the new user's full name,
    room number, work phone, and other information. None of these entries is mandatory.
    All of them can be left blank.
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入密码后，系统会提示输入新用户的全名、房间号、工作电话及其他信息。这些信息都不是必填项，您可以留空。
- en: When the user information for the new user has been completely entered, the
    command asks `Is the information correct? [Y/n]`. Type *Y* and then press the
    *Enter* key to add the new user to the Raspberry Pi.
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当新用户信息完全输入后，系统会提示`信息正确吗？[Y/n]`。键入*Y*并按*Enter*键即可将新用户添加到树莓派中。
- en: 'Use `ls` to show the new user''s home directory, as follows:'
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`ls`命令显示新用户的主目录，具体如下：
- en: '[PRE34]'
  id: totrans-330
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: Finally, log out and log back in as the new user!
  id: totrans-331
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，注销并重新以新用户身份登录！
- en: How it works...
  id: totrans-332
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: First, the current users' home directories are listed. There is only one user
    home directory in the list, namely the home directory of the user whose username
    is `pi`.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，列出当前用户的主目录。列表中只有一个用户的主目录，即用户名为`pi`的用户的主目录。
- en: The new user, `golden`, is added to the system. The new user is given a password
    and user information. When all the new user information is entered, the information
    is accepted and considered to be correct and the new user with `golden` as the
    username is created.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 新用户`golden`已被添加到系统中。新用户已设置密码和用户信息。当所有新用户信息输入完成后，系统将接受并认为这些信息是正确的，用户名为`golden`的新用户将被创建。
- en: After the new user is added, the users' home directories are listed again. This
    time, there are two user home directories listed, namely `golden` and `pi`.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 添加新用户后，再次列出用户的主目录。此时，列出了两个用户主目录，分别是 `golden` 和 `pi`。
- en: Finally, we can log out and log back in as `golden`.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们可以注销并重新以 `golden` 用户身份登录。
- en: See also
  id: totrans-337
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: '**useradd - create a new user or update default new user information**'
  id: totrans-338
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**useradd - 创建新用户或更新默认新用户信息**'
- en: '([http://manpages.debian.net/cgi-bin/man.cgi?query=useradd](http://manpages.debian.net/cgi-bin/man.cgi?query=useradd)):
    The Debian manual page for `useradd` lists in detail the features and options
    of the `useradd` command as well as provides background information about how
    users and groups are managed on the Raspbian Linux distribution.'
  id: totrans-339
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '([http://manpages.debian.net/cgi-bin/man.cgi?query=useradd](http://manpages.debian.net/cgi-bin/man.cgi?query=useradd)):
    Debian 手册页为 `useradd` 命令提供了详细的功能和选项说明，并提供了有关如何在 Raspbian Linux 发行版中管理用户和组的背景信息。'
- en: Giving a user sudo privileges (id and usermod)
  id: totrans-340
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 给用户赋予 sudo 权限（id 和 usermod）
- en: This recipe shows how to add a user to the privileged `sudo` group.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方展示了如何将用户添加到特权的 `sudo` 组。
- en: When users are created, they are given an ordinary set of user privileges by
    default. The user can log in to the Raspberry Pi, create and delete files in their
    own user directory, and execute any command that does not require super-user privileges.
    If you'd like a new user to execute special commands such as `shutdown`, `reboot`,
    and `raspi-config`, you'll need to add the user to the `sudo` user group.
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户创建时，默认赋予他们普通的用户权限。用户可以登录到 Raspberry Pi，创建和删除自己的用户目录中的文件，执行任何不需要超级用户权限的命令。如果你希望新用户执行特殊命令，如
    `shutdown`、`reboot` 和 `raspi-config`，你需要将该用户添加到 `sudo` 用户组。
- en: After completing this recipe, you'll be able to give an ordinary user super-user
    privileges by adding the user to the `sudo` user group.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本配方后，你将能够通过将用户添加到 `sudo` 用户组，为普通用户赋予超级用户权限。
- en: Getting ready
  id: totrans-344
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following ingredients are used in this recipe:'
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方使用了以下配料：
- en: You will require an initial setup or a basic networking setup for the Raspberry
    Pi that has been powered on. You also need to be logged in as the user `pi` (refer
    to the recipes in [Chapter 1](ch01.html "Chapter 1. Installation and Setup"),
    *Installation and Setup*, to learn how to boot and log in and the previous recipes
    in this chapter to understand how to log in remotely)
  id: totrans-346
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你需要为已启动的 Raspberry Pi 进行初始设置或基础网络设置。你还需要以用户 `pi` 登录（参考 [第1章](ch01.html "第1章：安装与设置")，*安装与设置*
    配方，了解如何启动和登录，以及本章前面的配方，了解如何远程登录）。
- en: A network connection is an optional requirement.
  id: totrans-347
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络连接是可选要求。
- en: If the Raspberry Pi has remote access enabled, this recipe can be completed
    remotely by using SSH or PuTTY (refer to the *Remote access (SSH)* and *Remote
    access (PuTTY)* recipes).
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 Raspberry Pi 启用了远程访问功能，则可以通过 SSH 或 PuTTY 远程完成此配方（参考 *远程访问（SSH）* 和 *远程访问（PuTTY）*
    配方）。
- en: How to do it...
  id: totrans-349
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to add a user to the `sudo` group:'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤将用户添加到 `sudo` 组：
- en: 'Use the `id` command to see the groups to which the user whose username is
    `golden` currently belongs, as follows:'
  id: totrans-351
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `id` 命令查看用户名为 `golden` 的用户当前属于哪些组，如下所示：
- en: '[PRE35]'
  id: totrans-352
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'Then, use the `usermod –a -G` command to add the user whose username is `golden`
    to the `sudo` user group, as follows:'
  id: totrans-353
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，使用 `usermod –a -G` 命令将用户名为 `golden` 的用户添加到 `sudo` 用户组，如下所示：
- en: '[PRE36]'
  id: totrans-354
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Use the `id` command to validate that the user has indeed been added to the
    `sudo` group:'
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `id` 命令验证用户是否确实已被添加到 `sudo` 组：
- en: '[PRE37]'
  id: totrans-356
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: Now, the user whose username is `golden` is a member of the `27`(`sudo`) group
    and can execute commands and modify files that require super-user privileges!
  id: totrans-357
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，用户名为 `golden` 的用户是 `27`（`sudo`）组的成员，可以执行需要超级用户权限的命令并修改文件！
- en: How it works...
  id: totrans-358
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: First, the `id` command lists the groups for which the uses – chose username
    is `golden` – is currently a member.
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，`id` 命令列出用户名为 `golden` 的用户当前所属的组。
- en: Then, the `usermod` command is used to add (`-a`) the `sudo` group (`-G sudo`)
    to the user.
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，使用 `usermod` 命令将 `sudo` 组（`-G sudo`）添加到该用户（`-a`）。
- en: Finally, the `id` command is used once again to see which groups `golden` is
    a member of.
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，再次使用 `id` 命令查看 `golden` 属于哪些组。
- en: Now, the user whose username is `golden` can execute commands that require super-user
    privileges by using the `sudo` command as a prefix. The first recipe in this chapter,
    *Executing command with privileges*, has more information on the `sudo` command
    and its use.
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，用户名为 `golden` 的用户可以通过在命令前加上 `sudo` 命令来执行需要超级用户权限的命令。本章的第一个实例，*以特权执行命令*，提供了更多关于
    `sudo` 命令及其使用的信息。
- en: See also
  id: totrans-363
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: '**id - print real and effective user and group IDs** ([http://manpages.debian.net/cgi-bin/man.cgi?query=id](http://manpages.debian.net/cgi-bin/man.cgi?query=id)):
    The Debian manual page for `id` lists the command options.'
  id: totrans-364
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**id - 打印真实有效的用户和组ID** ([http://manpages.debian.net/cgi-bin/man.cgi?query=id](http://manpages.debian.net/cgi-bin/man.cgi?query=id))：Debian
    手册页为 `id` 命令列出了相关选项。'
- en: '**usermod - change user password** ([http://manpages.debian.net/cgi-bin/man.cgi?query=usermod](http://manpages.debian.net/cgi-bin/man.cgi?query=usermod)):
    The Debian manual page for `usermod` has details about this command and its use.'
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**usermod - 更改用户密码** ([http://manpages.debian.net/cgi-bin/man.cgi?query=usermod](http://manpages.debian.net/cgi-bin/man.cgi?query=usermod))：Debian
    手册页为 `usermod` 命令提供了该命令及其用法的详细信息。'
