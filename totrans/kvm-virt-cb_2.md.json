["```\nroot@kvm:~# apt update && apt install libvirt-binroot@kvm:~#\n\n```", "```\nroot@kvm:~# pgrep -lfa libvirtd 36667 /usr/sbin/libvirtd root@kvm:~#\n\n```", "```\nroot@kvm:~# cat /etc/libvirt/libvirtd.conf | grep -vi \"#\"\n   | sed '/^$/d'\n unix_sock_group = \"libvirtd\" unix_sock_ro_perms = \"0777\"\n unix_sock_rw_perms = \"0770\"\n auth_unix_ro = \"none\"\n auth_unix_rw = \"none\"\n root@kvm:~#\n\n```", "```\nroot@kvm:~# vim /etc/libvirt/qemu.conf\n...\nsecurity_driver = \"none\"\n...\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# /etc/init.d/libvirt-bin restart\nlibvirt-bin stop/waiting\nlibvirt-bin start/running, process 1158\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# ls -la /etc/libvirt/\ntotal 76\ndrwxr-xr-x 5 root root 4096 Mar 22 14:27 .\ndrwxr-xr-x 90 root root 4096 Mar 21 23:17 ..\ndrwxr-xr-x 2 root root 4096 Feb 5 2016 hooks\n-rw-r--r-- 1 root root 518 Feb 5 2016 libvirt.conf\n-rw-r--r-- 1 root root 13527 Feb 5 2016 libvirtd.conf\n-rw-r--r-- 1 root root 1176 Feb 5 2016 lxc.conf\ndrwxr-xr-x 2 root root 4096 Mar 21 23:16 nwfilter\ndrwxr-xr-x 3 root root 4096 Mar 21 23:57 qemu\n-rw------- 1 root root 16953 Mar 21 23:18 qemu.conf\n-rw-r--r-- 1 root root 2170 Feb 5 2016 qemu-lockd.conf\n-rw-r--r-- 1 root root 2213 Feb 5 2016 virtlockd.conf\n-rw-r--r-- 1 root root 1217 Feb 5 2016 virt-login-shell.conf\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh list --all\n Id Name State\n----------------------------------------------------\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# cat kvm1.xml\n<domain type='kvm' id='1'>\n <name>kvm1</name>\n <memory unit='KiB'>1048576</memory>\n <vcpu placement='static'>1</vcpu>\n <os>\n <type arch='x86_64' machine='pc-i440fx-trusty'>hvm</type>\n <boot dev='hd'/>\n </os>\n <on_poweroff>destroy</on_poweroff>\n <on_reboot>restart</on_reboot>\n <on_crash>restart</on_crash>\n <devices>\n <emulator>/usr/bin/qemu-system-x86_64</emulator>\n <disk type='file' device='disk'>\n <driver name='qemu' type='raw'/>\n <source file='/tmp/debian.img'/>\n <target dev='hda' bus='ide'/>\n <alias name='ide0-0-0'/>\n <address type='drive' controller='0' bus='0' target='0' unit='0'/>\n </disk>\n <interface type='network'>\n <source network='default'/>\n <target dev='vnet0'/>\n <model type='rtl8139'/>\n <alias name='net0'/>\n <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>\n </interface>\n <graphics type='vnc' port='5900' autoport='yes' listen='146.20.141.158'>\n <listen type='address' address='146.20.141.158'/>\n </graphics>\n </devices>\n <seclabel type='none'/>\n</domain>\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh define kvm1.xml\nDomain kvm1 defined from kvm1.xml\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh list --all\n Id Name State\n----------------------------------------------------\n - kvm1 shut off\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# apt install virtinst\n...\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virt-install --name kvm1 --ram 1024 --disk path=/tmp/debian.img,format=raw --graphics vnc,listen=146.20.141.158 --noautoconsole --hvm --import\n\nStarting install...\nCreating domain... | 0 B 00:00\nDomain creation completed. You can restart your domain by running:\n virsh --connect qemu:///system start kvm1\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh list --all\n Id Name State\n----------------------------------------------------\n 10 kvm1 running\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# cat /etc/libvirt/qemu/kvm1.xml\n<!--\nWARNING: THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE\nOVERWRITTEN AND LOST. Changes to this xml configuration should be made using:\n virsh edit kvm1\nor other application using the libvirt API.\n-->\n\n<domain type='kvm'>\n <name>kvm1</name>\n <uuid>c3892cbf-812a-2448-7ad2-098ea8381066</uuid>\n <memory unit='KiB'>1048576</memory>\n <currentMemory unit='KiB'>1048576</currentMemory>\n <vcpu placement='static'>1</vcpu>\n <os>\n <type arch='x86_64' machine='pc-i440fx-trusty'>hvm</type>\n <boot dev='hd'/>\n </os>\n <features>\n <acpi/>\n <apic/>\n <pae/>\n </features>\n <clock offset='utc'/>\n <on_poweroff>destroy</on_poweroff>\n <on_reboot>restart</on_reboot>\n <on_crash>restart</on_crash>\n <devices>\n <emulator>/usr/bin/qemu-system-x86_64</emulator>\n <disk type='file' device='disk'>\n <driver name='qemu' type='raw'/>\n <source file='/tmp/debian.img'/>\n <target dev='hda' bus='ide'/>\n <address type='drive' controller='0' bus='0' target='0' unit='0'/>\n </disk>\n <controller type='usb' index='0'>\n <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x2'/>\n </controller>\n <controller type='pci' index='0' model='pci-root'/>\n <controller type='ide' index='0'>\n <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x1'/>\n </controller>\n <interface type='network'>\n <mac address='52:54:00:59:e3:4e'/>\n <source network='default'/>\n <model type='rtl8139'/>\n <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>\n </interface>\n <serial type='pty'>\n <target port='0'/>\n </serial>\n <console type='pty'>\n <target type='serial' port='0'/>\n </console>\n <input type='mouse' bus='ps2'/>\n <input type='keyboard' bus='ps2'/>\n <graphics type='vnc' port='-1' autoport='yes' listen='146.20.141.158'>\n <listen type='address' address='146.20.141.158'/>\n </graphics>\n <video>\n <model type='cirrus' vram='9216' heads='1'/>\n <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>\n </video>\n <memballoon model='virtio'>\n <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>\n </memballoon>\n </devices>\n</domain>\nroot@kvm:~# \n\n```", "```\nroot@kvm:~# virsh list --all\n Id Name State\n----------------------------------------------------\n - kvm1 shut off\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh start kvm1\nDomain kvm1 started\n\nroot@kvm:~#\nroot@kvm:~# virsh list --all\n Id Name State\n----------------------------------------------------\n 1 kvm1 running\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# pgrep -lfa qemu\n1686 /usr/bin/qemu-system-x86_64 -name kvm1 -S -machine pc-i440fx-trusty,accel=kvm,usb=off -m 1024 -realtime mlock=off -smp 1,sockets=1,cores=1,threads=1 -uuid a9dfd1a1-7dd1-098e-a926-db9526785a9e -no-user-config -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/kvm1.monitor,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc -no-shutdown -boot strict=on -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -drive file=/tmp/debian.img,if=none,id=drive-ide0-0-0,format=raw -device ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -netdev tap,fd=24,id=hostnet0 -device rtl8139,netdev=hostnet0,id=net0,mac=52:54:00:ce:dd:f2,bus=pci.0,addr=0x3 -chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 -vnc 146.20.141.158:0 -device cirrus-vga,id=video0,bus=pci.0,addr=0x2 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x4\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh destroy kvm1\nDomain kvm1 destroyed\n\nroot@kvm:~# virsh list --all\n Id Name State\n----------------------------------------------------\n - kvm1 shut off\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh undefine kvm1\nDomain kvm1 has been undefined\n\nroot@kvm:~# virsh list --all\n Id Name State\n----------------------------------------------------\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh list\n Id Name State\n----------------------------------------------------\n 11 kvm1 running\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh dumpxml kvm1\n<domain type='kvm' id='11'>\n <name>kvm1</name>\n <uuid>9eb9a2e9-abb2-54c5-5cb3-dc86728e70fc</uuid>\n <memory unit='KiB'>1048576</memory>\n <currentMemory unit='KiB'>1048576</currentMemory>\n <vcpu placement='static'>1</vcpu>\n <resource>\n <partition>/machine</partition>\n </resource>\n <os>\n <type arch='x86_64' machine='pc-i440fx-trusty'>hvm</type>\n <boot dev='hd'/>\n </os>\n <features>\n <acpi/>\n <apic/>\n <pae/>\n </features>\n <clock offset='utc'/>\n <on_poweroff>destroy</on_poweroff>\n <on_reboot>restart</on_reboot>\n <on_crash>restart</on_crash>\n <devices>\n <emulator>/usr/bin/qemu-system-x86_64</emulator>\n <disk type='file' device='disk'>\n <driver name='qemu' type='raw'/>\n <source file='/tmp/debian.img'/>\n <target dev='hda' bus='ide'/>\n <alias name='ide0-0-0'/>\n <address type='drive' controller='0' bus='0' target='0' unit='0'/>\n </disk>\n <controller type='usb' index='0'>\n <alias name='usb0'/>\n <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x2'/>\n </controller>\n <controller type='pci' index='0' model='pci-root'>\n <alias name='pci.0'/>\n </controller>\n <controller type='ide' index='0'>\n <alias name='ide0'/>\n <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x1'/>\n </controller>\n <interface type='network'>\n <mac address='52:54:00:d1:70:df'/>\n <source network='default'/>\n <target dev='vnet0'/>\n <model type='rtl8139'/>\n <alias name='net0'/>\n <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>\n </interface>\n <serial type='pty'>\n <source path='/dev/pts/0'/>\n <target port='0'/>\n <alias name='serial0'/>\n </serial>\n <console type='pty' tty='/dev/pts/0'>\n <source path='/dev/pts/0'/>\n <target type='serial' port='0'/>\n <alias name='serial0'/>\n </console>\n <input type='mouse' bus='ps2'/>\n <input type='keyboard' bus='ps2'/>\n <graphics type='vnc' port='5900' autoport='yes' listen='146.20.141.158'>\n <listen type='address' address='146.20.141.158'/>\n </graphics>\n <video>\n <model type='cirrus' vram='9216' heads='1'/>\n <alias name='video0'/>\n <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/>\n </video>\n <memballoon model='virtio'>\n <alias name='balloon0'/>\n <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>\n </memballoon>\n </devices>\n <seclabel type='none'/>\n</domain>\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh dumpxml kvm1 > kvm1.xml\nroot@kvm:~# head kvm1.xml\n<domain type='kvm' id='11'>\n <name>kvm1</name>\n <uuid>9eb9a2e9-abb2-54c5-5cb3-dc86728e70fc</uuid>\n <memory unit='KiB'>1048576</memory>\n <currentMemory unit='KiB'>1048576</currentMemory>\n <vcpu placement='static'>1</vcpu>\n <resource>\n <partition>/machine</partition>\n </resource>\n <os>\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh edit kvm1\nDomain kvm1 XML configuration edited.\n\nroot@kvm:~# \n\n```", "```\nroot@kvm:~# virsh edit kvm1\nerror: XML error: current memory '1048576k' exceeds maximum '524288k'\nFailed. Try again? [y,n,f,?]:n\nDomain kvm1 XML configuration not changed.\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virt-install --name kvm1 --ram 1024 --extra-args=\"text console=tty0 utf8 console=ttyS0,115200\" --graphics vnc,listen=146.20.141.158 --hvm --location=http://ftp.us.debian.org/debian/dists/stable/main/installer-amd64/ --disk path=/tmp/kvm1.img,size=8\n\nRetrieving file MANIFEST... | 3.3 kB 00:00 ...\nRetrieving file linux... | 6.0 MB 00:00 ...\nRetrieving file initrd.gz... | 29 MB 00:00 ...\nCreating storage file kvm1.img | 8.0 GB 00:00\nWARNING Unable to connect to graphical console: virt-viewer not installed. Please install the 'virt-viewer' package.\nDomain installation still in progress. You can reconnect to\nthe console to complete the installation process.\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh console kvm1\nConnected to domain kvm1\nEscape character is ^]\n\n```", "```\nroot@kvm:~# virsh start kvm1\nDomain kvm1 started\n\nroot@kvm:~#\n\n```", "```\nroot@debian:~# systemctl enable serial-getty@ttyS0.service\nroot@debian:~# systemctl start serial-getty@ttyS0.service\nroot@debian:~#\n\n```", "```\nroot@kvm:~# virsh console kvm1\nConnected to domain kvm1\nEscape character is ^]\n\nDebian GNU/Linux 8 debian ttyS0\n\ndebian login: root\nPassword:\nLast login: Wed Mar 22 16:38:10 CDT 2017 on tty1\nLinux debian 3.16.0-4-amd64 #1 SMP Debian 3.16.39-1+deb8u2 (2017-03-07) x86_64\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nroot@debian:~# free -m\n total used free shared buffers cached\nMem: 1000 98 902 4 9 43\n-/+ buffers/cache: 44 956\nSwap: 382 0 382\nroot@debian:~#\n\n```", "```\nroot@kvm:~# qemu-img info /tmp/kvm1.img\nimage: /tmp/kvm1.img\nfile format: raw\nvirtual size: 8.0G (8589934592 bytes)\ndisk size: 1.9G\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh dommemstat kvm1\nactual 1048576\nswap_in 0\nrss 333644\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh setmem kvm1 --size 1049000\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh destroy kvm1\nDomain kvm1 destroyed\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh setmaxmem kvm1 --size 2097152\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh start kvm1\nDomain kvm1 started\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh dommemstat kvm1\nactual 2097152\nswap_in 0\nrss 214408\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh console kvm1\nConnected to domain kvm1\nEscape character is ^]\n\nDebian GNU/Linux 8 debian ttyS0\n\ndebian login: root\nPassword:\n...\nroot@debian:~# free -m\n total used  free  shared  buffers cached\nMem:                  2010   93  1917        5       8     40\n-/+ buffers/cache:      43 1966\nSwap:                  382    0  3 82\nroot@debian:~#\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh dumpxml kvm1 | grep memory\n <memory unit='KiB'>2097152</memory>\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vcpuinfo kvm1\nVCPU: 0\nCPU: 29\nState: running\nCPU time: 9.7s\nCPU Affinity: yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vcpucount kvm1\nmaximum config 1\nmaximum live 1\ncurrent config 1\ncurrent live 1\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh edit kvm1\n...\n<vcpu placement='static'>4</vcpu>\n...\nDomain kvm1 XML configuration edited.\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vcpucount kvm1\nmaximum config 4\nmaximum live 4\ncurrent config 4\ncurrent live 4\n\nroot@kvm:~# virsh dumpxml kvm1 | grep -i cpu\n <vcpu placement='static'>4</vcpu>\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh\nWelcome to virsh, the virtualization interactive terminal.\n\nType: 'help' for help with commands\n 'quit' to quit\n\nvirsh #\n\n```", "```\nvirsh # help vcpucount\n NAME\n vcpucount - domain vcpu counts\n\n SYNOPSIS\n vcpucount <domain> [--maximum] [--active] [--live] [--config] [--current] [--guest]\n\n DESCRIPTION\n Returns the number of virtual CPUs used by the domain.\n\n OPTIONS\n [--domain] <string> domain name, id or uuid\n --maximum get maximum count of vcpus\n --active get number of currently active vcpus\n --live get value from running domain\n --config get value to be used on next boot\n --current get value according to current domain state\n --guest retrieve vcpu count from the guest instead of the hypervisor\n\nvirsh #\n\n```", "```\nroot@kvm:~# dd if=/dev/zero of=/tmp/new_disk.img bs=1M count=1024\n1024+0 records in\n1024+0 records out\n1073741824 bytes (1.1 GB) copied, 0.670831 s, 1.6 GB/s\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh attach-disk kvm1 /tmp/new_disk.img vda --live\nDisk attached successfully\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh console kvm1\nConnected to domain kvm1\nEscape character is ^]\n\nDebian GNU/Linux 8 debian ttyS0\n\ndebian login: root\nPassword:\n...\nroot@debian:~#\n\n```", "```\nroot@debian:~# dmesg | grep vda\n[ 3664.134978] sd 2:0:2:0: [vda] 2097152 512-byte logical blocks: (1.07 GB/1.00 GiB)\n[ 3664.135248] sd 2:0:2:0: [vda] Write Protect is off\n[ 3664.135251] sd 2:0:2:0: [vda] Mode Sense: 63 00 00 08\n[ 3664.135340] sd 2:0:2:0: [vda] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA\n[ 3664.138254] vda: unknown partition table\n[ 3664.139008] sd 2:0:2:0: [vda] Attached SCSI disk\nroot@debian:~#\n\n```", "```\nroot@debian:~# fdisk -l /dev/vda\n\nDisk /dev/vda: 1 GiB, 1073741824 bytes, 2097152 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nroot@debian:~#\n\n```", "```\nroot@kvm:~# virsh dumpxml kvm1\n<domain type='kvm' id='23'>\n...\n <devices>\n <emulator>/usr/bin/qemu-system-x86_64</emulator>\n <disk type='file' device='disk'>\n <driver name='qemu' type='raw'/>\n <source file='/tmp/kvm1.img'/>\n <target dev='hda' bus='ide'/>\n <alias name='ide0-0-0'/>\n <address type='drive' controller='0' bus='0' target='0' unit='0'/>\n </disk>\n <disk type='file' device='disk'>\n <driver name='qemu' type='raw'/>\n <source file='/tmp/new_disk.img'/>\n <target dev='vda' bus='scsi'/>\n <alias name='scsi0-0-2'/>\n <address type='drive' controller='0' bus='0' target='0' unit='2'/>\n </disk>\n </devices>\n</domain>\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh domblkstat kvm1 vda\nvda rd_req 119\nvda rd_bytes 487424\nvda wr_req 0\nvda wr_bytes 0\nvda flush_operations 0\nvda rd_total_times 29149092\nvda wr_total_times 0\nvda flush_total_times 0\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh detach-disk kvm1 vda --live\nDisk detached successfully\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# cp /tmp/new_disk.img /tmp/other_disk.img\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# cat other_disk.xml\n<disk type='file' device='disk'>\n <driver name='qemu' type='raw' cache='none'/>\n <source file='/tmp/other_disk.img'/>\n <target dev='vdb'/>\n</disk>\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh attach-device kvm1 --live other_disk.xml\nDevice attached successfully\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh detach-device kvm1 other_disk.xml --live\nDevice detached successfully\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# mkdir /tmp/shared\nroot@kvm:~# touch /tmp/shared/file\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh edit kvm1\n ...\n <devices>\n ...\n <filesystem type='mount' accessmode='passthrough'>\n <source dir='/tmp/shared'/>\n <target dir='tmp_shared'/>\n </filesystem>\n ...\n </devices>\n ...\nDomain kvm1 XML configuration edited.\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh start kvm1\nDomain kvm1 started\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh console kvm1\nConnected to domain kvm1\nEscape character is ^]\n\nDebian GNU/Linux 8 debian ttyS0\n\ndebian login: root\nPassword:\n...\nroot@debian:~#\n\n```", "```\nroot@debian:~# lsmod | grep 9p 9pnet_virtio 17006 0\n9pnet 61632 1 9pnet_virtio\nvirtio_ring 17513 3 virtio_pci,virtio_balloon,9pnet_virtio\nvirtio 13058 3 virtio_pci,virtio_balloon,9pnet_virtio\nroot@debian:~#\n\n```", "```\nroot@debian:~# mount -t 9p -o trans=virtio tmp_shared /mnt\nroot@debian:~#\n\n```", "```\nroot@debian:~# mount | grep tmp_shared\ntmp_shared on /mnt type 9p (rw,relatime,sync,dirsync,trans=virtio)\nroot@debian:~#\n\n```", "```\nroot@debian:~# ls -la /mnt/\ntotal 8\ndrwxr-xr-x 2  root root 4096 Mar 23 11:25 .\ndrwxr-xr-x 22 root root 4096 Mar 22 16:28 ..\n-rw-r--r-- 1  root root 0    Mar 23 11:25 file\nroot@debian:~#\n\n```", "```\nroot@debian:~# modprobe 9p virtio\nroot@debian:~#\n\n```", "```\nroot@kvm:~# pgrep -lfa qemu\n6233 /usr/bin/qemu-system-x86_64 -name kvm1 -S -machine pc-i440fx-trusty,accel=kvm,usb=off -m 2048 -realtime mlock=off -smp 2,sockets=2,cores=1,threads=1 -uuid 6ad84d8a-229d-d1f6-ecfc-d29a25fcfa03 -no-user-config -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/kvm1.monitor,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc -no-shutdown -boot strict=on -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -device lsi,id=scsi0,bus=pci.0,addr=0x5 -drive file=/tmp/kvm1.img,if=none,id=drive-ide0-0-0,format=raw -device ide-hd,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0,bootindex=1 -fsdev local,security_model=passthrough,id=fsdev-fs0,path=/tmp/shared -device virtio-9p-pci,id=fs0,fsdev=fsdev-fs0,mount_tag=tmp_shared,bus=pci.0,addr=0x6 -netdev tap,fd=25,id=hostnet0 -device rtl8139,netdev=hostnet0,id=net0,mac=52:54:00:c5:c8:9d,bus=pci.0,addr=0x3 -chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 -vnc 146.20.141.158:0 -device cirrus-vga,id=video0,bus=pci.0,addr=0x2 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x4\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# qemu-system-x86_64 -name debian -fsdev local,id=tmp,path=/tmp/shared,security_model=passthrough -device virtio-9p-pci,fsdev=tmp,mount_tag=tmp_shared -enable-kvm -usbdevice tablet -vnc 146.20.141.158:0 -m 1024 -drive format=raw,file=/tmp/kvm1.img -daemonize\nroot@kvm:~# \n\n```", "```\nroot@kvm:~# virsh autostart kvm1\nDomain kvm1 marked as autostarted\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh dominfo kvm1\nId: 31\nName: kvm1\nUUID: 6ad84d8a-229d-d1f6-ecfc-d29a25fcfa03\nOS Type: hvm\nState: running\nCPU(s): 2\nCPU time: 10.9s\nMax memory: 2097152 KiB\nUsed memory: 1048576 KiB\nPersistent: yes\nAutostart: enable\nManaged save: no\nSecurity model: none\nSecurity DOI: 0\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh destroy kvm1\nDomain kvm1 destroyed\n\nroot@kvm:~# virsh list --all\n Id  Name  State\n----------------------------------------------------\n -   kvm1  shut off\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# /etc/init.d/libvirt-bin stop\nlibvirt-bin stop/waiting\nroot@kvm:~# pgrep -lfa libvirtd\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# /etc/init.d/libvirt-bin start\nlibvirt-bin start/running, process 6639\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh list --all\n Id Name State\n----------------------------------------------------\n 2  kvm1 running\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh autostart kvm1 --disable\nDomain kvm1 unmarked as autostarted\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh dominfo kvm1 | grep -i autostart\nAutostart: disable\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# cp /tmp/kvm1.img /var/lib/libvirt/images/\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# cat file_storage_pool.xml\n<pool type=\"dir\">\n <name>file_virtimages</name>\n <target>\n <path>/var/lib/libvirt/images</path>\n </target>\n</pool>\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh pool-define file_storage_pool.xml\nPool file_virtimages defined from file_storage_pool.xml\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh pool-list --all\n Name            State    Autostart\n-------------------------------------------\n file_virtimages inactive no\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh pool-start file_virtimages\nPool file_virtimages started\n\nroot@kvm:~# virsh pool-list --all\n Name            State  Autostart\n-------------------------------------------\n file_virtimages active no\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh pool-autostart file_virtimages\nPool file_virtimages marked as autostarted\n\nroot@kvm:~# virsh pool-list --all\n Name            State  Autostart\n-------------------------------------------\n file_virtimages active yes\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh pool-info file_virtimages\nName: file_virtimages\nUUID: d51d500b-8885-4c26-8000-2ae46ffe9018\nState: running\nPersistent: yes\nAutostart: yes\nCapacity: 219.87 GiB\nAllocation: 7.99 GiB\nAvailable: 211.88 GiB\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vol-list file_virtimages\n Name     Path\n----------------------------------------------------\n kvm1.img /var/lib/libvirt/images/kvm1.img\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vol-info /var/lib/libvirt/images/kvm1.img\nName: kvm1.img\nType: file\nCapacity: 8.00 GiB\nAllocation: 1.87 GiB\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virt-install --name kvm1 --ram 1024 --graphics vnc,listen=146.20.141.158 --hvm --disk vol=file_virtimages/kvm1.img --import\n\nStarting install...\nCreating domain... | 0 B 00:00\nDomain creation completed. You can restart your domain by running:\n virsh --connect qemu:///system start kvm1\nroot@kvm:~#\n\nroot@kvm:~# virsh list --all\n Id Name State\n----------------------------------------------------\n 3  kvm1 running\n\nroot@kvm:~#\n\n```", "```\n<pool type='iscsi'>\n <name>iscsi_virtimages</name>\n <source>\n <host name='iscsi-target.linux-admins.net'/>\n <device path='iqn.2004-04.ubuntu:ubuntu16:iscsi.libvirtkvm'/>\n </source>\n <target>\n <path>/dev/disk/by-path</path>\n </target>\n</pool>\n\n```", "```\nroot@kvm:~# virsh vol-list iscsi_virtimages\nName Path\n-----------------------------------------\n10.0.0.1 /dev/disk/by-path/ip-10.184.226.106:3260-iscsi-iqn.2004-04.ubuntu:ubuntu16:iscsi.libvirtkvm-lun-1\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virt-install --name kvm1 --ram 1024 --extra-args=\"text console=tty0 utf8 console=ttyS0,115200\" --graphics vnc,listen=146.20.141.158 --hvm --location=http://ftp.us.debian.org/debian/dists/stable/main/installer-amd64/ --disk vol=iscsi_virtimages/10.0.0.1\nStarting install...\n...\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh pool-list --all\n Name            State  Autostart\n-------------------------------------------\n file_virtimages active yes\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vol-list file_virtimages\n Name     Path\n--------------------------------------------------------------------\n kvm1.img /var/lib/libvirt/images/kvm1.img\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vol-create-as file_virtimages new_volume.img 9G\nVol new_volume.img created\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# ls -lah /var/lib/libvirt/images/\ntotal 11G\ndrwx--x--x 2 root root 4.0K Mar 23 20:38 .\ndrwxr-xr-x 8 root root 4.0K Mar 21 23:16 ..\n-rwxr-xr-x 1 libvirt-qemu kvm 8.0G Mar 23 20:23 kvm1.img\n-rw------- 1 root root 9.0G Mar 23 20:38 new_volume.img\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# qemu-img info /var/lib/libvirt/images/new_volume.img\nimage: /var/lib/libvirt/images/new_volume.img\nfile format: raw\nvirtual size: 9.0G (9663676416 bytes)\ndisk size: 9.0G\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vol-info new_volume.img --pool file_virtimages\nName: new_volume.img\nType: file\nCapacity: 9.00 GiB\nAllocation: 9.00 GiB\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vol-dumpxml new_volume.img --pool file_virtimages\n<volume type='file'>\n <name>new_volume.img</name>\n <key>/var/lib/libvirt/images/new_volume.img</key>\n <source>\n </source>\n <capacity unit='bytes'>9663676416</capacity>\n <allocation unit='bytes'>9663680512</allocation>\n <target>\n <path>/var/lib/libvirt/images/new_volume.img</path>\n <format type='raw'/>\n <permissions>\n <mode>0600</mode>\n <owner>0</owner>\n <group>0</group>\n </permissions>\n <timestamps>\n <atime>1490301514.446004048</atime>\n <mtime>1490301483.698003615</mtime>\n <ctime>1490301483.702003615</ctime>\n </timestamps>\n </target>\n</volume>\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vol-resize new_volume.img 10G --pool file_virtimages\nSize of volume 'new_volume.img' successfully changed to 10G\n\nroot@kvm:~# virsh vol-info new_volume.img --pool file_virtimages\nName: new_volume.img\nType: file\nCapacity: 10.00 GiB\nAllocation: 9.00 GiB\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vol-delete new_volume.img --pool file_virtimages\nVol new_volume.img deleted\n\nroot@kvm:~# virsh vol-list file_virtimages\n Name     Path\n------------------------------------------------------------------\n kvm1.img /var/lib/libvirt/images/kvm1.img\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh vol-clone kvm1.img kvm2.img --pool file_virtimages\nVol kvm2.img cloned from kvm1.img\n\nroot@kvm:~# virsh vol-list file_virtimages\n Name     Path\n--------------------------------------------------------------------\n kvm1.img /var/lib/libvirt/images/kvm1.img\n kvm2.img /var/lib/libvirt/images/kvm2.img\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh secret-list\n UUID Usage\n-------------------------------------------------------------------\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# cat volume_secret.xml\n<secret ephemeral='no'>\n <description>Passphrase for the iSCSI iscsi-target.linux-admins.net target server</description>\n <usage type='iscsi'>\n <target>iscsi_secret</target>\n </usage>\n</secret>\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh secret-define volume_secret.xml\nSecret 7ad1c208-c2c5-4723-8dc5-e2f4f576101a created\n\nroot@kvm:~# virsh secret-list\n UUID                                 Usage\n-----------------------------------------------------------------\n 7ad1c208-c2c5-4723-8dc5-e2f4f576101a iscsi iscsi_secret\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# virsh secret-set-value 7ad1c208-c2c5-4723-8dc5-e2f4f576101a $(echo \"some_password\" | base64)\nSecret value set\n\nroot@kvm:~#\n\n```", "```\nroot@kvm:~# cat iscsi.xml\n<pool type='iscsi'>\n <name>iscsi_virtimages</name>\n <source>\n <host name='iscsi-target.linux-admins.net'/>\n <device path='iqn.2004-04.ubuntu:ubuntu16:iscsi.libvirtkvm'/>\n <auth type='chap' username='iscsi_user'>\n <secret usage='iscsi_secret'/>\n </auth>\n </source>\n <target>\n <path>/dev/disk/by-path</path>\n </target>\n</pool>\nroot@kvm:~#\n\n```"]